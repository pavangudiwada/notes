(function(){
shadow$provide[614]=function(qa,T,Qa,G){function p(q,B,A){var a,H={},t=null,k=null;void 0!==A&&(t=""+A);void 0!==B.key&&(t=""+B.key);void 0!==B.ref&&(k=B.ref);for(a in B)r.call(B,a)&&!c.hasOwnProperty(a)&&(H[a]=B[a]);if(q&&q.defaultProps)for(a in B=q.defaultProps,B)void 0===H[a]&&(H[a]=B[a]);return{$$typeof:S,type:q,key:t,ref:k,props:H,_owner:y.current}}T(17);qa=T(20);var S=60103;G.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(T=Symbol.for,S=T("react.element"),G.Fragment=T("react.fragment"));
var y=qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};G.jsx=p;G.jsxs=p};
shadow$provide[616]=function(qa,T,Qa,G){Qa.exports=T(614)};
shadow$provide[617]=function(qa,T,Qa,G){function p(qc){for(var Cd="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+qc,xd=1;xd<arguments.length;xd++)Cd+="\x26args[]\x3d"+encodeURIComponent(arguments[xd]);return"Minified React error #"+qc+"; visit "+Cd+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(qc){if(null==qc)return null;if("function"===typeof qc)return qc.displayName||qc.name||null;if("string"===typeof qc)return qc;
switch(qc){case L:return"Fragment";case V:return"Portal";case D:return"Profiler";case P:return"StrictMode";case aa:return"Suspense";case J:return"SuspenseList"}if("object"===typeof qc)switch(qc.$$typeof){case Q:return(qc.displayName||"Context")+".Consumer";case O:return(qc._context.displayName||"Context")+".Provider";case ba:var Cd=qc.render;Cd=Cd.displayName||Cd.name||"";return qc.displayName||(""!==Cd?"ForwardRef("+Cd+")":"ForwardRef");case ha:return S(qc.type);case da:return S(qc._render);case N:Cd=
qc._payload;qc=qc._init;try{return S(qc(Cd))}catch(xd){}}return null}function y(qc,Cd){for(var xd=qc._threadCount|0;xd<=Cd;xd++)qc[xd]=qc._currentValue2,qc._threadCount=xd+1}function r(qc,Cd,xd,$d){if($d&&($d=qc.contextType,"object"===typeof $d&&null!==$d))return y($d,xd),$d[xd];if(qc=qc.contextTypes){xd={};for(var ud in qc)xd[ud]=Cd[ud];Cd=xd}else Cd=ya;return Cd}function c(qc){if(Ea.call(Ya,qc))return!0;if(Ea.call(Oa,qc))return!1;if(Ta.test(qc))return Ya[qc]=!0;Oa[qc]=!0;return!1}function q(qc,
Cd,xd,$d){if(null!==xd&&0===xd.type)return!1;switch(typeof Cd){case "function":case "symbol":return!0;case "boolean":if($d)return!1;if(null!==xd)return!xd.acceptsBooleans;qc=qc.toLowerCase().slice(0,5);return"data-"!==qc&&"aria-"!==qc;default:return!1}}function B(qc,Cd,xd,$d){if(null===Cd||"undefined"===typeof Cd||q(qc,Cd,xd,$d))return!0;if($d)return!1;if(null!==xd)switch(xd.type){case 3:return!Cd;case 4:return!1===Cd;case 5:return isNaN(Cd);case 6:return isNaN(Cd)||1>Cd}return!1}function A(qc,Cd,
xd,$d,ud,Kd,nd){this.acceptsBooleans=2===Cd||3===Cd||4===Cd;this.attributeName=$d;this.attributeNamespace=ud;this.mustUseProperty=xd;this.propertyName=qc;this.type=Cd;this.sanitizeURL=Kd;this.removeEmptyString=nd}function a(qc){return qc[1].toUpperCase()}function H(qc){if("boolean"===typeof qc||"number"===typeof qc)return""+qc;qc=""+qc;var Cd=eb.exec(qc);if(Cd){var xd="",$d,ud=0;for($d=Cd.index;$d<qc.length;$d++){switch(qc.charCodeAt($d)){case 34:Cd="\x26quot;";break;case 38:Cd="\x26amp;";break;case 39:Cd=
"\x26#x27;";break;case 60:Cd="\x26lt;";break;case 62:Cd="\x26gt;";break;default:continue}ud!==$d&&(xd+=qc.substring(ud,$d));ud=$d+1;xd+=Cd}qc=ud!==$d?xd+qc.substring(ud,$d):xd}return qc}function t(qc,Cd){var xd=Ma.hasOwnProperty(qc)?Ma[qc]:null,$d;if($d="style"!==qc)$d=null!==xd?0===xd.type:!(2<qc.length)||"o"!==qc[0]&&"O"!==qc[0]||"n"!==qc[1]&&"N"!==qc[1]?!1:!0;if($d||B(qc,Cd,xd,!1))return"";if(null!==xd){qc=xd.attributeName;$d=xd.type;if(3===$d||4===$d&&!0===Cd)return qc+'\x3d""';xd.sanitizeURL&&
(Cd=""+Cd);return qc+'\x3d"'+(H(Cd)+'"')}return c(qc)?qc+'\x3d"'+(H(Cd)+'"'):""}function k(qc,Cd){return qc===Cd&&(0!==qc||1/qc===1/Cd)||qc!==qc&&Cd!==Cd}function h(){if(null===oa)throw Error(p(321));return oa}function f(){if(0<Ab)throw Error(p(312));return{memoizedState:null,queue:null,next:null}}function u(){null===sa?null===Ca?(Aa=!1,Ca=sa=f()):(Aa=!0,sa=Ca):null===sa.next?(Aa=!1,sa=sa.next=f()):(Aa=!0,sa=sa.next);return sa}function x(qc,Cd,xd,$d){for(;Ja;)Ja=!1,Ab+=1,sa=null,xd=qc(Cd,$d);I();
return xd}function I(){oa=null;Ja=!1;Ca=null;Ab=0;sa=Sa=null}function z(qc,Cd){return"function"===typeof Cd?Cd(qc):Cd}function w(qc,Cd,xd){oa=h();sa=u();if(Aa){var $d=sa.queue;Cd=$d.dispatch;if(null!==Sa&&(xd=Sa.get($d),void 0!==xd)){Sa.delete($d);$d=sa.memoizedState;do $d=qc($d,xd.action),xd=xd.next;while(null!==xd);sa.memoizedState=$d;return[$d,Cd]}return[sa.memoizedState,Cd]}qc=qc===z?"function"===typeof Cd?Cd():Cd:void 0!==xd?xd(Cd):Cd;sa.memoizedState=qc;qc=sa.queue={last:null,dispatch:null};
qc=qc.dispatch=n.bind(null,oa,qc);return[sa.memoizedState,qc]}function v(qc,Cd){oa=h();sa=u();Cd=void 0===Cd?null:Cd;if(null!==sa){var xd=sa.memoizedState;if(null!==xd&&null!==Cd){var $d=xd[1];a:if(null===$d)$d=!1;else{for(var ud=0;ud<$d.length&&ud<Cd.length;ud++)if(!Na(Cd[ud],$d[ud])){$d=!1;break a}$d=!0}if($d)return xd[0]}}qc=qc();sa.memoizedState=[qc,Cd];return qc}function n(qc,Cd,xd){if(!(25>Ab))throw Error(p(301));if(qc===oa)if(Ja=!0,qc={action:xd,next:null},null===Sa&&(Sa=new Map),xd=Sa.get(Cd),
void 0===xd)Sa.set(Cd,qc);else{for(Cd=xd;null!==Cd.next;)Cd=Cd.next;Cd.next=qc}}function U(){}function ja(qc){switch(qc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function M(qc){if(void 0===qc||null===qc)return qc;var Cd="";E.Children.forEach(qc,function(xd){null!=xd&&(Cd+=xd)});return Cd}function ma(qc,Cd){if(void 0===qc)throw Error(p(152,S(Cd)||"Component"));}function X(qc,Cd,xd){function $d(nd,
Yd){var Nb=Yd.prototype&&Yd.prototype.isReactComponent,fc=r(Yd,Cd,xd,Nb),Wb=[],ob=!1,kb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Wb)return null},enqueueReplaceState:function(ue,sd){ob=!0;Wb=[sd]},enqueueSetState:function(ue,sd){if(null===Wb)return null;Wb.push(sd)}};if(Nb){if(Nb=new Yd(nd.props,fc,kb),"function"===typeof Yd.getDerivedStateFromProps){var ac=Yd.getDerivedStateFromProps.call(null,nd.props,Nb.state);null!=ac&&(Nb.state=ca({},Nb.state,ac))}}else if(oa={},
Nb=Yd(nd.props,fc,kb),Nb=x(Yd,nd.props,Nb,fc),null==Nb||null==Nb.render){qc=Nb;ma(qc,Yd);return}Nb.props=nd.props;Nb.context=fc;Nb.updater=kb;kb=Nb.state;void 0===kb&&(Nb.state=kb=null);if("function"===typeof Nb.UNSAFE_componentWillMount||"function"===typeof Nb.componentWillMount)if("function"===typeof Nb.componentWillMount&&"function"!==typeof Yd.getDerivedStateFromProps&&Nb.componentWillMount(),"function"===typeof Nb.UNSAFE_componentWillMount&&"function"!==typeof Yd.getDerivedStateFromProps&&Nb.UNSAFE_componentWillMount(),
Wb.length){kb=Wb;var tc=ob;Wb=null;ob=!1;if(tc&&1===kb.length)Nb.state=kb[0];else{ac=tc?kb[0]:Nb.state;var Sc=!0;for(tc=tc?1:0;tc<kb.length;tc++){var ad=kb[tc];ad="function"===typeof ad?ad.call(Nb,ac,nd.props,fc):ad;null!=ad&&(Sc?(Sc=!1,ac=ca({},ac,ad)):ca(ac,ad))}Nb.state=ac}}else Wb=null;qc=Nb.render();ma(qc,Yd);if("function"===typeof Nb.getChildContext&&(nd=Yd.childContextTypes,"object"===typeof nd)){var Sd=Nb.getChildContext(),de;for(de in Sd)if(!(de in nd))throw Error(p(108,S(Yd)||"Unknown",
de));}Sd&&(Cd=ca({},Cd,Sd))}for(;E.isValidElement(qc);){var ud=qc,Kd=ud.type;if("function"!==typeof Kd)break;$d(ud,Kd)}return{child:qc,context:Cd}}var ca=T(17),E=T(20),V=60106,L=60107,P=60108,D=60114,O=60109,Q=60110,ba=60112,aa=60113,J=60120,ha=60115,N=60116,da=60121,fa=60117,ea=60119,pa=60129,za=60131;"function"===typeof Symbol&&Symbol.for&&(qa=Symbol.for,V=qa("react.portal"),L=qa("react.fragment"),P=qa("react.strict_mode"),D=qa("react.profiler"),O=qa("react.provider"),Q=qa("react.context"),ba=qa("react.forward_ref"),
aa=qa("react.suspense"),J=qa("react.suspense_list"),ha=qa("react.memo"),N=qa("react.lazy"),da=qa("react.block"),fa=qa("react.fundamental"),ea=qa("react.scope"),pa=qa("react.debug_trace_mode"),za=qa("react.legacy_hidden"));qa=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var ya={},Ga=new Uint16Array(16);for(T=0;15>T;T++)Ga[T]=T+1;Ga[15]=0;var Ta=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ea=Object.prototype.hasOwnProperty,Oa={},Ya={},Ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(qc){Ma[qc]=new A(qc,0,!1,qc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(qc){var Cd=qc[0];Ma[Cd]=new A(Cd,1,!1,qc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(qc){Ma[qc]=
new A(qc,2,!1,qc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(qc){Ma[qc]=new A(qc,2,!1,qc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(qc){Ma[qc]=new A(qc,3,!1,qc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(qc){Ma[qc]=new A(qc,3,!0,qc,null,!1,!1)});["capture","download"].forEach(function(qc){Ma[qc]=new A(qc,4,!1,qc,null,!1,!1)});["cols","rows","size","span"].forEach(function(qc){Ma[qc]=new A(qc,6,!1,qc,null,!1,!1)});["rowSpan","start"].forEach(function(qc){Ma[qc]=new A(qc,5,!1,qc.toLowerCase(),null,!1,!1)});var fb=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(qc){var Cd=
qc.replace(fb,a);Ma[Cd]=new A(Cd,1,!1,qc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(qc){var Cd=qc.replace(fb,a);Ma[Cd]=new A(Cd,1,!1,qc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(qc){var Cd=qc.replace(fb,a);Ma[Cd]=new A(Cd,1,!1,qc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(qc){Ma[qc]=new A(qc,1,!1,qc.toLowerCase(),null,!1,!1)});
Ma.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(qc){Ma[qc]=new A(qc,1,!1,qc.toLowerCase(),null,!0,!0)});var eb=/["'&<>]/,Na="function"===typeof Object.is?Object.is:k,oa=null,Ca=null,sa=null,Aa=!1,Ja=!1,Sa=null,Ab=0,hb=null,Lb={readContext:function(qc){var Cd=hb.threadID;y(qc,Cd);return qc[Cd]},useContext:function(qc){h();var Cd=hb.threadID;y(qc,Cd);return qc[Cd]},useMemo:v,useReducer:w,useRef:function(qc){oa=
h();sa=u();var Cd=sa.memoizedState;return null===Cd?(qc={current:qc},sa.memoizedState=qc):Cd},useState:function(qc){return w(z,qc)},useLayoutEffect:function(){},useCallback:function(qc,Cd){return v(function(){return qc},Cd)},useImperativeHandle:U,useEffect:U,useDebugValue:U,useDeferredValue:function(qc){h();return qc},useTransition:function(){h();return[function(qc){qc()},!1]},useOpaqueIdentifier:function(){return(hb.identifierPrefix||"")+"R:"+(hb.uniqueID++).toString(36)},useMutableSource:function(qc,
Cd){h();return Cd(qc._source)}},Vb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},gc=ca({menuitem:!0},Vb),Pa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lb=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(qc){lb.forEach(function(Cd){Cd=Cd+qc.charAt(0).toUpperCase()+qc.substring(1);Pa[Cd]=Pa[qc]})});var nb=/([A-Z])/g,Xb=/^ms-/,Ic=E.Children.toArray,
Zc=qa.ReactCurrentDispatcher,Oc={listing:!0,pre:!0,textarea:!0},Cb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,wc={},Tc={},jd=Object.prototype.hasOwnProperty,Nd={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Hd=function(){function qc(xd,$d,ud){E.isValidElement(xd)?xd.type!==L?xd=[xd]:(xd=xd.props.children,xd=E.isValidElement(xd)?[xd]:Ic(xd)):xd=Ic(xd);xd={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:xd,childIndex:0,context:ya,footer:""};
var Kd=Ga[0];if(0===Kd){var nd=Ga;Kd=nd.length;var Yd=2*Kd;if(!(65536>=Yd))throw Error(p(304));var Nb=new Uint16Array(Yd);Nb.set(nd);Ga=Nb;Ga[0]=Kd+1;for(nd=Kd;nd<Yd-1;nd++)Ga[nd]=nd+1;Ga[Yd-1]=0}else Ga[0]=Ga[Kd];this.threadID=Kd;this.stack=[xd];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=$d;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=ud&&ud.identifierPrefix||""}
var Cd=qc.prototype;Cd.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var xd=this.threadID;Ga[xd]=Ga[0];Ga[0]=xd}};Cd.pushProvider=function(xd){var $d=++this.contextIndex,ud=xd.type._context,Kd=this.threadID;y(ud,Kd);var nd=ud[Kd];this.contextStack[$d]=ud;this.contextValueStack[$d]=nd;ud[Kd]=xd.props.value};Cd.popProvider=function(){var xd=this.contextIndex,$d=this.contextStack[xd],ud=this.contextValueStack[xd];this.contextStack[xd]=null;this.contextValueStack[xd]=
null;this.contextIndex--;$d[this.threadID]=ud};Cd.clearProviders=function(){for(var xd=this.contextIndex;0<=xd;xd--)this.contextStack[xd][this.threadID]=this.contextValueStack[xd]};Cd.read=function(xd){if(this.exhausted)return null;var $d=hb;hb=this;var ud=Zc.current;Zc.current=Lb;try{for(var Kd=[""],nd=!1;Kd[0].length<xd;){if(0===this.stack.length){this.exhausted=!0;var Yd=this.threadID;Ga[Yd]=Ga[0];Ga[0]=Yd;break}var Nb=this.stack[this.stack.length-1];if(nd||Nb.childIndex>=Nb.children.length){var fc=
Nb.footer;""!==fc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Nb.type)this.currentSelectValue=null;else if(null!=Nb.type&&null!=Nb.type.type&&Nb.type.type.$$typeof===O)this.popProvider(Nb.type);else if(Nb.type===aa){this.suspenseDepth--;var Wb=Kd.pop();if(nd){nd=!1;var ob=Nb.fallbackFrame;if(!ob)throw Error(p(303));this.stack.push(ob);Kd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Kd[this.suspenseDepth]+=Wb}Kd[this.suspenseDepth]+=fc}else{var kb=Nb.children[Nb.childIndex++],
ac="";try{ac+=this.render(kb,Nb.context,Nb.domNamespace)}catch(tc){if(null!=tc&&"function"===typeof tc.then)throw Error(p(294));throw tc;}finally{}Kd.length<=this.suspenseDepth&&Kd.push("");Kd[this.suspenseDepth]+=ac}}return Kd[0]}finally{Zc.current=ud,hb=$d,I()}};Cd.render=function(xd,$d,ud){if("string"===typeof xd||"number"===typeof xd){ud=""+xd;if(""===ud)return"";if(this.makeStaticMarkup)return H(ud);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+H(ud);this.previousWasTextNode=!0;return H(ud)}$d=
X(xd,$d,this.threadID);xd=$d.child;$d=$d.context;if(null===xd||!1===xd)return"";if(!E.isValidElement(xd)){if(null!=xd&&null!=xd.$$typeof){ud=xd.$$typeof;if(ud===V)throw Error(p(257));throw Error(p(258,ud.toString()));}xd=Ic(xd);this.stack.push({type:null,domNamespace:ud,children:xd,childIndex:0,context:$d,footer:""});return""}var Kd=xd.type;if("string"===typeof Kd)return this.renderDOM(xd,$d,ud);switch(Kd){case za:case pa:case P:case D:case J:case L:return xd=Ic(xd.props.children),this.stack.push({type:null,
domNamespace:ud,children:xd,childIndex:0,context:$d,footer:""}),"";case aa:throw Error(p(294));case ea:throw Error(p(343));}if("object"===typeof Kd&&null!==Kd)switch(Kd.$$typeof){case ba:oa={};var nd=Kd.render(xd.props,xd.ref);nd=x(Kd.render,xd.props,nd,xd.ref);nd=Ic(nd);this.stack.push({type:null,domNamespace:ud,children:nd,childIndex:0,context:$d,footer:""});return"";case ha:return xd=[E.createElement(Kd.type,ca({ref:xd.ref},xd.props))],this.stack.push({type:null,domNamespace:ud,children:xd,childIndex:0,
context:$d,footer:""}),"";case O:return Kd=Ic(xd.props.children),ud={type:xd,domNamespace:ud,children:Kd,childIndex:0,context:$d,footer:""},this.pushProvider(xd),this.stack.push(ud),"";case Q:Kd=xd.type;nd=xd.props;var Yd=this.threadID;y(Kd,Yd);Kd=Ic(nd.children(Kd[Yd]));this.stack.push({type:xd,domNamespace:ud,children:Kd,childIndex:0,context:$d,footer:""});return"";case fa:throw Error(p(338));case N:return Kd=xd.type,nd=Kd._init,Kd=nd(Kd._payload),xd=[E.createElement(Kd,ca({ref:xd.ref},xd.props))],
this.stack.push({type:null,domNamespace:ud,children:xd,childIndex:0,context:$d,footer:""}),""}throw Error(p(130,null==Kd?Kd:typeof Kd,""));};Cd.renderDOM=function(xd,$d,ud){var Kd=xd.type.toLowerCase();"http://www.w3.org/1999/xhtml"===ud&&ja(Kd);if(!wc.hasOwnProperty(Kd)){if(!Cb.test(Kd))throw Error(p(65,Kd));wc[Kd]=!0}var nd=xd.props;if("input"===Kd)nd=ca({type:void 0},nd,{defaultChecked:void 0,defaultValue:void 0,value:null!=nd.value?nd.value:nd.defaultValue,checked:null!=nd.checked?nd.checked:
nd.defaultChecked});else if("textarea"===Kd){var Yd=nd.value;if(null==Yd){Yd=nd.defaultValue;var Nb=nd.children;if(null!=Nb){if(null!=Yd)throw Error(p(92));if(Array.isArray(Nb)){if(!(1>=Nb.length))throw Error(p(93));Nb=Nb[0]}Yd=""+Nb}null==Yd&&(Yd="")}nd=ca({},nd,{value:void 0,children:""+Yd})}else if("select"===Kd)this.currentSelectValue=null!=nd.value?nd.value:nd.defaultValue,nd=ca({},nd,{value:void 0});else if("option"===Kd){Nb=this.currentSelectValue;var fc=M(nd.children);if(null!=Nb){var Wb=
null!=nd.value?nd.value+"":fc;Yd=!1;if(Array.isArray(Nb))for(var ob=0;ob<Nb.length;ob++){if(""+Nb[ob]===Wb){Yd=!0;break}}else Yd=""+Nb===Wb;nd=ca({selected:void 0,children:void 0},nd,{selected:Yd,children:fc})}}if(Yd=nd){if(gc[Kd]&&(null!=Yd.children||null!=Yd.dangerouslySetInnerHTML))throw Error(p(137,Kd));if(null!=Yd.dangerouslySetInnerHTML){if(null!=Yd.children)throw Error(p(60));if(!("object"===typeof Yd.dangerouslySetInnerHTML&&"__html"in Yd.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=
Yd.style&&"object"!==typeof Yd.style)throw Error(p(62));}Yd=nd;Nb=this.makeStaticMarkup;fc=1===this.stack.length;Wb="\x3c"+xd.type;a:if(-1===Kd.indexOf("-"))ob="string"===typeof Yd.is;else switch(Kd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":ob=!1;break a;default:ob=!0}for(sd in Yd)if(jd.call(Yd,sd)){var kb=Yd[sd];if(null!=kb){if("style"===sd){var ac=void 0,tc="",Sc="";for(ac in kb)if(kb.hasOwnProperty(ac)){var ad=
0===ac.indexOf("--"),Sd=kb[ac];if(null!=Sd){if(ad)var de=ac;else if(de=ac,Tc.hasOwnProperty(de))de=Tc[de];else{var ue=de.replace(nb,"-$1").toLowerCase().replace(Xb,"-ms-");de=Tc[de]=ue}tc+=Sc+de+":";Sc=ac;ad=null==Sd||"boolean"===typeof Sd||""===Sd?"":ad||"number"!==typeof Sd||0===Sd||Pa.hasOwnProperty(Sc)&&Pa[Sc]?(""+Sd).trim():Sd+"px";tc+=ad;Sc=";"}}kb=tc||null}ac=null;ob?Nd.hasOwnProperty(sd)||(ac=sd,ac=c(ac)&&null!=kb?ac+'\x3d"'+(H(kb)+'"'):""):ac=t(sd,kb);ac&&(Wb+=" "+ac)}}Nb||fc&&(Wb+=' data-reactroot\x3d""');
var sd=Wb;Yd="";Vb.hasOwnProperty(Kd)?sd+="/\x3e":(sd+="\x3e",Yd="\x3c/"+xd.type+"\x3e");a:{Nb=nd.dangerouslySetInnerHTML;if(null!=Nb){if(null!=Nb.__html){Nb=Nb.__html;break a}}else if(Nb=nd.children,"string"===typeof Nb||"number"===typeof Nb){Nb=H(Nb);break a}Nb=null}null!=Nb?(nd=[],Oc.hasOwnProperty(Kd)&&"\n"===Nb.charAt(0)&&(sd+="\n"),sd+=Nb):nd=Ic(nd.children);xd=xd.type;ud=null==ud||"http://www.w3.org/1999/xhtml"===ud?ja(xd):"http://www.w3.org/2000/svg"===ud&&"foreignObject"===xd?"http://www.w3.org/1999/xhtml":
ud;this.stack.push({domNamespace:ud,type:Kd,children:nd,childIndex:0,context:$d,footer:Yd});this.previousWasTextNode=!1;return sd};return qc}();G.renderToNodeStream=function(){throw Error(p(207));};G.renderToStaticMarkup=function(qc,Cd){qc=new Hd(qc,!0,Cd);try{return qc.read(Infinity)}finally{qc.destroy()}};G.renderToStaticNodeStream=function(){throw Error(p(208));};G.renderToString=function(qc,Cd){qc=new Hd(qc,!1,Cd);try{return qc.read(Infinity)}finally{qc.destroy()}};G.version="17.0.2"};
shadow$provide[619]=function(qa,T,Qa,G){Qa.exports=T(617)};
shadow$provide[620]=function(qa,T,Qa,G){function p(){if(!ye&&(ye="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!ye))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ye(bf)}function S(b){let g=0;var m=0;for(var K of b)g+=K.w*K.h,m=Math.max(m,K.w);b.sort((ua,Ia)=>
Ia.h-ua.h);m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(g/.95)),m),h:Infinity}];let Z=K=0;for(const ua of b)for(b=m.length-1;0<=b;b--){var ia=m[b];if(!(ua.w>ia.w||ua.h>ia.h)){ua.x=ia.x;ua.y=ia.y;Z=Math.max(Z,ua.y+ua.h);K=Math.max(K,ua.x+ua.w);ua.w===ia.w&&ua.h===ia.h?(ia=m.pop(),b<m.length&&(m[b]=ia)):ua.h===ia.h?(ia.x+=ua.w,ia.w-=ua.w):(ua.w!==ia.w&&m.push({x:ia.x+ua.w,y:ia.y,w:ia.w-ua.w,h:ua.h}),ia.y+=ua.h,ia.h-=ua.h);break}}return{w:K,h:Z,fill:g/(K*Z)||0}}function y(b,...g){return{didIntersect:0<
g.length,message:b,points:g}}function r(b,g,m=0){const K=[b[0]+g[0]/2,b[1]+g[1]/2],Z=Ed.rotWith(b,K,m),ia=Ed.rotWith(Ed.add(b,[g[0],0]),K,m),ua=Ed.rotWith(Ed.add(b,g),K,m);b=Ed.rotWith(Ed.add(b,[0,g[1]]),K,m);return[["top",[Z,ia]],["right",[ia,ua]],["bottom",[ua,b]],["left",[b,Z]]]}function c(b,g,m,K){const [Z,ia]=b,[ua,Ia]=g,[Xa,bb]=m,[pb,sb]=K;return Ia/ua!==(sb-bb)/(pb-Xa)&&(g=ua*(sb-bb)-Ia*(pb-Xa),0!==g&&(b=((ia-bb)*(pb-Xa)-(Z-Xa)*(sb-bb))/g,g=((ia-bb)*ua-(Z-Xa)*Ia)/g,0<=b&&0<=g&&1>=g))?y("intersection",
[Z+b*ua,ia+b*Ia]):y("no intersection")}function q(b,g,m,K,Z=0){return k(m,K,Z,b,g)}function B(b,g,m,K=0){const {minX:Z,minY:ia,width:ua,height:Ia}=m;return q(b,g,[Z,ia],[ua,Ia],K)}function A(b,g,m,K){var Z=Ed.sub(b,m);m=Ed.sub(K,m);g=Ed.sub(g,b);K=m[0]*Z[1]-m[1]*Z[0];Z=g[0]*Z[1]-g[1]*Z[0];m=m[1]*g[0]-m[0]*g[1];return 0===K||0===Z?y("coincident"):0===m?y("parallel"):0!==m&&(K/=m,Z/=m,0<=K&&1>=K&&0<=Z&&1>=Z)?y("intersection",Ed.add(b,Ed.mul(g,K))):y("no intersection")}function a(b,g,m,K){var Z=(g[0]-
b[0])*(g[0]-b[0])+(g[1]-b[1])*(g[1]-b[1]),ia=2*((g[0]-b[0])*(b[0]-m[0])+(g[1]-b[1])*(b[1]-m[1]));m=ia*ia-4*Z*(m[0]*m[0]+m[1]*m[1]+b[0]*b[0]+b[1]*b[1]-2*(m[0]*b[0]+m[1]*b[1])-K*K);if(0>m)return y("outside");if(0===m)return y("tangent");K=Math.sqrt(m);m=(-ia+K)/(2*Z);Z=(-ia-K)/(2*Z);if((0>m||1<m)&&(0>Z||1<Z))return 0>m&&0>Z||1<m&&1<Z?y("outside"):y("inside");ia=[];0<=m&&1>=m&&ia.push(Ed.lrp(b,g,m));0<=Z&&1>=Z&&ia.push(Ed.lrp(b,g,Z));return y("intersection",...ia)}function H(b,g,m,K,Z,ia=0){if(0===K||
0===Z||Ed.isEqual(b,g))return y("no intersection");K=0>K?K:-K;Z=0>Z?Z:-Z;b=Ed.sub(Ed.rotWith(b,m,-ia),m);g=Ed.sub(Ed.rotWith(g,m,-ia),m);var ua=Ed.sub(g,b),Ia=ua[0]*ua[0]/K/K+ua[1]*ua[1]/Z/Z;ua=2*b[0]*ua[0]/K/K+2*b[1]*ua[1]/Z/Z;const Xa=[];K=ua*ua-4*Ia*(b[0]*b[0]/K/K+b[1]*b[1]/Z/Z-1);0===K?Xa.push(-ua/2/Ia):0<K&&(K=Math.sqrt(K),Xa.push((-ua+K)/2/Ia),Xa.push((-ua-K)/2/Ia));Ia=Xa.filter(bb=>0<=bb&&1>=bb).map(bb=>Ed.add(m,Ed.add(b,Ed.mul(Ed.sub(g,b),bb)))).map(bb=>Ed.rotWith(bb,m,ia));return y("intersection",
...Ia)}function t(b,g,m){const K=[];for(let Z=1;Z<m.length;Z++){const ia=A(b,g,m[Z-1],m[Z]);ia&&K.push(...ia.points)}return 0===K.length?y("no intersection"):y("intersection",...m)}function k(b,g,m,K,Z){return r(b,g,m).reduce((ia,[ua,[Ia,Xa]])=>{(Ia=c(K,Z,Ia,Xa))&&ia.push(y(ua,...Ia.points));return ia},[]).filter(ia=>ia.didIntersect)}function h(b,g,m,K){return r(b,g).reduce((Z,[ia,[ua,Ia]])=>{(ua=A(m,K,ua,Ia))&&Z.push(y(ia,...ua.points));return Z},[]).filter(Z=>Z.didIntersect)}function f(b,g,m,K){return r(b,
g).reduce((Z,[ia,[ua,Ia]])=>{(ua=a(ua,Ia,m,K))&&Z.push(rb(Wa({},ua),{message:ia}));return Z},[]).filter(Z=>Z.didIntersect)}function u(b,g,m,K,Z,ia=0){return r(b,g).reduce((ua,[Ia,[Xa,bb]])=>{(Xa=H(Xa,bb,m,K,Z,ia))&&ua.push(rb(Wa({},Xa),{message:Ia}));return ua},[]).filter(ua=>ua.didIntersect)}function x(b,g,m){return r(b,g).reduce((K,[Z,[ia,ua]])=>{ia=t(ia,ua,m);ia.didIntersect&&K.push(y(Z,...ia.points));return K},[]).filter(K=>K.didIntersect)}function I(b,g,m){return r(b,g).reduce((K,[Z,[ia,ua]])=>
{{const Ia=[];for(let Xa=1;Xa<m.length+1;Xa++){const bb=A(ia,ua,m[Xa-1],m[Xa%m.length]);bb&&Ia.push(...bb.points)}ia=0===Ia.length?y("no intersection"):y("intersection",...m)}ia.didIntersect&&K.push(y(Z,...ia.points));return K},[]).filter(K=>K.didIntersect)}function z(b,g,m,K=0,Z,ia){return g===m?f(Z,ia,b,g):u(Z,ia,b,g,m,K)}function w(b,g,m){const {minX:K,minY:Z,width:ia,height:ua}=b;return h([K,Z],[ia,ua],g,m)}function v(b){for(var g=arguments.length,m=Array(1<g?g-1:0),K=1;K<g;K++)m[K-1]=arguments[K];
throw Error("number"===typeof b?"[MobX] minified error nr: "+b+(m.length?" "+m.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+b);}function n(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof qa?qa:"undefined"!==typeof self?self:rs}function U(){Cq||v("Proxy not available")}function ja(b){var g=!1;return function(){if(!g)return g=!0,b.apply(this,arguments)}}
function M(b){return"function"===typeof b}function ma(b){switch(typeof b){case "string":case "symbol":case "number":return!0}return!1}function X(b){return null!==b&&"object"===typeof b}function ca(b){if(!X(b))return!1;b=Object.getPrototypeOf(b);if(null==b)return!0;b=Object.hasOwnProperty.call(b,"constructor")&&b.constructor;return"function"===typeof b&&b.toString()===Dq}function E(b){return(b=null==b?void 0:b.constructor)?"GeneratorFunction"===b.name||"GeneratorFunction"===b.displayName?!0:!1:!1}
function V(b,g,m){zn(b,g,{enumerable:!1,writable:!0,configurable:!0,value:m})}function L(b,g,m){zn(b,g,{enumerable:!1,writable:!1,configurable:!0,value:m})}function P(b,g){var m="isMobX"+b;g.prototype[m]=!0;return function(K){return X(K)&&!0===K[m]}}function D(b){return b instanceof Map}function O(b){return b instanceof Set}function Q(b){var g=Object.keys(b);if(!mr)return g;var m=Object.getOwnPropertySymbols(b);return m.length?[].concat(g,m.filter(function(K){return np.propertyIsEnumerable.call(b,
K)})):g}function ba(b){return null===b?null:"object"===typeof b?""+b:b}function aa(b,g){return np.hasOwnProperty.call(b,g)}function J(b,g){for(var m=0;m<g.length;m++){var K=g[m];K.enumerable=K.enumerable||!1;K.configurable=!0;"value"in K&&(K.writable=!0);Object.defineProperty(b,K.key,K)}}function ha(b,g,m){g&&J(b.prototype,g);m&&J(b,m);Object.defineProperty(b,"prototype",{writable:!1});return b}function N(){N=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g],K;for(K in m)Object.prototype.hasOwnProperty.call(m,
K)&&(b[K]=m[K])}return b};return N.apply(this,arguments)}function da(b,g){b.prototype=Object.create(g.prototype);b.prototype.constructor=b;fa(b,g)}function fa(b,g){fa=Object.setPrototypeOf||function(m,K){m.__proto__=K;return m};return fa(b,g)}function ea(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function pa(b,g){if(b){if("string"===typeof b)return za(b,g);var m=Object.prototype.toString.call(b).slice(8,-1);"Object"===m&&b.constructor&&
(m=b.constructor.name);if("Map"===m||"Set"===m)return Array.from(b);if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return za(b,g)}}function za(b,g){if(null==g||g>b.length)g=b.length;for(var m=0,K=Array(g);m<g;m++)K[m]=b[m];return K}function ya(b,g){var m="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(m)return(m=m.call(b)).next.bind(m);if(Array.isArray(b)||(m=pa(b))||g&&b&&"number"===typeof b.length){m&&(b=m);var K=0;return function(){return K>=b.length?
{done:!0}:{done:!1,value:b[K++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ga(b){return Object.assign(function(g,m){Ta(g,m,b)},b)}function Ta(b,g,m){aa(b,mn)||V(b,mn,N({},b[mn]));m.annotationType_!==lr&&(b[mn][g]=m)}function Ea(b){aa(b,mn)||V(b,mn,N({},b[mn]));return b[mn]}function Oa(b,g,m){void 0===g&&(g=Yo);void 0===m&&(m=Yo);b=new ln(b);g!==Yo&&uc(AC,b,g,void 0);m!==Yo&&
sd(b,m);return b}function Ya(b,g,m){return Lc(b)?b:Array.isArray(b)?tg.array(b,{name:m}):ca(b)?tg.object(b,void 0,{name:m}):D(b)?tg.map(b,{name:m}):O(b)?tg.set(b,{name:m}):"function"!==typeof b||Sc(b)||Qb(b)?b:E(b)?Fs(b):us(m,b)}function Ma(b){return b}function fb(b,g){return{annotationType_:b,options_:g,make_:eb,extend_:Na}}function eb(b,g,m,K){var Z;if(null!=(Z=this.options_)&&Z.bound)return null===this.extend_(b,g,m,!1)?0:1;if(K===b.target_)return null===this.extend_(b,g,m,!1)?0:2;if(Sc(m.value))return 1;
b=oa(b,this,g,m,!1);zn(K,g,b);return 2}function Na(b,g,m,K){m=oa(b,this,g,m);return b.defineProperty_(g,m,K)}function oa(b,g,m,K,Z){var ia,ua,Ia,Xa,bb,pb,sb;void 0===Z&&(Z=Ie.safeDescriptors);K=K.value;if(null!=(ia=g.options_)&&ia.bound){var Ub;K=K.bind(null!=(Ub=b.proxy_)?Ub:b.target_)}return{value:Zc(null!=(ua=null==(Ia=g.options_)?void 0:Ia.name)?ua:m.toString(),K,null!=(Xa=null==(bb=g.options_)?void 0:bb.autoAction)?Xa:!1,null!=(pb=g.options_)&&pb.bound?null!=(sb=b.proxy_)?sb:b.target_:void 0),
configurable:Z?b.isPlainObject_:!0,enumerable:!1,writable:Z?!1:!0}}function Ca(b,g){return{annotationType_:b,options_:g,make_:sa,extend_:Aa}}function sa(b,g,m,K){var Z;if(K===b.target_)return null===this.extend_(b,g,m,!1)?0:2;if(null!=(Z=this.options_)&&Z.bound&&(!aa(b.target_,g)||!Qb(b.target_[g]))&&null===this.extend_(b,g,m,!1))return 0;if(Qb(m.value))return 1;b=Ja(b,this,g,m,!1,!1);zn(K,g,b);return 2}function Aa(b,g,m,K){var Z;m=Ja(b,this,g,m,null==(Z=this.options_)?void 0:Z.bound);return b.defineProperty_(g,
m,K)}function Ja(b,g,m,K,Z,ia){void 0===ia&&(ia=Ie.safeDescriptors);g=K.value;Qb(g)||(g=Fs(g));if(Z){var ua;g=g.bind(null!=(ua=b.proxy_)?ua:b.target_);g.isMobXFlow=!0}return{value:g,configurable:ia?b.isPlainObject_:!0,enumerable:!1,writable:ia?!1:!0}}function Sa(b,g){return{annotationType_:b,options_:g,make_:Ab,extend_:hb}}function Ab(b,g,m){return null===this.extend_(b,g,m,!1)?0:1}function hb(b,g,m,K){return b.defineComputedProperty_(g,N({},this.options_,{get:m.get,set:m.set}),K)}function Lb(b,g){return{annotationType_:b,
options_:g,make_:Vb,extend_:gc}}function Vb(b,g,m){return null===this.extend_(b,g,m,!1)?0:1}function gc(b,g,m,K){var Z,ia;return b.defineObservableProperty_(g,m.value,null!=(Z=null==(ia=this.options_)?void 0:ia.enhancer)?Z:Ya,K)}function Pa(b){return{annotationType_:"true",options_:b,make_:lb,extend_:nb}}function lb(b,g,m,K){var Z,ia;if(m.get)return Da.make_(b,g,m,K);if(m.set){m=Zc(g.toString(),m.set);if(K===b.target_)return null===b.defineProperty_(g,{configurable:Ie.safeDescriptors?b.isPlainObject_:
!0,set:m})?0:2;zn(K,g,{configurable:!0,set:m});return 2}if(K!==b.target_&&"function"===typeof m.value){var ua;if(E(m.value)){var Ia;return(null!=(Ia=this.options_)&&Ia.autoBind?Fs.bound:Fs).make_(b,g,m,K)}return(null!=(ua=this.options_)&&ua.autoBind?us.bound:us).make_(b,g,m,K)}ua=!1===(null==(Z=this.options_)?void 0:Z.deep)?tg.ref:tg;if("function"===typeof m.value&&null!=(ia=this.options_)&&ia.autoBind){var Xa;m.value=m.value.bind(null!=(Xa=b.proxy_)?Xa:b.target_)}return ua.make_(b,g,m,K)}function nb(b,
g,m,K){var Z,ia;if(m.get)return Da.extend_(b,g,m,K);if(m.set)return b.defineProperty_(g,{configurable:Ie.safeDescriptors?b.isPlainObject_:!0,set:Zc(g.toString(),m.set)},K);if("function"===typeof m.value&&null!=(Z=this.options_)&&Z.autoBind){var ua;m.value=m.value.bind(null!=(ua=b.proxy_)?ua:b.target_)}return(!1===(null==(ia=this.options_)?void 0:ia.deep)?tg.ref:tg).extend_(b,g,m,K)}function Xb(b){if(!0===b.deep)var g=Ya;else{if(!1===b.deep)b=Ma;else{b=b.defaultDecorator;var m;b=b?null!=(g=null==(m=
b.options_)?void 0:m.enhancer)?g:Ya:Ya}g=b}return g}function Ic(b,g,m){if(ma(g))Ta(b,g,ps);else return Lc(b)?b:ca(b)?tg.object(b,g,m):Array.isArray(b)?tg.array(b,g):D(b)?tg.map(b,g):O(b)?tg.set(b,g):"object"===typeof b&&null!==b?b:tg.box(b,g)}function Zc(b,g,m,K){function Z(){a:{var ia=K||this,ua=arguments,Ia=Ie.trackingDerivation,Xa=!m||!Ia;Kd();var bb=Ie.allowStateChanges;Xa&&(Hd(),bb=Cb(!0));var pb=qc(!0),sb=Jc++,Ub=oc;oc=sb;try{var kc=g.apply(ia,ua);break a}catch(sc){var Mb=sc;throw sc;}finally{oc!==
sb&&v(30),oc=Ub,void 0!==Mb&&(Ie.suppressReactionErrors=!0),Ie.allowStateChanges=bb,Ie.allowStateReads=pb,nd(),Xa&&(Ie.trackingDerivation=Ia),Ie.suppressReactionErrors=!1}kc=void 0}return kc}void 0===m&&(m=!1);Z.isMobxAction=!0;gd&&(Wd.value=b,Object.defineProperty(Z,"name",Wd));return Z}function Oc(b,g){b=Cb(b);try{return g()}finally{Ie.allowStateChanges=b}}function Cb(b){var g=Ie.allowStateChanges;Ie.allowStateChanges=b;return g}function wc(b){switch(b.dependenciesState_){case Qf.UP_TO_DATE_:return!1;
case Qf.NOT_TRACKING_:case Qf.STALE_:return!0;case Qf.POSSIBLY_STALE_:for(var g=qc(!0),m=Hd(),K=b.observing_,Z=K.length,ia=0;ia<Z;ia++){var ua=K[ia];if(fh(ua)){if(Ie.disableErrorBoundaries)ua.get();else try{ua.get()}catch(Ia){return Ie.trackingDerivation=m,Ie.allowStateReads=g,!0}if(b.dependenciesState_===Qf.STALE_)return Ie.trackingDerivation=m,Ie.allowStateReads=g,!0}}Cd(b);Ie.trackingDerivation=m;Ie.allowStateReads=g;return!1}}function Tc(b,g,m){var K=qc(!0);Cd(b);b.newObserving_=Array(b.observing_.length+
100);b.unboundDepsCount_=0;b.runId_=++Ie.runId;var Z=Ie.trackingDerivation;Ie.trackingDerivation=b;Ie.inBatch++;if(!0===Ie.disableErrorBoundaries)var ia=g.call(m);else try{ia=g.call(m)}catch(pb){ia=new Xd(pb)}Ie.inBatch--;Ie.trackingDerivation=Z;var ua=b.observing_;g=b.observing_=b.newObserving_;m=Qf.UP_TO_DATE_;Z=0;for(var Ia=b.unboundDepsCount_,Xa=0;Xa<Ia;Xa++){var bb=g[Xa];0===bb.diffValue_&&(bb.diffValue_=1,Z!==Xa&&(g[Z]=bb),Z++);bb.dependenciesState_>m&&(m=bb.dependenciesState_)}g.length=Z;b.newObserving_=
null;for(Ia=ua.length;Ia--;)Xa=ua[Ia],0===Xa.diffValue_&&$d(Xa,b),Xa.diffValue_=0;for(;Z--;)ua=g[Z],1===ua.diffValue_&&(ua.diffValue_=0,Ia=b,ua.observers_.add(Ia),ua.lowestObserverState_>Ia.dependenciesState_&&(ua.lowestObserverState_=Ia.dependenciesState_));m!==Qf.UP_TO_DATE_&&(b.dependenciesState_=m,b.onBecomeStale_());Ie.allowStateReads=K;return ia}function jd(b){var g=b.observing_;b.observing_=[];for(var m=g.length;m--;)$d(g[m],b);b.dependenciesState_=Qf.NOT_TRACKING_}function Nd(b){var g=Hd();
try{return b()}finally{Ie.trackingDerivation=g}}function Hd(){var b=Ie.trackingDerivation;Ie.trackingDerivation=null;return b}function qc(b){var g=Ie.allowStateReads;Ie.allowStateReads=b;return g}function Cd(b){if(b.dependenciesState_!==Qf.UP_TO_DATE_){b.dependenciesState_=Qf.UP_TO_DATE_;b=b.observing_;for(var g=b.length;g--;)b[g].lowestObserverState_=Qf.UP_TO_DATE_}}function xd(){(Ie.pendingReactions.length||Ie.inBatch||Ie.isRunningReactions)&&v(36);kf=!0;if($e){var b=n();0===--b.__mobxInstanceCount&&
(b.__mobxGlobals=void 0);Ie=new ne}}function $d(b,g){b.observers_["delete"](g);0===b.observers_.size&&ud(b)}function ud(b){!1===b.isPendingUnobservation_&&(b.isPendingUnobservation_=!0,Ie.pendingUnobservations.push(b))}function Kd(){Ie.inBatch++}function nd(){if(0===--Ie.inBatch){0<Ie.inBatch||Ie.isRunningReactions||Uh(ob);for(var b=Ie.pendingUnobservations,g=0;g<b.length;g++){var m=b[g];m.isPendingUnobservation_=!1;0===m.observers_.size&&(m.isBeingObserved_&&(m.isBeingObserved_=!1,m.onBUO()),m instanceof
ug&&m.suspend_())}Ie.pendingUnobservations=[]}}function Yd(b){var g=Ie.trackingDerivation;if(null!==g)return g.runId_!==b.lastAccessedBy_&&(b.lastAccessedBy_=g.runId_,g.newObserving_[g.unboundDepsCount_++]=b,!b.isBeingObserved_&&Ie.trackingContext&&(b.isBeingObserved_=!0,b.onBO())),!0;0===b.observers_.size&&0<Ie.inBatch&&ud(b);return!1}function Nb(b){b.lowestObserverState_!==Qf.STALE_&&(b.lowestObserverState_=Qf.STALE_,b.observers_.forEach(function(g){if(g.dependenciesState_===Qf.UP_TO_DATE_)g.onBecomeStale_();
g.dependenciesState_=Qf.STALE_}))}function fc(b){b.lowestObserverState_!==Qf.STALE_&&(b.lowestObserverState_=Qf.STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Qf.POSSIBLY_STALE_?g.dependenciesState_=Qf.STALE_:g.dependenciesState_===Qf.UP_TO_DATE_&&(b.lowestObserverState_=Qf.UP_TO_DATE_)}))}function Wb(b){b.lowestObserverState_===Qf.UP_TO_DATE_&&(b.lowestObserverState_=Qf.POSSIBLY_STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Qf.UP_TO_DATE_&&(g.dependenciesState_=Qf.POSSIBLY_STALE_,
g.onBecomeStale_())}))}function ob(){Ie.isRunningReactions=!0;for(var b=Ie.pendingReactions,g=0;0<b.length;){++g===Bh&&(console.error("[mobx] cycle in reaction: "+b[0]),b.splice(0));for(var m=b.splice(0),K=0,Z=m.length;K<Z;K++)m[K].runReaction_()}Ie.isRunningReactions=!1}function kb(b){var g=Uh;Uh=function(m){return b(function(){return g(m)})}}function ac(b){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function tc(b){return function(g,m){if(M(g))return Zc(g.name||
"\x3cunnamed action\x3e",g,b);if(M(m))return Zc(g,m,b);if(ma(m))return Ta(g,m,b?xy:zt);if(ma(g))return Ga(fb(b?"autoAction":zo,{name:g,autoAction:b}))}}function Sc(b){return M(b)&&!0===b.isMobxAction}function ad(b,g){function m(){b(Xa)}var K,Z;void 0===g&&(g=jo);var ia=null!=(K=null==(Z=g)?void 0:Z.name)?K:"Autorun";if(g.scheduler||g.delay){var ua=Sd(g),Ia=!1;var Xa=new lg(ia,function(){Ia||(Ia=!0,ua(function(){Ia=!1;Xa.isDisposed_||Xa.track(m)}))},g.onError,g.requiresObservable)}else Xa=new lg(ia,
function(){this.track(m)},g.onError,g.requiresObservable);Xa.schedule_();return Xa.getDisposer_()}function Sd(b){return b.scheduler?b.scheduler:b.delay?function(g){return setTimeout(g,b.delay)}:zC}function de(b,g,m){function K(){pb=!1;if(!Mb.isDisposed_){var sc=!1;Mb.track(function(){var lc=Oc(!1,function(){return b(Mb)});sc=bb||!kc(sb,lc);Ub=sb;sb=lc});bb&&m.fireImmediately?ua(sb,Ub,Mb):!bb&&sc&&ua(sb,Ub,Mb);bb=!1}}var Z;void 0===m&&(m=jo);var ia=null!=(Z=m.name)?Z:"Reaction",ua=pg(ia,m.onError?
ue(m.onError,g):g),Ia=!m.scheduler&&!m.delay,Xa=Sd(m),bb=!0,pb=!1,sb,Ub,kc=m.compareStructural?io.structural:m.equals||io["default"],Mb=new lg(ia,function(){bb||Ia?K():pb||(pb=!0,Xa(K))},m.onError,m.requiresObservable);Mb.schedule_();return Mb.getDisposer_()}function ue(b,g){return function(){try{return g.apply(this,arguments)}catch(m){b.call(this,m)}}}function sd(b,g,m){return uc(BC,b,g,m)}function uc(b,g,m,K){var Z="function"===typeof K?af(g,m):af(g),ia=M(K)?K:m,ua=b+"L";Z[ua]?Z[ua].add(ia):Z[ua]=
new Set([ia]);return function(){var Ia=Z[ua];Ia&&(Ia["delete"](ia),0===Ia.size&&delete Z[ua])}}function Mc(b){!0===b.isolateGlobalState&&xd();var g=b.useProxies,m=b.enforceActions;void 0!==g&&(Ie.useProxies="always"===g?!0:"never"===g?!1:"undefined"!==typeof Proxy);"ifavailable"===g&&(Ie.verifyProxies=!0);void 0!==m&&(g="always"===m?"always":"observed"===m,Ie.enforceActions=g,Ie.allowStateChanges=!0===g||"always"===g?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction",
"disableErrorBoundaries","safeDescriptors"].forEach(function(K){K in b&&(Ie[K]=!!b[K])});Ie.allowStateReads=!Ie.observableRequiresReaction;b.reactionScheduler&&kb(b.reactionScheduler)}function Ne(b,g,m,K){var Z=Bq(g),ia=hd(b,K)[Yg];Kd();try{Bn(Z).forEach(function(ua){ia.extend_(ua,Z[ua],m?ua in m?m[ua]:!0:!0)})}finally{nd()}return b}function pc(b){var g={name:b.name_};b.observing_&&0<b.observing_.length&&(g.dependencies=Array.from(new Set(b.observing_)).map(pc));return g}function Me(){this.message=
"FLOW_CANCELLED"}function Qb(b){return!0===(null==b?void 0:b.isMobXFlow)}function Lc(b,g){return b?void 0!==g?he(b)?b[Yg].values_.has(g):!1:he(b)||!!b[Yg]||Kp(b)||Ah(b)||fh(b):!1}function Tb(b){if(he(b))return b[Yg].ownKeys_();v(38)}function dd(b,g,m){b.set(g,m);return m}function te(b,g){if(null==b||"object"!==typeof b||b instanceof Date||!Lc(b))return b;if(xh(b)||fh(b))return te(b.get(),g);if(g.has(b))return g.get(b);if(ec(b)){var m=dd(g,b,Array(b.length));b.forEach(function(ua,Ia){m[Ia]=te(ua,g)});
return m}if(Eq(b)){var K=dd(g,b,new Set);b.forEach(function(ua){K.add(te(ua,g))});return K}if(Xp(b)){var Z=dd(g,b,new Map);b.forEach(function(ua,Ia){Z.set(Ia,te(ua,g))});return Z}var ia=dd(g,b,{});Tb(b).forEach(function(ua){np.propertyIsEnumerable.call(b,ua)&&(ia[ua]=te(b[ua],g))});return ia}function le(b,g){return te(b,new Map)}function Hc(){v("trace() is not available in production builds");for(var b=!1,g=arguments.length,m=Array(g),K=0;K<g;K++)m[K]=arguments[K];"boolean"===typeof m[m.length-1]&&
(b=m.pop());a:{switch(m.length){case 0:g=Ie.trackingDerivation;break a;case 1:g=af(m[0]);break a;case 2:g=af(m[0],m[1]);break a}g=void 0}if(!g)return v("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");g.isTracing_===pe.NONE&&console.log("[mobx.trace] '"+g.name_+"' tracing enabled");g.isTracing_=b?pe.BREAK:pe.LOG}function zb(b,g){void 0===g&&(g=void 0);Kd();try{return b.apply(g)}finally{nd()}}function Qd(b){return void 0!==
b.interceptors_&&0<b.interceptors_.length}function me(b,g){var m=b.interceptors_||(b.interceptors_=[]);m.push(g);return ja(function(){var K=m.indexOf(g);-1!==K&&m.splice(K,1)})}function od(b,g){var m=Hd();try{var K=[].concat(b.interceptors_||[]);b=0;for(var Z=K.length;b<Z&&((g=K[b](g))&&!g.type&&v(14),g);b++);return g}finally{Ie.trackingDerivation=m}}function mc(b){return void 0!==b.changeListeners_&&0<b.changeListeners_.length}function Ue(b,g){var m=b.changeListeners_||(b.changeListeners_=[]);m.push(g);
return ja(function(){var K=m.indexOf(g);-1!==K&&m.splice(K,1)})}function Jf(b,g){var m=Hd();if(b=b.changeListeners_){b=b.slice();for(var K=0,Z=b.length;K<Z;K++)b[K](g);Ie.trackingDerivation=m}}function Se(b,g,m){var K=hd(b,m)[Yg];Kd();try{var Z;null!=(Z=g)?Z:g=Ea(b);Bn(g).forEach(function(ia){return K.make_(ia,g[ia])})}finally{nd()}return b}function th(b,g,m,K){void 0===m&&(m="ObservableArray");void 0===K&&(K=!1);U();g=new vv(m,g,K,!1);L(g.values_,Yg,g);m=new Proxy(g.values_,JC);g.proxy_=m;b&&b.length&&
(K=Cb(!0),g.spliceWithArray_(0,0,b),Ie.allowStateChanges=K);return m}function Za(b,g){"function"===typeof Array.prototype[b]&&(It[b]=g(b))}function Bb(b){return function(){var g=this[Yg];g.atom_.reportObserved();g=g.dehanceValues_(g.values_);return g[b].apply(g,arguments)}}function db(b){return function(g,m){var K=this,Z=this[Yg];Z.atom_.reportObserved();return Z.dehanceValues_(Z.values_)[b](function(ia,ua){return g.call(m,ia,ua,K)})}}function Eb(b){return function(){var g=this,m=this[Yg];m.atom_.reportObserved();
m=m.dehanceValues_(m.values_);var K=arguments[0];arguments[0]=function(Z,ia,ua){return K(Z,ia,ua,g)};return m[b].apply(m,arguments)}}function ec(b){return X(b)&&KC(b[Yg])}function ib(b){if(D(b)||Xp(b))return b;if(Array.isArray(b))return new Map(b);if(ca(b)){var g=new Map,m;for(m in b)g.set(m,b[m]);return g}return v(21,b)}function hd(b,g){var m;if(aa(b,Yg))return b;var K=null!=(m=null==g?void 0:g.name)?m:"ObservableObject";m=wy;var Z=new Map;K=String(K);var ia;var ua=g?null!=(ia=g.defaultDecorator)?
ia:Pa(g):void 0;g=new m(b,Z,K,ua);V(b,Yg,g);return b}function Dd(b){return vy[b]||(vy[b]={get:function(){return this[Yg].getObservablePropValue_(b)},set:function(g){return this[Yg].setObservablePropValue_(b,g)}})}function he(b){return X(b)?yC(b[Yg]):!1}function ce(b){return{enumerable:!1,configurable:!0,get:function(){return this[Yg].get_(b)},set:function(g){this[Yg].set_(b,g)}}}function Xe(b){if(b>sv){for(var g=sv;g<b+100;g++)zn(tv.prototype,""+g,ce(g));sv=b}}function ve(b,g,m){return new tv(b,g,
m)}function af(b,g){if("object"===typeof b&&null!==b){if(ec(b))return void 0!==g&&v(23),b[Yg].atom_;if(Eq(b))return b[Yg];if(Xp(b)){if(void 0===g)return b.keysAtom_;var m=b.data_.get(g)||b.hasMap_.get(g);m||v(25,g,qf(b));return m}if(he(b)){if(!g)return v(26);(m=b[Yg].values_.get(g))||v(27,g,qf(b));return m}if(Kp(b)||fh(b)||Ah(b))return b}else if(M(b)&&Ah(b[Yg]))return b[Yg];v(28)}function Cg(b,g){b||v(29);if(void 0!==g)return Cg(af(b,g));if(Kp(b)||fh(b)||Ah(b)||Xp(b)||Eq(b))return b;if(b[Yg])return b[Yg];
v(24,b)}function qf(b,g){if(void 0!==g)b=af(b,g);else{if(Sc(b))return b.name;b=he(b)||Xp(b)||Eq(b)?Cg(b):af(b)}return b.name_}function yb(b,g,m){void 0===m&&(m=-1);return ta(b,g,m)}function ta(b,g,m,K,Z){if(b===g)return 0!==b||1/b===1/g;if(null==b||null==g)return!1;if(b!==b)return g!==g;var ia=typeof b;if("function"!==ia&&"object"!==ia&&"object"!=typeof g)return!1;ia=uy.call(b);if(ia!==uy.call(g))return!1;switch(ia){case "[object RegExp]":case "[object String]":return""+b===""+g;case "[object Number]":return+b!==
+b?+g!==+g:0===+b?1/+b===1/g:+b===+g;case "[object Date]":case "[object Boolean]":return+b===+g;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(b)===Symbol.valueOf.call(g);case "[object Map]":case "[object Set]":0<=m&&m++}b=ra(b);g=ra(g);ia="[object Array]"===ia;if(!ia){if("object"!=typeof b||"object"!=typeof g)return!1;var ua=b.constructor,Ia=g.constructor;if(ua!==Ia&&!(M(ua)&&ua instanceof ua&&M(Ia)&&Ia instanceof Ia)&&"constructor"in b&&"constructor"in g)return!1}if(0===
m)return!1;0>m&&(m=-1);K=K||[];Z=Z||[];for(ua=K.length;ua--;)if(K[ua]===b)return Z[ua]===g;K.push(b);Z.push(g);if(ia){ua=b.length;if(ua!==g.length)return!1;for(;ua--;)if(!ta(b[ua],g[ua],m-1,K,Z))return!1}else{ia=Object.keys(b);ua=ia.length;if(Object.keys(g).length!==ua)return!1;for(;ua--;)if(Ia=ia[ua],!aa(g,Ia)||!ta(b[Ia],g[Ia],m-1,K,Z))return!1}K.pop();Z.pop();return!0}function ra(b){return ec(b)?b.slice():D(b)||Xp(b)||O(b)||Eq(b)?Array.from(b.entries()):b}function Ha(b){b[Symbol.iterator]=cb;return b}
function cb(){return this}function Hb(b,g){const m=new Set(g),K=Object.values(b),Z=new Set(K.filter(ia=>m.has(ia.toId)||m.has(ia.fromId)));b=Z.size;for(g=-1;0!==g;)Z.forEach(ia=>{ia=ia.fromId;for(const ua of K)ua.fromId===ia&&Z.add(ua),ua.toId===ia&&Z.add(ua)}),g=Z.size-b,b=Z.size;return Array.from(Z.values())}function jc(b,g,m,K,Z,ia,ua,Ia){if(Z=g.getBindingPoint(Z,ia,ua,Ia))return{id:K,type:"line",fromId:b.id,toId:g.id,handleId:m,point:re.toFixed(Z.point),distance:Z.distance}}function Qc(b,g){const m=
b.getCenter(),K=g.getCenter();var Z=li();Z=rb(Wa({},ts.defaultProps),{id:Z,type:ts.id,parentId:b.props.parentId,point:m});b=jc(Z,b,"start",li(),m,m,re.uni(re.sub(K,m)),!1);g=jc(Z,g,"end",li(),K,K,re.uni(re.sub(m,K)),!1);return b&&g?(Z.handles.start.point=[0,0],Z.handles.end.point=re.sub(K,m),Z.handles.start.bindingId=b.id,Z.handles.end.bindingId=g.id,[Z,[b,g]]):null}function ld(b,g){return(0,SC.default)(b,g,{arrayMerge:(m,K,Z)=>K})}function xe(b,g,m,K=!1){const [Z,ia]=g,[ua,Ia]=m;b=ua+(b-Z)/(ia-Z)*
(Ia-ua);return K?ua<Ia?Math.max(Math.min(b,Ia),ua):Math.max(Math.min(b,ua),Ia):b}function We(b,g){return new Promise((m,K)=>{if(g){const Z=document.createElement("video");Z.addEventListener("loadedmetadata",function(){m([this.videoWidth,this.videoHeight])},!1);Z.src=b}else{const Z=new Image;Z.onload=()=>m([Z.width,Z.height]);Z.src=b;Z.onerror=ia=>K(ia)}})}function jf(b,g){return Object.values(Ud).includes(b)?`var(--ls-wb-${g}-color-${b?b:"default"})`:b}function Yf(){var b;null==(b=document.getElementById("__textLabelMeasure"))?
void 0:b.remove();b=document.createElement("pre");b.id="__textLabelMeasure";Object.assign(b.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});b.tabIndex=-1;document.body.appendChild(b);return b}function xf(b,g,m=0){var K,Z,ia;if(!b)return[16,
32];let ua;ua="string"===typeof g?g:`${null!=(K=g.fontStyle)?K:"normal"} ${null!=(Z=g.fontVariant)?Z:"normal"} ${null!=(ia=g.fontWeight)?ia:"normal"} ${g.fontSize}px/${g.fontSize*g.lineHeight}px ${g.fontFamily}`;if(!xv.has(`${b}-${ua}-${m}`)){if(!Yp)return[10,10];Yp.parentNode||document.body.appendChild(Yp);Yp.innerHTML=`${b}&#8203;`;Yp.style.font=ua;Yp.style.padding=m+"px";g=Yp.getBoundingClientRect();xv.set(`${b}-${ua}-${m}`,[Math.ceil(g.width||1),Math.ceil(g.height||1)])}return xv.get(`${b}-${ua}-${m}`)}
function vf(b){try{if("string"!==typeof b||!tf.test(b))throw TypeError("Invalid UUID");var g,m=new Uint8Array(16);m[0]=(g=parseInt(b.slice(0,8),16))>>>24;m[1]=g>>>16&255;m[2]=g>>>8&255;m[3]=g&255;m[4]=(g=parseInt(b.slice(9,13),16))>>>8;m[5]=g&255;m[6]=(g=parseInt(b.slice(14,18),16))>>>8;m[7]=g&255;m[8]=(g=parseInt(b.slice(19,23),16))>>>8;m[9]=g&255;m[10]=(g=parseInt(b.slice(24,36),16))/1099511627776&255;m[11]=g/4294967296&255;m[12]=g>>>24&255;m[13]=g>>>16&255;m[14]=g>>>8&255;m[15]=g&255;return!0}catch(K){return!1}}
function Lf(b,g=0,m){let K;return function(...Z){null==m?void 0:m(...Z);clearTimeout(K);K=setTimeout(()=>b.apply(Z),g)}}function Gg(b,g){return Yb(b,["symbol"===typeof g?g:g+""])}function ji(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function mh(){const b=window.navigator.userAgent.toLowerCase();return b.includes("webkit")&&!b.includes("chrome")}function Ch(b){return!!b}function Nh(b=0){return new Promise(g=>setTimeout(g,b))}function qg(b="noid"){wv[b]||(wv[b]=Ay.createContext({}));
return wv[b]}function Rg(b="noid"){return Ay.useContext(qg(b))}function ef(b){const {callbacks:g}=Rg(),m=Cy.useRef(-1);return Cy.useMemo(()=>{const K=Z=>{var ia,ua;const {order:Ia=0}=Z;if(!Ia){var Xa=Z.target;Xa.removeEventListener("pointerup",K);Xa.releasePointerCapture(Z.pointerId);null==(ia=g.onPointerUp)?void 0:ia.call(g,{type:"selection",handle:b,order:Ia},Z);ia=Date.now();Xa=ia-m.current;300<Xa?m.current=ia:300>=Xa&&(null==(ua=g.onDoubleClick)?void 0:ua.call(g,{type:"selection",handle:b,order:Ia},
Z),m.current=-1);Z.order=Ia+1}};return{onPointerDown:Z=>{var ia;const {order:ua=0}=Z;if(!ua){var Ia=Oh(Z.currentTarget);Ia.setPointerCapture(Z.pointerId);Ia.addEventListener("pointerup",K);null==(ia=g.onPointerDown)?void 0:ia.call(g,{type:"selection",handle:b,order:ua},Z);Z.order=ua+1}},onPointerMove:Z=>{var ia;const {order:ua=0}=Z;ua||(null==(ia=g.onPointerMove)?void 0:ia.call(g,{type:"selection",handle:b,order:ua},Z),Z.order=ua+1)},onPointerEnter:Z=>{var ia;const {order:ua=0}=Z;ua||(null==(ia=g.onPointerEnter)?
void 0:ia.call(g,{type:"selection",handle:b,order:ua},Z),Z.order=ua+1)},onPointerLeave:Z=>{var ia;const {order:ua=0}=Z;ua||(null==(ia=g.onPointerLeave)?void 0:ia.call(g,{type:"selection",handle:b,order:ua},Z),Z.order=ua+1)},onKeyDown:Z=>{var ia;null==(ia=g.onKeyDown)?void 0:ia.call(g,{type:"selection",handle:b,order:-1},Z)},onKeyUp:Z=>{var ia;null==(ia=g.onKeyUp)?void 0:ia.call(g,{type:"selection",handle:b,order:-1},Z)}}},[g])}function Oh(b){var g;if(null==(g=b.namespaceURI)?0:g.endsWith("svg")){if(b.parentElement)return Oh(b.parentElement);
throw Error("Could not find a parent element of an HTML type!");}return b}function cj(b,g,m){const K=Js.useRef(!1),Z=Js.useCallback(()=>{var ia;if(K.current){const ua=null==(ia=b.current)?void 0:ia.getBoundingClientRect();ua&&(ia={minX:ua.left,maxX:ua.left+ua.width,minY:ua.top,maxY:ua.top+ua.height,width:ua.width,height:ua.height},g.updateBounds(ia),null==m?void 0:m(ia))}else K.current=!0},[b,m]);Js.useEffect(()=>{const ia=b.current?UC(b.current):document,ua=Lf(Z,100);ia.addEventListener("scroll",
ua);window.addEventListener("resize",ua);return()=>{ia.removeEventListener("scroll",ua);window.removeEventListener("resize",ua)}},[]);Js.useLayoutEffect(()=>{const ia=new ResizeObserver(ua=>{ua[0].contentRect&&Z()});b.current&&ia.observe(b.current);return()=>{ia.disconnect()}},[b]);Js.useEffect(()=>{Z();setTimeout(()=>{var ia,ua;null==(ua=null==(ia=b.current)?void 0:ia.querySelector(".tl-canvas"))?void 0:ua.focus()})},[b])}function Ll(b,g){return Object.keys(g).reduce((m,K)=>{const Z=g[K];return Z?
m+`${`--${b}-${K}`}: ${Z};
`:m},"")}function xj(b,g,m=".logseq-tldraw"){zv.useLayoutEffect(()=>{const K=document.createElement("style"),Z=Ll(b,g);K.setAttribute("id",`${b}-theme`);K.setAttribute("data-selector",m);K.innerHTML=`
        ${m} {
          ${Z}
        }
      `;document.head.appendChild(K);return()=>{K&&document.head.contains(K)&&document.head.removeChild(K)}},[b,g,m])}function mg(b,g){zv.useLayoutEffect(()=>{if(yv.get(b))return()=>{};const m=document.createElement("style");m.innerHTML=g;m.setAttribute("id",b);document.head.appendChild(m);yv.set(b,m);return()=>{m&&document.head.contains(m)&&(document.head.removeChild(m),yv.delete(b))}},[b,g])}function Ij(b,g){const m=zv.useMemo(()=>Wa(Wa({},OD),b),[b]);xj("tl",m,g);mg("tl-canvas",PD)}function tk(b=
"noid"){Bv[b]||(Bv[b]=Iy.createContext({}));return Bv[b]}function dg(b="noid"){return Iy.useContext(tk(b))}function Ml(){const b=dg(),{callbacks:g}=Rg(),m=$y.useRef(-1);return $y.useMemo(()=>({onPointerDown:K=>{var Z,ia,ua;const {order:Ia=0}=K;Ia||(null==(Z=K.currentTarget)?void 0:Z.setPointerCapture(K.pointerId));K.isPrimary&&(null==(ia=g.onPointerDown)?void 0:ia.call(g,{type:"canvas",order:Ia},K),Z=Date.now(),ia=Z-m.current,300<ia?m.current=Z:300>=ia&&(null==(ua=g.onDoubleClick)?void 0:ua.call(g,
{type:"canvas",order:Ia},K),m.current=-1))},onPointerMove:K=>{var Z;const {order:ia=0}=K;null==(Z=g.onPointerMove)?void 0:Z.call(g,{type:"canvas",order:ia},K)},onPointerUp:K=>{var Z,ia;const {order:ua=0}=K;ua||(null==(Z=K.currentTarget)?void 0:Z.releasePointerCapture(K.pointerId));null==(ia=g.onPointerUp)?void 0:ia.call(g,{type:"canvas",order:ua},K)},onPointerEnter:K=>{var Z;const {order:ia=0}=K;null==(Z=g.onPointerEnter)?void 0:Z.call(g,{type:"canvas",order:ia},K)},onPointerLeave:K=>{var Z;const {order:ia=
0}=K;null==(Z=g.onPointerLeave)?void 0:Z.call(g,{type:"canvas",order:ia},K)},onDrop:K=>wa(this,null,function*(){K.preventDefault();b.drop(K.dataTransfer,[K.clientX,K.clientY])}),onDragOver:K=>{K.preventDefault()}}),[g])}function Ik(b,g,m){return 0===g||Infinity===Math.abs(g)?Math.pow(b,5*m):b*g*m/(g+m*b)}function Xk(b,g,m,K=.15){return 0===K?Math.max(g,Math.min(b,m)):b<g?-Ik(g-b,m-g,K)+g:b>m?+Ik(b-m,m-g,K)+m:b}function yh(b,[g,m],[K,Z]){const [[ia,ua],[Ia,Xa]]=b;return[Xk(g,ia,ua,K),Xk(m,Ia,Xa,Z)]}
function Ih(b,g,m){g in b?Object.defineProperty(b,g,{value:m,enumerable:!0,configurable:!0,writable:!0}):b[g]=m;return b}function Jj(b,g){var m=Object.keys(b);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(b);g&&(K=K.filter(function(Z){return Object.getOwnPropertyDescriptor(b,Z).enumerable}));m.push.apply(m,K)}return m}function ki(b){for(var g=1;g<arguments.length;g++){var m=null!=arguments[g]?arguments[g]:{};g%2?Jj(Object(m),!0).forEach(function(K){Ih(b,K,m[K])}):Object.getOwnPropertyDescriptors?
Object.defineProperties(b,Object.getOwnPropertyDescriptors(m)):Jj(Object(m)).forEach(function(K){Object.defineProperty(b,K,Object.getOwnPropertyDescriptor(m,K))})}return b}function ll(b){return b?b[0].toUpperCase()+b.slice(1):""}function vk(b=!1,g){return b&&!YC.includes(g)}function Uj(b,g="",m=!1){const K=Hy[b];g=K?K[g]||g:g;return"on"+ll(b)+ll(g)+(vk(m,g)?"Capture":"")}function sl(b){b=b.substring(2).toLowerCase();const g=!!~b.indexOf("passive");g&&(b=b.replace("passive",""));var m=XC.includes(b)?
"capturecapture":"capture";(m=!!~b.indexOf(m))&&(b=b.replace("capture",""));return{device:b,capture:m,passive:g}}function ml(b,g=""){const m=Hy[b];return b+(m?m[g]||g:g)}function tl(b){return"touches"in b?"touch":"pointerType"in b?b.pointerType:"mouse"}function hk(b){return Array.from(b.touches).filter(g=>{var m,K;return g.target===b.currentTarget||(null===(m=b.currentTarget)||void 0===m?void 0:null===(K=m.contains)||void 0===K?void 0:K.call(m,g.target))})}function Vj(b){return"touches"in b?("touchend"===
b.type||"touchcancel"===b.type?b.changedTouches:b.targetTouches)[0]:b}function ik(b,g){const m=g.clientX-b.clientX,K=g.clientY-b.clientY;return{angle:-(180*Math.atan2(m,K))/Math.PI,distance:Math.hypot(m,K),origin:[(g.clientX+b.clientX)/2,(g.clientY+b.clientY)/2]}}function eg(b){return hk(b).map(g=>g.identifier)}function jg(b,g){const [m,K]=Array.from(b.touches).filter(Z=>g.includes(Z.identifier));return ik(m,K)}function dj(b){const g=Vj(b);return"touches"in b?g.identifier:g.pointerId}function jh(b){b=
Vj(b);return[b.clientX,b.clientY]}function ri(b){let {deltaX:g,deltaY:m,deltaMode:K}=b;1===K?(g*=40,m*=40):2===K&&(g*=800,m*=800);return[g,m]}function Kj(b,...g){return"function"===typeof b?b(...g):b}function gi(){}function Vh(...b){return 0===b.length?gi:1===b.length?b[0]:function(){let g;for(const m of b)g=m.apply(this,arguments)||g;return g}}function wk([b,g],m){b=Math.abs(b);g=Math.abs(g);if(b>g&&b>m)return"x";if(g>b&&g>m)return"y"}function Jk(b){Hv.set(b.key,b.engine);Gv.set(b.key,b.resolver)}
function uh(b={},g){const m={};for(const [K,Z]of Object.entries(g))switch(typeof Z){case "function":m[K]=Z.call(m,b[K],K,b);break;case "object":m[K]=uh(b[K],Z);break;case "boolean":Z&&(m[K]=b[K])}return m}function Di(b,g,m={}){const {target:K,eventOptions:Z,window:ia,enabled:ua,transform:Ia}=b;var Xa=gD;if(null==b)b={};else{if(null==b)var bb={};else{bb={};var pb=Object.keys(b),sb;for(sb=0;sb<pb.length;sb++){var Ub=pb[sb];0<=Xa.indexOf(Ub)||(bb[Ub]=b[Ub])}}if(Object.getOwnPropertySymbols)for(sb=Object.getOwnPropertySymbols(b),
Ub=0;Ub<sb.length;Ub++)pb=sb[Ub],0<=Xa.indexOf(pb)||Object.prototype.propertyIsEnumerable.call(b,pb)&&(bb[pb]=b[pb]);b=bb}m.shared=uh({target:K,eventOptions:Z,window:ia,enabled:ua,transform:Ia},fD);if(g){var kc=Gv.get(g);m[g]=uh(ki({shared:m.shared},b),kc)}else for(kc in b)(g=Gv.get(kc))&&(m[kc]=uh(ki({shared:m.shared},b[kc]),g));return m}function oh(b,g){b.gestures.add(g);b.gestureEventStores[g]=new Ly(b,g);b.gestureTimeoutStores[g]=new dD}function Wj(b,g,m,K,Z,ia){if(b.has(m)&&Hv.has(K)){var ua=
m+"Start",Ia=m+"End";Z[K]=Xa=>{let bb=void 0;if(Xa.first&&ua in g)g[ua](Xa);m in g&&(bb=g[m](Xa));if(Xa.last&&Ia in g)g[Ia](Xa);return bb};ia[K]=ia[K]||{}}}function yk(b,g={},m,K){const Z=Ev.default.useMemo(()=>new eD(b),[]);Z.applyHandlers(b,K);Z.applyConfig(g,m);Ev.default.useEffect(Z.effect.bind(Z));Ev.default.useEffect(()=>Z.clean.bind(Z),[]);if(void 0===g.target)return Z.bind.bind(Z)}function Xj(b){b.forEach(Jk);return function(g,m){m=m||{};const K={},Z={},ia=new Set;for(let Ub in g)cD.test(Ub)?
(ia.add(RegExp.lastMatch),Z[Ub]=g[Ub]):K[Ub]=g[Ub];const [ua,Ia,Xa]=[Z,K,ia];g={};Wj(Xa,ua,"onDrag","drag",g,m);Wj(Xa,ua,"onWheel","wheel",g,m);Wj(Xa,ua,"onScroll","scroll",g,m);Wj(Xa,ua,"onPinch","pinch",g,m);Wj(Xa,ua,"onMove","move",g,m);Wj(Xa,ua,"onHover","hover",g,m);const {handlers:bb,nativeHandlers:pb,config:sb}={handlers:g,config:m,nativeHandlers:Ia};return yk(bb,sb,void 0,pb)}}function Nl(b,g){return Xj([mD,jD,kD,hD,iD,nD])(b,g||{})}function Um(b){const {viewport:g,inputs:m,callbacks:K}=Rg(),
Z=Cv.useRef(void 0),ia=Cv.useRef([0,0]),ua=Cv.useMemo(()=>({onWheel:Ia=>{var Xa;({event:Ia}=Ia);Ia.preventDefault();const {deltaY:bb,deltaX:pb}=Ia;var sb=0;if(Ia.ctrlKey||Ia.metaKey){sb=Math.sign(Ia.deltaY);let sc=bb;10<Math.abs(Ia.deltaY)&&(sc=10*sb);sb=sc}const [Ub,kc,Mb]=[pb,bb,sb];"pinching"!==m.state&&((Ia.altKey||Ia.ctrlKey||Ia.metaKey)&&0===Ia.buttons?(sb=g.bounds,Ia=null!=(Xa=m.currentScreenPoint)?Xa:[sb.width/2,sb.height/2],Xa=g.camera.zoom,g.onZoom(Ia,Xa-Mb/100*Xa)):(Xa=re.mul(Ia.shiftKey&&
!ji()?[kc,0]:[Ub,kc],.8),re.isEqual(Xa,[0,0])||g.panCamera(Xa)))},onPinchStart:({event:Ia,delta:Xa,offset:bb,origin:pb})=>{var sb;const Ub=b.current;Ia instanceof WheelEvent||!(Ia.target===Ub||null!=Ub&&Ub.contains(Ia.target))||(null==(sb=K.onPinchStart)?void 0:sb.call(K,{type:"canvas",order:0,delta:[...Xa,bb[0]],offset:bb,point:re.sub(pb,m.containerOffset)},Ia),Z.current=pb,ia.current=[0,0])},onPinchEnd:({event:Ia,offset:Xa,origin:bb})=>{var pb;const sb=b.current;Ia instanceof WheelEvent||!(Ia.target===
sb||null!=sb&&sb.contains(Ia.target))||"pinching"!==m.state||(null==(pb=K.onPinchEnd)?void 0:pb.call(K,{type:"canvas",order:0,delta:[0,0,Xa[0]],offset:Xa,point:re.sub(bb,m.containerOffset)},Ia),ia.current=[0,0])},onPinch:({event:Ia,offset:Xa,origin:bb})=>{var pb,sb=b.current;if(!(Ia instanceof WheelEvent)&&(Ia.target===sb||null!=sb&&sb.contains(Ia.target))){Z.current||(Z.current=bb);sb=re.sub(Z.current,bb);var Ub=re.sub(sb,ia.current);null==(pb=K.onPinch)?void 0:pb.call(K,{type:"canvas",order:0,delta:[...Ub,
Xa[0]],offset:Xa,point:re.sub(bb,m.containerOffset)},Ia);ia.current=sb}}}),[K]);Nl(ua,{target:b,eventOptions:{passive:!1},pinch:{from:[g.camera.zoom,g.camera.zoom],scaleBounds:()=>({from:g.camera.zoom,max:$o.maxZoom,min:$o.minZoom})}})}function jk(b,g,m,K){Dv.useLayoutEffect(()=>{b.current.style.transform=`translate(
        calc(${g.minX}px - var(--tl-padding)),
        calc(${g.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[g.minX,g.minY,m,g.rotation]);Dv.useLayoutEffect(()=>{const Z=b.current;Z.style.width=`calc(${Math.floor(g.width)}px + (var(--tl-padding) * 2))`;Z.style.height=`calc(${Math.floor(g.height)}px + (var(--tl-padding) * 2))`},[g.width,g.height]);Dv.useLayoutEffect(()=>{const Z=b.current;void 0!==K&&(Z.style.zIndex=K.toString())},[K])}function Ei(b,g){const {onPersist:m,onSave:K,onSaveAs:Z,onError:ia,onMount:ua,onCreateAssets:Ia,onCreateShapes:Xa,onDeleteAssets:bb,onDeleteShapes:pb,
onDrop:sb,onPaste:Ub,onCanvasDBClick:kc}=g;Ky.useLayoutEffect(()=>{const Mb=[];if(b)return b.history.reset(),window.tlapps=window.tlapps||{},window.tlapps[b.uuid]=b,ua&&ua(b,null),()=>{Mb.forEach(sc=>sc());window.tlapps&&delete window.tlapps[b.uuid]}},[b]);Ky.useLayoutEffect(()=>{const Mb=[];m&&Mb.push(b.subscribe("persist",m));K&&Mb.push(b.subscribe("save",K));Z&&Mb.push(b.subscribe("saveAs",Z));ia&&Mb.push(b.subscribe("error",ia));Xa&&Mb.push(b.subscribe("create-shapes",Xa));Ia&&Mb.push(b.subscribe("create-assets",
Ia));pb&&Mb.push(b.subscribe("delete-shapes",pb));bb&&Mb.push(b.subscribe("delete-assets",bb));sb&&Mb.push(b.subscribe("drop",sb));Ub&&Mb.push(b.subscribe("paste",Ub));kc&&Mb.push(b.subscribe("canvas-dbclick",kc));return()=>Mb.forEach(sc=>sc())},[b,m,K,Z,ia])}function kk(b){if("app"in b)return b.app;const [g]=Jy.useState(()=>new TC(b.model,b.Shapes,b.Tools));Jy.useLayoutEffect(()=>{g.initKeyboardShortcuts();return()=>{g.dispose()}},[g]);return g}function Zh(b,g){vp.useEffect(()=>{"model"in g&&g.model&&
b.loadDocumentModel(g.model)},[g.model])}function hj(b){const g=Rg(),{viewport:{bounds:m}}=g;Ho.useEffect(()=>{const K=ua=>{ua.preventDefault()},Z=ua=>{if(0!==ua.touches.length){var Ia=ua.touches[0].pageX,Xa=ua.touches[0].radiusX||0;(10>Ia-Xa||Ia+Xa>m.width-10)&&ua.preventDefault()}},ia=b.current;if(!ia)return()=>{};ia.addEventListener("touchstart",K,{passive:!0});ia.addEventListener("gestureend",K,{passive:!0});ia.addEventListener("gesturechange",K,{passive:!0});ia.addEventListener("gesturestart",
K,{passive:!0});ia.addEventListener("touchstart",Z,{passive:!0});return()=>{ia&&(ia.removeEventListener("touchstart",K),ia.removeEventListener("gestureend",K),ia.removeEventListener("gesturechange",K),ia.removeEventListener("gesturestart",K),ia.removeEventListener("touchstart",Z))}},[b,m.width])}function Lh(b,g){const {inputs:m,callbacks:K}=Rg();return lD.useMemo(()=>({onPointerDown:Z=>{var ia,ua;const {order:Ia=0}=Z;Ia||(null==(ia=Z.currentTarget)?void 0:ia.setPointerCapture(Z.pointerId));ia=b.props.handles[g];
null==(ua=K.onPointerDown)?void 0:ua.call(K,{type:"handle",shape:b,handle:ia,id:g,order:Ia},Z);Z.order=Ia+1},onPointerMove:Z=>{var ia;const {order:ua=0}=Z,Ia=b.props.handles[g];null==(ia=K.onPointerMove)?void 0:ia.call(K,{type:"handle",shape:b,handle:Ia,id:g,order:ua},Z);Z.order=ua+1},onPointerUp:Z=>{var ia,ua;const {order:Ia=0}=Z;Ia||(null==(ia=Z.currentTarget)?void 0:ia.releasePointerCapture(Z.pointerId));ia=b.props.handles[g];null==(ua=K.onPointerUp)?void 0:ua.call(K,{type:"handle",shape:b,handle:ia,
id:g,order:Ia},Z);Z.order=Ia+1},onPointerEnter:Z=>{var ia;const {order:ua=0}=Z,Ia=b.props.handles[g];null==(ia=K.onPointerEnter)?void 0:ia.call(K,{type:"handle",shape:b,handle:Ia,id:g,order:ua},Z);Z.order=ua+1},onPointerLeave:Z=>{var ia;const {order:ua=0}=Z,Ia=b.props.handles[g];null==(ia=K.onPointerLeave)?void 0:ia.call(K,{type:"handle",shape:b,handle:Ia,id:g,order:ua},Z);Z.order=ua+1},onKeyUp:Z=>{var ia;const ua=b.props.handles[g];null==(ia=K.onKeyUp)?void 0:ia.call(K,{type:"handle",shape:b,handle:ua,
id:g,order:-1},Z)},onKeyDown:Z=>{var ia;const ua=b.props.handles[g];null==(ia=K.onKeyDown)?void 0:ia.call(K,{type:"handle",shape:b,handle:ua,id:g,order:-1},Z)}}),[b.id,m,K])}function Dh(b,g,m=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${g})${m?" scale(-1,-1) translate(0, -32)":""}'>`+b.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function pi(b,
g,m=0){bD.useEffect(()=>{const K=b.current;K&&K.style.setProperty("--tl-cursor",aD[g](Zk.radiansToDegrees(m)))},[g,m])}function nl(b){const {viewport:g}=Rg(),m=dg();QD.useLayoutEffect(()=>ad(()=>{var K;const Z=g.camera.zoom;"pinching"!==m.inputs.state&&null!=Z&&(null==(K=b.current)?void 0:K.style.setProperty("--tl-zoom",Z.toString()))}),[])}function Yk(b,g=0){const [m,K]=(0,az.useState)(b);(0,az.useEffect)(()=>{let Z=!1;const ia=setTimeout(()=>{Z||K(b)},g);return()=>{Z=!0;clearTimeout(ia)}},[b,g]);
return m}function ij(){const b=dg();Fv.useEffect(()=>{de(()=>Wa({},b.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+b.currentPageId,JSON.stringify(b.viewport.camera))})},[b.viewport.camera]);Fv.useEffect(()=>{var g;const m=JSON.parse(null!=(g=window.sessionStorage.getItem("logseq.tldraw.camera:"+b.currentPageId))?g:"null");m?b.viewport.update(m):b.selectedIds.size?b.api.zoomToSelection():b.api.zoomToFit()},[b])}function Hg(b){b()}function rj(b){return pc(af(b,void 0))}
function hi(b){return{reaction:b,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+Lt}}function Nj(b){var g=new Map,m=1,K=new b(function(Z){var ia=g.get(Z);ia&&(ia.reaction.dispose(),g.delete(Z))});return{addReactionToTrack:function(Z,ia,ua){var Ia=m++;K.register(ua,Ia,Z);Z.current=hi(ia);Z.current.finalizationRegistryCleanupToken=Ia;g.set(Ia,Z.current);return Z.current},recordReactionAsCommitted:function(Z){K.unregister(Z);Z.current&&Z.current.finalizationRegistryCleanupToken&&g.delete(Z.current.finalizationRegistryCleanupToken)},
forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}function Eh(){function b(){void 0===K&&(K=setTimeout(g,1E4))}function g(){K=void 0;var Z=Date.now();m.forEach(function(ia){var ua=ia.current;ua&&Z>=ua.cleanAt&&(ua.reaction.dispose(),ia.current=null,m.delete(ia))});0<m.size&&b()}var m=new Set,K;return{addReactionToTrack:function(Z,ia,ua){Z.current=hi(ia);m.add(Z);b();return Z.current},recordReactionAsCommitted:function(Z){m.delete(Z)},forceCleanupTimerToRunNowForTests:function(){K&&
(clearTimeout(K),g())},resetCleanupScheduleForTests:function(){var Z;if(0<m.size){try{for(var ia=BD(m),ua=ia.next();!ua.done;ua=ia.next()){var Ia=ua.value,Xa=Ia.current;Xa&&(Xa.reaction.dispose(),Ia.current=null)}}catch(pb){var bb={error:pb}}finally{try{ua&&!ua.done&&(Z=ia.return)&&Z.call(ia)}finally{if(bb)throw bb.error;}}m.clear()}K&&(clearTimeout(K),K=void 0)}}}function zi(){return new SD}function zk(b,g){void 0===g&&(g="observed");var m=cz(Hs.default.useState(zi),1)[0],K=cz(Hs.default.useState(),
2)[1],Z=Hs.default.useRef(null);if(!Z.current)var ia=new lg("observer".concat(g),function(){ua.mounted?K([]):ua.changedBeforeMount=!0}),ua=JD(Z,ia,m);m=Z.current.reaction;Hs.default.useDebugValue(m,rj);Hs.default.useEffect(function(){RD(Z);Z.current?(Z.current.mounted=!0,Z.current.changedBeforeMount&&(Z.current.changedBeforeMount=!1,K([]))):(Z.current={reaction:new lg("observer".concat(g),function(){K([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},K([]));return function(){Z.current.reaction.dispose();
Z.current=null}},[]);var Ia,Xa;m.track(function(){try{Ia=b()}catch(bb){Xa=bb}});if(Xa)throw Xa;return Ia}function pf(b,g){var m;if(fz&&b.$$typeof===fz)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");g=null!==(m=null===g||void 0===g?void 0:g.forwardRef)&&void 0!==m?m:!1;var K=b,Z=b.displayName||b.name;if(ez&&b.$$typeof===ez&&(g=!0,K=b.render,"function"!==
typeof K))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");m=function(ia,ua){return zk(function(){return K(ia,ua)},Z)};""!==Z&&(m.displayName=Z);b.contextTypes&&(m.contextTypes=b.contextTypes);g&&(m=(0,Hr.forwardRef)(m));m=(0,Hr.memo)(m);tj(b,m);return m}function tj(b,g){Object.keys(b).forEach(function(m){TD[m]||Object.defineProperty(g,m,Object.getOwnPropertyDescriptor(b,m))})}function Cm(b){var g=b.render;b=b.children||g;return"function"!==typeof b?null:zk(b)}function Kk(b){const g=
dg(),{callbacks:m}=Rg(),K=Zy.useRef(!1);Zy.useEffect(()=>{const Z=Xa=>{var bb,pb;if(null==(bb=b.current)?0:bb.contains(document.activeElement))null==(pb=m.onKeyDown)?void 0:pb.call(m,{type:"canvas",order:-1},Xa),K.current=Xa.shiftKey},ia=Xa=>{var bb,pb;if(null==(bb=b.current)?0:bb.contains(document.activeElement))null==(pb=m.onKeyUp)?void 0:pb.call(m,{type:"canvas",order:-1},Xa),K.current=Xa.shiftKey},ua=Xa=>{var bb,pb,sb;!g.editingShape&&(null==(bb=b.current)?0:bb.contains(document.activeElement))&&
!["INPUT","TEXTAREA"].includes(null!=(sb=null==(pb=document.activeElement)?void 0:pb.tagName)?sb:"")&&(Xa.preventDefault(),g.paste(Xa,K.current))},Ia=Xa=>{var bb,pb,sb;!g.editingShape&&0<g.selectedShapes.size&&(null==(bb=b.current)?0:bb.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(sb=null==(pb=document.activeElement)?void 0:pb.tagName)?sb:"")&&(Xa.preventDefault(),g.copy())};window.addEventListener("keydown",Z);window.addEventListener("keyup",ia);document.addEventListener("paste",
ua);document.addEventListener("copy",Ia);return()=>{window.removeEventListener("keydown",Z);window.removeEventListener("keyup",ia);document.removeEventListener("paste",ua);document.removeEventListener("copy",Ia)}},[])}function ul(b){const {inputs:g,callbacks:m}=Rg(),K=Xy.useRef(-1);return Xy.useMemo(()=>({onPointerDown:Z=>{var ia,ua;const {order:Ia=0}=Z;Ia||(null==(ia=Z.currentTarget)?void 0:ia.setPointerCapture(Z.pointerId));null==(ua=m.onPointerDown)?void 0:ua.call(m,{type:"shape",shape:b,order:Ia},
Z);Z.order=Ia+1},onPointerMove:Z=>{var ia;const {order:ua=0}=Z;null==(ia=m.onPointerMove)?void 0:ia.call(m,{type:"shape",shape:b,order:ua},Z);Z.order=ua+1},onPointerUp:Z=>{var ia,ua,Ia;const {order:Xa=0}=Z;Xa||(null==(ia=Z.currentTarget)?void 0:ia.releasePointerCapture(Z.pointerId));null==(ua=m.onPointerUp)?void 0:ua.call(m,{type:"shape",shape:b,order:Xa},Z);ia=Date.now();ua=ia-K.current;300<ua?K.current=ia:300>=ua&&(null==(Ia=m.onDoubleClick)?void 0:Ia.call(m,{type:"shape",shape:b,order:Xa},Z),K.current=
-1);Z.order=Xa+1},onPointerEnter:Z=>{var ia;const {order:ua=0}=Z;null==(ia=m.onPointerEnter)?void 0:ia.call(m,{type:"shape",shape:b,order:ua},Z);Z.order=ua+1},onPointerLeave:Z=>{var ia;const {order:ua=0}=Z;null==(ia=m.onPointerLeave)?void 0:ia.call(m,{type:"shape",shape:b,order:ua},Z);Z.order=ua+1},onKeyUp:Z=>{var ia;null==(ia=m.onKeyUp)?void 0:ia.call(m,{type:"shape",shape:b,order:-1},Z)},onKeyDown:Z=>{var ia;null==(ia=m.onKeyDown)?void 0:ia.call(m,{type:"shape",shape:b,order:-1},Z)}}),[b.id,g,m])}
function qm(b){var {viewport:g,inputs:m,callbacks:K,components:Z}=b;b=Yb(b,["viewport","inputs","callbacks","components"]);return(0,Jb.jsx)(ZD,{id:b.id,viewport:g,inputs:m,callbacks:K,components:Z,meta:b.meta,children:(0,Jb.jsx)(XD,Wa({},b))})}function Zl(){return(0,Jb.jsx)("img",{className:"logseq-img-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAIAAACxN37FAAAcXElEQVR4nOyde2xb13nAzzmXXkk6D1GiFNN6xFQt6+HYnZTVSqWgduR4qZ1C7qoAzRYPLdJ0W4egWIdh6ApsK9YAHfLH9kdTLN6S9LV0eVhe4yaxk0ZK4lhqrdhSmtikFDmmHo6ViJTIthFJz9I9wznnXpKOX5RM3nN57veroMoOxftZ+vHjd77zuC60cQsCAFUgsgMAgEICQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNK4ZIdAHABbq/H7fHm/k1ibk5eOKUHCC2TQG1NoK56TW21z1+xtq7a7fG4vZ6LH5ZOpmam308lU5HR8cjYqZnpMzKCLQ0w3OvbYtxeT1tHe7Cpob5x/SX1vSrx2HxkbHx4YCgyNl6EAEsbENoi3F7PrZ3tza2bg43rC/Wc8dh8/4GDwwNHC/WECgBCFx2319O5Y1vHndtWlo+vSjw23/vEk5CtBSUgdFlFRX3T+jW11R6v1+cvz/x9KpmKx+YSsfmZ6fft+et0e72dO7YWT+Vc+g8c6nvuxWJfxf7YV2iR2No628sqyvN5fGTs1PEjRyNj44m5+eJHd3U6d9zR1f05C1TOEBp5u/eJJ9PJlGVXtCF2FDpQW333n/asuNYcHjja99xBiVr7/OU99+8pYK2cP8MDR3ufeNL669oHDVVVy44hi9vrueue7p779+SWFsslUFfTuWObz1/+wfRZ69NVS9vmr/zN1ysDN1l8XUGgriadTJ2JTEq5uh2wkdBr62oe+PtvNNzSXJBnC9TVdOzY5lntnT49sXh+sSDPeVW27965+8+/5Fq1yprLXZINm5qPHzmaTjm08LCL0M2tm/c8+MB1N95Q2KetrV+3ecutkbFTH/3ud4V95ovZvntnV/fOYl8lP+j4iVHZMchBvtAY47bO2+79yy8XKbF5vJ4t2zoxxkXthNjJZlQVWDP02pHFRYvel2yF/MVJa2rW3n3vnxT7Kl3dn7v73i8W6clv7Wy3j81iKLK2tgZRKjsQCcgUGmPs85fvefBr1vS2OnZsu+/BBwp+LZ+/YlfRXiorJlBXjWXHIAWZQlNKt3fvLLuGhsZyaeGVungtFeo5t1vbbM4Tt8fjxPwsV+jm1k2tne0WXzTY2NBz/320EG/HGOP6xvXW/xPyg2LkRKXlCU3p5+/tkXLlts727bt3XnuSprresWNbgYIqMGcnp9mL1nlltCShKa1varCy2PgYXd0712345LU8A0ao3F/R3Lq5cEEVkpnJaRGk05CWoaXnNjYY9bhX/O2U0ptq1xY0ooIRj8bEPhfH5WdZQnu8Hum5ze313PPVPdeSw9bW1RQwngLSt/8XwmWMHZekZQhN6ToZC3cuZsXL7TH/8OW3DNBi4tHYxOi7LD5eQDstScvJ0BvbPiXluhfT1b1zuSMnrop9x1v9+w8kYvO8B0PsGmMRsVxoSjGia2ptsYAEIRRsaqhvalje9/D+CEU0tZAsVlgr5XRodPiNQcreQTB1WrXBkZChKaXXsjq04Cw3SVMOonRmarqYcS2beDTWu/cJ/oLDRllUuPmjUkGC0B6v1+31Wn/dy7HiJB06/laxYlo+6WTy8YceZsUGJtSRKgusF5peS7OsSDS3blpuTUy5Q5HwWNGCWgbC5ji3mbc2CE/TTnTaWqHtOpZq67xtRb983Lv3h4WPZpnEo7FH/uE7ZyemmcqEIEIwYTbb8QddfKwT2kwY2IZOu72eYON6PmDNCyx6vAjFY3Mv/OSpYod3BSKh0Ue+9Z1EbA4TYiZmXnI4FeuENtYDsc+2E1qst8y/a2s8jNsz+NIrI4cHixrbJUknky/+5GePfffhdCpFMaaYYI2lZ8rqZ4emZxk7VqiOEf7s5++y9KJ5cP78+XeGjudZd7KHZZWh4WPDbq+3tuGaFocsi0ho9Ef/+m/jb580KmaiITNDGx9OxdLDGjFCFONUciGdTNqq0SE21RozJnnYQA2pCWWZkdAl+sJPn4pHY9vv2V3sf1ckNNrX+1wkNIpFgUE0VmAIm4lDW3W5WCc0znlDn5k6E2zaYNml88Hnr8jTZiEzpdSYv+Dv8YjSwUO/DB8b7urZ3bb19mJEaKrM+yqYUGYzoZm2BiFOrjQyWCd0zs8az0xO201ofuZYeWI+kc8jDfUp4iYZf4kpjcfm9u99or/3ue09X2jd2lmQqCKh0dCx4eHXB9LJJDYrCuauqJsJN5v7DTZbm6H5hDHV2deR8HjHXdstu3S+sDdvJmmeZoiMKAoP9qZPKdaZ6/Ho3L5HH+vb9/NgS1Pb1s7Aurrl1iGJaOx0aPSDyanjpse8yMmWyNSoN/jf5B2wE7AwQ/P3ZvGefjpsx1MjfJXlifl4/iWo0Ii/9WuIEqovsWxNKaI6ojgxNzd8eGDk8ABFtL6lac3NtWV+v6/K7/F6yyr9uRdJJZOJaCy1kJyZnIpHYzMTU4lY5tR+zGf+kOmxkYxZYuaXhqL5Y1g6KGRO84FhOpmKhMeCzY1WXj0f8h8Xmt+AzX8VYlojQpeWkNFtp2LdB0I4Eh47HRoVelLxQqAX7CcRX1JjoCGmRXImR4zuMuJdOW42ynYzREFf6J9EqWLtTCH/DfFfMRp541eWXjoPEtEV3c1E2G8UtRhpGtJcRh+NEPZHw0KSOy9tdtmMD5qZryYaMotjJD6zp9Ko+VRmQ4NkXnVgcy7Wr+XgmygwPnlsJJ201/LLVDJJMx25ZSGSJSHYEFFMQWs4ozX/AhtfE2Etfxg2S2FCiTlxbbwGCNUIJRp/hWhCa/ZIlE3MxfpBlDJWC41FKkI4nUoNHnrF4qtfgXQyyYZf4g8rynmi85Cd5iCEChF5wsaaRkWiJYQKxTVmPP97gjUXJiKvm9+iideDlvs6yV1GB4n5klgqdLba46OZgUOv2CdJz0xOI2qO81b0DDSz5SlbYBAjMXPLeeo1NMXccpaGTWszRQU1Xg9apvBA0JLLG0uF5sMnLNaCIcyGhgMH7ZKkI6PvmsmvMPIYPWOExUyeaBtnKgdWYGBipmFi/CdWTJNsXWF6DDbnj9UlhxgUUjNJDx56ZYVDsUJzOjQmBneFOs0i06AwPwg2W2/862z2RcbcNb7gA1gRMjbJYnMkRMi5VGrf3sclxHAhfKf0eFbB4kBzvsisOaQXXRGK42tBgtBixxtv3rF0FQm/O3jol9aHkUskPGamRrmBANeKnE2yKPtezN5q+3oPyC08+vb/wsiKkBxLHElHgV1QL5JzqfRjDz0sq+MxfHiA7y2F4lUFpJ7gj43JMIpwIjb3+HclOB2Pxvp6D2BiegxClzjShM6shKRIrOvFZ6emrXe6r/e5RGxexGDP/Y7AspB/06CccRj9feK34785sbljizV3Rhs4+PIbz7+ERWM4M2sNlDKyhTZX9mBzQ8tHicSJwaGWP2p1ry7uXqaZiekn//0HfO1E1mZYIFHqyBZawBdKixWVGOPUwkL42IjH6w2sqyvSBWcmph576OHFxSUxP8dn77CTd/8rg3yhWWqkH5+eSycXQnw5XtXaQMFT9fDrR57+/t50Om2uxtQgPSuDfKFRtreAMWF5GptMj783WtBUnU4mX/qfZ19+undxaZGv4eRrNcVqT0AJMNq4RXYMxio8zE/tQJRSfQnpFOk6QrpY+eGrrLj23dSnQ6O9jz6ebTnzdck0s1EPUAJbCJ1FHH5nbMvTka4Ly6nOBozllf6unu5gS1NZpT//p0wnk5GTowMHX46E3xWT29xjbCxzQ849Bk5JbCS0sVpadIKZypTqOj//Qs+KzlshweamYEtjsKVp7eU3VCeisfdCoxOhsfCx4VQyhXIn24mx+99c7CaNsooKj9fj9nrEgdluj+fie3gm5ub5IXrGZ3E3IOBy2EhogbEkmR/0T3VTZVZ+0Byts6suPF6vr9L/CaY1Fa2/RGwu9dFCOpUSz8dncMT+U3OVZs6pWZbtMGXWVlQE6qrX1Fb7/BVr66rLVnqLlnQyNTP9fjqZOjt1Zmb6/URsfmb6TKHjLVVsJ7R5cpzYL00xRTkZWiTsHKdpbn/k4o3URpM7uyJZ1BgEW1NplFVU1DetDzY21DetX7G++SAUPzt1Jjzyzsz0mbR4R3IkdhRaYMy0iDIjW1tTUZcYohtQJE4yMs8zMrbiGkJnkjHhh3fxhkbRKg231xOorWlp3dTStrmoEl+ByNip06PjkbFTkbFxKQFIxL5CZ8k5h5efanFBPZ3zXwVikgZnDmdBhtM5p1sUAeFxx45t9Y3r7XMv+3hsPjI2Pjww5ByzS0FoQUZZfiAv01qnRiLmdYiYFsn6ijHK1BXmBHsxjmUJNja0tG1q62i3j8cXw80+1X/gYDym+JiyZITOisg/m9tZqXncEM3Z4GpuDkQ4ewJdEQZ/t97e3trRvrJbd8oiMnbq+JGjI4NHZQdSLEpG6Fw+LjfGmS3l2e0w4o9FuLrb6+nccUfHnVvtnJKvTDw233/g4PCAglqXpNAXYzRGinzQm9vr7dyxtePObaWrci7x2Hzfcwff+tWQSttyFRHaAm69vX3Xl76ohsq5iGw9MqiI1iD0VcAYBxvXd3XvLK1aebnEY/NP/uCxmamSn6ABoS8Lxtjt9XR17+y4c6vsWCxieGCo1Dsh9lg+akvqmxq+8s2vN9zSLDsQ6wjUVTe3bk6n0qU7lw5CX5rtu3f23H+fehXzVfF4PS2tm3z+8sjYqcXzi7LDWTYg9Mfx+cv3PPi1ts522YHIJFBXs3nLreG33jmXSsuOZXmA0Bewtq7mK9/8eqAWfiYsVbd1ti+eXzwTmZQdyzIAobM0t27e8+AD1914g+xA7IJr1So+hMAT756SHUu+gNAGnTu29dx/nzXngZQWwcb1ZRXl4ZF3ZAeSFyA0Ihh37d75xz3dsgOxL4G6mpa2TW8PDdt/mAhCo67dO7u6d8qOwu5cf+MNGza1vPPmyOL587JjuRLOFVosaWrr3HL3vT2yYykNrr/xhoZbmm2epx19HsXa2uqe+/fIjqKUCNRW73nwAdlRXAknZmhxio2vwvflb/61A6dOrhGfv6LcXxEaeVt2IJfGiUKLveJ/9e2/LfPL2fNX6gTqqjGikTE79vIcV3KI9NzVfRfYfC107d5Vb8vlh44TGiHa2vHpjh13yA6j5Lnvwa+VlfvsdsKlg4QWP/qyct/27l2yY1EBt9dzz1f3IHN7sk1wkNCUUsKKjV1QbBSKYFPDZ2y2WNwpQossclN1oO12Ry+jKzjbd++yVeHhFKFZekZozzf+QnYgquH2enruv88+hYcjhBZn87d2tss6m0ttgk0NwQ2flB2FgSOEFuc7woKN4tG1exfVl+yQpNUXWqTnYON6GAsWj2BTQ31jA8oenykN9YVGPEV/BhrPRaZr9y473IlXcaExxlTXy/0VLW2bZceiOLySXi99dKi40OJeRE1/eIvsQBxB1xd2GSMWeagstDjwDlG99fbbZMfiCIKNDZ9wfwIhmUlaZaHFebo+f0WgrkZ2IE6hrfM2BBm6eFCqq30mnd1oaduML7ihgtUoLbQooFs/JTsOBxFs2uD2uEHowsMPitYRpb7KCtmxOIt1G9ZTeb0OZYWmVMcUuT0eKKAtJtjUIG5xLeXqagpt3G0T0UCdEzeYyWVtXS2W17xTU+hMN9Tnh3rDagI319DMTfcsR1mhmdG6fiMsr7Mct9fr81fgC27rax1qCm3cVpnv7pYdixPx+cuRnr1BmZWoKTRv2GFKdc9qOHZDAmUV5ZTqVMbiOwWFzmQFgokad3YqOdxej7i9uvU/fwWFzr0Dp+zFjA7Fs9qLKKK6hGyioNDmaTKI6jokaDlQvomTSMgnagrN72avSxmUABw2IocMXRhyJKap5ILcYJyJqPcogkFhIRBbYhFiZXR8NiY7HCeSXkjyrRVQchQIah7KeC6Zkh2LE4nHYnxzhYT5QjWFNsGR0KjsGJxIeiElaziuptCZtt18NJZOJmWH4zg+mJxCmWaTtagpNAcjvuQuHoUy2lLSC8nUgpFErC+jFRZaHBKBIyfDsuNwFjOTUzw3E4yQbvlKf3WF5j9HjHH4zWHZoTiLmQlRbyCEifWz32oKbfwI+XqCs5PTUEZbSSQ0auyvkIGaQgv4j5WcS6VmIlOyY3EQkfAYwtK2yaorNE/P4quBFw/JjsYpRE6GU8kFygsOBKvtCgir3vgSUopxJDQKVYc1DL/+BkYEEwIlR6HhLQ7K80Q6lRp8HpK0FURCo+Inj0RCsRxlhWZvdhhjQjDRECIjrx+RHZH6DL96OB6d4++KCGM5aikrtAnfOKFp8djcyKuHZQejOKzeIIRLJc0rpYUW40JMxBd9z+yXHZDKzEQmJ0JjmGhUTKoQyNDFALMhCqs6CIEkXVQGXziEMKFYVM8SVnEIVBZalNH8QAOWp4mmvfCjn0K7oxjEZ6Mjh4+wrMzHLQhjXZdzvxWVhRaw9IwJJUTHOJ1K9z/dKzsiBdn/g/9kpR1TWSRpaZEoLjRP0ny9PyGIFR7a4IsvzUxMyo5LKYZfff10KIwIV5mwCk9Wi0N9ocXZ2/xNkJXRIoX0PvJoegEKj8IQn432P7Mf8fYo1jRDa3moLzTiQ0OKkRgaUow/mJzufwYKj8Lw6rP7E3PzCLOKjld3WO59g5wiNHsT5CUH0njh8cKh8JvHZIdV8gy/enj4tTcQJlhzYaLpCEnsbwicITT7hxJ+kpKGiUZ5l7T3+48mZqOywypheLHRy1KyplHCht18VkXybd00VOWUI8H5ciVe4OkUUbp0/nx46Fhb11bXqlWyQys90gvJvd/+50Rsjmou/r7nwppL4ox3BsdkaLPwwJqGXS5ReMSjscf/6V+gM70Cnn/ix4nYHK/iWL0hpmOxDU7HdFaGFv9v/tBZnv59PLEQjze3f1pycCVF31P7fn3wZV5paNi1ihUbmia3uZHBQUJnwcbIhc8A4JmJycSHs+B0nvQ/va//2f2swCAEsfc6VnIQTZN/33qO44TG2UUzlP8GKKX0g4mpxOxs8xZw+ipwm/8XEYI0grVV2MVKZ0TkLH2+JI4T2txryP5HjT8yqWciE6NDxzbf3uH6AxgjXpr+p/b1PduLRdGsGbkZYYIlLay7JA4Vmm+vz2RrKu5w81Ei8fYbR1raP+1evVp2jLaD2fxML+YdOjaqJprx2U42O1RoA56oMeGTAQTz0zJROpkM/frN4KaN15eVyY7PLqQXkj/f+1+/evElrGlI07C2CokviMuGd0hwrtBYlBpiNTo1eyCU/f6GDv3Sc93q2g0NsmOUT3w2uvdb/zgRGuPzJqKt4UIuF7OZEBueJ+9coZFZfFDzcEdRVYtf0qm3fhP/cHZtcJ2Ty4/w0WM/fuh7H/3uI9GYQ5oLr1pFNT7bKnsC5XI4W2iBSDPkgkUIGKEPJiZDR98MBNf5qiplhieD9ELy5f/+2Qs//Mni0hLCRMxDYdcqXjTzTVYgtJ0xutIEI3NtjRg1/l8qdbzvtd9GowEnperIidCPv/u98d+8LZYcid4cNlvOfLOg7SqNDCC0QbbvITYR8ZYeq0MImZmYCA+96fZ6A8F1ssMsLiIxH9j7eDqdpnyZAOX9ZsSnA0WHzj4t50uC0cYtsmOwC8YwcWmJDRL1RbS4hKlOlxaRrlNdR5SWV1X+2bf+LhC8WXakRWHwFy/2P7MvtZDky0E1UWlQohGXi8nNKw3pSzWuCgh9AcJp9qEv8Q8mNGZCL2KKqK5jRNvu2Nr1pXvKFCqsIydCvY/8R3w2isUaI03TsTEKpHynIG8222g68AqA0B9HFNGUZ2VMl1jC5lojqmORv9l/VkTryIlQ/9P7Tp8IITF+MBeLY82oMZDYhGK/9tzlAKEvgZGnEeVOU1F1YKojXTfSNvuaPaB+08a2bVtbu7bKDnl5pBeSw/2vDT5/MD47y4Z9GPN+PNF5PiauVeZ+KkKNWdWSyM4IhL4sZmeaSc2+0lmeNoSmOlpaMioTvgbVV1nZ2rW17Y7PllVVyQ78KkROnAwPHT/e/+q5ZCr3WCkxBDR2qfGdlyxby452BYDQV4EXGKwEMQtrYTMz28jfui6KEEpRcGNzW9fW+ls22q0UESk5PHQscjLEV2MhVmPknKTBF80RY/DH1ySWos0g9DLAvALhSZp5jER5jVhVzcprZIwmxX1sg5tabr1jW/CWZrk5OzEbDR19Mzx07PSJk1ic0EX4phJhsxBa7DohGtKIOLCV5twXr+QAoZcFFaWzGB3ytK0bpYi4XT6rUijP6FTcR7Xipqp1Lc3rbmkJBNdZ08ZOzEbfO3Fy4kQocjKciEbFySTmuZXY6LIT7q7YAy8MFn06ebeSKBQg9DLIFNZCX5an2fhw0SiykfgjK68JeySvUvhd3MU3uld716y7uX7jxkDw5rKqykL5nZidfe9E6MPI1PzshxMnw6mFBXOyk1CjOSGqZFFjsPICaxpFOHPyjnGYRkGikQ0IvVLMESGrQNgfdWqMFEVBYiZsnqqNhXwok7lFIwXdWOn3Vfk9q68vq/J7rlt9Y6Xfu3q1+7rVmTu/+6oq52dnxeuB39By4dzCQmoh+dvZaDwWS8xG47NRkVOFw8aWBZJZZcWTrnAXm0WzKDCIqEC0Ei0tLgcIvXKMQpPqBBOdz7wwrYXfog5BOl3Subu6eKTYH8NfCLwhZhxiYSjFD+JD/KwFcSAfMj6LHb1IJHtjZzXh1tLMrpvMxgVxUhQ/pVKcK0Cz3YxclcWuBsnHaBQcl+wAShgj14q2gOYSpTPCS/yESII1Xk9rvLzmRTbBSOe6s89CZjE+o0byFtMX2FhDwl4tRMM6r9pF+UtEzSPOc+ExZJKxCEWcHczKZEJ0hIhmtCx41WF26MwlsoqpLAChr5VsCZHZR46MTp+uU+ziqVVfYjU1c5HZjEim/NAxwvyzkbMpzayKMvYfIN5VE7dIyxwVQLM7bjAW90ZC/Nm5zOIVINpwvNzBuSu/M2WPkoDQhSFHEfF2L2aSjUEhEkv5MF8NIuYrWN7VibA5I3H2bu86Qpmqw/BYWCkOCEbmsxudOPMuo/w/sWfl65Wx0VHOeakorLIAhC4KpjfG9nKsmUcKMed4DW3YiHJ7fLnfLr5T3MrLrED0zN2zxfp6w3PxLExcZLquIWy0zh3icQYQuuhkbjxOzfsYZWoMMyVTIxHnFjDCf2QU5MgcIpqDQHPDSCZniweJK5rtQhn/XMmA0FZjaoyNSpgQMUY0ZmSQ0bAzHmduC6P877OVQ+5knrojvBUAQssh45+4uU5uCY7MVgY2H5ljO734GYBcQGjbcXHVC+7mj0337gLAygChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGl+P8AAAD//zOPeTSLsacXAAAAAElFTkSuQmCC",
alt:"logseq"})}function Fi(b){return(0,Jb.jsx)("button",Wa({className:"tl-button"},b))}function hf(){hf=Object.assign?Object.assign.bind():function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g],K;for(K in m)Object.prototype.hasOwnProperty.call(m,K)&&(b[K]=m[K])}return b};return hf.apply(this,arguments)}function Of(b,g,{checkForDefaultPrevented:m=!0}={}){return function(K){null===b||void 0===b||b(K);if(!1===m||!K.defaultPrevented)return null===g||void 0===g?void 0:g(K)}}function Si(...b){return g=>
b.forEach(m=>{"function"===typeof m?m(g):null!==m&&void 0!==m&&(m.current=g)})}function Wg(...b){return(0,ND.useCallback)(Si(...b),b)}function yi(b,g=[]){let m=[];const K=()=>{const Z=m.map(ia=>(0,Io.createContext)(ia));return function(ia){const ua=(null===ia||void 0===ia?void 0:ia[b])||Z;return(0,Io.useMemo)(()=>({[`__scope${b}`]:rb(Wa({},ia),{[b]:ua})}),[ia,ua])}};K.scopeName=b;return[function(Z,ia){function ua(bb){const {scope:pb,children:sb}=bb,Ub=Yb(bb,["scope","children"]);bb=(null===pb||void 0===
pb?void 0:pb[b][Xa])||Ia;const kc=(0,Io.useMemo)(()=>Ub,Object.values(Ub));return(0,Io.createElement)(bb.Provider,{value:kc},sb)}const Ia=(0,Io.createContext)(ia),Xa=m.length;m=[...m,ia];ua.displayName=Z+"Provider";return[ua,function(bb,pb){if(pb=(0,Io.useContext)((null===pb||void 0===pb?void 0:pb[b][Xa])||Ia))return pb;if(void 0!==ia)return ia;throw Error(`\`${bb}\` must be used within \`${Z}\``);}]},og(K,...g)]}function og(...b){const g=b[0];if(1===b.length)return g;const m=()=>{const K=b.map(Z=>
({useScope:Z(),scopeName:Z.scopeName}));return function(Z){const ia=K.reduce((ua,{useScope:Ia,scopeName:Xa})=>{Ia=Ia(Z)[`__scope${Xa}`];return Wa(Wa({},ua),Ia)},{});return(0,Io.useMemo)(()=>({[`__scope${g.scopeName}`]:ia}),[ia])}};m.scopeName=g.scopeName;return m}function Ti(b){const g=(0,Kv.useRef)(b);(0,Kv.useEffect)(()=>{g.current=b});return(0,Kv.useMemo)(()=>(...m)=>{var K;return null===(K=g.current)||void 0===K?void 0:K.call(g,...m)},[])}function Lg({prop:b,defaultProp:g,onChange:m=()=>{}}){const [K,
Z]=Ui({defaultProp:g,onChange:m}),ia=void 0!==b;g=ia?b:K;const ua=Ti(m);m=(0,Ot.useCallback)(Ia=>{ia?(Ia="function"===typeof Ia?Ia(b):Ia,Ia!==b&&ua(Ia)):Z(Ia)},[ia,b,Z,ua]);return[g,m]}function Ui({defaultProp:b,onChange:g}){b=(0,Ot.useState)(b);const [m]=b,K=(0,Ot.useRef)(m),Z=Ti(g);(0,Ot.useEffect)(()=>{K.current!==m&&(Z(m),K.current=m)},[m,K,Z]);return b}function $k(b){return(0,Hm.isValidElement)(b)&&b.type===LD}function zj(b,g){const m=Wa({},g);for(const K in g){const Z=b[K],ia=g[K];/^on[A-Z]/.test(K)?
m[K]=(...ua)=>{null===ia||void 0===ia||ia(...ua);null===Z||void 0===Z||Z(...ua)}:"style"===K?m[K]=Wa(Wa({},Z),ia):"className"===K&&(m[K]=[Z,ia].filter(Boolean).join(" "))}return Wa(Wa({},b),m)}function Vi(b,g){b&&(0,MD.flushSync)(()=>b.dispatchEvent(g))}function mk(b){var g=b+"CollectionProvider";const [m,K]=yi(g),[Z,ia]=m(g,{collectionRef:{current:null},itemMap:new Map}),ua=pb=>{const {scope:sb,children:Ub}=pb;pb=ep.default.useRef(null);const kc=ep.default.useRef(new Map).current;return ep.default.createElement(Z,
{scope:sb,itemMap:kc,collectionRef:pb},Ub)};Object.assign(ua,{displayName:g});const Ia=b+"CollectionSlot";g=ep.default.forwardRef((pb,sb)=>{const {scope:Ub,children:kc}=pb;pb=ia(Ia,Ub);sb=Wg(sb,pb.collectionRef);return ep.default.createElement(Gr,{ref:sb},kc)});Object.assign(g,{displayName:Ia});const Xa=b+"CollectionItemSlot",bb=ep.default.forwardRef((pb,sb)=>{const {scope:Ub,children:kc}=pb,Mb=Yb(pb,["scope","children"]),sc=ep.default.useRef(null);pb=Wg(sb,sc);const lc=ia(Xa,Ub);ep.default.useEffect(()=>
{lc.itemMap.set(sc,Wa({ref:sc},Mb));return()=>void lc.itemMap.delete(sc)});return ep.default.createElement(Gr,{["data-radix-collection-item"]:"",ref:pb},kc)});Object.assign(bb,{displayName:Xa});return[{Provider:ua,Slot:g,ItemSlot:bb},function(pb){const sb=ia(b+"CollectionConsumer",pb);return ep.default.useCallback(()=>{const Ub=sb.collectionRef.current;if(!Ub)return[];const kc=Array.from(Ub.querySelectorAll("[data-radix-collection-item]"));return Array.from(sb.itemMap.values()).sort((Mb,sc)=>kc.indexOf(Mb.ref.current)-
kc.indexOf(sc.ref.current))},[sb.collectionRef,sb.itemMap])},K]}function Aj(b){const g=(0,nz.useContext)(aE);return b||g||"ltr"}function em(b){const g=Ti(b);(0,bE.useEffect)(()=>{const m=K=>{"Escape"===K.key&&g(K)};document.addEventListener("keydown",m);return()=>document.removeEventListener("keydown",m)},[g])}function fg(b){const g=Ti(b),m=(0,Gn.useRef)(!1),K=(0,Gn.useRef)(()=>{});(0,Gn.useEffect)(()=>{const Z=ua=>{if(ua.target&&!m.current){let Ia=function(){Ok("dismissableLayer.pointerDownOutside",
g,Xa,{discrete:!0})};const Xa={originalEvent:ua};"touch"===ua.pointerType?(document.removeEventListener("click",K.current),K.current=Ia,document.addEventListener("click",K.current,{once:!0})):Ia()}m.current=!1},ia=window.setTimeout(()=>{document.addEventListener("pointerdown",Z)},0);return()=>{window.clearTimeout(ia);document.removeEventListener("pointerdown",Z);document.removeEventListener("click",K.current)}},[g]);return{onPointerDownCapture:()=>m.current=!0}}function sm(b){const g=Ti(b),m=(0,Gn.useRef)(!1);
(0,Gn.useEffect)(()=>{const K=Z=>{Z.target&&!m.current&&Ok("dismissableLayer.focusOutside",g,{originalEvent:Z},{discrete:!1})};document.addEventListener("focusin",K);return()=>document.removeEventListener("focusin",K)},[g]);return{onFocusCapture:()=>m.current=!0,onBlurCapture:()=>m.current=!1}}function jj(){const b=new CustomEvent("dismissableLayer.update");document.dispatchEvent(b)}function Ok(b,g,m,{discrete:K}){const Z=m.originalEvent.target;m=new CustomEvent(b,{bubbles:!1,cancelable:!0,detail:m});
g&&Z.addEventListener(b,g,{once:!0});K?Vi(Z,m):Z.dispatchEvent(m)}function zg(){(0,dE.useEffect)(()=>{var b,g;const m=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(b=m[0])&&void 0!==b?b:$l());document.body.insertAdjacentElement("beforeend",null!==(g=m[1])&&void 0!==g?g:$l());Nv++;return()=>{1===Nv&&document.querySelectorAll("[data-radix-focus-guard]").forEach(K=>K.remove());Nv--}},[])}function $l(){const b=document.createElement("span");
b.setAttribute("data-radix-focus-guard","");b.tabIndex=0;b.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return b}function al(b,{select:g=!1}={}){const m=document.activeElement;for(const K of b)if(wf(K,{select:g}),document.activeElement!==m)break}function gg(b){const g=[];for(b=document.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,{acceptNode:m=>{const K="INPUT"===m.tagName&&"hidden"===m.type;return m.disabled||m.hidden||K?NodeFilter.FILTER_SKIP:0<=m.tabIndex?NodeFilter.FILTER_ACCEPT:
NodeFilter.FILTER_SKIP}});b.nextNode();)g.push(b.currentNode);return g}function Wi(b,g){for(const m of b)if(!xl(m,{upTo:g}))return m}function xl(b,{upTo:g}){if("hidden"===getComputedStyle(b).visibility)return!0;for(;b&&(void 0===g||b!==g);){if("none"===getComputedStyle(b).display)return!0;b=b.parentElement}return!1}function wf(b,{select:g=!1}={}){if(b&&b.focus){const m=document.activeElement;b.focus({preventScroll:!0});b!==m&&b instanceof HTMLInputElement&&"select"in b&&g&&b.select()}}function nk(b,
g){b=[...b];g=b.indexOf(g);-1!==g&&b.splice(g,1);return b}function Lj(b){return b.filter(g=>"A"!==g.tagName)}function xk(b){const [g,m]=tz.useState(fE());an(()=>{b||m(K=>null!==K&&void 0!==K?K:String(gE++))},[b]);return b||(g?`radix-${g}`:"")}function Mj(b){return b.split("-")[0]}function Ol(b){return["top","bottom"].includes(Mj(b))?"x":"y"}function Mi(b){return"y"===b?"height":"width"}function Bj(b,g,m){let {reference:K,floating:Z}=b;var ia=K.x+K.width/2-Z.width/2;const ua=K.y+K.height/2-Z.height/
2;b=Ol(g);var Ia=Mi(b);Ia=K[Ia]/2-Z[Ia]/2;const Xa="x"===b;switch(Mj(g)){case "top":ia={x:ia,y:K.y-Z.height};break;case "bottom":ia={x:ia,y:K.y+K.height};break;case "right":ia={x:K.x+K.width,y:ua};break;case "left":ia={x:K.x-Z.width,y:ua};break;default:ia={x:K.x,y:K.y}}switch(g.split("-")[1]){case "start":ia[b]-=Ia*(m&&Xa?-1:1);break;case "end":ia[b]+=Ia*(m&&Xa?-1:1)}return ia}function vl(b){return"number"!=typeof b?Wa({top:0,right:0,bottom:0,left:0},b):{top:b,right:b,bottom:b,left:b}}function ak(b){return rb(Wa({},
b),{top:b.y,left:b.x,right:b.x+b.width,bottom:b.y+b.height})}function Qk(b,g){return wa(this,null,function*(){var m;void 0===g&&(g={});const {x:K,y:Z,platform:ia,rects:ua,elements:Ia,strategy:Xa}=b,{boundary:bb="clippingAncestors",rootBoundary:pb="viewport",elementContext:sb="floating",altBoundary:Ub=!1,padding:kc=0}=g,Mb=vl(kc),sc=Ia[Ub?"floating"===sb?"reference":"floating":sb],lc=ak(yield ia.getClippingRect({element:null==(m=yield null==ia.isElement?void 0:ia.isElement(sc))||m?sc:sc.contextElement||
(yield null==ia.getDocumentElement?void 0:ia.getDocumentElement(Ia.floating)),boundary:bb,rootBoundary:pb,strategy:Xa}));m=ak(ia.convertOffsetParentRelativeRectToViewportRelativeRect?yield ia.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===sb?rb(Wa({},ua.floating),{x:K,y:Z}):ua.reference,offsetParent:yield null==ia.getOffsetParent?void 0:ia.getOffsetParent(Ia.floating),strategy:Xa}):ua[sb]);return{top:lc.top-m.top+Mb.top,bottom:m.bottom-lc.bottom+Mb.bottom,left:lc.left-m.left+
Mb.left,right:m.right-lc.right+Mb.right}})}function tm(b){return b.replace(/left|right|bottom|top/g,g=>iE[g])}function Cn(b,g,m){void 0===m&&(m=!1);const K=b.split("-")[1],Z=Ol(b);b=Mi(Z);m="x"===Z?K===(m?"end":"start")?"right":"left":"start"===K?"bottom":"top";return g.reference[b]>g.floating[b]&&(m=tm(m)),{main:m,cross:tm(m)}}function Yl(b){return b.replace(/start|end/g,g=>jE[g])}function Dm(b,g){return{top:b.top-g.height,right:b.right-g.width,bottom:b.bottom-g.height,left:b.left-g.width}}function bl(b){return vz.some(g=>
0<=b[g])}function Gi(b){return null==b?window:b&&b.document&&b.location&&b.alert&&b.setInterval?b:(b=b.ownerDocument)&&b.defaultView||window}function bk(b){return Gi(b).getComputedStyle(b)}function Xi(b){return b&&b.document&&b.location&&b.alert&&b.setInterval?"":b?(b.nodeName||"").toLowerCase():""}function Ql(){const b=navigator.userAgentData;return null!=b&&b.brands?b.brands.map(g=>g.brand+"/"+g.version).join(" "):navigator.userAgent}function Dj(b){return b instanceof Gi(b).HTMLElement}function Cj(b){return b instanceof
Gi(b).Element}function zl(b){return"undefined"==typeof ShadowRoot?!1:b instanceof Gi(b).ShadowRoot||b instanceof ShadowRoot}function el(b){const {overflow:g,overflowX:m,overflowY:K}=bk(b);return/auto|scroll|overlay|hidden/.test(g+K+m)}function Pk(b){const g=/firefox/i.test(Ql());b=bk(b);return"none"!==b.transform||"none"!==b.perspective||"paint"===b.contain||["transform","perspective"].includes(b.willChange)||g&&"filter"===b.willChange||g&&!!b.filter&&"none"!==b.filter}function Zj(){return!/^((?!chrome|android).)*safari/i.test(Ql())}
function Mk(b,g,m){var K,Z,ia,ua;void 0===g&&(g=!1);void 0===m&&(m=!1);var Ia=b.getBoundingClientRect();let Xa=1,bb=1;g&&Dj(b)&&(Xa=0<b.offsetWidth&&Tt(Ia.width)/b.offsetWidth||1,bb=0<b.offsetHeight&&Tt(Ia.height)/b.offsetHeight||1);b=Cj(b)?Gi(b):window;g=!Zj()&&m;m=(Ia.left+(g&&null!=(K=null==(Z=b.visualViewport)?void 0:Z.offsetLeft)?K:0))/Xa;K=(Ia.top+(g&&null!=(ia=null==(ua=b.visualViewport)?void 0:ua.offsetTop)?ia:0))/bb;ia=Ia.width/Xa;Ia=Ia.height/bb;return{width:ia,height:Ia,top:K,right:m+ia,
bottom:K+Ia,left:m,x:m,y:K}}function Ck(b){return(g=b,(g instanceof Gi(g).Node?b.ownerDocument:b.document)||window.document).documentElement;var g}function Dk(b){return Cj(b)?{scrollLeft:b.scrollLeft,scrollTop:b.scrollTop}:{scrollLeft:b.pageXOffset,scrollTop:b.pageYOffset}}function Lk(b){return Mk(Ck(b)).left+Dk(b).scrollLeft}function Em(b){return"html"===Xi(b)?b:b.assignedSlot||b.parentNode||(zl(b)?b.host:null)||Ck(b)}function Bk(b){return Dj(b)&&"fixed"!==getComputedStyle(b).position?b.offsetParent:
null}function ck(b){for(var g=Gi(b),m=Bk(b);m&&["table","td","th"].includes(Xi(m))&&"static"===getComputedStyle(m).position;)m=Bk(m);if(!m||"html"!==Xi(m)&&("body"!==Xi(m)||"static"!==getComputedStyle(m).position||Pk(m))){if(!m)a:{b=Em(b);for(zl(b)&&(b=b.host);Dj(b)&&!["html","body"].includes(Xi(b));){if(Pk(b)){m=b;break a}b=b.parentNode}m=null}g=m||g}return g}function Kh(b){if(Dj(b))return{width:b.offsetWidth,height:b.offsetHeight};b=Mk(b);return{width:b.width,height:b.height}}function sj(b){const g=
Em(b);return["html","body","#document"].includes(Xi(g))?b.ownerDocument.body:Dj(g)&&el(g)?g:sj(g)}function dk(b,g){var m;void 0===g&&(g=[]);var K=sj(b);b=K===(null==(m=b.ownerDocument)?void 0:m.body);m=Gi(K);K=b?[m].concat(m.visualViewport||[],el(K)?K:[]):K;g=g.concat(K);return b?g:g.concat(dk(K))}function uk(b,g,m){return"viewport"===g?ak(function(K,Z){var ia=Gi(K),ua=Ck(K);ia=ia.visualViewport;K=ua.clientWidth;ua=ua.clientHeight;let Ia=0,Xa=0;if(ia){K=ia.width;ua=ia.height;const bb=Zj();(bb||!bb&&
"fixed"===Z)&&(Ia=ia.offsetLeft,Xa=ia.offsetTop)}return{width:K,height:ua,x:Ia,y:Xa}}(b,m)):Cj(g)?function(K,Z){var ia=Mk(K,!1,"fixed"===Z);Z=ia.top+K.clientTop;ia=ia.left+K.clientLeft;return{top:Z,left:ia,x:ia,y:Z,right:ia+K.clientWidth,bottom:Z+K.clientHeight,width:K.clientWidth,height:K.clientHeight}}(g,m):ak(function(K){var Z;const ia=Ck(K);var ua=Dk(K);const Ia=null==(Z=K.ownerDocument)?void 0:Z.body;Z=Ls(ia.scrollWidth,ia.clientWidth,Ia?Ia.scrollWidth:0,Ia?Ia.clientWidth:0);const Xa=Ls(ia.scrollHeight,
ia.clientHeight,Ia?Ia.scrollHeight:0,Ia?Ia.clientHeight:0);K=-ua.scrollLeft+Lk(K);ua=-ua.scrollTop;return"rtl"===bk(Ia||ia).direction&&(K+=Ls(ia.clientWidth,Ia?Ia.clientWidth:0)-Z),{width:Z,height:Xa,x:K,y:ua}}(Ck(b)))}function zh(b){const g=dk(b),m=["absolute","fixed"].includes(bk(b).position)&&Dj(b)?ck(b):b;return Cj(m)?g.filter(K=>{var Z;if(Z=Cj(K))a:if(Z=null==m.getRootNode?void 0:m.getRootNode(),K.contains(m))Z=!0;else{if(Z&&zl(Z)){Z=m;do{if(Z&&K===Z){Z=!0;break a}Z=Z.parentNode||Z.host}while(Z)}Z=
!1}return Z&&"body"!==Xi(K)}):[]}function ch(b,g,m,K){void 0===K&&(K={});const {ancestorScroll:Z=!0,ancestorResize:ia=!0,elementResize:ua=!0,animationFrame:Ia=!1}=K,Xa=Z&&!Ia,bb=ia&&!Ia,pb=Xa||bb?[...(Cj(b)?dk(b):[]),...dk(g)]:[];pb.forEach(Mb=>{Xa&&Mb.addEventListener("scroll",m,{passive:!0});bb&&Mb.addEventListener("resize",m)});let sb,Ub=null;if(ua){let Mb=!0;Ub=new ResizeObserver(()=>{Mb||m();Mb=!1});Cj(b)&&!Ia&&Ub.observe(b);Ub.observe(g)}let kc=Ia?Mk(b):null;return Ia&&function sc(){const lc=
Mk(b);!kc||lc.x===kc.x&&lc.y===kc.y&&lc.width===kc.width&&lc.height===kc.height||m();kc=lc;sb=requestAnimationFrame(sc)}(),m(),()=>{var sc;pb.forEach(lc=>{Xa&&lc.removeEventListener("scroll",m);bb&&lc.removeEventListener("resize",m)});null==(sc=Ub)||sc.disconnect();Ub=null;Ia&&cancelAnimationFrame(sb)}}function xg(b,g){if(b===g)return!0;if(typeof b!==typeof g)return!1;if("function"===typeof b&&b.toString()===g.toString())return!0;let m,K;if(b&&g&&"object"==typeof b){if(Array.isArray(b)){var Z=b.length;
if(Z!=g.length)return!1;for(m=Z;0!==m--;)if(!xg(b[m],g[m]))return!1;return!0}K=Object.keys(b);Z=K.length;if(Z!==Object.keys(g).length)return!1;for(m=Z;0!==m--;)if(!Object.prototype.hasOwnProperty.call(g,K[m]))return!1;for(m=Z;0!==m--;)if(Z=K[m],!("_owner"===Z&&b.$$typeof||xg(b[Z],g[Z])))return!1;return!0}return b!==b&&g!==g}function gk(b){const g=Xn.useRef(b);Qv(()=>{g.current=b});return g}function Jh(b){let {middleware:g,placement:m="bottom",strategy:K="absolute",whileElementsMounted:Z}=void 0===
b?{}:b;const ia=Xn.useRef(null),ua=Xn.useRef(null),Ia=gk(Z),Xa=Xn.useRef(null),[bb,pb]=Xn.useState({x:null,y:null,strategy:K,placement:m,middlewareData:{}}),[sb,Ub]=Xn.useState(g);xg(null==sb?void 0:sb.map(Gc=>{({options:Gc}=Gc);return Gc}),null==g?void 0:g.map(Gc=>{({options:Gc}=Gc);return Gc}))||Ub(g);const kc=Xn.useCallback(()=>{ia.current&&ua.current&&lE(ia.current,ua.current,{middleware:sb,placement:m,strategy:K}).then(Gc=>{Mb.current&&mE.flushSync(()=>{pb(Gc)})})},[sb,m,K]);Qv(()=>{Mb.current&&
kc()},[kc]);const Mb=Xn.useRef(!1);Qv(()=>{Mb.current=!0;return()=>{Mb.current=!1}},[]);const sc=Xn.useCallback(()=>{"function"===typeof Xa.current&&(Xa.current(),Xa.current=null);if(ia.current&&ua.current)if(Ia.current){const Gc=Ia.current(ia.current,ua.current,kc);Xa.current=Gc}else kc()},[kc,Ia]),lc=Xn.useCallback(Gc=>{ia.current=Gc;sc()},[sc]),Rb=Xn.useCallback(Gc=>{ua.current=Gc;sc()},[sc]),rc=Xn.useMemo(()=>({reference:ia,floating:ua}),[]);return Xn.useMemo(()=>rb(Wa({},bb),{update:kc,refs:rc,
reference:lc,floating:Rb}),[bb,kc,rc,lc,Rb])}function Ni(b){const [g,m]=(0,nE.useState)(void 0);an(()=>{if(b){m({width:b.offsetWidth,height:b.offsetHeight});const K=new ResizeObserver(Z=>{if(Array.isArray(Z)&&Z.length){Z=Z[0];if("borderBoxSize"in Z){Z=Z.borderBoxSize;var ia=Array.isArray(Z)?Z[0]:Z;Z=ia.inlineSize;ia=ia.blockSize}else Z=b.offsetWidth,ia=b.offsetHeight;m({width:Z,height:ia})}});K.observe(b,{box:"border-box"});return()=>K.unobserve(b)}m(void 0)},[b]);return g}function rg(b){return void 0!==
b}function Yi(b){return null!==b}function Mf(b){const [g,m="center"]=b.split("-");return[g,m]}function Bg(b,g){return(0,fp.useReducer)((m,K)=>{K=g[m][K];return null!==K&&void 0!==K?K:m},b)}function uj(b){const [g,m]=(0,fp.useState)(),K=(0,fp.useRef)({}),Z=(0,fp.useRef)(b),ia=(0,fp.useRef)("none"),[ua,Ia]=Bg(b?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,fp.useEffect)(()=>
{const Xa=Wh(K.current);ia.current="mounted"===ua?Xa:"none"},[ua]);an(()=>{const Xa=K.current,bb=Z.current;if(bb!==b){const pb=ia.current,sb=Wh(Xa);b?Ia("MOUNT"):"none"===sb||"none"===(null===Xa||void 0===Xa?void 0:Xa.display)?Ia("UNMOUNT"):bb&&pb!==sb?Ia("ANIMATION_OUT"):Ia("UNMOUNT");Z.current=b}},[b,Ia]);an(()=>{if(g){const Xa=pb=>{const sb=Wh(K.current).includes(pb.animationName);pb.target===g&&sb&&(0,Iz.flushSync)(()=>Ia("ANIMATION_END"))},bb=pb=>{pb.target===g&&(ia.current=Wh(K.current))};g.addEventListener("animationstart",
bb);g.addEventListener("animationcancel",Xa);g.addEventListener("animationend",Xa);return()=>{g.removeEventListener("animationstart",bb);g.removeEventListener("animationcancel",Xa);g.removeEventListener("animationend",Xa)}}Ia("ANIMATION_END")},[g,Ia]);return{isPresent:["mounted","unmountSuspended"].includes(ua),ref:(0,fp.useCallback)(Xa=>{Xa&&(K.current=getComputedStyle(Xa));m(Xa)},[])}}function Wh(b){return(null===b||void 0===b?void 0:b.animationName)||"none"}function kh(b,g,m){b=b.key;m="rtl"!==
m?b:"ArrowLeft"===b?"ArrowRight":"ArrowRight"===b?"ArrowLeft":b;if("vertical"!==g||!["ArrowLeft","ArrowRight"].includes(m))if("horizontal"!==g||!["ArrowUp","ArrowDown"].includes(m))return DE[m]}function kg(b){const g=document.activeElement;for(const m of b){if(m===g)break;m.focus();if(document.activeElement!==g)break}}function ph(b,g){return b.map((m,K)=>b[(g+K)%b.length])}function Rl(b,g){var m=(0,GE.useState)(function(){return{value:b,callback:g,facade:{get current(){return m.value},set current(K){var Z=
m.value;Z!==K&&(m.value=K,m.callback(K,Z))}}}})[0];m.callback=g;return m.facade}function ti(b,g){return Rl(g||null,function(m){return b.forEach(function(K){"function"===typeof K?K(m):K&&(K.current=m);return K})})}function Pi(b){return b}function Pb(b,g){void 0===g&&(g=Pi);var m=[],K=!1;return{read:function(){if(K)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return m.length?m[m.length-1]:b},useMedium:function(Z){var ia=g(Z,K);m.push(ia);
return function(){m=m.filter(function(ua){return ua!==ia})}},assignSyncMedium:function(Z){for(K=!0;m.length;){var ia=m;m=[];ia.forEach(Z)}m={push:function(ua){return Z(ua)},filter:function(){return m}}},assignMedium:function(Z){K=!0;var ia=[];if(m.length){var ua=m;m=[];ua.forEach(Z);ia=m}var Ia=function(){var Xa=ia;ia=[];Xa.forEach(Z)};Promise.resolve().then(Ia);m={push:function(Xa){ia.push(Xa);Promise.resolve().then(Ia)},filter:function(Xa){ia=ia.filter(Xa);return m}}}}}function dc(b){void 0===b&&
(b={});var g=Pb(null);g.options=Hn({async:!0,ssr:!1},b);return g}function cc(b){const g=document.activeElement;for(const m of b){if(m===g)break;m.focus();if(document.activeElement!==g)break}}function ka(b,g){return b.map((m,K)=>b[(g+K)%b.length])}function Db(b,g,m){const K=1<g.length&&Array.from(g).every(ia=>ia===g[0])?g[0]:g,Z=m?b.indexOf(m):-1;b=ka(b,Math.max(Z,0));1===K.length&&(b=b.filter(ia=>ia!==m));b=b.find(ia=>ia.toLowerCase().startsWith(K.toLowerCase()));return b!==m?b:void 0}function Sb(b){return g=>
"mouse"===g.pointerType?b(g):void 0}function ub(b){return(0,Jm.isValidElement)(b)&&b.type===oF}function xb(b,g){const m=Wa({},g);for(const K in g){const Z=b[K],ia=g[K];/^on[A-Z]/.test(K)?Z&&ia?m[K]=(...ua)=>{ia(...ua);Z(...ua)}:Z&&(m[K]=Z):"style"===K?m[K]=Wa(Wa({},Z),ia):"className"===K&&(m[K]=[Z,ia].filter(Boolean).join(" "))}return Wa(Wa({},b),m)}function Ob(b,g){b&&(0,nF.flushSync)(()=>b.dispatchEvent(g))}function qb(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=
Ti(b);(0,pF.useEffect)(()=>{const K=Z=>{"Escape"===Z.key&&m(Z)};g.addEventListener("keydown",K);return()=>g.removeEventListener("keydown",K)},[m,g])}function Kb(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=Ti(b),K=(0,In.useRef)(!1),Z=(0,In.useRef)(()=>{});(0,In.useEffect)(()=>{const ia=Ia=>{if(Ia.target&&!K.current){let Xa=function(){Nc("dismissableLayer.pointerDownOutside",m,bb,{discrete:!0})};const bb={originalEvent:Ia};"touch"===Ia.pointerType?(g.removeEventListener("click",
Z.current),Z.current=Xa,g.addEventListener("click",Z.current,{once:!0})):Xa()}K.current=!1},ua=window.setTimeout(()=>{g.addEventListener("pointerdown",ia)},0);return()=>{window.clearTimeout(ua);g.removeEventListener("pointerdown",ia);g.removeEventListener("click",Z.current)}},[g,m]);return{onPointerDownCapture:()=>K.current=!0}}function $b(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=Ti(b),K=(0,In.useRef)(!1);(0,In.useEffect)(()=>{const Z=ia=>{ia.target&&!K.current&&
Nc("dismissableLayer.focusOutside",m,{originalEvent:ia},{discrete:!1})};g.addEventListener("focusin",Z);return()=>g.removeEventListener("focusin",Z)},[g,m]);return{onFocusCapture:()=>K.current=!0,onBlurCapture:()=>K.current=!1}}function Ac(){const b=new CustomEvent("dismissableLayer.update");document.dispatchEvent(b)}function Nc(b,g,m,{discrete:K}){const Z=m.originalEvent.target;m=new CustomEvent(b,{bubbles:!1,cancelable:!0,detail:m});g&&Z.addEventListener(b,g,{once:!0});K?Ob(Z,m):Z.dispatchEvent(m)}
function Rc(b,{select:g=!1}={}){const m=document.activeElement;for(const K of b)if(zd(K,{select:g}),document.activeElement!==m)break}function wd(b){const g=[];for(b=document.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,{acceptNode:m=>{const K="INPUT"===m.tagName&&"hidden"===m.type;return m.disabled||m.hidden||K?NodeFilter.FILTER_SKIP:0<=m.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});b.nextNode();)g.push(b.currentNode);return g}function Td(b,g){for(const m of b)if(!Fd(m,{upTo:g}))return m}
function Fd(b,{upTo:g}){if("hidden"===getComputedStyle(b).visibility)return!0;for(;b&&(void 0===g||b!==g);){if("none"===getComputedStyle(b).display)return!0;b=b.parentElement}return!1}function zd(b,{select:g=!1}={}){if(b&&b.focus){const m=document.activeElement;b.focus({preventScroll:!0});b!==m&&b instanceof HTMLInputElement&&"select"in b&&g&&b.select()}}function Jd(b,g){b=[...b];g=b.indexOf(g);-1!==g&&b.splice(g,1);return b}function ze(b){return b.filter(g=>"A"!==g.tagName)}function Pf(b){return(0,Km.isValidElement)(b)&&
b.type===tF}function we(b,g){const m=Wa({},g);for(const K in g){const Z=b[K],ia=g[K];/^on[A-Z]/.test(K)?Z&&ia?m[K]=(...ua)=>{ia(...ua);Z(...ua)}:Z&&(m[K]=Z):"style"===K?m[K]=Wa(Wa({},Z),ia):"className"===K&&(m[K]=[Z,ia].filter(Boolean).join(" "))}return Wa(Wa({},b),m)}function Ze(b){return(0,Lm.isValidElement)(b)&&b.type===wF}function Oe(b,g){const m=Wa({},g);for(const K in g){const Z=b[K],ia=g[K];/^on[A-Z]/.test(K)?Z&&ia?m[K]=(...ua)=>{ia(...ua);Z(...ua)}:Z&&(m[K]=Z):"style"===K?m[K]=Wa(Wa({},Z),
ia):"className"===K&&(m[K]=[Z,ia].filter(Boolean).join(" "))}return Wa(Wa({},b),m)}function Ve(b){return void 0!==b}function ng(b){return null!==b}function Kf(b){const [g,m="center"]=b.split("-");return[g,m]}function Hi(b,[g,m]){return Math.min(m,Math.max(g,b))}function If(b){const g=(0,wA.useRef)({value:b,previous:b});return(0,wA.useMemo)(()=>{g.current.value!==b&&(g.current.previous=g.current.value,g.current.value=b);return g.current.previous},[b])}function $f(b){return(0,Mm.isValidElement)(b)&&
b.type===VF}function hh(b,g){const m=Wa({},g);for(const K in g){const Z=b[K],ia=g[K];/^on[A-Z]/.test(K)?Z&&ia?m[K]=(...ua)=>{ia(...ua);Z(...ua)}:Z&&(m[K]=Z):"style"===K?m[K]=Wa(Wa({},Z),ia):"className"===K&&(m[K]=[Z,ia].filter(Boolean).join(" "))}return Wa(Wa({},b),m)}function Kg(b=[],g,m){b=[...b];b[m]=g;return b.sort((K,Z)=>K-Z)}function Ig(b,g,m){return 100/(m-g)*(b-g)}function gh(b,g){if(2<g)return`Value ${b+1} of ${g}`;if(2===g)return["Minimum","Maximum"][b]}function sg(b,g){if(1===b.length)return 0;
b=b.map(K=>Math.abs(K-g));const m=Math.min(...b);return b.indexOf(m)}function cg(b,g,m){b/=2;const K=Gf([0,50],[0,b]);return(b-K(g)*m)*m}function Zg(b){return b.slice(0,-1).map((g,m)=>b[m+1]-g)}function Gf(b,g){return m=>b[0]===b[1]||g[0]===g[1]?g[0]:g[0]+(g[1]-g[0])/(b[1]-b[0])*(m-b[0])}function Qi(b,g){g=Math.pow(10,g);return Math.round(b*g)/g}function rh(b){function g(Ia){return Ia?(0,Jb.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:Ia},children:(0,Jb.jsx)("div",{className:`w-full h-full bg-${Ia}-500`})}):
(0,Jb.jsx)("div",{className:"tl-color-bg",children:(0,Jb.jsx)(Bi,{name:"color-swatch"})})}var {color:m,opacity:K,collisionRef:Z,setColor:ia,setOpacity:ua}=b;Yb(b,["color","opacity","collisionRef","setColor","setOpacity"]);mF.useRef(null);return(0,Jb.jsxs)(RF,{children:[(0,Jb.jsx)(SF,{className:"tl-color-drip mx-1",children:g(m)}),(0,Jb.jsxs)(TF,{className:"tl-popover-content",side:"top",sideOffset:15,collisionBoundary:Z,children:[(0,Jb.jsx)("div",{className:"tl-color-palette",children:Object.values(Ud).map(Ia=>
(0,Jb.jsx)("button",{className:`tl-color-drip m-1${Ia===m?" active":""}`,onClick:()=>ia(Ia),children:g(Ia)},Ia))}),(0,Jb.jsx)("div",{className:"mx-1 my-2",children:(0,Jb.jsxs)(gG,{defaultValue:[K],onValueCommit:Ia=>ua(Ia[0]),max:1,step:.1,"aria-label":"Opacity",className:"tl-slider-root",children:[(0,Jb.jsx)(hG,{className:"tl-slider-track",children:(0,Jb.jsx)(iG,{className:"tl-slider-range"})}),(0,Jb.jsx)(jG,{className:"tl-slider-thumb"})]})}),(0,Jb.jsx)(UF,{className:"tl-popover-arrow"})]})]})}function ei(b){const g=
Ti(b),m=(0,Af.useRef)(""),K=(0,Af.useRef)(0);b=(0,Af.useCallback)(ia=>{ia=m.current+ia;g(ia);(function Xa(Ia){m.current=Ia;window.clearTimeout(K.current);""!==Ia&&(K.current=window.setTimeout(()=>Xa(""),1E3))})(ia)},[g]);const Z=(0,Af.useCallback)(()=>{m.current="";window.clearTimeout(K.current)},[]);(0,Af.useEffect)(()=>()=>window.clearTimeout(K.current),[]);return[m,b,Z]}function Sj(b,g,m){const K=1<g.length&&Array.from(g).every(ia=>ia===g[0])?g[0]:g,Z=m?b.indexOf(m):-1;b=xi(b,Math.max(Z,0));1===
K.length&&(b=b.filter(ia=>ia!==m));b=b.find(ia=>ia.textValue.toLowerCase().startsWith(K.toLowerCase()));return b!==m?b:void 0}function xi(b,g){return b.map((m,K)=>b[(g+K)%b.length])}function Gk(b){var {options:g,value:m,onValueChange:K}=b;b=Yb(b,["options","value","onValueChange"]);const [Z,ia]=kG.useState(!1);return(0,Jb.jsx)("div",rb(Wa({},b),{className:"tl-select-input",children:(0,Jb.jsxs)(HG,{open:Z,onOpenChange:ia,value:m,onValueChange:K,children:[(0,Jb.jsxs)(IG,{className:"tl-select-input-trigger",
children:[(0,Jb.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,Jb.jsx)(JG,{})}),(0,Jb.jsx)(KG,{style:{lineHeight:1},children:(0,Jb.jsx)(Bi,{name:Z?"chevron-up":"chevron-down"})})]}),(0,Jb.jsx)(LG,{className:"tl-select-input-portal",children:(0,Jb.jsxs)(MG,{className:"tl-select-input-content",children:[(0,Jb.jsx)(QG,{}),(0,Jb.jsx)(NG,{className:"tl-select-input-viewport",children:g.map(ua=>(0,Jb.jsx)(OG,{className:"tl-select-input-select-item",value:ua.value,children:(0,Jb.jsx)(PG,
{children:ua.label})},ua.value))}),(0,Jb.jsx)(RG,{})]})})]})}))}function ql({options:b,value:g,onValueChange:m}){return(0,Jb.jsx)(SA,{className:"tl-toggle-group-input",type:"single",value:g,onValueChange:m,children:b.map(K=>(0,Jb.jsx)(TA,{className:"tl-toggle-group-input-button",value:K.value,disabled:K.value===g,children:(0,Jb.jsx)(Bi,{name:K.icon})},K.value))})}function Oj({options:b,value:g,onValueChange:m}){return(0,Jb.jsx)(SA,{className:"tl-toggle-group-input",type:"multiple",value:g,onValueChange:m,
children:b.map(K=>(0,Jb.jsx)(TA,{className:"tl-toggle-group-input-button",value:K.value,children:(0,Jb.jsx)(Bi,{name:K.icon})},K.value))})}function Fl(b){var {toggle:g=!0,pressed:m,onPressedChange:K,className:Z}=b;b=Yb(b,["toggle","pressed","onPressedChange","className"]);return(0,Jb.jsx)(TG,rb(Wa({},b),{"data-toggle":g,className:"tl-toggle-input"+(Z?" "+Z:""),pressed:m,onPressedChange:K}))}function Tj(b,g){return b.filter(m=>{var K;return null==(K=xw[m.props.type])?void 0:K.includes(g)})}function ag(b){return g=>
"mouse"!==g.pointerType?b(g):void 0}function sk(b,g){void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));void 0!==g.opacity&&(g.opacity=Math.min(1,Math.max(g.opacity,0)));return g}function zm({strokeWidth:b,size:g,mode:m}){return"svg"===m?(0,Jb.jsx)("rect",{className:"tl-binding-indicator",x:b,y:b,rx:2,ry:2,width:Math.max(0,g[0]-2*b),height:Math.max(0,g[1]-2*b),strokeWidth:4*b}):(0,Jb.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,
boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function Gl(){const b=dg();return"panning"===b.inputs.state||"pinching"===b.inputs.state}function Wk({left:b,middle:g,right:m,stroke:K,strokeWidth:Z}){return(0,Jb.jsxs)("g",{children:[(0,Jb.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${b} L ${g} ${m}`}),(0,Jb.jsx)("path",{d:`M ${b} L ${g} ${m}`,fill:"none",stroke:K,strokeWidth:Z,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function wj(b,g,m){g=a(b,g,b,m).points;
if(!g)return console.warn("Could not find an intersection for the arrow head."),{left:b,right:b};g=(m=g[0])?re.rotWith(m,b,Math.PI/6):b;b=m?re.rotWith(m,b,-Math.PI/6):b;return{left:g,right:b}}function nj(b,g,m){const {left:K,right:Z}=wj(b,g,m);return`M ${K} L ${b} ${Z}`}function Mh(b,g,m,K,Z){b=b.strokeWidth;var ia=re.dist(g,m);b=Math.min(ia/3,16*b);ia=[];ia.push(`M ${g} L ${m}`);K&&ia.push(nj(g,m,b));Z&&ia.push(nj(m,g,b));return ia.join(" ")}function wi({id:b,bounds:g,labelSize:m,offset:K,scale:Z=
1}){return(0,Jb.jsx)("defs",{children:(0,Jb.jsxs)("mask",{id:b+"_clip",children:[(0,Jb.jsx)("rect",{x:-100,y:-100,width:g.width+200,height:g.height+200,fill:"white"}),(0,Jb.jsx)("rect",{x:g.width/2-m[0]/2*Z+((null==K?void 0:K[0])||0),y:g.height/2-m[1]/2*Z+((null==K?void 0:K[1])||0),width:m[0]*Z,height:m[1]*Z,rx:4*Z,ry:4*Z,fill:"black"})]})})}function jl(b,g){return function(m){return b(g(m))}}function om(b,g){return g(b)}function Li(b,g){return function(m){return b(g,m)}}function pl(b,g){return function(){return b(g)}}
function De(b,g){g(b);return b}function ff(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return g}function Pe(b){b()}function gf(b){return function(){return b}}function pj(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return function(){g.map(Pe)}}function Fg(){}function Mg(b,g){return b(1,g)}function vh(b,g){b(0,g)}function Al(b){b(2)}function Je(b){return b(4)}function oe(b,g){return Mg(b,Li(g,0))}function Sh(b,g){var m=b(1,function(K){m();g(K)});return m}
function Zd(){var b=[];return function(g,m){switch(g){case 2:b.splice(0,b.length);break;case 1:return b.push(m),function(){var K=b.indexOf(m);-1<K&&b.splice(K,1)};case 0:b.slice().forEach(function(K){K(m)});break;default:throw Error("unrecognized action "+g);}}}function Df(b){var g=b,m=Zd();return function(K,Z){switch(K){case 1:Z(g);break;case 0:g=Z;break;case 4:return g}return m(K,Z)}}function Xl(b){var g,m;return function(K,Z){switch(K){case 1:if(Z){if(m===Z)break;g&&g();m=Z;return g=b(1,Z)}g&&
g();return Fg;case 2:g&&g();m=null;break;default:throw Error("unrecognized action "+K);}}}function bj(b){return De(Zd(),function(g){return oe(b,g)})}function eh(b,g){return De(Df(g),function(m){return oe(b,m)})}function sh(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return function(K){return g.reduceRight(om,K)}}function ke(b){for(var g=arguments.length,m=Array(1<g?g-1:0),K=1;K<g;K++)m[K-1]=arguments[K];var Z=sh.apply(void 0,m);return function(ia,ua){switch(ia){case 1:return Mg(b,
Z(ua));case 2:b(2);break;default:throw Error("unrecognized action "+ia);}}}function Ug(b,g){return b===g}function $h(b){void 0===b&&(b=Ug);var g;return function(m){return function(K){b(g,K)||(g=K,m(K))}}}function Qg(b){return function(g){return function(m){b(m)&&g(m)}}}function Ge(b){return function(g){return jl(g,b)}}function rl(b){return function(g){return function(){return g(b)}}}function Ej(b,g){return function(m){return function(K){return m(g=b(g,K))}}}function Ef(b){return function(g){return function(m){0<
b?b--:g(m)}}}function Ek(b){var g,m;return function(K){return function(Z){g=Z;m||=setTimeout(function(){m=void 0;K(g)},b)}}}function Gh(b){var g,m;return function(K){return function(Z){g=Z;m&&clearTimeout(m);m=setTimeout(function(){K(g)},b)}}}function ig(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];var K=Array(g.length),Z=0,ia=null,ua=Math.pow(2,g.length)-1;g.forEach(function(Ia,Xa){var bb=Math.pow(2,Xa);Mg(Ia,function(pb){var sb=Z;Z|=bb;K[Xa]=pb;sb!==ua&&Z===ua&&ia&&(ia(),
ia=null)})});return function(Ia){return function(Xa){var bb=function(){return Ia([Xa].concat(K))};Z===ua?bb():ia=bb}}}function on(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return function(K,Z){switch(K){case 1:return pj.apply(void 0,g.map(function(ia){return ia(1,Z)}));case 2:break;default:throw Error("unrecognized action "+K);}}}function Vg(b,g){void 0===g&&(g=Ug);return ke(b,$h(g))}function ui(){for(var b=Zd(),g=arguments.length,m=Array(g),K=0;K<g;K++)m[K]=arguments[K];
var Z=Array(m.length),ia=0,ua=Math.pow(2,m.length)-1;m.forEach(function(Ia,Xa){var bb=Math.pow(2,Xa);Mg(Ia,function(pb){Z[Xa]=pb;ia|=bb;ia===ua&&b(0,Z)})});return function(Ia,Xa){switch(Ia){case 1:return ia===ua&&Xa(Z),b(1,Xa);case 2:b(2);break;default:throw Error("unrecognized action "+Ia);}}}function nh(b,g,m){void 0===g&&(g=[]);m=(void 0===m?{singleton:!0}:m).singleton;return{id:Symbol(),constructor:b,dependencies:g,singleton:m}}function gm(b){var g=new Map;return function Z(K){var ia=K.id,ua=
K.constructor,Ia=K.dependencies;if((K=K.singleton)&&g.has(ia))return g.get(ia);ua=ua(Ia.map(function(Xa){return Z(Xa)}));K&&g.set(ia,ua);return ua}(b)}function Hj(b,g){if(null==b)return{};var m={},K=Object.keys(b),Z;for(Z=0;Z<K.length;Z++){var ia=K[Z];0<=g.indexOf(ia)||(m[ia]=b[ia])}return m}function ko(b,g){if(b){if("string"===typeof b)return Il(b,g);var m=Object.prototype.toString.call(b).slice(8,-1);"Object"===m&&b.constructor&&(m=b.constructor.name);if("Map"===m||"Set"===m)return Array.from(b);
if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return Il(b,g)}}function Il(b,g){if(null==g||g>b.length)g=b.length;for(var m=0,K=Array(g);m<g;m++)K[m]=b[m];return K}function Ph(b,g){var m="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(m)return(m=m.call(b)).next.bind(m);if(Array.isArray(b)||(m=ko(b))||g&&b&&"number"===typeof b.length){m&&(b=m);var K=0;return function(){return K>=b.length?{done:!0}:{done:!1,value:b[K++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function jn(b,g){for(var m={},K={},Z=0,ia=b.length;Z<ia;)K[b[Z]]=1,Z+=1;for(var ua in g)K.hasOwnProperty(ua)||(m[ua]=g[ua]);return m}function Zi(b,g,m){function K(sb,Ub){sb.propsReady&&(0,sb.propsReady)(0,!1);for(var kc=Ph(ua),Mb;!(Mb=kc()).done;)Mb=Mb.value,(0,sb[g.required[Mb]])(0,Ub[Mb]);for(kc=Ph(Ia);!(Mb=kc()).done;)if(Mb=Mb.value,Mb in Ub)(0,sb[g.optional[Mb]])(0,Ub[Mb]);sb.propsReady&&(0,sb.propsReady)(0,!0)}function Z(sb){return Xa.reduce(function(Ub,kc){Ub[kc]=function(Mb){(0,sb[g.methods[kc]])(0,
Mb)};return Ub},{})}function ia(sb){return bb.reduce(function(Ub,kc){Ub[kc]=Xl(sb[g.events[kc]]);return Ub},{})}var ua=Object.keys(g.required||{}),Ia=Object.keys(g.optional||{}),Xa=Object.keys(g.methods||{}),bb=Object.keys(g.events||{}),pb=(0,Jn.createContext)({});return{Component:(0,Jn.forwardRef)(function(sb,Ub){var kc=sb.children,Mb=Hj(sb,yH),sc=(0,Jn.useState)(function(){return De(gm(b),function(Rb){return K(Rb,Mb)})})[0],lc=(0,Jn.useState)(pl(ia,sc))[0];qu(function(){for(var Rb=Ph(bb),rc;!(rc=
Rb()).done;)if(rc=rc.value,rc in Mb)(0,lc[rc])(1,Mb[rc]);return function(){Object.values(lc).map(Al)}},[Mb,lc,sc]);qu(function(){K(sc,Mb)});(0,Jn.useImperativeHandle)(Ub,gf(Z(sc)));return(0,Jn.createElement)(pb.Provider,{value:sc},m?(0,Jn.createElement)(m,jn([].concat(ua,Ia,bb),Mb),kc):kc)}),usePublisher:function(sb){return(0,Jn.useCallback)(Li(vh,(0,Jn.useContext)(pb)[sb]),[sb])},useEmitterValue:function(sb){var Ub=(0,Jn.useContext)(pb)[sb];sb=(0,Jn.useState)(pl(Je,Ub));var kc=sb[0],Mb=sb[1];qu(function(){return Mg(Ub,
function(sc){sc!==kc&&Mb(gf(sc))})},[Ub,kc]);return kc},useEmitter:function(sb,Ub){var kc=(0,Jn.useContext)(pb)[sb];qu(function(){return kc(1,Ub)},[Ub,kc])}}}function Wf(){return Wf=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g],K;for(K in m)Object.prototype.hasOwnProperty.call(m,K)&&(b[K]=m[K])}return b},Wf.apply(this,arguments)}function dm(b,g){if(null==b)return{};var m,K,Z={},ia=Object.keys(b);for(K=0;K<ia.length;K++)0<=g.indexOf(m=ia[K])||(Z[m]=b[m]);return Z}
function Wm(b,g){(null==g||g>b.length)&&(g=b.length);for(var m=0,K=Array(g);m<g;m++)K[m]=b[m];return K}function Ri(b,g){var m="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(m)return(m=m.call(b)).next.bind(m);if(Array.isArray(b)||(m=function(Z,ia){if(Z){if("string"==typeof Z)return Wm(Z,ia);var ua=Object.prototype.toString.call(Z).slice(8,-1);return"Object"===ua&&Z.constructor&&(ua=Z.constructor.name),"Map"===ua||"Set"===ua?Array.from(Z):"Arguments"===ua||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ua)?
Wm(Z,ia):void 0}}(b))||g&&b&&"number"==typeof b.length){m&&(b=m);var K=0;return function(){return K>=b.length?{done:!0}:{done:!1,value:b[K++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Xf(b,g){void 0===g&&(g=!0);var m=(0,ci.useRef)(null),K=function(ia){};if("undefined"!=typeof ResizeObserver){var Z=new ResizeObserver(function(ia){ia=ia[0].target;null!==ia.offsetParent&&b(ia)});
K=function(ia){ia&&g?(Z.observe(ia),m.current=ia):(m.current&&Z.unobserve(m.current),m.current=null)}}return{ref:m,callbackRef:K}}function Th(b,g){return void 0===g&&(g=!0),Xf(b,g).callbackRef}function pn(b,g,m,K,Z,ia,ua){return Xf(function(Ia){for(var Xa=function(sb,Ub,kc,Mb){kc=sb.length;if(0===kc)return null;for(var sc=[],lc=0;lc<kc;lc++){var Rb=sb.item(lc);if(Rb&&void 0!==Rb.dataset.index){var rc=parseInt(Rb.dataset.index),Gc=parseFloat(Rb.dataset.knownSize),Cc=Ub(Rb,"offsetHeight");if(0===Cc&&
Mb("Zero-sized element, this should not happen",{child:Rb},lm.ERROR),Cc!==Gc)Rb=sc[sc.length-1],0===sc.length||Rb.size!==Cc||Rb.endIndex!==rc-1?sc.push({startIndex:rc,endIndex:rc,size:Cc}):sc[sc.length-1].endIndex++}}return sc}(Ia.children,g,0,Z),bb=Ia.parentElement;!bb.dataset.virtuosoScroller;)bb=bb.parentElement;var pb="window"===bb.firstElementChild.dataset.viewportType;K({scrollTop:Math.max(ua?ua.scrollTop:pb?window.pageYOffset||document.documentElement.scrollTop:bb.scrollTop,0),scrollHeight:ua?
ua.scrollHeight:pb?document.documentElement.scrollHeight:bb.scrollHeight,viewportHeight:ua?ua.offsetHeight:pb?window.innerHeight:bb.offsetHeight});null==ia||ia(function(sb,Ub,kc){return"normal"===Ub||null!=Ub&&Ub.endsWith("px")||kc("row-gap was not resolved to pixel value correctly",Ub,lm.WARN),"normal"===Ub?0:parseInt(null!=Ub?Ub:"0",10)}(0,getComputedStyle(Ia).rowGap,Z));null!==Xa&&b(Xa)},m)}function ek(b,g){return Math.round(b.getBoundingClientRect()[g])}function C(b,g,m,K,Z){void 0===K&&(K=Fg);
var ia=(0,ci.useRef)(null),ua=(0,ci.useRef)(null),Ia=(0,ci.useRef)(null),Xa=(0,ci.useRef)(!1),bb=(0,ci.useCallback)(function(pb){pb=pb.target;var sb=pb===window||pb===document,Ub=sb?window.pageYOffset||document.documentElement.scrollTop:pb.scrollTop,kc=sb?document.documentElement.scrollHeight:pb.scrollHeight,Mb=sb?window.innerHeight:pb.offsetHeight;pb=function(){b({scrollTop:Math.max(Ub,0),scrollHeight:kc,viewportHeight:Mb})};Xa.current?(0,zH.flushSync)(pb):pb();Xa.current=!1;null!==ua.current&&(Ub===
ua.current||0>=Ub||Ub===kc-Mb)&&(ua.current=null,g(!0),Ia.current&&(clearTimeout(Ia.current),Ia.current=null))},[b,g]);return(0,ci.useEffect)(function(){var pb=Z||ia.current;return K(Z||ia.current),bb({target:pb}),pb.addEventListener("scroll",bb,{passive:!0}),function(){K(null);pb.removeEventListener("scroll",bb)}},[ia,bb,m,K,Z]),{scrollerRef:ia,scrollByCallback:function(pb){Xa.current=!0;ia.current.scrollBy(pb)},scrollToCallback:function(pb){var sb=ia.current;if(sb&&!("offsetHeight"in sb&&0===sb.offsetHeight)){var Ub,
kc,Mb,sc="smooth"===pb.behavior;if(sb===window?(kc=Math.max(ek(document.documentElement,"height"),document.documentElement.scrollHeight),Ub=window.innerHeight,Mb=document.documentElement.scrollTop):(kc=sb.scrollHeight,Ub=ek(sb,"height"),Mb=sb.scrollTop),pb.top=Math.ceil(Math.max(Math.min(kc-Ub,pb.top),0)),1.01>Math.abs(Ub-kc)||pb.top===Mb)return b({scrollTop:Mb,scrollHeight:kc,viewportHeight:Ub}),void(sc&&g(!0));sc?(ua.current=pb.top,Ia.current&&clearTimeout(Ia.current),Ia.current=setTimeout(function(){Ia.current=
null;ua.current=null;g(!0)},1E3)):ua.current=null;sb.scrollTo(pb)}}}}function Y(b,g,m,K,Z){return void 0===K&&(K=Ji),void 0===Z&&(Z=Ji),{k:b,v:g,lvl:m,l:K,r:Z}}function xa(b,g){if(b===Ji)return Ji;var m=b.k,K=b.l,Z=b.r;if(g===m){if(K===Ji)return Z;if(Z===Ji)return K;g=tb(K);return Ld(zc(b,{k:g[0],v:g[1],l:Zb(K)}))}return Ld(zc(b,g<m?{l:xa(K,g)}:{r:xa(Z,g)}))}function va(b,g,m){return(void 0===m&&(m="k"),b===Ji)?[-Infinity,void 0]:b[m]===g?[b.k,b.v]:b[m]<g?(g=va(b.r,g,m),-Infinity===g[0]?[b.k,b.v]:
g):va(b.l,g,m)}function Fa(b,g,m){return b===Ji?Y(g,m,1):g===b.k?zc(b,{k:g,v:m}):Ee(yf(zc(b,g<b.k?{l:Fa(b.l,g,m)}:{r:Fa(b.r,g,m)})))}function ab(b,g,m){if(b===Ji)return[];var K=b.k,Z=b.v,ia=b.r,ua=[];return K>g&&(ua=ua.concat(ab(b.l,g,m))),K>=g&&K<=m&&ua.push({k:K,v:Z}),K<=m&&(ua=ua.concat(ab(ia,g,m))),ua}function mb(b){return b===Ji?[]:[].concat(mb(b.l),[{k:b.k,v:b.v}],mb(b.r))}function tb(b){return b.r===Ji?[b.k,b.v]:tb(b.r)}function Zb(b){return b.r===Ji?b.l:Ld(zc(b,{r:Zb(b.r)}))}function zc(b,
g){return Y(void 0!==g.k?g.k:b.k,void 0!==g.v?g.v:b.v,void 0!==g.lvl?g.lvl:b.lvl,void 0!==g.l?g.l:b.l,void 0!==g.r?g.r:b.r)}function Bc(b){return b===Ji||b.lvl>b.r.lvl}function Ld(b){var g=b.l,m=b.r,K=b.lvl;if(m.lvl>=K-1&&g.lvl>=K-1)return b;if(K>m.lvl+1){if(Bc(g))return yf(zc(b,{lvl:K-1}));if(g===Ji||g.r===Ji)throw Error("Unexpected empty nodes");return zc(g.r,{l:zc(g,{r:g.r.l}),r:zc(b,{l:g.r.r,lvl:K-1}),lvl:K})}if(Bc(b))return Ee(zc(b,{lvl:K-1}));if(m===Ji||m.l===Ji)throw Error("Unexpected empty nodes");
g=m.l;var Z=Bc(g)?m.lvl-1:m.lvl;return zc(g,{l:zc(b,{r:g.l,lvl:K-1}),r:Ee(zc(m,{l:g.r,lvl:Z})),lvl:g.lvl+1})}function Od(b,g,m){return b===Ji?[]:rd(ab(b,va(b,g)[0],m),function(K){return{index:K.k,value:K.v}})}function rd(b,g){var m=b.length;if(0===m)return[];var K=g(b[0]),Z=K.index;K=K.value;for(var ia=[],ua=1;ua<m;ua++){var Ia=g(b[ua]),Xa=Ia.index;Ia=Ia.value;ia.push({start:Z,end:Xa-1,value:K});Z=Xa;K=Ia}return ia.push({start:Z,end:Infinity,value:K}),ia}function Ee(b){var g=b.r,m=b.lvl;return g===
Ji||g.r===Ji||g.lvl!==m||g.r.lvl!==m?b:zc(g,{l:zc(b,{r:g.l}),lvl:m+1})}function yf(b){var g=b.l;return g===Ji||g.lvl!==b.lvl?b:zc(g,{r:zc(b,{l:g.r})})}function wg(b,g,m,K){void 0===K&&(K=0);for(var Z=b.length-1;K<=Z;){var ia=Math.floor((K+Z)/2),ua=m(b[ia],g);if(0===ua)return ia;if(-1===ua){if(2>Z-K)return ia-1;Z=ia-1}else{if(Z===K)return ia;K=ia+1}}throw Error("Failed binary finding record in array - "+b.join(",")+", searched for "+g);}function Fj(b){var g=b.size,m=b.startIndex,K=b.endIndex;return function(Z){return Z.start===
m&&(Z.end===K||Infinity===Z.end)&&Z.value===g}}function hg(b,g){b=b.index;return g===b?0:g<b?-1:1}function ih(b,g){b=b.offset;return g===b?0:g<b?-1:1}function fi(b){return{index:b.index,value:b}}function oi(b,g,m,K){var Z=0,ia=0,ua=0,Ia;0!==g?(ua=b[Ia=wg(b,g-1,hg)].offset,ia=va(m,g-1),Z=ia[0],ia=ia[1],b.length&&b[Ia].size===va(m,g)[1]&&--Ia,b=b.slice(0,Ia+1)):b=[];for(g=Ri(Od(m,g,Infinity));!(m=g()).done;)Ia=m.value,m=Ia.start,Ia=Ia.value,Z=m-Z,ua=Z*ia+ua+Z*K,b.push({offset:ua,size:Ia,index:m}),Z=
m,ia=Ia;return{offsetTree:b,lastIndex:Z,lastOffset:ua,lastSize:ia}}function Yh(b,g){var m=g[0],K=g[1],Z=g[3];0<m.length&&(0,g[2])("received item sizes",m,lm.DEBUG);var ia=b.sizeTree;g=ia;var ua=0;if(0<K.length&&ia===Ji&&2===m.length){var Ia=m[0].size,Xa=m[1].size;g=K.reduce(function(pb,sb){return Fa(Fa(pb,sb,Ia),sb+1,Xa)},g)}else m=function(pb,sb){var Ub,kc=pb===Ji?0:Infinity;for(sb=Ri(sb);!(Ub=sb()).done;){var Mb=Ub.value;Ub=Mb.size;var sc=Mb.startIndex,lc=Mb.endIndex;if(kc=Math.min(kc,sc),pb===
Ji)pb=Fa(pb,0,Ub);else{var Rb=Od(pb,sc-1,lc+1);if(!Rb.some(Fj(Mb))){var rc,Gc=Mb=!1;for(Rb=Ri(Rb);!(rc=Rb()).done;){var Cc=rc.value;rc=Cc.start;var Uc=Cc.end;Cc=Cc.value;Mb?(lc>=rc||Ub===Cc)&&(pb=xa(pb,rc)):(Gc=Cc!==Ub,Mb=!0);Uc>lc&&lc>=rc&&Cc!==Ub&&(pb=Fa(pb,lc+1,Cc))}Gc&&(pb=Fa(pb,sc,Ub))}}}return[pb,kc]}(g,m),g=m[0],ua=m[1];if(g===ia)return b;b=oi(b.offsetTree,ua,g,Z);var bb=b.offsetTree;return{sizeTree:g,offsetTree:bb,lastIndex:b.lastIndex,lastOffset:b.lastOffset,lastSize:b.lastSize,groupOffsetTree:K.reduce(function(pb,
sb){return Fa(pb,sb,Tf(sb,bb,Z))},Ji),groupIndices:K}}function Tf(b,g,m){if(0===g.length)return 0;g=g[wg(g,b,hg)];b-=g.index;b=g.size*b+(b-1)*m+g.offset;return 0<b?b+m:b}function Hf(b,g,m){if(void 0!==b.groupIndex)return g.groupIndices[b.groupIndex]+1;b=wh("LAST"===b.index?m:b.index,g);return Math.max(0,b,Math.min(m,b))}function wh(b,g){if(g.groupOffsetTree===Ji)return b;for(var m=0;g.groupIndices[m]<=b+m;)m++;return b+m}function dh(b){b="number"==typeof b?{index:b}:b;return b.align||(b.align="start"),
b.behavior&&DH||(b.behavior="auto"),b.offset||(b.offset=0),b}function kj(b){return!!b&&("smooth"===b?"smooth":"auto")}function Ai(b){return b.reduce(function(g,m){return g.groupIndices.push(g.totalCount),g.totalCount+=m+1,g},{totalCount:0,groupIndices:[]})}function oj(b,g){return!(!b||b[0]!==g[0]||b[1]!==g[1])}function Hl(b,g){return!(!b||b.startIndex!==g.startIndex||b.endIndex!==g.endIndex)}function Rk(b,g,m){return"number"==typeof b?"up"===m&&"top"===g||"down"===m&&"bottom"===g?b:0:"up"===m?"top"===
g?b.main:b.reverse:"bottom"===g?b.main:b.reverse}function um(b,g,m){if(0===b.length)return[];if(g.groupOffsetTree===Ji)return b.map(function(Xa){return Wf({},Xa,{index:Xa.index+m,originalIndex:Xa.index})});var K,Z=[],ia=Od(g.groupOffsetTree,b[0].index,b[b.length-1].index),ua=void 0,Ia=0;for(b=Ri(b);!(K=b()).done;)K=K.value,(!ua||ua.end<K.index)&&(ua=ia.shift(),Ia=g.groupIndices.indexOf(ua.start)),Z.push(Wf({},K.index===ua.start?{type:"group",index:Ia}:{index:K.index-(Ia+1)+m,groupIndex:Ia},{size:K.size,
offset:K.offset,originalIndex:K.index,data:K.data}));return Z}function ho(b,g,m,K,Z,ia){var ua=0,Ia=0;0<b.length&&(ua=b[0].offset,Ia=b[b.length-1],Ia=Ia.offset+Ia.size);var Xa=m-Z.lastIndex,bb=ua;K=Z.lastOffset+Xa*Z.lastSize+(Xa-1)*K-Ia;return{items:um(b,Z,ia),topItems:um(g,Z,ia),topListHeight:g.reduce(function(pb,sb){return sb.size+pb},0),offsetTop:ua,offsetBottom:K,top:bb,bottom:Ia,totalCount:m,firstItemIndex:ia}}function nn(b){var g,m=!1;return function(){return m||(m=!0,g=b()),g}}function Sg(b,
g){var m=(0,ci.useRef)(null),K=(0,ci.useCallback)(function(Xa){if(null!==Xa&&Xa.offsetParent){var bb=Xa.getBoundingClientRect();Xa=bb.width;if(g){var pb=g.getBoundingClientRect();bb=bb.top-pb.top;pb=pb.height-Math.max(0,bb);bb+=g.scrollTop}else pb=window.innerHeight-Math.max(0,bb.top),bb=bb.top+window.pageYOffset;m.current={offsetTop:bb,visibleHeight:pb,visibleWidth:Xa};b(m.current)}},[b,g]),Z=Xf(K),ia=Z.callbackRef,ua=Z.ref,Ia=(0,ci.useCallback)(function(){K(ua.current)},[K,ua]);return(0,ci.useEffect)(function(){if(g){g.addEventListener("scroll",
Ia);var Xa=new ResizeObserver(Ia);return Xa.observe(g),function(){g.removeEventListener("scroll",Ia);Xa.unobserve(g)}}return window.addEventListener("scroll",Ia),window.addEventListener("resize",Ia),function(){window.removeEventListener("scroll",Ia);window.removeEventListener("resize",Ia)}},[Ia,g]),ia}function Xm(b){return b}function fk(b,g){var m=Zd();return Mg(m,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+g,"color: red;","color: inherit;","color: blue;")}),
oe(m,b),m}function qj(b,g){if("string"!=typeof b)return{context:g}}function Om(b){var g=b.usePublisher,m=b.useEmitter,K=b.useEmitterValue;return ah.memo(function(Z){var ia=Z.style,ua=Z.children;Z=dm(Z,RH);var Ia=g("scrollContainerState"),Xa=K("ScrollerComponent"),bb=g("smoothScrollTargetReached"),pb=K("scrollerRef"),sb=K("context");Ia=C(Ia,bb,Xa,pb);bb=Ia.scrollerRef;pb=Ia.scrollByCallback;return m("scrollTo",Ia.scrollToCallback),m("scrollBy",pb),(0,ci.createElement)(Xa,Wf({ref:bb,style:Wf({},YH,
ia),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},Z,qj(Xa,sb)),ua)})}function On(b){var g=b.usePublisher,m=b.useEmitter,K=b.useEmitterValue;return ah.memo(function(Z){var ia=Z.style,ua=Z.children;Z=dm(Z,SH);var Ia=g("windowScrollContainerState"),Xa=K("ScrollerComponent"),bb=g("smoothScrollTargetReached"),pb=K("totalListHeight"),sb=K("deviation"),Ub=K("customScrollParent"),kc=K("context");bb=C(Ia,bb,Xa,Fg,Ub);var Mb=bb.scrollerRef;Ia=bb.scrollByCallback;bb=bb.scrollToCallback;
return AH(function(){return Mb.current=Ub||window,function(){Mb.current=null}},[Mb,Ub]),m("windowScrollTo",bb),m("scrollBy",Ia),(0,ci.createElement)(Xa,Wf({style:Wf({position:"relative"},ia,0!==pb?{height:pb+sb}:{}),"data-virtuoso-scroller":!0},Z,qj(Xa,kc)),ua)})}function go(b,g,m){return Array.from({length:g-b+1}).map(function(K,Z){return{index:Z+b,data:null==m?void 0:m[Z+b]}})}function pm(b,g){return b&&b.column===g.column&&b.row===g.row}function Pm(b,g,m,K){var Z=m.height;return void 0===Z||0===
K.length?{top:0,bottom:0}:{top:Hk(b,g,m,K[0].index),bottom:Hk(b,g,m,K[K.length-1].index)+Z}}function Hk(b,g,m,K){var Z=g.column;b=Rr(1,tu((b.width+Z)/(m.width+Z)));K=tu(K/b);m=K*m.height+Rr(0,K-1)*g.row;return 0<m?m+g.row:m}function kl(b,g,m){return"normal"===g||null!=g&&g.endsWith("px")||m(b+" was not resolved to pixel value correctly",g,lm.WARN),"normal"===g?0:parseInt(null!=g?g:"0",10)}function Qm(b,g,m,K=Z=>Z){return b*K(.5-g*(.5-m))}function Rn(b){return[-b[0],-b[1]]}function Nk(b,g){return[b[0]+
g[0],b[1]+g[1]]}function Jl(b,g){return[b[0]-g[0],b[1]-g[1]]}function Kl(b,g){return[b[0]*g,b[1]*g]}function xn(b){return[b[1],-b[0]]}function Pl(b,g){return b[0]===g[0]&&b[1]===g[1]}function Zo(b){return b[0]*b[0]+b[1]*b[1]}function Bo(b){var g=Math.hypot(b[0],b[1]);return[b[0]/g,b[1]/g]}function kn(b,g){return Math.hypot(b[1]-g[1],b[0]-g[0])}function Rm(b,g,m){let K=Math.sin(m);m=Math.cos(m);let Z=b[0]-g[0];b=b[1]-g[1];return[Z*m-b*K+g[0],Z*K+b*m+g[1]]}function Sm(b,g,m){return Nk(b,Kl(Jl(g,b),
m))}function wo(b,g,m){return Nk(b,Kl(g,m))}function Ro(b,g={}){let {size:m=16,smoothing:K=.5,thinning:Z=.5,simulatePressure:ia=!0,easing:ua=vd=>vd,start:Ia={},end:Xa={},last:bb=!1}=g,{cap:pb=!0,easing:sb=vd=>vd*(2-vd)}=Ia,{cap:Ub=!0,easing:kc=vd=>--vd*vd*vd+1}=Xa;if(0===b.length||0>=m)return[];var Mb=b[b.length-1].runningLength;let sc=!1===Ia.taper?0:!0===Ia.taper?Math.max(m,Mb):Ia.taper,lc=!1===Xa.taper?0:!0===Xa.taper?Math.max(m,Mb):Xa.taper;var Rb=Math.pow(m*K,2);g=[];let rc=[];var Gc=b.slice(0,
10).reduce((vd,Md)=>{var Rd=Md.pressure;ia&&(Md=Sr(1,Md.distance/m),Rd=Sr(1,1-Md),Rd=Sr(1,vd+.275*(Rd-vd)*Md));return(vd+Rd)/2},b[0].pressure),Cc=Qm(m,Z,b[b.length-1].pressure,ua),Uc;let ae=b[0].vector;var Gd=b[0].point;let qe=Gd;var cf=Gd;let Fe=qe;var df=!1;for(var ie=0;ie<b.length;ie++){var {pressure:Id}=b[ie];let {point:vd,vector:Md,distance:Rd,runningLength:Be}=b[ie];if(ie<b.length-1&&3>Mb-Be)continue;Z?(ia&&(Cc=Sr(1,Rd/m),Id=Sr(1,1-Cc),Id=Sr(1,Gc+.275*(Id-Gc)*Cc)),Cc=Qm(m,Z,Id,ua)):Cc=m/2;void 0===
Uc&&(Uc=Cc);var fd=Be<sc?sb(Be/sc):1,$c=Mb-Be<lc?kc((Mb-Be)/lc):1;Cc=Math.max(.01,Cc*Math.min(fd,$c));$c=(ie<b.length-1?b[ie+1]:b[ie]).vector;let Ce=ie<b.length-1?Md[0]*$c[0]+Md[1]*$c[1]:1;fd=null!==Ce&&0>Ce;if(0>Md[0]*ae[0]+Md[1]*ae[1]&&!df||fd){Gd=Kl(xn(ae),Cc);for(let Ke=1/13,Bf=0;1>=Bf;Bf+=Ke)cf=Rm(Jl(vd,Gd),vd,Ys*Bf),g.push(cf),Fe=Rm(Nk(vd,Gd),vd,Ys*-Bf),rc.push(Fe);Gd=cf;qe=Fe;fd&&(df=!0)}else(df=!1,ie===b.length-1)?(Id=Kl(xn(Md),Cc),g.push(Jl(vd,Id)),rc.push(Nk(vd,Id))):(Gc=Kl(xn(Sm($c,Md,
Ce)),Cc),cf=Jl(vd,Gc),(1>=ie||Zo(Jl(Gd,cf))>Rb)&&(g.push(cf),Gd=cf),Fe=Nk(vd,Gc),(1>=ie||Zo(Jl(qe,Fe))>Rb)&&(rc.push(Fe),qe=Fe),Gc=Id,ae=Md)}Mb=b[0].point.slice(0,2);Rb=1<b.length?b[b.length-1].point.slice(0,2):Nk(b[0].point,[1,1]);cf=[];df=[];if(1===b.length){if(!sc&&!lc||bb){b=wo(Mb,Bo(xn(Jl(Mb,Rb))),-(Uc||Cc));g=[];for(let vd=1/13,Md=vd;1>=Md;Md+=vd)g.push(Rm(b,Mb,2*Ys*Md));return g}}else{if(!(sc||lc&&1===b.length))if(pb)for(let vd=1/13,Md=vd;1>=Md;Md+=vd)Uc=Rm(rc[0],Mb,Ys*Md),cf.push(Uc);else ie=
Jl(g[0],rc[0]),Uc=Kl(ie,.5),ie=Kl(ie,.51),cf.push(Jl(Mb,Uc),Jl(Mb,ie),Nk(Mb,ie),Nk(Mb,Uc));Uc=xn(Rn(b[b.length-1].vector));if(lc||sc&&1===b.length)df.push(Rb);else if(Ub){b=wo(Rb,Uc,Cc);for(let vd=1/29,Md=vd;1>Md;Md+=vd)df.push(Rm(b,Rb,3*Ys*Md))}else df.push(Nk(Rb,Kl(Uc,Cc)),Nk(Rb,Kl(Uc,.99*Cc)),Jl(Rb,Kl(Uc,.99*Cc)),Jl(Rb,Kl(Uc,Cc)))}return g.concat(df,rc.reverse(),cf)}function So(b,g={}){var m;let {streamline:K=.5,size:Z=16,last:ia=!1}=g;if(0===b.length)return[];g=.15+.85*(1-K);b=Array.isArray(b[0])?
b:b.map(({x:sb,y:Ub,pressure:kc=.5})=>[sb,Ub,kc]);if(2===b.length){var ua=b[1];b=b.slice(0,-1);for(var Ia=1;5>Ia;Ia++)b.push(Sm(b[0],ua,Ia/4))}1===b.length&&(b=[...b,[...Nk(b[0],[1,1]),...b[0].slice(2)]]);ua=[{point:[b[0][0],b[0][1]],pressure:0<=b[0][2]?b[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ia=!1;let Xa=0,bb=ua[0],pb=b.length-1;for(let sb=1;sb<b.length;sb++){let Ub=ia&&sb===pb?b[sb].slice(0,2):Sm(bb.point,b[sb],g);if(Pl(bb.point,Ub))continue;let kc=kn(Ub,bb.point);if(Xa+=kc,sb<pb&&
!Ia){if(Xa<Z)continue;Ia=!0}bb={point:Ub,pressure:0<=b[sb][2]?b[sb][2]:.5,vector:Bo(Jl(bb.point,Ub)),distance:kc,runningLength:Xa};ua.push(bb)}return ua[0].vector=(null==(m=ua[1])?void 0:m.vector)||[0,0],ua}function Wo(b){return(new Rw(b)).exportAsSVG()}function fm(b){return(new Rw(b)).generatePreviewJsx()}function Am(b){b=b.match(/\.[0-9a-z]+$/i);if(!b)return"unknown";b=b[0].toLowerCase();return KI.includes(b)?"image":LI.includes(b)?"video":"unknown"}function wn(...b){return(...g)=>wa(this,null,
function*(){for(const m of b){const K=yield m(...g);if(K&&0<K.length)return K}return null})}function xo(b,g){return wa(this,null,function*(){return b.types.includes(g)?b instanceof DataTransfer?b.getData(g):yield(yield b.getType(g)).text():null})}function lo(){const {handlers:b}=YA.useContext(zp);return YA.useCallback((g,m)=>wa(this,[g,m],function*(K,{point:Z,shiftKey:ia,dataTransfer:ua,fromDrop:Ia}){function Xa(ie,Id){return wa(this,null,function*(){const fd=Object.values(K.assets).find($c=>$c.src===
ie);return fd?fd:{id:li(),type:Id?"video":"image",src:ie,size:yield We(b.makeAssetUrl(ie),Id)}})}function bb(ie){return wa(this,null,function*(){const Id=ie.filter(fd=>"unknown"!==Am(fd.name)).map(fd=>wa(this,null,function*(){try{const $c=yield b.saveAsset(fd);return yield Xa($c,"video"===Am(fd.name))}catch($c){console.error($c)}return null}));return(yield Promise.all(Id)).filter(Ch)})}function pb(ie){return[rb(Wa({},bq.defaultProps),{html:ie,point:[Z[0],Z[1]]})]}function sb(ie){return wa(this,null,
function*(){return wn(kc,Mb,lc,sc)(ie)})}function Ub(){return wa(this,null,function*(){const ie=yield navigator.clipboard.read(),Id=wn(Mb,lc);return(yield Promise.all(ie.map(fd=>Id(fd)))).flat().filter(Ch)})}function kc(ie){return wa(this,null,function*(){var Id=Array.from(ie.files);return 0<Id.length?(Gd=Id=yield bb(Id),Id.map((fd,$c)=>{const vd=rb(Wa({},"video"===fd.type?nu.defaultProps:mu.defaultProps),{id:li(),assetId:fd.id,opacity:1});fd.size&&Object.assign(vd,{point:[Z[0]-fd.size[0]/4+16*$c,
Z[1]-fd.size[1]/4+16*$c],size:re.div(fd.size,2)});return vd})):null})}function Mb(ie){return wa(this,null,function*(){if(ie.types.includes("text/plain")&&(ia||Ia))return null;const Id=yield xo(ie,"text/html");return Id?wn(Rb,pb)(Id):null})}function sc(ie){return wa(this,null,function*(){var Id,fd,$c,vd,Md,Rd,Be=ie.getData("block-uuid");if(Be){Be=Be.trim();const Ce=null==($c=null==(fd=null==(Id=window.logseq)?void 0:Id.api)?void 0:fd.get_selected_blocks)?void 0:$c.call(fd);Id=Ce&&1<(null==Ce?void 0:
Ce.length)?Ce.map(Ke=>Ke.uuid):[Be];null==(Rd=null==(Md=null==(vd=window.logseq)?void 0:vd.api)?void 0:Md.set_blocks_id)?void 0:Rd.call(Md,Id);vd=Id.map(Ke=>Cc(`((${Ke}))`));return(yield Promise.all(vd)).flat().filter(Ch).map((Ke,Bf)=>rb(Wa({},Ke),{point:[Z[0]+(cn.defaultProps.size[0]+16)*Bf,Z[1]]}))}return null})}function lc(ie){return wa(this,null,function*(){var Id=yield xo(ie,"text/plain");return Id?(Id=Id.trim(),wn(rc,Gc,Cc)(Id)):null})}function Rb(ie){if(ie=K.api.getClonedShapesFromTldrString(decodeURIComponent(ie),
Z)){const {shapes:Id,assets:fd,bindings:$c}=ie;qe.push(...fd);cf.push(...$c);return Id}return null}function rc(ie){return wa(this,null,function*(){try{new URL(ie);var Id=!0}catch(fd){Id=!1}return!Id||ia||Ia?null:/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/.test(ie)?[rb(Wa({},cr.defaultProps),{url:ie,point:[Z[0],Z[1]]})]:[rb(Wa({},$q.defaultProps),{url:ie,point:[Z[0],Z[1]]})]})}function Gc(ie){return ie.startsWith("\x3ciframe")?
[rb(Wa({},bq.defaultProps),{html:ie,point:[Z[0],Z[1]]})]:null}function Cc(ie){return wa(this,null,function*(){if(/^\(\(.*\)\)$/.test(ie)&&40===ie.length){var Id=ie.slice(2,-2);if(vf(Id))return[rb(Wa({},cn.defaultProps),{point:[Z[0],Z[1]],size:[400,0],pageId:Id,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(ie))return Id=ie.slice(2,-2),[rb(Wa({},cn.defaultProps),{point:[Z[0],Z[1]],size:[400,0],pageId:Id,blockType:"P"})];return(Id=null==b?void 0:b.addNewBlock(ie))?[rb(Wa({},cn.defaultProps),{size:[400,
0],point:[Z[0],Z[1]],pageId:Id,blockType:"B",compact:!0})]:null})}var Uc,ae;let Gd=[],qe=[];const cf=[];K.cursors.setCursor("progress");let Fe=[];try{ua?Fe.push(...(null!=(Uc=yield sb(ua))?Uc:[])):Fe.push(...(null!=(ae=yield Ub())?ae:[]))}catch(ie){console.error(ie)}const df=Fe.map(ie=>rb(Wa({},ie),{parentId:K.currentPageId,id:vf(ie.id)?ie.id:li()}));K.wrapUpdate(()=>{var ie=[...Gd,...qe];0<ie.length&&K.createAssets(ie);0<Fe.length&&K.createShapes(Fe);K.currentPage.updateBindings(Object.fromEntries(cf.map(Id=>
[Id.id,Id])));if(1===K.selectedShapesArray.length&&1===df.length&&!Ia){ie=K.selectedShapesArray[0];const Id=K.getShapeById(df[0].id);K.createNewLineBinding(ie,Id)}K.setSelectedShapes(df.map(Id=>Id.id));K.selectedTool.transition("idle");K.cursors.setCursor("default");Ia&&K.packIntoRectangle()})}),[])}function wl(){const b=lo();return tH.useCallback((g,m)=>wa(this,[g,m],function*(K,{dataTransfer:Z,point:ia}){b(K,{point:ia,shiftKey:!1,dataTransfer:Z,fromDrop:!0})}),[])}function Vo(){return MI.default.useCallback(b=>
wa(this,null,function*(){b.selectTool("logseq-portal").selectedTool.transition("creating")}),[])}var yo=Object.create,Bm=Object.defineProperty,yn=Object.defineProperties,Pn=Object.getOwnPropertyDescriptor,Tm=Object.getOwnPropertyDescriptors,mp=Object.getOwnPropertyNames,Qn=Object.getOwnPropertySymbols,Uo=Object.getPrototypeOf,La=Object.prototype.hasOwnProperty,$a=Object.prototype.propertyIsEnumerable,Ka=(b,g,m)=>g in b?Bm(b,g,{enumerable:!0,configurable:!0,writable:!0,value:m}):b[g]=m,Wa=(b,g)=>{for(var m in g||=
{})La.call(g,m)&&Ka(b,m,g[m]);if(Qn)for(m of Qn(g))$a.call(g,m)&&Ka(b,m,g[m]);return b},rb=(b,g)=>yn(b,Tm(g)),Yb=(b,g)=>{var m={},K;for(K in b)La.call(b,K)&&0>g.indexOf(K)&&(m[K]=b[K]);if(null!=b&&Qn)for(K of Qn(b))0>g.indexOf(K)&&$a.call(b,K)&&(m[K]=b[K]);return m},Yc=(b,g)=>function(){return g||(0,b[mp(b)[0]])((g={exports:{}}).exports,g),g.exports},Pd=(b,g,m,K)=>{if(g&&"object"===typeof g||"function"===typeof g)for(let Z of mp(g))La.call(b,Z)||Z===m||Bm(b,Z,{get:()=>g[Z],enumerable:!(K=Pn(g,Z))||
K.enumerable});return b},td=(b,g,m)=>(m=null!=b?yo(Uo(b)):{},Pd(!g&&b&&b.__esModule?m:Bm(m,"default",{value:b,enumerable:!0}),b)),id=(b,g,m,K)=>{for(var Z=1<K?void 0:K?Pn(g,m):g,ia=b.length-1,ua;0<=ia;ia--)if(ua=b[ia])Z=(K?ua(g,m,Z):ua(Z))||Z;K&&Z&&Bm(g,m,Z);return Z},F=(b,g,m)=>{Ka(b,"symbol"!==typeof g?g+"":g,m);return m},wa=(b,g,m)=>new Promise((K,Z)=>{var ia=Xa=>{try{Ia(m.next(Xa))}catch(bb){Z(bb)}},ua=Xa=>{try{Ia(m.throw(Xa))}catch(bb){Z(bb)}},Ia=Xa=>Xa.done?K(Xa.value):Promise.resolve(Xa.value).then(ia,
ua);Ia((m=m.apply(b,g)).next())}),Va=Yc({["../../node_modules/mousetrap/mousetrap.js"](b,g){(function(m,K,Z){function ia(lc,Rb,rc){lc.addEventListener?lc.addEventListener(Rb,rc,!1):lc.attachEvent("on"+Rb,rc)}function ua(lc){if("keypress"==lc.type){var Rb=String.fromCharCode(lc.which);lc.shiftKey||(Rb=Rb.toLowerCase());return Rb}return sb[lc.which]?sb[lc.which]:Ub[lc.which]?Ub[lc.which]:String.fromCharCode(lc.which).toLowerCase()}function Ia(lc){return"shift"==lc||"ctrl"==lc||"alt"==lc||"meta"==lc}
function Xa(lc,Rb){var rc,Gc=[];"+"===lc?lc=["+"]:(lc=lc.replace(/\+{2}/g,"+plus"),lc=lc.split("+"));for(rc=0;rc<lc.length;++rc){var Cc=lc[rc];Mb[Cc]&&(Cc=Mb[Cc]);Rb&&"keypress"!=Rb&&kc[Cc]&&(Cc=kc[Cc],Gc.push("shift"));Ia(Cc)&&Gc.push(Cc)}lc=Cc;if(!Rb){if(!sc){sc={};for(var Uc in sb)95<Uc&&112>Uc||sb.hasOwnProperty(Uc)&&(sc[sb[Uc]]=Uc)}Rb=sc[lc]?"keydown":"keypress"}"keypress"==Rb&&Gc.length&&(Rb="keydown");return{key:Cc,modifiers:Gc,action:Rb}}function bb(lc,Rb){return null===lc||lc===K?!1:lc===
Rb?!0:bb(lc.parentNode,Rb)}function pb(lc){function Rb(Id){Id=Id||{};var fd=!1,$c;for($c in qe)Id[$c]?fd=!0:qe[$c]=0;fd||(ie=!1)}function rc(Id,fd,$c,vd,Md,Rd){var Be,Ce=[],Ke=$c.type;if(!Gd._callbacks[Id])return[];"keyup"==Ke&&Ia(Id)&&(fd=[Id]);for(Be=0;Be<Gd._callbacks[Id].length;++Be){var Bf=Gd._callbacks[Id][Be];if((vd||!Bf.seq||qe[Bf.seq]==Bf.level)&&Ke==Bf.action){var sf;(sf="keypress"==Ke&&!$c.metaKey&&!$c.ctrlKey)||(sf=Bf.modifiers,sf=fd.sort().join(",")===sf.sort().join(","));sf&&(sf=vd&&
Bf.seq==vd&&Bf.level==Rd,(!vd&&Bf.combo==Md||sf)&&Gd._callbacks[Id].splice(Be,1),Ce.push(Bf))}}return Ce}function Gc(Id,fd,$c,vd){Gd.stopCallback(fd,fd.target||fd.srcElement,$c,vd)||!1!==Id(fd,$c)||(fd.preventDefault?fd.preventDefault():fd.returnValue=!1,fd.stopPropagation?fd.stopPropagation():fd.cancelBubble=!0)}function Cc(Id){"number"!==typeof Id.which&&(Id.which=Id.keyCode);var fd=ua(Id);if(fd)if("keyup"==Id.type&&Fe===fd)Fe=!1;else{var $c=Gd,vd=$c.handleKey,Md=[];Id.shiftKey&&Md.push("shift");
Id.altKey&&Md.push("alt");Id.ctrlKey&&Md.push("ctrl");Id.metaKey&&Md.push("meta");vd.call($c,fd,Md,Id)}}function Uc(Id,fd,$c,vd){function Md(Ke){return function(){ie=Ke;++qe[Id];clearTimeout(cf);cf=setTimeout(Rb,1E3)}}function Rd(Ke){Gc($c,Ke,Id);"keyup"!==vd&&(Fe=ua(Ke));setTimeout(Rb,10)}for(var Be=qe[Id]=0;Be<fd.length;++Be){var Ce=Be+1===fd.length?Rd:Md(vd||Xa(fd[Be+1]).action);ae(fd[Be],Ce,vd,Id,Be)}}function ae(Id,fd,$c,vd,Md){Gd._directMap[Id+":"+$c]=fd;Id=Id.replace(/\s+/g," ");var Rd=Id.split(" ");
1<Rd.length?Uc(Id,Rd,fd,$c):($c=Xa(Id,$c),Gd._callbacks[$c.key]=Gd._callbacks[$c.key]||[],rc($c.key,$c.modifiers,{type:$c.action},vd,Id,Md),Gd._callbacks[$c.key][vd?"unshift":"push"]({callback:fd,modifiers:$c.modifiers,action:$c.action,seq:vd,level:Md,combo:Id}))}var Gd=this;lc=lc||K;if(!(Gd instanceof pb))return new pb(lc);Gd.target=lc;Gd._callbacks={};Gd._directMap={};var qe={},cf,Fe=!1,df=!1,ie=!1;Gd._handleKey=function(Id,fd,$c){var vd=rc(Id,fd,$c),Md;fd={};var Rd=0,Be=!1;for(Md=0;Md<vd.length;++Md)vd[Md].seq&&
(Rd=Math.max(Rd,vd[Md].level));for(Md=0;Md<vd.length;++Md)vd[Md].seq?vd[Md].level==Rd&&(Be=!0,fd[vd[Md].seq]=1,Gc(vd[Md].callback,$c,vd[Md].combo,vd[Md].seq)):Be||Gc(vd[Md].callback,$c,vd[Md].combo);vd="keypress"==$c.type&&df;$c.type!=ie||Ia(Id)||vd||Rb(fd);df=Be&&"keydown"==$c.type};Gd._bindMultiple=function(Id,fd,$c){for(var vd=0;vd<Id.length;++vd)ae(Id[vd],fd,$c)};ia(lc,"keypress",Cc);ia(lc,"keydown",Cc);ia(lc,"keyup",Cc)}if(m){var sb={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",
20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},Ub={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},kc={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","\x26":"7","*":"8","(":"9",")":"0",_:"-","+":"\x3d",":":";",'"':"'","\x3c":",","\x3e":".","?":"/","|":"\\"},Mb={option:"alt",command:"meta",
"return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},sc;for(Z=1;20>Z;++Z)sb[111+Z]="f"+Z;for(Z=0;9>=Z;++Z)sb[Z+96]=Z.toString();pb.prototype.bind=function(lc,Rb,rc){lc=lc instanceof Array?lc:[lc];this._bindMultiple.call(this,lc,Rb,rc);return this};pb.prototype.unbind=function(lc,Rb){return this.bind.call(this,lc,function(){},Rb)};pb.prototype.trigger=function(lc,Rb){if(this._directMap[lc+":"+Rb])this._directMap[lc+":"+Rb]({},lc);return this};pb.prototype.reset=
function(){this._callbacks={};this._directMap={};return this};pb.prototype.stopCallback=function(lc,Rb){if(-1<(" "+Rb.className+" ").indexOf(" mousetrap ")||bb(Rb,this.target))return!1;if("composedPath"in lc&&"function"===typeof lc.composedPath){var rc=lc.composedPath()[0];rc!==lc.target&&(Rb=rc)}return"INPUT"==Rb.tagName||"SELECT"==Rb.tagName||"TEXTAREA"==Rb.tagName||Rb.isContentEditable};pb.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};pb.addKeycodes=function(lc){for(var Rb in lc)lc.hasOwnProperty(Rb)&&
(sb[Rb]=lc[Rb]);sc=null};pb.init=function(){var lc=pb(K),Rb;for(Rb in lc)"_"!==Rb.charAt(0)&&(pb[Rb]=function(rc){return function(){return lc[rc].apply(lc,arguments)}}(Rb))};pb.init();m.Mousetrap=pb;"undefined"!==typeof g&&g.exports&&(g.exports=pb);"function"===typeof define&&define.amd&&define(function(){return pb})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)}}),wb=Yc({["../../node_modules/rbush/rbush.min.js"](b,g){!function(m,K){"object"==typeof b&&"undefined"!=
typeof g?g.exports=K():"function"==typeof define&&define.amd?define(K):(m=m||self).RBush=K()}(b,function(){function m(Rb,rc,Gc,Cc,Uc){!function ie(Gd,qe,cf,Fe,df){for(;Fe>cf;){if(600<Fe-cf){var Id=Fe-cf+1,fd=qe-cf+1,$c=Math.log(Id),vd=.5*Math.exp(2*$c/3);$c=.5*Math.sqrt($c*vd*(Id-vd)/Id)*(0>fd-Id/2?-1:1);ie(Gd,qe,Math.max(cf,Math.floor(qe-fd*vd/Id+$c)),Math.min(Fe,Math.floor(qe+(Id-fd)*vd/Id+$c)),df)}Id=Gd[qe];fd=cf;vd=Fe;K(Gd,cf,qe);for(0<df(Gd[Fe],Id)&&K(Gd,cf,Fe);fd<vd;){K(Gd,fd,vd);fd++;for(vd--;0>
df(Gd[fd],Id);)fd++;for(;0<df(Gd[vd],Id);)vd--}0===df(Gd[cf],Id)?K(Gd,cf,vd):K(Gd,++vd,Fe);vd<=qe&&(cf=vd+1);qe<=vd&&(Fe=vd-1)}}(Rb,rc,Gc||0,Cc||Rb.length-1,Uc||Z)}function K(Rb,rc,Gc){var Cc=Rb[rc];Rb[rc]=Rb[Gc];Rb[Gc]=Cc}function Z(Rb,rc){return Rb<rc?-1:Rb>rc?1:0}function ia(Rb,rc){ua(Rb,0,Rb.children.length,rc,Rb)}function ua(Rb,rc,Gc,Cc,Uc){Uc||=Mb(null);Uc.minX=1/0;Uc.minY=1/0;Uc.maxX=-1/0;for(Uc.maxY=-1/0;rc<Gc;rc++){var ae=Rb.children[rc];Ia(Uc,Rb.leaf?Cc(ae):ae)}return Uc}function Ia(Rb,
rc){return Rb.minX=Math.min(Rb.minX,rc.minX),Rb.minY=Math.min(Rb.minY,rc.minY),Rb.maxX=Math.max(Rb.maxX,rc.maxX),Rb.maxY=Math.max(Rb.maxY,rc.maxY),Rb}function Xa(Rb,rc){return Rb.minX-rc.minX}function bb(Rb,rc){return Rb.minY-rc.minY}function pb(Rb){return(Rb.maxX-Rb.minX)*(Rb.maxY-Rb.minY)}function sb(Rb){return Rb.maxX-Rb.minX+(Rb.maxY-Rb.minY)}function Ub(Rb,rc){return Rb.minX<=rc.minX&&Rb.minY<=rc.minY&&rc.maxX<=Rb.maxX&&rc.maxY<=Rb.maxY}function kc(Rb,rc){return rc.minX<=Rb.maxX&&rc.minY<=Rb.maxY&&
rc.maxX>=Rb.minX&&rc.maxY>=Rb.minY}function Mb(Rb){return{children:Rb,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function sc(Rb,rc,Gc,Cc,Uc){for(var ae=[rc,Gc];ae.length;)if(!((Gc=ae.pop())-(rc=ae.pop())<=Cc)){var Gd=rc+Math.ceil((Gc-rc)/Cc/2)*Cc;m(Rb,Gd,rc,Gc,Uc);ae.push(rc,Gd,Gd,Gc)}}var lc=function(Rb){void 0===Rb&&(Rb=9);this._maxEntries=Math.max(4,Rb);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return lc.prototype.all=function(){return this._all(this.data,
[])},lc.prototype.search=function(Rb){var rc=this.data,Gc=[];if(!kc(Rb,rc))return Gc;for(var Cc=this.toBBox,Uc=[];rc;){for(var ae=0;ae<rc.children.length;ae++){var Gd=rc.children[ae],qe=rc.leaf?Cc(Gd):Gd;kc(Rb,qe)&&(rc.leaf?Gc.push(Gd):Ub(Rb,qe)?this._all(Gd,Gc):Uc.push(Gd))}rc=Uc.pop()}return Gc},lc.prototype.collides=function(Rb){var rc=this.data;if(!kc(Rb,rc))return!1;for(var Gc=[];rc;){for(var Cc=0;Cc<rc.children.length;Cc++){var Uc=rc.children[Cc],ae=rc.leaf?this.toBBox(Uc):Uc;if(kc(Rb,ae)){if(rc.leaf||
Ub(Rb,ae))return!0;Gc.push(Uc)}}rc=Gc.pop()}return!1},lc.prototype.load=function(Rb){if(!Rb||!Rb.length)return this;if(Rb.length<this._minEntries){for(var rc=0;rc<Rb.length;rc++)this.insert(Rb[rc]);return this}Rb=this._build(Rb.slice(),0,Rb.length-1,0);this.data.children.length?this.data.height===Rb.height?this._splitRoot(this.data,Rb):(this.data.height<Rb.height&&(rc=this.data,this.data=Rb,Rb=rc),this._insert(Rb,this.data.height-Rb.height-1,!0)):this.data=Rb;return this},lc.prototype.insert=function(Rb){return Rb&&
this._insert(Rb,this.data.height-1),this},lc.prototype.clear=function(){return this.data=Mb([]),this},lc.prototype.remove=function(Rb,rc){if(!Rb)return this;for(var Gc,Cc,Uc,ae=this.data,Gd=this.toBBox(Rb),qe=[],cf=[];ae||qe.length;){if(ae||(ae=qe.pop(),Cc=qe[qe.length-1],Gc=cf.pop(),Uc=!0),ae.leaf){a:{var Fe=Rb;var df=ae.children,ie=rc;if(ie){for(var Id=0;Id<df.length;Id++)if(ie(Fe,df[Id])){Fe=Id;break a}Fe=-1}else Fe=df.indexOf(Fe)}if(-1!==Fe)return ae.children.splice(Fe,1),qe.push(ae),this._condense(qe),
this}Uc||ae.leaf||!Ub(ae,Gd)?Cc?(Gc++,ae=Cc.children[Gc],Uc=!1):ae=null:(qe.push(ae),cf.push(Gc),Gc=0,Cc=ae,ae=ae.children[0])}return this},lc.prototype.toBBox=function(Rb){return Rb},lc.prototype.compareMinX=function(Rb,rc){return Rb.minX-rc.minX},lc.prototype.compareMinY=function(Rb,rc){return Rb.minY-rc.minY},lc.prototype.toJSON=function(){return this.data},lc.prototype.fromJSON=function(Rb){return this.data=Rb,this},lc.prototype._all=function(Rb,rc){for(var Gc=[];Rb;)Rb.leaf?rc.push.apply(rc,
Rb.children):Gc.push.apply(Gc,Rb.children),Rb=Gc.pop();return rc},lc.prototype._build=function(Rb,rc,Gc,Cc){var Uc,ae=Gc-rc+1,Gd=this._maxEntries;if(ae<=Gd)return ia(Uc=Mb(Rb.slice(rc,Gc+1)),this.toBBox),Uc;Cc||(Cc=Math.ceil(Math.log(ae)/Math.log(Gd)),Gd=Math.ceil(ae/Math.pow(Gd,Cc-1)));(Uc=Mb([])).leaf=!1;Uc.height=Cc;ae=Math.ceil(ae/Gd);Gd=ae*Math.ceil(Math.sqrt(Gd));for(sc(Rb,rc,Gc,Gd,this.compareMinX);rc<=Gc;rc+=Gd){var qe=Math.min(rc+Gd-1,Gc);sc(Rb,rc,qe,ae,this.compareMinY);for(var cf=rc;cf<=
qe;cf+=ae)Uc.children.push(this._build(Rb,cf,Math.min(cf+ae-1,qe),Cc-1))}return ia(Uc,this.toBBox),Uc},lc.prototype._chooseSubtree=function(Rb,rc,Gc,Cc){for(;Cc.push(rc),!rc.leaf&&Cc.length-1!==Gc;){for(var Uc=1/0,ae=1/0,Gd=void 0,qe=0;qe<rc.children.length;qe++){var cf=rc.children[qe],Fe=pb(cf),df=(ie=Rb,Id=cf,(Math.max(Id.maxX,ie.maxX)-Math.min(Id.minX,ie.minX))*(Math.max(Id.maxY,ie.maxY)-Math.min(Id.minY,ie.minY))-Fe);df<ae?(ae=df,Uc=Fe<Uc?Fe:Uc,Gd=cf):df===ae&&Fe<Uc&&(Uc=Fe,Gd=cf)}rc=Gd||rc.children[0]}var ie,
Id;return rc},lc.prototype._insert=function(Rb,rc,Gc){Gc=Gc?Rb:this.toBBox(Rb);var Cc=[],Uc=this._chooseSubtree(Gc,this.data,rc,Cc);Uc.children.push(Rb);for(Ia(Uc,Gc);0<=rc&&Cc[rc].children.length>this._maxEntries;)this._split(Cc,rc),rc--;this._adjustParentBBoxes(Gc,Cc,rc)},lc.prototype._split=function(Rb,rc){var Gc=Rb[rc],Cc=Gc.children.length,Uc=this._minEntries;this._chooseSplitAxis(Gc,Uc,Cc);Cc=this._chooseSplitIndex(Gc,Uc,Cc);Cc=Mb(Gc.children.splice(Cc,Gc.children.length-Cc));Cc.height=Gc.height;
Cc.leaf=Gc.leaf;ia(Gc,this.toBBox);ia(Cc,this.toBBox);rc?Rb[rc-1].children.push(Cc):this._splitRoot(Gc,Cc)},lc.prototype._splitRoot=function(Rb,rc){this.data=Mb([Rb,rc]);this.data.height=Rb.height+1;this.data.leaf=!1;ia(this.data,this.toBBox)},lc.prototype._chooseSplitIndex=function(Rb,rc,Gc){for(var Cc,Uc,ae,Gd,qe,cf,Fe,df=1/0,ie=1/0,Id=rc;Id<=Gc-rc;Id++){var fd=ua(Rb,0,Id,this.toBBox),$c=ua(Rb,Id,Gc,this.toBBox),vd=(Uc=fd,ae=$c,Gd=void 0,qe=void 0,cf=void 0,Fe=void 0,Gd=Math.max(Uc.minX,ae.minX),
qe=Math.max(Uc.minY,ae.minY),cf=Math.min(Uc.maxX,ae.maxX),Fe=Math.min(Uc.maxY,ae.maxY),Math.max(0,cf-Gd)*Math.max(0,Fe-qe));fd=pb(fd)+pb($c);vd<df?(df=vd,Cc=Id,ie=fd<ie?fd:ie):vd===df&&fd<ie&&(ie=fd,Cc=Id)}return Cc||Gc-rc},lc.prototype._chooseSplitAxis=function(Rb,rc,Gc){var Cc=Rb.leaf?this.compareMinX:Xa,Uc=Rb.leaf?this.compareMinY:bb;this._allDistMargin(Rb,rc,Gc,Cc)<this._allDistMargin(Rb,rc,Gc,Uc)&&Rb.children.sort(Cc)},lc.prototype._allDistMargin=function(Rb,rc,Gc,Cc){Rb.children.sort(Cc);Cc=
this.toBBox;for(var Uc=ua(Rb,0,rc,Cc),ae=ua(Rb,Gc-rc,Gc,Cc),Gd=sb(Uc)+sb(ae),qe=rc;qe<Gc-rc;qe++){var cf=Rb.children[qe];Ia(Uc,Rb.leaf?Cc(cf):cf);Gd+=sb(Uc)}for(Gc=Gc-rc-1;Gc>=rc;Gc--)Uc=Rb.children[Gc],Ia(ae,Rb.leaf?Cc(Uc):Uc),Gd+=sb(ae);return Gd},lc.prototype._adjustParentBBoxes=function(Rb,rc,Gc){for(;0<=Gc;Gc--)Ia(rc[Gc],Rb)},lc.prototype._condense=function(Rb){for(var rc=Rb.length-1,Gc=void 0;0<=rc;rc--)0===Rb[rc].children.length?0<rc?(Gc=Rb[rc-1].children).splice(Gc.indexOf(Rb[rc]),1):this.clear():
ia(Rb[rc],this.toBBox)},lc})}}),bc=Yc({["../../node_modules/fast-copy/dist/fast-copy.js"](b,g){(function(m,K){"object"===typeof b&&"undefined"!==typeof g?g.exports=K():"function"===typeof define&&define.amd?define(K):(m="undefined"!==typeof globalThis?globalThis:m||self,m["fast-copy"]=K())})(b,function(){function m(Gd,qe){var cf=!(!qe||!qe.isStrict),Fe=qe&&qe.realm||ae,df=cf?rc:Rb,ie=function(Id,fd){if(!Id||"object"!==typeof Id)return Id;if(fd.has(Id))return fd.get(Id);var $c=Id.__proto__||Uc(Id);
$c=$c&&$c.constructor;if(!$c||$c===Fe.Object)return df(Id,Fe,ie,fd);if(Cc(Id)){if(cf)return rc(Id,Fe,ie,fd);var vd=new $c;fd.set(Id,vd);$c=0;for(var Md=Id.length;$c<Md;++$c)vd[$c]=ie(Id[$c],fd);return vd}if(Id instanceof Fe.Date)return new $c(Id.getTime());if(Id instanceof Fe.RegExp)return vd=new $c(Id.source,Id.flags||Gc(Id)),vd.lastIndex=Id.lastIndex,vd;if(Fe.Map&&Id instanceof Fe.Map)return vd=new $c,fd.set(Id,vd),Id.forEach(function(Rd,Be){vd.set(Be,ie(Rd,fd))}),vd;if(Fe.Set&&Id instanceof Fe.Set)return vd=
new $c,fd.set(Id,vd),Id.forEach(function(Rd){vd.add(ie(Rd,fd))}),vd;if(Fe.Blob&&Id instanceof Fe.Blob)return Id.slice(0,Id.size,Id.type);if(Fe.Buffer&&Fe.Buffer.isBuffer(Id))return vd=Fe.Buffer.allocUnsafe?Fe.Buffer.allocUnsafe(Id.length):new $c(Id.length),fd.set(Id,vd),Id.copy(vd),vd;if(Fe.ArrayBuffer){if(Fe.ArrayBuffer.isView(Id))return vd=new $c(Id.buffer.slice(0)),fd.set(Id,vd),vd;if(Id instanceof Fe.ArrayBuffer)return vd=Id.slice(0),fd.set(Id,vd),vd}return"function"===typeof Id.then||Id instanceof
Error||Fe.WeakMap&&Id instanceof Fe.WeakMap||Fe.WeakSet&&Id instanceof Fe.WeakSet?Id:df(Id,Fe,ie,fd)};return ie(Gd,sc())}var K=Function.prototype.toString,Z=Object.create,ia=Object.defineProperty,ua=Object.getOwnPropertyDescriptor,Ia=Object.getOwnPropertyNames,Xa=Object.getOwnPropertySymbols,bb=Object.getPrototypeOf,pb=Object.prototype,sb=pb.hasOwnProperty,Ub=pb.propertyIsEnumerable,kc="function"===typeof Xa,Mb="function"===typeof WeakMap,sc=function(){if(Mb)return function(){return new WeakMap};
var Gd=function(){function qe(){this._keys=[];this._values=[]}qe.prototype.has=function(cf){return!!~this._keys.indexOf(cf)};qe.prototype.get=function(cf){return this._values[this._keys.indexOf(cf)]};qe.prototype.set=function(cf,Fe){this._keys.push(cf);this._values.push(Fe)};return qe}();return function(){return new Gd}}(),lc=function(Gd,qe){Gd=Gd.__proto__||bb(Gd);if(!Gd)return Z(null);var cf=Gd.constructor;if(cf===qe.Object)return Gd===qe.Object.prototype?{}:Z(Gd);if(~K.call(cf).indexOf("[native code]"))try{return new cf}catch(Fe){}return Z(Gd)},
Rb=function(Gd,qe,cf,Fe){qe=lc(Gd,qe);Fe.set(Gd,qe);for(var df in Gd)sb.call(Gd,df)&&(qe[df]=cf(Gd[df],Fe));if(kc){df=Xa(Gd);for(var ie=0,Id=df.length,fd;ie<Id;++ie)fd=df[ie],Ub.call(Gd,fd)&&(qe[fd]=cf(Gd[fd],Fe))}return qe},rc=function(Gd,qe,cf,Fe){qe=lc(Gd,qe);Fe.set(Gd,qe);for(var df=kc?Ia(Gd).concat(Xa(Gd)):Ia(Gd),ie=0,Id=df.length,fd,$c;ie<Id;++ie)if(fd=df[ie],"callee"!==fd&&"caller"!==fd)if($c=ua(Gd,fd)){$c.get||$c.set||($c.value=cf(Gd[fd],Fe));try{ia(qe,fd,$c)}catch(vd){qe[fd]=$c.value}}else qe[fd]=
cf(Gd[fd],Fe);return qe},Gc=function(Gd){var qe="";Gd.global&&(qe+="g");Gd.ignoreCase&&(qe+="i");Gd.multiline&&(qe+="m");Gd.unicode&&(qe+="u");Gd.sticky&&(qe+="y");return qe},Cc=Array.isArray,Uc=Object.getPrototypeOf,ae=function(){if("undefined"!==typeof globalThis)return globalThis;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof qa)return qa;console&&console.error&&console.error('Unable to locate global object, returning "this".');return this}();
m.default=m;m.strict=function(Gd,qe){return m(Gd,{isStrict:!0,realm:qe?qe.realm:void 0})};return m})}}),vc=Yc({["../../node_modules/fast-deep-equal/index.js"](b,g){g.exports=function ia(K,Z){if(K===Z)return!0;if(K&&Z&&"object"==typeof K&&"object"==typeof Z){if(K.constructor!==Z.constructor)return!1;var ua;if(Array.isArray(K)){var Ia=K.length;if(Ia!=Z.length)return!1;for(ua=Ia;0!==ua--;)if(!ia(K[ua],Z[ua]))return!1;return!0}if(K.constructor===RegExp)return K.source===Z.source&&K.flags===Z.flags;if(K.valueOf!==
Object.prototype.valueOf)return K.valueOf()===Z.valueOf();if(K.toString!==Object.prototype.toString)return K.toString()===Z.toString();var Xa=Object.keys(K);Ia=Xa.length;if(Ia!==Object.keys(Z).length)return!1;for(ua=Ia;0!==ua--;)if(!Object.prototype.hasOwnProperty.call(Z,Xa[ua]))return!1;for(ua=Ia;0!==ua--;)if(Ia=Xa[ua],!ia(K[Ia],Z[Ia]))return!1;return!0}return K!==K&&Z!==Z}}}),Vc=Yc({["../../../node_modules/deepmerge/dist/cjs.js"](b,g){function m(sb,Ub){return!1!==Ub.clone&&Ub.isMergeableObject(sb)?
Xa(Array.isArray(sb)?[]:{},sb,Ub):sb}function K(sb,Ub,kc){return sb.concat(Ub).map(function(Mb){return m(Mb,kc)})}function Z(sb){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(sb).filter(function(Ub){return sb.propertyIsEnumerable(Ub)}):[]}function ia(sb){return Object.keys(sb).concat(Z(sb))}function ua(sb,Ub){try{return Ub in sb}catch(kc){return!1}}function Ia(sb,Ub,kc){var Mb={};kc.isMergeableObject(sb)&&ia(sb).forEach(function(sc){Mb[sc]=m(sb[sc],kc)});ia(Ub).forEach(function(sc){if(!ua(sb,
sc)||Object.hasOwnProperty.call(sb,sc)&&Object.propertyIsEnumerable.call(sb,sc))if(ua(sb,sc)&&kc.isMergeableObject(Ub[sc])){if(kc.customMerge){var lc=kc.customMerge(sc);lc="function"===typeof lc?lc:Xa}else lc=Xa;Mb[sc]=lc(sb[sc],Ub[sc],kc)}else Mb[sc]=m(Ub[sc],kc)});return Mb}function Xa(sb,Ub,kc){kc=kc||{};kc.arrayMerge=kc.arrayMerge||K;kc.isMergeableObject=kc.isMergeableObject||bb;kc.cloneUnlessOtherwiseSpecified=m;var Mb=Array.isArray(Ub),sc=Array.isArray(sb);return Mb!==sc?m(Ub,kc):Mb?kc.arrayMerge(sb,
Ub,kc):Ia(sb,Ub,kc)}var bb=function(sb){var Ub;if(Ub=!!sb&&"object"===typeof sb)Ub=Object.prototype.toString.call(sb),Ub=!("[object RegExp]"===Ub||"[object Date]"===Ub||sb.$$typeof===pb);return Ub},pb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Xa.all=function(sb,Ub){if(!Array.isArray(sb))throw Error("first argument should be an array");return sb.reduce(function(kc,Mb){return Xa(kc,Mb,Ub)},{})};g.exports=Xa}}),pd=Yc({["../../node_modules/tslib/tslib.js"](b,g){var m,K,
Z,ia,ua,Ia,Xa,bb,pb,sb,Ub,kc,Mb,sc,lc,Rb,rc,Gc,Cc,Uc,ae,Gd,qe,cf,Fe;(function(df){function ie(fd,$c){fd!==Id&&("function"===typeof Object.create?Object.defineProperty(fd,"__esModule",{value:!0}):fd.__esModule=!0);return function(vd,Md){return fd[vd]=$c?$c(vd,Md):Md}}var Id="object"===typeof qa?qa:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(fd){df(ie(Id,ie(fd)))}):"object"===typeof g&&"object"===typeof g.exports?
df(ie(Id,ie(g.exports))):df(ie(Id))})(function(df){var ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(fd,$c){fd.__proto__=$c}||function(fd,$c){for(var vd in $c)Object.prototype.hasOwnProperty.call($c,vd)&&(fd[vd]=$c[vd])};m=function(fd,$c){function vd(){this.constructor=fd}if("function"!==typeof $c&&null!==$c)throw new TypeError("Class extends value "+String($c)+" is not a constructor or null");ie(fd,$c);fd.prototype=null===$c?Object.create($c):(vd.prototype=$c.prototype,new vd)};
K=Object.assign||function(fd){for(var $c,vd=1,Md=arguments.length;vd<Md;vd++){$c=arguments[vd];for(var Rd in $c)Object.prototype.hasOwnProperty.call($c,Rd)&&(fd[Rd]=$c[Rd])}return fd};Z=function(fd,$c){var vd={},Md;for(Md in fd)Object.prototype.hasOwnProperty.call(fd,Md)&&0>$c.indexOf(Md)&&(vd[Md]=fd[Md]);if(null!=fd&&"function"===typeof Object.getOwnPropertySymbols){var Rd=0;for(Md=Object.getOwnPropertySymbols(fd);Rd<Md.length;Rd++)0>$c.indexOf(Md[Rd])&&Object.prototype.propertyIsEnumerable.call(fd,
Md[Rd])&&(vd[Md[Rd]]=fd[Md[Rd]])}return vd};ia=function(fd,$c,vd,Md){var Rd=arguments.length,Be=3>Rd?$c:null===Md?Md=Object.getOwnPropertyDescriptor($c,vd):Md,Ce;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)Be=Reflect.decorate(fd,$c,vd,Md);else for(var Ke=fd.length-1;0<=Ke;Ke--)if(Ce=fd[Ke])Be=(3>Rd?Ce(Be):3<Rd?Ce($c,vd,Be):Ce($c,vd))||Be;return 3<Rd&&Be&&Object.defineProperty($c,vd,Be),Be};ua=function(fd,$c){return function(vd,Md){$c(vd,Md,fd)}};Ia=function(fd,$c){if("object"===
typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(fd,$c)};Xa=function(fd,$c,vd,Md){function Rd(Be){return Be instanceof vd?Be:new vd(function(Ce){Ce(Be)})}return new (vd||=Promise)(function(Be,Ce){function Ke(bh){try{sf(Md.next(bh))}catch(Pg){Ce(Pg)}}function Bf(bh){try{sf(Md["throw"](bh))}catch(Pg){Ce(Pg)}}function sf(bh){bh.done?Be(bh.value):Rd(bh.value).then(Ke,Bf)}sf((Md=Md.apply(fd,$c||[])).next())})};bb=function(fd,$c){function vd(sf){return function(bh){return Md([sf,
bh])}}function Md(sf){if(Be)throw new TypeError("Generator is already executing.");for(;Rd;)try{if(Be=1,Ce&&(Ke=sf[0]&2?Ce["return"]:sf[0]?Ce["throw"]||((Ke=Ce["return"])&&Ke.call(Ce),0):Ce.next)&&!(Ke=Ke.call(Ce,sf[1])).done)return Ke;if(Ce=0,Ke)sf=[sf[0]&2,Ke.value];switch(sf[0]){case 0:case 1:Ke=sf;break;case 4:return Rd.label++,{value:sf[1],done:!1};case 5:Rd.label++;Ce=sf[1];sf=[0];continue;case 7:sf=Rd.ops.pop();Rd.trys.pop();continue;default:if(!(Ke=Rd.trys,Ke=0<Ke.length&&Ke[Ke.length-1])&&
(6===sf[0]||2===sf[0])){Rd=0;continue}if(3===sf[0]&&(!Ke||sf[1]>Ke[0]&&sf[1]<Ke[3]))Rd.label=sf[1];else if(6===sf[0]&&Rd.label<Ke[1])Rd.label=Ke[1],Ke=sf;else if(Ke&&Rd.label<Ke[2])Rd.label=Ke[2],Rd.ops.push(sf);else{Ke[2]&&Rd.ops.pop();Rd.trys.pop();continue}}sf=$c.call(fd,Rd)}catch(bh){sf=[6,bh],Ce=0}finally{Be=Ke=0}if(sf[0]&5)throw sf[1];return{value:sf[0]?sf[1]:void 0,done:!0}}var Rd={label:0,sent:function(){if(Ke[0]&1)throw Ke[1];return Ke[1]},trys:[],ops:[]},Be,Ce,Ke,Bf;return Bf={next:vd(0),
"throw":vd(1),"return":vd(2)},"function"===typeof Symbol&&(Bf[Symbol.iterator]=function(){return this}),Bf};pb=function(fd,$c){for(var vd in fd)"default"===vd||Object.prototype.hasOwnProperty.call($c,vd)||Fe($c,fd,vd)};Fe=Object.create?function(fd,$c,vd,Md){void 0===Md&&(Md=vd);var Rd=Object.getOwnPropertyDescriptor($c,vd);if(!Rd||("get"in Rd?!$c.__esModule:Rd.writable||Rd.configurable))Rd={enumerable:!0,get:function(){return $c[vd]}};Object.defineProperty(fd,Md,Rd)}:function(fd,$c,vd,Md){void 0===
Md&&(Md=vd);fd[Md]=$c[vd]};sb=function(fd){var $c="function"===typeof Symbol&&Symbol.iterator,vd=$c&&fd[$c],Md=0;if(vd)return vd.call(fd);if(fd&&"number"===typeof fd.length)return{next:function(){fd&&Md>=fd.length&&(fd=void 0);return{value:fd&&fd[Md++],done:!fd}}};throw new TypeError($c?"Object is not iterable.":"Symbol.iterator is not defined.");};Ub=function(fd,$c){var vd="function"===typeof Symbol&&fd[Symbol.iterator];if(!vd)return fd;fd=vd.call(fd);var Md,Rd=[];try{for(;(void 0===$c||0<$c--)&&
!(Md=fd.next()).done;)Rd.push(Md.value)}catch(Ce){var Be={error:Ce}}finally{try{Md&&!Md.done&&(vd=fd["return"])&&vd.call(fd)}finally{if(Be)throw Be.error;}}return Rd};kc=function(){for(var fd=[],$c=0;$c<arguments.length;$c++)fd=fd.concat(Ub(arguments[$c]));return fd};Mb=function(){for(var fd=0,$c=0,vd=arguments.length;$c<vd;$c++)fd+=arguments[$c].length;fd=Array(fd);var Md=0;for($c=0;$c<vd;$c++)for(var Rd=arguments[$c],Be=0,Ce=Rd.length;Be<Ce;Be++,Md++)fd[Md]=Rd[Be];return fd};sc=function(fd,$c,vd){if(vd||
2===arguments.length)for(var Md=0,Rd=$c.length,Be;Md<Rd;Md++)!Be&&Md in $c||(Be||=Array.prototype.slice.call($c,0,Md),Be[Md]=$c[Md]);return fd.concat(Be||Array.prototype.slice.call($c))};lc=function(fd){return this instanceof lc?(this.v=fd,this):new lc(fd)};Rb=function(fd,$c,vd){function Md(Pg){Bf[Pg]&&(sf[Pg]=function(ni){return new Promise(function(rk,vj){1<bh.push([Pg,ni,rk,vj])||Rd(Pg,ni)})})}function Rd(Pg,ni){try{var rk=Bf[Pg](ni);rk.value instanceof lc?Promise.resolve(rk.value.v).then(Be,Ce):
Ke(bh[0][2],rk)}catch(vj){Ke(bh[0][3],vj)}}function Be(Pg){Rd("next",Pg)}function Ce(Pg){Rd("throw",Pg)}function Ke(Pg,ni){(Pg(ni),bh.shift(),bh.length)&&Rd(bh[0][0],bh[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Bf=vd.apply(fd,$c||[]),sf,bh=[];return sf={},Md("next"),Md("throw"),Md("return"),sf[Symbol.asyncIterator]=function(){return this},sf};rc=function(fd){function $c(Rd,Be){vd[Rd]=fd[Rd]?function(Ce){return(Md=!Md)?{value:lc(fd[Rd](Ce)),done:"return"===
Rd}:Be?Be(Ce):Ce}:Be}var vd,Md;return vd={},$c("next"),$c("throw",function(Rd){throw Rd;}),$c("return"),vd[Symbol.iterator]=function(){return this},vd};Gc=function(fd){function $c(Be){Rd[Be]=fd[Be]&&function(Ce){return new Promise(function(Ke,Bf){Ce=fd[Be](Ce);vd(Ke,Bf,Ce.done,Ce.value)})}}function vd(Be,Ce,Ke,Bf){Promise.resolve(Bf).then(function(sf){Be({value:sf,done:Ke})},Ce)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Md=fd[Symbol.asyncIterator],Rd;
return Md?Md.call(fd):(fd="function"===typeof sb?sb(fd):fd[Symbol.iterator](),Rd={},$c("next"),$c("throw"),$c("return"),Rd[Symbol.asyncIterator]=function(){return this},Rd)};Cc=function(fd,$c){Object.defineProperty?Object.defineProperty(fd,"raw",{value:$c}):fd.raw=$c;return fd};var Id=Object.create?function(fd,$c){Object.defineProperty(fd,"default",{enumerable:!0,value:$c})}:function(fd,$c){fd["default"]=$c};Uc=function(fd){if(fd&&fd.__esModule)return fd;var $c={};if(null!=fd)for(var vd in fd)"default"!==
vd&&Object.prototype.hasOwnProperty.call(fd,vd)&&Fe($c,fd,vd);Id($c,fd);return $c};ae=function(fd){return fd&&fd.__esModule?fd:{"default":fd}};Gd=function(fd,$c,vd,Md){if("a"===vd&&!Md)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof $c?fd!==$c||!Md:!$c.has(fd))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===vd?Md:"a"===vd?Md.call(fd):Md?Md.value:$c.get(fd)};qe=function(fd,$c,vd,Md,Rd){if("m"===
Md)throw new TypeError("Private method is not writable");if("a"===Md&&!Rd)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof $c?fd!==$c||!Rd:!$c.has(fd))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===Md?Rd.call(fd,vd):Rd?Rd.value=vd:$c.set(fd,vd),vd};cf=function(fd,$c){if(null===$c||"object"!==typeof $c&&"function"!==typeof $c)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===
typeof fd?$c===fd:fd.has($c)};df("__extends",m);df("__assign",K);df("__rest",Z);df("__decorate",ia);df("__param",ua);df("__metadata",Ia);df("__awaiter",Xa);df("__generator",bb);df("__exportStar",pb);df("__createBinding",Fe);df("__values",sb);df("__read",Ub);df("__spread",kc);df("__spreadArrays",Mb);df("__spreadArray",sc);df("__await",lc);df("__asyncGenerator",Rb);df("__asyncDelegator",rc);df("__asyncValues",Gc);df("__makeTemplateObject",Cc);df("__importStar",Uc);df("__importDefault",ae);df("__classPrivateFieldGet",
Gd);df("__classPrivateFieldSet",qe);df("__classPrivateFieldIn",cf)})}}),Bd={};((b,g)=>{for(var m in g)Bm(b,m,{get:g[m],enumerable:!0})})(Bd,{App:()=>RI,PreviewManager:()=>Rw,generateJSXFromApp:()=>fm,generateSVGFromApp:()=>Wo});Qa.exports=(b=>Pd(Bm({},"__esModule",{value:!0}),b))(Bd);var Ud=(b=>{b.Gray="gray";b.Red="red";b.Yellow="yellow";b.Green="green";b.Blue="blue";b.Purple="purple";b.Pink="pink";b.Default="";return b})(Ud||{}),ye,bf=new Uint8Array(16),tf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,
Nf=[];for(vg=0;256>vg;++vg)Nf.push((vg+256).toString(16).substr(1));var vg,qi=function(b){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;g=(Nf[b[g+0]]+Nf[b[g+1]]+Nf[b[g+2]]+Nf[b[g+3]]+"-"+Nf[b[g+4]]+Nf[b[g+5]]+"-"+Nf[b[g+6]]+Nf[b[g+7]]+"-"+Nf[b[g+8]]+Nf[b[g+9]]+"-"+Nf[b[g+10]]+Nf[b[g+11]]+Nf[b[g+12]]+Nf[b[g+13]]+Nf[b[g+14]]+Nf[b[g+15]]).toLowerCase();if("string"!==typeof g||!tf.test(g))throw TypeError("Stringified UUID is invalid");return g},Ak,lk,Fh=0,yj=0,li=function(b,g,m){m=g&&
m||0;var K=g||Array(16);b=b||{};var Z=b.node||Ak,ia=void 0!==b.clockseq?b.clockseq:lk;if(null==Z||null==ia){var ua=b.random||(b.rng||p)();null==Z&&(Z=Ak=[ua[0]|1,ua[1],ua[2],ua[3],ua[4],ua[5]]);null==ia&&(ia=lk=(ua[6]<<8|ua[7])&16383)}ua=void 0!==b.msecs?b.msecs:Date.now();var Ia=void 0!==b.nsecs?b.nsecs:yj+1,Xa=ua-Fh+(Ia-yj)/1E4;0>Xa&&void 0===b.clockseq&&(ia=ia+1&16383);(0>Xa||ua>Fh)&&void 0===b.nsecs&&(Ia=0);if(1E4<=Ia)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Fh=ua;yj=Ia;
lk=ia;ua+=122192928E5;b=(1E4*(ua&268435455)+Ia)%4294967296;K[m++]=b>>>24&255;K[m++]=b>>>16&255;K[m++]=b>>>8&255;K[m++]=b&255;b=ua/4294967296*1E4&268435455;K[m++]=b>>>8&255;K[m++]=b&255;K[m++]=b>>>24&15|16;K[m++]=b>>>16&255;K[m++]=ia>>>8|128;K[m++]=ia&255;for(ia=0;6>ia;++ia)K[m+ia]=Z[ia];return g||qi(K)},Dg=class{static clamp(b,g,m){return Math.max(g,"undefined"!==typeof m?Math.min(b,m):b)}static clampV(b,g,m){return b.map(K=>m?Dg.clamp(K,g,m):Dg.clamp(K,g))}static cross(b,g,m){return(g[0]-b[0])*(m[1]-
b[1])-(m[0]-b[0])*(g[1]-b[1])}static snap(b,g=1){return[Math.round(b[0]/g)*g,Math.round(b[1]/g)*g]}},Ed=Dg;Ed.neg=b=>[-b[0],-b[1]];Ed.add=(b,g)=>[b[0]+g[0],b[1]+g[1]];Ed.addScalar=(b,g)=>[b[0]+g,b[1]+g];Ed.sub=(b,g)=>[b[0]-g[0],b[1]-g[1]];Ed.subScalar=(b,g)=>[b[0]-g,b[1]-g];Ed.vec=(b,g)=>[g[0]-b[0],g[1]-b[1]];Ed.mul=(b,g)=>[b[0]*g,b[1]*g];Ed.mulV=(b,g)=>[b[0]*g[0],b[1]*g[1]];Ed.div=(b,g)=>[b[0]/g,b[1]/g];Ed.divV=(b,g)=>[b[0]/g[0],b[1]/g[1]];Ed.per=b=>[b[1],-b[0]];Ed.dpr=(b,g)=>b[0]*g[0]+b[1]*g[1];
Ed.cpr=(b,g)=>b[0]*g[1]-g[0]*b[1];Ed.len2=b=>b[0]*b[0]+b[1]*b[1];Ed.len=b=>Math.hypot(b[0],b[1]);Ed.pry=(b,g)=>Dg.dpr(b,g)/Dg.len(g);Ed.uni=b=>Dg.div(b,Dg.len(b));Ed.normalize=b=>Dg.uni(b);Ed.tangent=(b,g)=>Dg.uni(Dg.sub(b,g));Ed.dist2=(b,g)=>Dg.len2(Dg.sub(b,g));Ed.dist=(b,g)=>Math.hypot(b[1]-g[1],b[0]-g[0]);Ed.fastDist=(b,g)=>{b=[g[0]-b[0],g[1]-b[1]];g=[Math.abs(b[0]),Math.abs(b[1])];let m=1/Math.max(g[0],g[1]);m*=1.29289-(g[0]+g[1])*m*.29289;return[b[0]*m,b[1]*m]};Ed.ang=(b,g)=>Math.atan2(Dg.cpr(b,
g),Dg.dpr(b,g));Ed.angle=(b,g)=>Math.atan2(g[1]-b[1],g[0]-b[0]);Ed.med=(b,g)=>Dg.mul(Dg.add(b,g),.5);Ed.rot=(b,g=0)=>[b[0]*Math.cos(g)-b[1]*Math.sin(g),b[0]*Math.sin(g)+b[1]*Math.cos(g)];Ed.rotWith=(b,g,m=0)=>{if(0===m)return b;const K=Math.sin(m);m=Math.cos(m);const Z=b[0]-g[0];b=b[1]-g[1];return[Z*m-b*K+g[0],Z*K+b*m+g[1]]};Ed.isEqual=(b,g)=>b[0]===g[0]&&b[1]===g[1];Ed.lrp=(b,g,m)=>Dg.add(b,Dg.mul(Dg.sub(g,b),m));Ed.int=(b,g,m,K,Z=1)=>{m=(Dg.clamp(m,K)-m)/(K-m);return Dg.add(Dg.mul(b,1-m),Dg.mul(g,
Z))};Ed.ang3=(b,g,m)=>{b=Dg.vec(g,b);g=Dg.vec(g,m);return Dg.ang(b,g)};Ed.abs=b=>[Math.abs(b[0]),Math.abs(b[1])];Ed.rescale=(b,g)=>{const m=Dg.len(b);return[g*b[0]/m,g*b[1]/m]};Ed.isLeft=(b,g,m)=>(g[0]-b[0])*(m[1]-b[1])-(m[0]-b[0])*(g[1]-b[1]);Ed.clockwise=(b,g,m)=>0<Dg.isLeft(b,g,m);Ed.toFixed=b=>b.map(g=>Math.round(100*g)/100);Ed.nearestPointOnLineThroughPoint=(b,g,m)=>Dg.add(b,Dg.mul(g,Dg.pry(Dg.sub(m,b),g)));Ed.distanceToLineThroughPoint=(b,g,m)=>Dg.dist(m,Dg.nearestPointOnLineThroughPoint(b,
g,m));Ed.nearestPointOnLineSegment=(b,g,m,K=!0)=>{const Z=Dg.uni(Dg.sub(g,b));m=Dg.add(b,Dg.mul(Z,Dg.pry(Dg.sub(m,b),Z)));if(K){if(m[0]<Math.min(b[0],g[0]))return b[0]<g[0]?b:g;if(m[0]>Math.max(b[0],g[0]))return b[0]>g[0]?b:g;if(m[1]<Math.min(b[1],g[1]))return b[1]<g[1]?b:g;if(m[1]>Math.max(b[1],g[1]))return b[1]>g[1]?b:g}return m};Ed.distanceToLineSegment=(b,g,m,K=!0)=>Dg.dist(m,Dg.nearestPointOnLineSegment(b,g,m,K));Ed.nudge=(b,g,m)=>Dg.isEqual(b,g)?b:Dg.add(b,Dg.mul(Dg.uni(Dg.sub(g,b)),m));Ed.nudgeAtAngle=
(b,g,m)=>[Math.cos(g)*m+b[0],Math.sin(g)*m+b[1]];Ed.toPrecision=(b,g=4)=>[+b[0].toPrecision(g),+b[1].toPrecision(g)];Ed.pointsBetween=(b,g,m=6)=>Array.from(Array(m)).map((K,Z)=>{K=Z/(m-1);Z=Math.min(1,.5+Math.abs(.5-K));return[...Dg.lrp(b,g,K),Z]});Ed.slope=(b,g)=>b[0]===g[0]?NaN:(b[1]-g[1])/(b[0]-g[0]);Ed.toAngle=b=>{b=Math.atan2(b[1],b[0]);return 0>b?b+2*Math.PI:b};Ed.max=(...b)=>[Math.max(...b.map(g=>g[0])),Math.max(...b.map(g=>g[1]))];Ed.min=(...b)=>[Math.min(...b.map(g=>g[0])),Math.min(...b.map(g=>
g[1]))];var re=Ed,rf=class{static getRectangleSides(b,g,m=0){const K=[b[0]+g[0]/2,b[1]+g[1]/2],Z=Ed.rotWith(b,K,m),ia=Ed.rotWith(Ed.add(b,[g[0],0]),K,m),ua=Ed.rotWith(Ed.add(b,g),K,m);b=Ed.rotWith(Ed.add(b,[0,g[1]]),K,m);return[["top",[Z,ia]],["right",[ia,ua]],["bottom",[ua,b]],["left",[b,Z]]]}static getBoundsSides(b){return rf.getRectangleSides([b.minX,b.minY],[b.width,b.height])}static expandBounds(b,g){return{minX:b.minX-g,minY:b.minY-g,maxX:b.maxX+g,maxY:b.maxY+g,width:b.width+2*g,height:b.height+
2*g}}static boundsCollide(b,g){return!(b.maxX<g.minX||b.minX>g.maxX||b.maxY<g.minY||b.minY>g.maxY)}static boundsContain(b,g){return b.minX<g.minX&&b.minY<g.minY&&b.maxY>g.maxY&&b.maxX>g.maxX}static boundsContained(b,g){return rf.boundsContain(g,b)}static boundsAreEqual(b,g){return!(g.maxX!==b.maxX||g.minX!==b.minX||g.maxY!==b.maxY||g.minY!==b.minY)}static getBoundsFromPoints(b,g=0){let m=Infinity,K=Infinity,Z=-Infinity,ia=-Infinity;if(2>b.length)K=m=0,ia=Z=1;else for(const ua of b)m=Math.min(ua[0],
m),K=Math.min(ua[1],K),Z=Math.max(ua[0],Z),ia=Math.max(ua[1],ia);return 0!==g?rf.getBoundsFromPoints(b.map(ua=>Ed.rotWith(ua,[(m+Z)/2,(K+ia)/2],g))):{minX:m,minY:K,maxX:Z,maxY:ia,width:Math.max(1,Z-m),height:Math.max(1,ia-K)}}static centerBounds(b,g){const m=rf.getBoundsCenter(b);return rf.translateBounds(b,[g[0]-m[0],g[1]-m[1]])}static snapBoundsToGrid(b,g){const m=Math.round(b.minX/g)*g,K=Math.round(b.minY/g)*g,Z=Math.round(b.maxX/g)*g;b=Math.round(b.maxY/g)*g;return{minX:m,minY:K,maxX:Z,maxY:b,
width:Math.max(1,Z-m),height:Math.max(1,b-K)}}static translateBounds(b,g){return{minX:b.minX+g[0],minY:b.minY+g[1],maxX:b.maxX+g[0],maxY:b.maxY+g[1],width:b.width,height:b.height}}static multiplyBounds(b,g){const m=rf.getBoundsCenter(b);return rf.centerBounds({minX:b.minX*g,minY:b.minY*g,maxX:b.maxX*g,maxY:b.maxY*g,width:b.width*g,height:b.height*g},[m[0]*g,m[1]*g])}static divideBounds(b,g){const m=rf.getBoundsCenter(b);return rf.centerBounds({minX:b.minX/g,minY:b.minY/g,maxX:b.maxX/g,maxY:b.maxY/
g,width:b.width/g,height:b.height/g},[m[0]/g,m[1]/g])}static getRotatedBounds(b,g=0){b=rf.getRotatedCorners(b,g);let m=g=Infinity,K=-Infinity,Z=-Infinity;for(const ia of b)g=Math.min(ia[0],g),m=Math.min(ia[1],m),K=Math.max(ia[0],K),Z=Math.max(ia[1],Z);return{minX:g,minY:m,maxX:K,maxY:Z,width:Math.max(1,K-g),height:Math.max(1,Z-m),rotation:0}}static getRotatedEllipseBounds(b,g,m,K,Z=0){var ia=Math.cos(Z);const ua=Math.sin(Z);Z=Math.hypot(m*ia,K*ua);ia=Math.hypot(m*ua,K*ia);return{minX:b+m-Z,minY:g+
K-ia,maxX:b+m+Z,maxY:g+K+ia,width:2*Z,height:2*ia}}static getExpandedBounds(b,g){const m=Math.min(b.minX,g.minX),K=Math.min(b.minY,g.minY),Z=Math.max(b.maxX,g.maxX);b=Math.max(b.maxY,g.maxY);return{minX:m,minY:K,maxX:Z,maxY:b,width:Math.abs(Z-m),height:Math.abs(b-K)}}static getCommonBounds(b){if(2>b.length)return b[0];let g=b[0];for(let m=1;m<b.length;m++)g=rf.getExpandedBounds(g,b[m]);return g}static getRotatedCorners(b,g=0){const m=[b.minX+b.width/2,b.minY+b.height/2];b=[[b.minX,b.minY],[b.maxX,
b.minY],[b.maxX,b.maxY],[b.minX,b.maxY]];return g?b.map(K=>Ed.rotWith(K,m,g)):b}static getTransformedBoundingBox(b,g,m,K=0,Z=!1){const [ia,ua]=[b.minX,b.minY],[Ia,Xa]=[b.maxX,b.maxY];let [bb,pb]=[b.minX,b.minY],[sb,Ub]=[b.maxX,b.maxY];if("center"===g)return{minX:bb+m[0],minY:pb+m[1],maxX:sb+m[0],maxY:Ub+m[1],width:sb-bb,height:Ub-pb,scaleX:1,scaleY:1};const [kc,Mb]=Ed.rot(m,-K);switch(g){case "top_edge":case "top_left_corner":case "top_right_corner":pb+=Mb;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Ub+=
Mb}switch(g){case "left_edge":case "top_left_corner":case "bottom_left_corner":bb+=kc;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":sb+=kc}var sc=Ia-ia;const lc=Xa-ua;var Rb=(sb-bb)/sc,rc=(Ub-pb)/lc;b=0>Rb;m=0>rc;var Gc=Math.abs(sb-bb),Cc=Math.abs(Ub-pb);if(Z)switch(Z=sc/lc,sc=Z<Gc/Cc,rc=1/Z*(0>rc?1:-1)*Gc,Rb=Cc*(0>Rb?1:-1)*Z,g){case "top_left_corner":sc?pb=Ub+rc:bb=sb+Rb;break;case "top_right_corner":sc?pb=Ub+rc:sb=bb-Rb;break;case "bottom_right_corner":sc?Ub=pb-rc:sb=
bb-Rb;break;case "bottom_left_corner":sc?Ub=pb-rc:bb=sb+Rb;break;case "bottom_edge":case "top_edge":Gc=(bb+sb)/2;Cc*=Z;bb=Gc-Cc/2;sb=Gc+Cc/2;break;case "left_edge":case "right_edge":Cc=(pb+Ub)/2,Gc/=Z,pb=Cc-Gc/2,Ub=Cc+Gc/2}if(0!==K%(2*Math.PI)){Gc=[0,0];Cc=Ed.med([ia,ua],[Ia,Xa]);Rb=Ed.med([bb,pb],[sb,Ub]);switch(g){case "top_left_corner":Gc=Ed.sub(Ed.rotWith([sb,Ub],Rb,K),Ed.rotWith([Ia,Xa],Cc,K));break;case "top_right_corner":Gc=Ed.sub(Ed.rotWith([bb,Ub],Rb,K),Ed.rotWith([ia,Xa],Cc,K));break;case "bottom_right_corner":Gc=
Ed.sub(Ed.rotWith([bb,pb],Rb,K),Ed.rotWith([ia,ua],Cc,K));break;case "bottom_left_corner":Gc=Ed.sub(Ed.rotWith([sb,pb],Rb,K),Ed.rotWith([Ia,ua],Cc,K));break;case "top_edge":Gc=Ed.sub(Ed.rotWith(Ed.med([bb,Ub],[sb,Ub]),Rb,K),Ed.rotWith(Ed.med([ia,Xa],[Ia,Xa]),Cc,K));break;case "left_edge":Gc=Ed.sub(Ed.rotWith(Ed.med([sb,pb],[sb,Ub]),Rb,K),Ed.rotWith(Ed.med([Ia,ua],[Ia,Xa]),Cc,K));break;case "bottom_edge":Gc=Ed.sub(Ed.rotWith(Ed.med([bb,pb],[sb,pb]),Rb,K),Ed.rotWith(Ed.med([ia,ua],[Ia,ua]),Cc,K));break;
case "right_edge":Gc=Ed.sub(Ed.rotWith(Ed.med([bb,pb],[bb,Ub]),Rb,K),Ed.rotWith(Ed.med([ia,ua],[ia,Xa]),Cc,K))}[bb,pb]=Ed.sub([bb,pb],Gc);[sb,Ub]=Ed.sub([sb,Ub],Gc)}sb<bb&&([sb,bb]=[bb,sb]);Ub<pb&&([Ub,pb]=[pb,Ub]);return{minX:bb,minY:pb,maxX:sb,maxY:Ub,width:sb-bb,height:Ub-pb,scaleX:(sb-bb)/(Ia-ia||1)*(b?-1:1),scaleY:(Ub-pb)/(Xa-ua||1)*(m?-1:1)}}static getTransformAnchor(b,g,m){let K=b;switch(b){case "top_left_corner":K=g&&m?"bottom_right_corner":g?"top_right_corner":m?"bottom_left_corner":"bottom_right_corner";
break;case "top_right_corner":K=g&&m?"bottom_left_corner":g?"top_left_corner":m?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":K=g&&m?"top_left_corner":g?"bottom_left_corner":m?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":K=g&&m?"top_right_corner":g?"bottom_right_corner":m?"top_left_corner":"top_right_corner"}return K}static getRelativeTransformedBoundingBox(b,g,m,K,Z){K=b.minX+(K?g.maxX-m.maxX:m.minX-g.minX)/g.width*b.width;Z=b.minY+(Z?g.maxY-
m.maxY:m.minY-g.minY)/g.height*b.height;const ia=m.width/g.width*b.width;b=m.height/g.height*b.height;return{minX:K,minY:Z,maxX:K+ia,maxY:Z+b,width:ia,height:b}}static getRotatedSize(b,g){const m=Ed.div(b,2);b=[[0,0],[b[0],0],b,[0,b[1]]].map(K=>Ed.rotWith(K,m,g));b=rf.getBoundsFromPoints(b);return[b.width,b.height]}static getBoundsCenter(b){return[b.minX+b.width/2,b.minY+b.height/2]}static getBoundsWithCenter(b){const g=rf.getBoundsCenter(b);return rb(Wa({},b),{midX:g[0],midY:g[1]})}static getCommonTopLeft(b){const g=
[Infinity,Infinity];b.forEach(m=>{g[0]=Math.min(g[0],m[0]);g[1]=Math.min(g[1],m[1])});return g}static getTLSnapPoints(b,g,m){const K=Wa({},b);b=[0,0];const Z=[],ia={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},ua=["midX","minX","maxX"],Ia=["midY","minY","maxY"];g=g.map(Ub=>{const kc=ua.flatMap((sc,lc)=>ua.map((Rb,rc)=>{const Gc=K[sc]-Ub[Rb];return{f:sc,t:Rb,gap:Gc,
distance:Math.abs(Gc),isCareful:0===lc||3===lc+rc}})),Mb=Ia.flatMap((sc,lc)=>Ia.map((Rb,rc)=>{const Gc=K[sc]-Ub[Rb];return{f:sc,t:Rb,gap:Gc,distance:Math.abs(Gc),isCareful:0===lc||3===lc+rc}}));return[Ub,kc,Mb]});let Xa=Infinity,bb=Infinity,pb=Infinity,sb=Infinity;g.forEach(([,Ub,kc])=>{Ub.forEach(Mb=>{Mb.distance<m&&Mb.distance<pb&&(pb=Mb.distance,Xa=Mb.gap)});kc.forEach(Mb=>{Mb.distance<m&&Mb.distance<sb&&(sb=Mb.distance,bb=Mb.gap)})});g.forEach(([Ub,kc,Mb])=>{Infinity!==Xa&&kc.forEach(sc=>{2>Math.abs(sc.gap-
Xa)&&(ia[sc.f]=rb(Wa({},ia[sc.f]),{isSnapped:!0,to:Ub[sc.t],B:Ub,distance:sc.distance}))});Infinity!==bb&&Mb.forEach(sc=>{2>Math.abs(sc.gap-bb)&&(ia[sc.f]=rb(Wa({},ia[sc.f]),{isSnapped:!0,to:Ub[sc.t],B:Ub,distance:sc.distance}))})});b[0]=Infinity===Xa?0:Xa;b[1]=Infinity===bb?0:bb;K.minX-=b[0];K.midX-=b[0];K.maxX-=b[0];K.minY-=b[1];K.midY-=b[1];K.maxY-=b[1];ua.forEach(Ub=>{Ub=ia[Ub];if(Ub.isSnapped){var {id:kc,B:Mb}=Ub;Ub=K[kc];Z.push("minX"===kc?[[Ub,K.midY],[Ub,Mb.minY],[Ub,Mb.maxY]]:[[Ub,K.minY],
[Ub,K.maxY],[Ub,Mb.minY],[Ub,Mb.maxY]])}});Ia.forEach(Ub=>{Ub=ia[Ub];if(Ub.isSnapped){var {id:kc,B:Mb}=Ub;Ub=K[kc];Z.push("midY"===kc?[[K.midX,Ub],[Mb.minX,Ub],[Mb.maxX,Ub]]:[[K.minX,Ub],[K.maxX,Ub],[Mb.minX,Ub],[Mb.maxX,Ub]])}});return{offset:b,snapLines:Z}}static ensureRatio(b,g){const {width:m,height:K}=b,Z=Wa({},b);m/K<g?(Z.width=K*g,Z.maxX+=m-b.width):(Z.height=m/g,Z.maxY+=K-b.height);return Z}static getDistributions(b,g){var m=b.map(ia=>{const ua=ia.getBounds();return{id:ia.id,point:[ua.minX,
ua.minY],bounds:ua,center:ia.getCenter()}});b=m.length;var K=rf.getCommonBounds(m.map(({bounds:ia})=>ia));const Z=[];switch(g){case "horizontal":g=m.reduce((ia,ua)=>ia+ua.bounds.width,0);if(g>K.width){const ia=m.sort((bb,pb)=>bb.bounds.minX-pb.bounds.minX)[0],ua=m.sort((bb,pb)=>pb.bounds.maxX-bb.bounds.maxX)[0];K=m.filter(bb=>bb!==ia&&bb!==ua).sort((bb,pb)=>bb.center[0]-pb.center[0]);const Ia=(ua.center[0]-ia.center[0])/(b-1),Xa=ia.center[0]+Ia;K.forEach(({id:bb,point:pb,bounds:sb},Ub)=>{Z.push({id:bb,
prev:pb,next:[Xa+Ia*Ub-sb.width/2,sb.minY]})})}else{m=m.sort((Ia,Xa)=>Ia.center[0]-Xa.center[0]);let ia=K.minX;const ua=(K.width-g)/(b-1);m.forEach(({id:Ia,point:Xa,bounds:bb})=>{Z.push({id:Ia,prev:Xa,next:[ia,bb.minY]});ia+=bb.width+ua})}break;case "vertical":if(g=m.reduce((ia,ua)=>ia+ua.bounds.height,0),g>K.height){const ia=m.sort((bb,pb)=>bb.bounds.minY-pb.bounds.minY)[0],ua=m.sort((bb,pb)=>pb.bounds.maxY-bb.bounds.maxY)[0];K=m.filter(bb=>bb!==ia&&bb!==ua).sort((bb,pb)=>bb.center[1]-pb.center[1]);
const Ia=(ua.center[1]-ia.center[1])/(b-1),Xa=ia.center[1]+Ia;K.forEach(({id:bb,point:pb,bounds:sb},Ub)=>{Z.push({id:bb,prev:pb,next:[sb.minX,Xa+Ia*Ub-sb.height/2]})})}else{m=m.sort((Ia,Xa)=>Ia.center[1]-Xa.center[1]);let ia=K.minY;const ua=(K.height-g)/(b-1);m.forEach(({id:Ia,point:Xa,bounds:bb})=>{Z.push({id:Ia,prev:Xa,next:[bb.minX,ia]});ia+=bb.height+ua})}}return Z}static getPackedDistributions(b){const g=rf.getCommonBounds(b.map(({bounds:Z})=>Z)),m=[g.minX,g.minY],K=Object.fromEntries(b.map(Z=>
[Z.id,[Z.bounds.minX,Z.bounds.minY]]));b=b.filter(Z=>{var ia,ua,Ia,Xa;return!((null==(ua=null==(ia=Z.props.handles)?void 0:ia.start)?0:ua.bindingId)||(null==(Xa=null==(Ia=Z.props.handles)?void 0:Ia.end)?0:Xa.bindingId))}).map(Z=>{const ia=Z.getBounds();return{id:Z.id,w:ia.width+16,h:ia.height+16,x:ia.minX,y:ia.minY}});S(b);return b.map(({id:Z,x:ia,y:ua})=>({id:Z,prev:K[Z],next:[ia+m[0],ua+m[1]]}))}},Xg=class{static pointInCircle(b,g,m){return Ed.dist(b,g)<=m}static pointInEllipse(b,g,m,K,Z=0){Z=Z||
0;var ia=Math.cos(Z);Z=Math.sin(Z);g=Ed.sub(b,g);b=ia*g[0]+Z*g[1];ia=Z*g[0]-ia*g[1];return 1>=b*b/(m*m)+ia*ia/(K*K)}static pointInRect(b,g){return!(b[0]<g[0]||b[0]>b[0]+g[0]||b[1]<g[1]||b[1]>b[1]+g[1])}static pointInPolygon(b,g){let m=0;g.forEach((K,Z)=>{Z=g[(Z+1)%g.length];K[1]<=b[1]?Z[1]>b[1]&&0<Ed.cross(K,Z,b)&&(m+=1):Z[1]<=b[1]&&0>Ed.cross(K,Z,b)&&--m});return 0!==m}static pointInBounds(b,g){return!(b[0]<g.minX||b[0]>g.maxX||b[1]<g.minY||b[1]>g.maxY)}static pointInPolyline(b,g,m=3){for(let K=
1;K<g.length;K++)if(Ed.distanceToLineSegment(g[K-1],g[K],b)<m)return!0;return!1}static _getSqSegDist(b,g,m){let K=g[0];g=g[1];let Z=m[0]-K,ia=m[1]-g;if(0!==Z||0!==ia){const ua=((b[0]-K)*Z+(b[1]-g)*ia)/(Z*Z+ia*ia);1<ua?(K=m[0],g=m[1]):0<ua&&(K+=Z*ua,g+=ia*ua)}Z=b[0]-K;ia=b[1]-g;return Z*Z+ia*ia}static _simplifyStep(b,g,m,K,Z){let ia=K,ua=-1;for(let Ia=g+1;Ia<m;Ia++){const Xa=Xg._getSqSegDist(b[Ia],b[g],b[m]);Xa>ia&&(ua=Ia,ia=Xa)}-1<ua&&ia>K&&(1<ua-g&&Xg._simplifyStep(b,g,ua,K,Z),Z.push(b[ua]),1<m-
ua&&Xg._simplifyStep(b,ua,m,K,Z))}static simplify2(b,g=1){if(2>=b.length)return b;g*=g;var m=b[0],K=b[1];const Z=[m];for(let ia=1,ua=b.length;ia<ua;ia++)K=b[ia],(K[0]-m[0])*(K[0]-m[0])+(K[1]-m[1])*(K[1]-m[1])>g&&(Z.push(K),m=K);m!==K&&Z.push(K);m=Z.length-1;K=[Z[0]];Xg._simplifyStep(Z,0,m,g,K);K.push(Z[m],b[b.length-1]);return K}static pointNearToPolyline(b,g,m=8){const K=g.length;for(let Z=1;Z<K;Z++)if(Ed.distanceToLineSegment(g[Z-1],g[Z],b)<m)return!0;return!1}},si=Xg;F(si,"simplify",(b,g=1)=>{var m=
b.length;const K=b[0],Z=b[m-1],[ia,ua]=K,[Ia,Xa]=Z;if(2<m){let bb=0,pb=0;const sb=Ed.len2([Xa-ua,Ia-ia]);for(let Ub=1;Ub<m-1;Ub++){const [kc,Mb]=b[Ub],sc=Math.pow(kc*(Xa-ua)+ia*(Mb-Xa)+Ia*(ua-Mb),2)/sb;bb>sc||(bb=sc,pb=Ub)}if(bb>g)return m=Xg.simplify(b.slice(0,pb+1),g),b=Xg.simplify(b.slice(pb+1),g),m.concat(b.slice(1))}return[K,Z]});var yl=td(Va()),rm=({target:b},g)=>{b=b&&b.tagName;return!!(b&&g&&g.includes(b))},Xo=class{static registerShortcut(b,g){yl.default.bind(b,(m,K)=>{var Z;m.preventDefault();
rm(m,["INPUT","TEXTAREA","SELECT"])||(null==(Z=m.target)?0:Z.isContentEditable)||g(m,K)},"keydown");return()=>{yl.default.unbind(b,"keydown")}}},Vm=Math.PI,Yj=Vm/2,cl=2*Vm,Ao={},To={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",
top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Zk=class{static circleFromThreePoints(b,g,m){const [K,Z]=b,[ia,ua]=g,[Ia,Xa]=m;g=K*(ua-Xa)-Z*(ia-Ia)+ia*Xa-Ia*ua;b=-((K*K+Z*Z)*(Xa-ua)+(ia*ia+ua*ua)*(Z-Xa)+(Ia*Ia+Xa*Xa)*(ua-Z))/(2*g);g=-((K*K+Z*Z)*(ia-Ia)+(ia*ia+ua*ua)*(Ia-K)+(Ia*Ia+Xa*Xa)*(K-ia))/(2*g);return[b,g,Math.hypot(b-K,g-Z)]}static perimeterOfEllipse(b,g){const m=Math.pow(b-g,2)/Math.pow(b+g,2);return Vm*(b+g)*(1+3*m/(10+Math.sqrt(4-3*m)))}static shortAngleDist(b,
g){b=(g-b)%cl;return 2*b%cl-b}static longAngleDist(b,g){return cl-Zk.shortAngleDist(b,g)}static lerpAngles(b,g,m){return b+Zk.shortAngleDist(b,g)*m}static angleDelta(b,g){return Zk.shortAngleDist(b,g)}static getSweep(b,g,m){return Zk.angleDelta(re.angle(b,g),re.angle(b,m))}static clampRadians(b){return(cl+b)%cl}static snapAngleToSegments(b,g){g=cl/g;b=Math.floor((Zk.clampRadians(b)+g/2)/g)*g%cl;b<Vm&&(b+=cl);b>Vm&&(b-=cl);return b}static isAngleBetween(b,g,m){if(m===b||m===g)return!0;g=(g-b+Yj)%Yj;
return g<=Vm!==(m-b+Yj)%Yj>g}static degreesToRadians(b){return b*Vm/180}static radiansToDegrees(b){return 180*b/Vm}static getArcLength(b,g,m,K){b=Zk.getSweep(b,m,K);return b/cl*cl*g}static getSweepFlag(b,g,m){m=re.angle(b,m);return 0<(re.angle(b,g)-m+3*Vm)%cl-Vm?0:1}static getLargeArcFlag(b,g,m){b=re.angle(m,b);g=(re.angle(m,g)-b+3*Vm)%cl-Vm;return Math.abs(g)>Yj?0:1}static getArcDashOffset(b,g,m,K,Z){const ia=Zk.getSweepFlag(b,m,K);g=Zk.getArcLength(b,g,m,K);return-(0>ia?g:cl*b[2]-g)/2+Z}static getEllipseDashOffset(b,
g){return-(cl*b[2])/2+-g}static radiansToCardinalDirection(b){return b<.25*Math.PI?"north":b<.75*Math.PI?"east":b<1.25*Math.PI?"south":b<1.75*Math.PI?"west":"north"}},dl=class{static getPolygonCentroid(b){var g=b.map(m=>m[0]);b=b.map(m=>m[1]);g=Math.min(...g)+Math.max(...g);b=Math.min(...b)+Math.max(...b);return[g?g/2:0,b?b/2:0]}};F(dl,"getEdges",b=>{const g=b.length;return b.map((m,K)=>[m,b[(K+1)%g]])});F(dl,"getEdgeOutwardNormal",(b,g)=>re.per(re.uni(re.sub(g,b))));F(dl,"getEdgeInwardNormal",(b,
g)=>re.neg(dl.getEdgeOutwardNormal(b,g)));F(dl,"getOffsetEdge",(b,g,m)=>{m=re.mul(re.per(re.uni(re.sub(g,b))),m);return[re.add(b,m),re.add(g,m)]});F(dl,"getOffsetEdges",(b,g)=>b.map(([m,K])=>dl.getOffsetEdge(m,K,g)));F(dl,"getOffsetPolygon",(b,g)=>{if(1>b.length)throw Error("Expected at least one point.");if(1===b.length)return b=b[0],[re.add(b,[-g,-g]),re.add(b,[g,-g]),re.add(b,[g,g]),re.add(b,[-g,g])];if(2===b.length){const [m,K]=b;return[...dl.getOffsetEdge(m,K,g),...dl.getOffsetEdge(K,m,g)]}return dl.getOffsetEdges(dl.getEdges(b),
g).flatMap((m,K,Z)=>{{K=Z[(K+1)%Z.length];const ia=Ed.slope(m[0],m[1]);Z=Ed.slope(K[0],K[1]);ia!==Z?Number.isNaN(ia)&&!Number.isNaN(Z)?m=[m[0][0],(m[0][0]-K[0][0])*Z+K[0][1]]:Number.isNaN(Z)&&!Number.isNaN(ia)?m=[K[0][0],(K[0][0]-m[0][0])*ia+m[0][1]]:(m=(ia*m[0][0]-Z*K[0][0]+K[0][1]-m[0][1])/(ia-Z),m=[m,Z*(m-K[0][0])+K[0][1]]):m=void 0}if(void 0===m)throw Error("Expected an intersection");return m})});F(dl,"getPolygonVertices",(b,g,m=0,K=1)=>{b=re.div(b,2);const [Z,ia]=[Math.max(1,b[0]-m),Math.max(1,
b[1]-m)];m=[];for(let bb=0,pb=cl/g;bb<g;bb++){var ua=(-Yj+bb*pb)%cl,Ia=(-Yj+(bb+1)*pb)%cl;ua=re.add(b,[Z*Math.cos(ua),ia*Math.sin(ua)]);Ia=re.add(b,[Z*Math.cos(Ia),ia*Math.sin(Ia)]);var Xa=re.med(ua,Ia);Xa=re.nudge(Xa,b,re.dist(b,Xa)*(1-K));m.push(ua,Xa,Ia)}return m});F(dl,"getTriangleVertices",(b,g=0,m=1)=>{const [K,Z]=b;var ia=1-m;b=[K/2,g/2];m=[K-g,Z-g];g=[g/2,Z-g];const ua=dl.getPolygonCentroid([b,m,g]),Ia=re.med(b,m),Xa=re.med(m,g),bb=re.med(g,b),pb=re.dist(Ia,ua)*ia,sb=re.dist(Xa,ua)*ia;ia*=
re.dist(bb,ua);return[b,pb?re.nudge(Ia,ua,pb):Ia,m,sb?re.nudge(Xa,ua,sb):Xa,g,ia?re.nudge(bb,ua,ia):bb]});F(dl,"getStarVertices",(b,g,m,K=1)=>{const Z=re.div(g,2),ia=re.mul(Z,K/2),ua=cl/m/2;return Array.from(Array(2*m)).map((Ia,Xa)=>{Ia=-Yj+Xa*ua;const [bb,pb]=Xa%2?ia:Z;return re.add(b,[bb*Math.cos(Ia),pb*Math.sin(Ia)])})});var Aq=class{static getCurvedPathForPolygon(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],m=b.length;for(let K=
1;K<m;K++){const [Z,ia]=b[K],[ua,Ia]=b[(K+1)%m];g.push(Z,ia,(Z+ua)/2,(ia+Ia)/2)}g.push("Z");return g.join(" ")}static getCurvedPathForPoints(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],m=b.length;for(let K=1;K<m-1;K++){const [Z,ia]=b[K],[ua,Ia]=b[K+1];g.push(Z,ia,(Z+ua)/2,(ia+Ia)/2)}return g.join(" ")}static getSvgPathFromStroke(b,g=!0){const m=b.length;if(4>m)return"";let K=b[0],Z=b[1];var ia=b[2];ia=`M${K[0].toFixed(2)},${K[1].toFixed(2)} Q${Z[0].toFixed(2)},${Z[1].toFixed(2)} ${((Z[0]+
ia[0])/2).toFixed(2)},${((Z[1]+ia[1])/2).toFixed(2)} T`;for(let ua=2,Ia=m-1;ua<Ia;ua++)K=b[ua],Z=b[ua+1],ia+=`${((K[0]+Z[0])/2).toFixed(2)},${((K[1]+Z[1])/2).toFixed(2)} `;g&&(ia+="Z");return ia}static getSvgPathFromStrokePoints(b,g=!1){const m=b.length;if(4>m)return"";let K=b[0].point,Z=b[1].point;var ia=b[2].point;ia=`M${K[0].toFixed(2)},${K[1].toFixed(2)} Q${Z[0].toFixed(2)},${Z[1].toFixed(2)} ${((Z[0]+ia[0])/2).toFixed(2)},${((Z[1]+ia[1])/2).toFixed(2)} T`;for(let ua=2,Ia=m-1;ua<Ia;ua++)K=b[ua].point,
Z=b[ua+1].point,ia+=`${((K[0]+Z[0])/2).toFixed(2)},${((K[1]+Z[1])/2).toFixed(2)} `;g&&(ia+="Z");return ia}};F(Aq,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var rs={},qs=Object.assign,bg=Object.getOwnPropertyDescriptor,zn=Object.defineProperty,np=Object.prototype,An=[];Object.freeze(An);var jo={};Object.freeze(jo);var Cq="undefined"!==typeof Proxy,Dq=Object.toString(),Yo=function(){},mr="undefined"!==typeof Object.getOwnPropertySymbols,Bn="undefined"!==typeof Reflect&&Reflect.ownKeys?
Reflect.ownKeys:mr?function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:Object.getOwnPropertyNames,Bq=Object.getOwnPropertyDescriptors||function(b){var g={};Bn(b).forEach(function(m){g[m]=bg(b,m)});return g},mn=Symbol("mobx-stored-annotations"),Yg=Symbol("mobx administration"),ln=function(){function b(m){void 0===m&&(m="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;
this.lowestObserverState_=Qf.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=m}var g=b.prototype;g.onBO=function(){this.onBOL&&this.onBOL.forEach(function(m){return m()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(m){return m()})};g.reportObserved=function(){return Yd(this)};g.reportChanged=function(){Kd();Nb(this);nd()};g.toString=function(){return this.name_};return b}(),Kp=P("Atom",ln),io={identity:function(b,g){return b===g},structural:function(b,g){return yb(b,g)},"default":function(b,
g){return Object.is?Object.is(b,g):b===g?0!==b||1/b===1/g:b!==b&&g!==g},shallow:function(b,g){return yb(b,g,1)}},lr="override",iv=Pa(),zq={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(zq);var ps=Lb("observable"),hv=Lb("observable.ref",{enhancer:Ma}),gv=Lb("observable.shallow",{enhancer:function(b,g,m){if(void 0===b||null===b||he(b)||ec(b)||Xp(b)||Eq(b))return b;if(Array.isArray(b))return tg.array(b,{name:m,deep:!1});if(ca(b))return tg.object(b,void 0,{name:m,deep:!1});if(D(b))return tg.map(b,
{name:m,deep:!1});if(O(b))return tg.set(b,{name:m,deep:!1})}}),jv=Lb("observable.struct",{enhancer:function(b,g){return yb(b,g)?g:b}}),Lp=Ga(ps);Object.assign(Ic,Lp);var kv={box:function(b,g){g=g||zq;return new Uf(b,Xb(g),g.name,!0,g.equals)},array:function(b,g){g=g||zq;return(!1===Ie.useProxies||!1===g.proxy?ve:th)(b,Xb(g),g.name)},map:function(b,g){g=g||zq;return new zy(b,Xb(g),g.name)},set:function(b,g){g=g||zq;return new sy(b,Xb(g),g.name)},object:function(b,g,m){if(!1===Ie.useProxies||!1===(null==
m?void 0:m.proxy))m=hd({},m);else{var K={},Z,ia;U();K=hd(K,m);m=null!=(ia=(Z=K[Yg]).proxy_)?ia:Z.proxy_=new Proxy(K,IC)}return Ne(m,b,g)},ref:Ga(hv),shallow:Ga(gv),deep:Lp,struct:Ga(jv)},tg=qs(Ic,kv),W=Sa("computed"),la=Sa("computed.struct",{equals:io.structural}),Da=function(b,g){if(ma(g))return Ta(b,g,W);if(ca(b))return Ga(Sa("computed",b));g=ca(g)?g:{};g.get=b;g.name||(g.name=b.name||"");return new ug(g)};Object.assign(Da,W);Da.struct=Ga(la);var gb,Gb,oc=0,Jc=1,gd=null!=(gb=null==(Gb=bg(function(){},
"name"))?void 0:Gb.configurable)?gb:!1,Wd={value:"action",configurable:!0,writable:!1,enumerable:!1};var He=Symbol.toPrimitive;var Uf=function(b){function g(K,Z,ia,ua,Ia){void 0===ia&&(ia="ObservableValue");void 0===Ia&&(Ia=io["default"]);ua=b.call(this,ia)||this;ua.enhancer=void 0;ua.hasUnreportedChange_=!1;ua.interceptors_=void 0;ua.changeListeners_=void 0;ua.value_=void 0;ua.dehancer=void 0;ua.enhancer=Z;ua.name_=ia;ua.equals=Ia;ua.value_=Z(K,void 0,ia);return ua}da(g,b);var m=g.prototype;m.dehanceValue=
function(K){return void 0!==this.dehancer?this.dehancer(K):K};m.set=function(K){K=this.prepareNewValue_(K);K!==Ie.UNCHANGED&&this.setNewValue_(K)};m.prepareNewValue_=function(K){if(Qd(this)){K=od(this,{object:this,type:dp,newValue:K});if(!K)return Ie.UNCHANGED;K=K.newValue}K=this.enhancer(K,this.value_,this.name_);return this.equals(this.value_,K)?Ie.UNCHANGED:K};m.setNewValue_=function(K){var Z=this.value_;this.value_=K;this.reportChanged();mc(this)&&Jf(this,{type:dp,object:this,newValue:K,oldValue:Z})};
m.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};m.intercept_=function(K){return me(this,K)};m.observe_=function(K,Z){Z&&K({observableKind:"value",debugObjectName:this.name_,object:this,type:dp,newValue:this.value_,oldValue:void 0});return Ue(this,K)};m.raw=function(){return this.value_};m.toJSON=function(){return this.get()};m.toString=function(){return this.name_+"["+this.value_+"]"};m.valueOf=function(){return ba(this.get())};m[He]=function(){return this.valueOf()};
return g}(ln),xh=P("ObservableValue",Uf);var of=Symbol.toPrimitive;var ug=function(){function b(m){this.dependenciesState_=Qf.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Qf.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Xd(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=
void 0;this.isTracing_=pe.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;m.get||v(31);this.derivation=m.get;this.name_=m.name||"ComputedValue";m.set&&(this.setter_=Zc("ComputedValue-setter",m.set));this.equals_=m.equals||(m.compareStructural||m.struct?io.structural:io["default"]);this.scope_=m.context;this.requiresReaction_=m.requiresReaction;this.keepAlive_=!!m.keepAlive}var g=b.prototype;g.onBecomeStale_=function(){Wb(this)};g.onBO=function(){this.onBOL&&
this.onBOL.forEach(function(m){return m()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(m){return m()})};g.get=function(){this.isComputing_&&v(32,this.name_,this.derivation);if(0!==Ie.inBatch||0!==this.observers_.size||this.keepAlive_){if(Yd(this),wc(this)){var m=Ie.trackingContext;this.keepAlive_&&!m&&(Ie.trackingContext=this);this.trackAndCompute()&&fc(this);Ie.trackingContext=m}}else wc(this)&&(this.warnAboutUntrackedRead_(),Kd(),this.value_=this.computeValue_(!1),nd());m=this.value_;
if(m instanceof Xd)throw m.cause;return m};g.set=function(m){if(this.setter_){this.isRunningSetter_&&v(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,m)}finally{this.isRunningSetter_=!1}}else v(34,this.name_)};g.trackAndCompute=function(){var m=this.value_,K=this.dependenciesState_===Qf.NOT_TRACKING_,Z=this.computeValue_(!0);if(m=K||m instanceof Xd||Z instanceof Xd||!this.equals_(m,Z))this.value_=Z;return m};g.computeValue_=function(m){this.isComputing_=!0;var K=Cb(!1);
if(m)var Z=Tc(this,this.derivation,this.scope_);else if(!0===Ie.disableErrorBoundaries)Z=this.derivation.call(this.scope_);else try{Z=this.derivation.call(this.scope_)}catch(ia){Z=new Xd(ia)}Ie.allowStateChanges=K;this.isComputing_=!1;return Z};g.suspend_=function(){this.keepAlive_||(jd(this),this.value_=void 0)};g.observe_=function(m,K){var Z=this,ia=!0,ua=void 0;return ad(function(){var Ia=Z.get();if(!ia||K){var Xa=Hd();m({observableKind:"computed",debugObjectName:Z.name_,type:dp,object:Z,newValue:Ia,
oldValue:ua});Ie.trackingDerivation=Xa}ia=!1;ua=Ia})};g.warnAboutUntrackedRead_=function(){};g.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};g.valueOf=function(){return ba(this.get())};g[of]=function(){return this.valueOf()};return b}(),fh=P("ComputedValue",ug),Qf;(function(b){b[b.NOT_TRACKING_=-1]="NOT_TRACKING_";b[b.UP_TO_DATE_=0]="UP_TO_DATE_";b[b.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";b[b.STALE_=2]="STALE_"})(Qf||={});var pe;(function(b){b[b.NONE=0]="NONE";b[b.LOG=1]=
"LOG";b[b.BREAK=2]="BREAK"})(pe||={});var Xd=function(b){this.cause=void 0;this.cause=b},ne=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=
this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},$e=!0,kf=!1,Ie=function(){var b=n();0<b.__mobxInstanceCount&&!b.__mobxGlobals&&($e=!1);b.__mobxGlobals&&b.__mobxGlobals.version!==(new ne).version&&($e=!1);if($e){if(b.__mobxGlobals)return b.__mobxInstanceCount+=1,b.__mobxGlobals.UNCHANGED||(b.__mobxGlobals.UNCHANGED={}),b.__mobxGlobals;b.__mobxInstanceCount=1;return b.__mobxGlobals=new ne}setTimeout(function(){kf||v(35)},
1);return new ne}(),lg=function(){function b(m,K,Z,ia){void 0===m&&(m="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Qf.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=pe.NONE;this.name_=m;this.onInvalidate_=K;this.errorHandler_=Z;this.requiresObservable_=ia}var g=b.prototype;g.onBecomeStale_=
function(){this.schedule_()};g.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Ie.pendingReactions.push(this),0<Ie.inBatch||Ie.isRunningReactions||Uh(ob))};g.isScheduled=function(){return this.isScheduled_};g.runReaction_=function(){if(!this.isDisposed_){Kd();this.isScheduled_=!1;var m=Ie.trackingContext;Ie.trackingContext=this;if(wc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(K){this.reportExceptionInDerivation_(K)}}Ie.trackingContext=m;nd()}};g.track=function(m){if(!this.isDisposed_){Kd();
this.isRunning_=!0;var K=Ie.trackingContext;Ie.trackingContext=this;m=Tc(this,m,void 0);Ie.trackingContext=K;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&jd(this);m instanceof Xd&&this.reportExceptionInDerivation_(m.cause);nd()}};g.reportExceptionInDerivation_=function(m){var K=this;if(this.errorHandler_)this.errorHandler_(m,this);else{if(Ie.disableErrorBoundaries)throw m;Ie.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",m);Ie.globalReactionErrorHandlers.forEach(function(Z){return Z(m,
K)})}};g.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Kd(),jd(this),nd()))};g.getDisposer_=function(){var m=this.dispose.bind(this);m[Yg]=this;return m};g.toString=function(){return"Reaction["+this.name_+"]"};g.trace=function(m){void 0===m&&(m=!1);Hc(this,m)};return b}(),Bh=100,Uh=function(b){return b()},Ah=P("Reaction",lg),zo="action",zt=fb(zo),DC=fb("action.bound",{bound:!0}),xy=fb("autoAction",{autoAction:!0}),CC=fb("autoAction.bound",{autoAction:!0,bound:!0}),pg=
tc(!1);Object.assign(pg,zt);var us=tc(!0);Object.assign(us,xy);pg.bound=Ga(DC);us.bound=Ga(CC);var zC=function(b){return b()},AC="onBO",BC="onBUO",GC=0;Me.prototype=Object.create(Error.prototype);var yy=Ca("flow"),HC=Ca("flow.bound",{bound:!0}),Fs=Object.assign(function(b,g){if(ma(g))return Ta(b,g,yy);var m=b.name||"\x3cunnamed flow\x3e";g=function(){var K=arguments,Z=++GC,ia=pg(m+" - runid: "+Z+" - init",b).apply(this,K),ua,Ia=void 0;K=new Promise(function(Xa,bb){function pb(Mb){Ia=void 0;try{var sc=
pg(m+" - runid: "+Z+" - yield "+kc++,ia.next).call(ia,Mb)}catch(lc){return bb(lc)}Ub(sc)}function sb(Mb){Ia=void 0;try{var sc=pg(m+" - runid: "+Z+" - yield "+kc++,ia["throw"]).call(ia,Mb)}catch(lc){return bb(lc)}Ub(sc)}function Ub(Mb){if(M(null==Mb?void 0:Mb.then))Mb.then(Ub,bb);else{if(Mb.done)return Xa(Mb.value);Ia=Promise.resolve(Mb.value);return Ia.then(pb,sb)}}var kc=0;ua=bb;pb(void 0)});K.cancel=pg(m+" - runid: "+Z+" - cancel",function(){try{if(Ia){var Xa=Ia;M(Xa.cancel)&&Xa.cancel()}var bb=
ia["return"](void 0),pb=Promise.resolve(bb.value);pb.then(Yo,Yo);M(pb.cancel)&&pb.cancel();ua(new Me)}catch(sb){ua(sb)}});return K};g.isMobXFlow=!0;return g},yy);Fs.bound=Ga(HC);var IC={has:function(b,g){return b[Yg].has_(g)},get:function(b,g){return b[Yg].get_(g)},set:function(b,g,m){var K;return ma(g)?null!=(K=b[Yg].set_(g,m,!0))?K:!0:!1},deleteProperty:function(b,g){var m;return ma(g)?null!=(m=b[Yg].delete_(g,!0))?m:!0:!1},defineProperty:function(b,g,m){var K;return null!=(K=b[Yg].defineProperty_(g,
m))?K:!0},ownKeys:function(b){return b[Yg].ownKeys_()},preventExtensions:function(b){v(13)}},dp="update",JC={get:function(b,g){var m=b[Yg];return g===Yg?m:"length"===g?m.getArrayLength_():"string"!==typeof g||isNaN(g)?aa(It,g)?It[g]:b[g]:m.get_(parseInt(g))},set:function(b,g,m){var K=b[Yg];"length"===g&&K.setArrayLength_(m);"symbol"===typeof g||isNaN(g)?b[g]=m:K.set_(parseInt(g),m);return!0},preventExtensions:function(){v(15)}},vv=function(){function b(m,K,Z,ia){void 0===m&&(m="ObservableArray");
this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=Z;this.legacyMode_=ia;this.atom_=new ln(m);this.enhancer_=function(ua,Ia){return K(ua,Ia,"ObservableArray[..]")}}var g=b.prototype;g.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};g.dehanceValues_=function(m){return void 0!==this.dehancer&&0<m.length?m.map(this.dehancer):m};g.intercept_=
function(m){return me(this,m)};g.observe_=function(m,K){void 0===K&&(K=!1);K&&m({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Ue(this,m)};g.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};g.setArrayLength_=function(m){("number"!==typeof m||isNaN(m)||0>m)&&v("Out of range: "+m);var K=this.values_.length;if(m!==K)if(m>K){for(var Z=
Array(m-K),ia=0;ia<m-K;ia++)Z[ia]=void 0;this.spliceWithArray_(K,0,Z)}else this.spliceWithArray_(m,K-m)};g.updateArrayLength_=function(m,K){m!==this.lastKnownLength_&&v(16);this.lastKnownLength_+=K;this.legacyMode_&&0<K&&Xe(m+K+1)};g.spliceWithArray_=function(m,K,Z){var ia=this,ua=this.values_.length;void 0===m?m=0:m>ua?m=ua:0>m&&(m=Math.max(0,ua+m));K=1===arguments.length?ua-m:void 0===K||null===K?0:Math.max(0,Math.min(K,ua-m));void 0===Z&&(Z=An);if(Qd(this)){var Ia=od(this,{object:this.proxy_,type:"splice",
index:m,removedCount:K,added:Z});if(!Ia)return An;K=Ia.removedCount;Z=Ia.added}Z=0===Z.length?Z:Z.map(function(Xa){return ia.enhancer_(Xa,void 0)});this.legacyMode_&&this.updateArrayLength_(ua,Z.length-K);ua=this.spliceItemsIntoValues_(m,K,Z);0===K&&0===Z.length||this.notifyArraySplice_(m,Z,ua);return this.dehanceValues_(ua)};g.spliceItemsIntoValues_=function(m,K,Z){if(1E4>Z.length){var ia;return(ia=this.values_).splice.apply(ia,[m,K].concat(Z))}ia=this.values_.slice(m,m+K);var ua=this.values_.slice(m+
K);this.values_.length+=Z.length-K;for(K=0;K<Z.length;K++)this.values_[m+K]=Z[K];for(K=0;K<ua.length;K++)this.values_[m+Z.length+K]=ua[K];return ia};g.notifyArrayChildUpdate_=function(m,K,Z){var ia=!this.owned_&&!1,ua=mc(this);m=ua||ia?{observableKind:"array",object:this.proxy_,type:dp,debugObjectName:this.atom_.name_,index:m,newValue:K,oldValue:Z}:null;this.atom_.reportChanged();ua&&Jf(this,m)};g.notifyArraySplice_=function(m,K,Z){var ia=!this.owned_&&!1,ua=mc(this);m=ua||ia?{observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:m,removed:Z,added:K,removedCount:Z.length,addedCount:K.length}:null;this.atom_.reportChanged();ua&&Jf(this,m)};g.get_=function(m){if(m<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[m]);console.warn("[mobx.array] Attempt to read an array index ("+m+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")};g.set_=function(m,
K){var Z=this.values_;if(m<Z.length){var ia=Z[m];if(Qd(this)){K=od(this,{type:dp,object:this.proxy_,index:m,newValue:K});if(!K)return;K=K.newValue}K=this.enhancer_(K,ia);K!==ia&&(Z[m]=K,this.notifyArrayChildUpdate_(m,K,ia))}else m===Z.length?this.spliceWithArray_(m,0,[K]):v(17,m,Z.length)};return b}(),It={clear:function(){return this.splice(0)},replace:function(b){var g=this[Yg];return g.spliceWithArray_(0,g.values_.length,b)},toJSON:function(){return this.slice()},splice:function(b,g){for(var m=
arguments.length,K=Array(2<m?m-2:0),Z=2;Z<m;Z++)K[Z-2]=arguments[Z];m=this[Yg];switch(arguments.length){case 0:return[];case 1:return m.spliceWithArray_(b);case 2:return m.spliceWithArray_(b,g)}return m.spliceWithArray_(b,g,K)},spliceWithArray:function(b,g,m){return this[Yg].spliceWithArray_(b,g,m)},push:function(){for(var b=this[Yg],g=arguments.length,m=Array(g),K=0;K<g;K++)m[K]=arguments[K];b.spliceWithArray_(b.values_.length,0,m);return b.values_.length},pop:function(){return this.splice(Math.max(this[Yg].values_.length-
1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var b=this[Yg],g=arguments.length,m=Array(g),K=0;K<g;K++)m[K]=arguments[K];b.spliceWithArray_(0,0,m);return b.values_.length},reverse:function(){Ie.trackingDerivation&&v(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){Ie.trackingDerivation&&v(37,"sort");var b=this.slice();b.sort.apply(b,arguments);this.replace(b);return this},remove:function(b){var g=this[Yg];b=g.dehanceValues_(g.values_).indexOf(b);
return-1<b?(this.splice(b,1),!0):!1}};Za("concat",Bb);Za("flat",Bb);Za("includes",Bb);Za("indexOf",Bb);Za("join",Bb);Za("lastIndexOf",Bb);Za("slice",Bb);Za("toString",Bb);Za("toLocaleString",Bb);Za("every",db);Za("filter",db);Za("find",db);Za("findIndex",db);Za("flatMap",db);Za("forEach",db);Za("map",db);Za("some",db);Za("reduce",Eb);Za("reduceRight",Eb);var KC=P("ObservableArrayAdministration",vv),LC={};var MC=Symbol.iterator;var NC=Symbol.toStringTag;var zy=function(){function b(m,K,Z){var ia=this;
void 0===K&&(K=Ya);void 0===Z&&(Z="ObservableMap");this.name_=this.enhancer_=void 0;this[Yg]=LC;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=K;this.name_=Z;M(Map)||v(18);this.keysAtom_=Oa("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Oc(!0,function(){ia.merge(m)})}var g=b.prototype;g.has_=function(m){return this.data_.has(m)};g.has=function(m){var K=this;if(!Ie.trackingDerivation)return this.has_(m);var Z=this.hasMap_.get(m);
if(!Z){var ia=Z=new Uf(this.has_(m),Ma,"ObservableMap.key?",!1);this.hasMap_.set(m,ia);sd(ia,function(){return K.hasMap_["delete"](m)})}return Z.get()};g.set=function(m,K){var Z=this.has_(m);if(Qd(this)){K=od(this,{type:Z?dp:"add",object:this,newValue:K,name:m});if(!K)return this;K=K.newValue}Z?this.updateValue_(m,K):this.addValue_(m,K);return this};g["delete"]=function(m){var K=this;if(Qd(this)&&!od(this,{type:"delete",object:this,name:m}))return!1;if(this.has_(m)){var Z=mc(this),ia=Z?{observableKind:"map",
debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(m).value_,name:m}:null;zb(function(){var ua;K.keysAtom_.reportChanged();null==(ua=K.hasMap_.get(m))?void 0:ua.setNewValue_(!1);K.data_.get(m).setNewValue_(void 0);K.data_["delete"](m)});Z&&Jf(this,ia);return!0}return!1};g.updateValue_=function(m,K){var Z=this.data_.get(m);K=Z.prepareNewValue_(K);if(K!==Ie.UNCHANGED){var ia=mc(this);m=ia?{observableKind:"map",debugObjectName:this.name_,type:dp,object:this,oldValue:Z.value_,
name:m,newValue:K}:null;Z.setNewValue_(K);ia&&Jf(this,m)}};g.addValue_=function(m,K){var Z=this;zb(function(){var Ia,Xa=new Uf(K,Z.enhancer_,"ObservableMap.key",!1);Z.data_.set(m,Xa);K=Xa.value_;null==(Ia=Z.hasMap_.get(m))?void 0:Ia.setNewValue_(!0);Z.keysAtom_.reportChanged()});var ia=mc(this),ua=ia?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:m,newValue:K}:null;ia&&Jf(this,ua)};g.get=function(m){return this.has(m)?this.dehanceValue_(this.data_.get(m).get()):this.dehanceValue_(void 0)};
g.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};g.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};g.values=function(){var m=this,K=this.keys();return Ha({next:function(){var Z=K.next(),ia=Z.done;Z=Z.value;return{done:ia,value:ia?void 0:m.get(Z)}}})};g.entries=function(){var m=this,K=this.keys();return Ha({next:function(){var Z=K.next(),ia=Z.done;Z=Z.value;return{done:ia,value:ia?void 0:[Z,m.get(Z)]}}})};g[MC]=function(){return this.entries()};
g.forEach=function(m,K){for(var Z=ya(this),ia;!(ia=Z()).done;)ia=ia.value,m.call(K,ia[1],ia[0],this)};g.merge=function(m){var K=this;Xp(m)&&(m=new Map(m));zb(function(){ca(m)?Q(m).forEach(function(Z){return K.set(Z,m[Z])}):Array.isArray(m)?m.forEach(function(Z){return K.set(Z[0],Z[1])}):D(m)?(m.constructor!==Map&&v(19,m),m.forEach(function(Z,ia){return K.set(ia,Z)})):null!==m&&void 0!==m&&v(20,m)});return this};g.clear=function(){var m=this;zb(function(){Nd(function(){for(var K=ya(m.keys()),Z;!(Z=
K()).done;)m["delete"](Z.value)})})};g.replace=function(m){var K=this;zb(function(){for(var Z=ib(m),ia=new Map,ua=!1,Ia=ya(K.data_.keys()),Xa;!(Xa=Ia()).done;)if(Xa=Xa.value,!Z.has(Xa))if(K["delete"](Xa))ua=!0;else{var bb=K.data_.get(Xa);ia.set(Xa,bb)}for(Z=ya(Z.entries());!(Ia=Z()).done;)Xa=Ia.value,Ia=Xa[0],bb=Xa[1],Xa=K.data_.has(Ia),K.set(Ia,bb),K.data_.has(Ia)&&(bb=K.data_.get(Ia),ia.set(Ia,bb),Xa||(ua=!0));if(!ua)if(K.data_.size!==ia.size)K.keysAtom_.reportChanged();else for(ua=K.data_.keys(),
Z=ia.keys(),Ia=ua.next(),Xa=Z.next();!Ia.done;){if(Ia.value!==Xa.value){K.keysAtom_.reportChanged();break}Ia=ua.next();Xa=Z.next()}K.data_=ia});return this};g.toString=function(){return"[object ObservableMap]"};g.toJSON=function(){return Array.from(this)};g.observe_=function(m,K){return Ue(this,m)};g.intercept_=function(m){return me(this,m)};ha(b,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:NC,get:function(){return"Map"}}]);return b}(),Xp=P("ObservableMap",
zy),OC={};var EC=Symbol.iterator;var xC=Symbol.toStringTag;var sy=function(){function b(m,K,Z){void 0===K&&(K=Ya);void 0===Z&&(Z="ObservableSet");this.name_=void 0;this[Yg]=OC;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=Z;M(Set)||v(22);this.atom_=Oa(this.name_);this.enhancer_=function(ia,ua){return K(ia,ua,Z)};m&&this.replace(m)}var g=b.prototype;g.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};
g.clear=function(){var m=this;zb(function(){Nd(function(){for(var K=ya(m.data_.values()),Z;!(Z=K()).done;)m["delete"](Z.value)})})};g.forEach=function(m,K){for(var Z=ya(this),ia;!(ia=Z()).done;)ia=ia.value,m.call(K,ia,ia,this)};g.add=function(m){var K=this;if(Qd(this)&&!od(this,{type:"add",object:this,newValue:m}))return this;if(!this.has(m)){zb(function(){K.data_.add(K.enhancer_(m,void 0));K.atom_.reportChanged()});var Z=mc(this),ia=Z?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,
newValue:m}:null;Z&&Jf(this,ia)}return this};g["delete"]=function(m){var K=this;if(Qd(this)&&!od(this,{type:"delete",object:this,oldValue:m}))return!1;if(this.has(m)){var Z=mc(this),ia=Z?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:m}:null;zb(function(){K.atom_.reportChanged();K.data_["delete"](m)});Z&&Jf(this,ia);return!0}return!1};g.has=function(m){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(m))};g.entries=function(){var m=0,K=Array.from(this.keys()),
Z=Array.from(this.values());return Ha({next:function(){var ia=m;m+=1;return ia<Z.length?{value:[K[ia],Z[ia]],done:!1}:{done:!0}}})};g.keys=function(){return this.values()};g.values=function(){this.atom_.reportObserved();var m=this,K=0,Z=Array.from(this.data_.values());return Ha({next:function(){return K<Z.length?{value:m.dehanceValue_(Z[K++]),done:!1}:{done:!0}}})};g.replace=function(m){var K=this;Eq(m)&&(m=new Set(m));zb(function(){Array.isArray(m)?(K.clear(),m.forEach(function(Z){return K.add(Z)})):
O(m)?(K.clear(),m.forEach(function(Z){return K.add(Z)})):null!==m&&void 0!==m&&v("Cannot initialize set from "+m)});return this};g.observe_=function(m,K){return Ue(this,m)};g.intercept_=function(m){return me(this,m)};g.toJSON=function(){return Array.from(this)};g.toString=function(){return"[object ObservableSet]"};g[EC]=function(){return this.values()};ha(b,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:xC,get:function(){return"Set"}}]);return b}(),Eq=P("ObservableSet",
sy),vy=Object.create(null),wy=function(){function b(m,K,Z,ia){void 0===K&&(K=new Map);void 0===ia&&(ia=iv);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=m;this.values_=K;this.name_=Z;this.defaultAnnotation_=ia;this.keysAtom_=new ln("ObservableObject.keys");this.isPlainObject_=ca(this.target_)}var g=b.prototype;g.getObservablePropValue_=function(m){return this.values_.get(m).get()};
g.setObservablePropValue_=function(m,K){var Z=this.values_.get(m);if(Z instanceof ug)return Z.set(K),!0;if(Qd(this)){K=od(this,{type:dp,object:this.proxy_||this.target_,name:m,newValue:K});if(!K)return null;K=K.newValue}K=Z.prepareNewValue_(K);if(K!==Ie.UNCHANGED){var ia=mc(this);m=ia?{type:dp,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Z.value_,name:m,newValue:K}:null;Z.setNewValue_(K);ia&&Jf(this,m)}return!0};g.get_=function(m){Ie.trackingDerivation&&
!aa(this.target_,m)&&this.has_(m);return this.target_[m]};g.set_=function(m,K,Z){void 0===Z&&(Z=!1);if(aa(this.target_,m)){if(this.values_.has(m))return this.setObservablePropValue_(m,K);if(Z)return Reflect.set(this.target_,m,K);this.target_[m]=K;return!0}return this.extend_(m,{value:K,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Z)};g.has_=function(m){if(!Ie.trackingDerivation)return m in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var K=this.pendingKeys_.get(m);
K||(K=new Uf(m in this.target_,Ma,"ObservableObject.key?",!1),this.pendingKeys_.set(m,K));return K.get()};g.make_=function(m,K){!0===K&&(K=this.defaultAnnotation_);if(!1!==K){if(!(m in this.target_)){var Z;if(null!=(Z=this.target_[mn])&&Z[m])return;v(1,K.annotationType_,this.name_+"."+m.toString())}for(Z=this.target_;Z&&Z!==np;){var ia=bg(Z,m);if(ia){ia=K.make_(this,m,ia,Z);if(0===ia)return;if(1===ia)break}Z=Object.getPrototypeOf(Z)}var ua;null==(ua=this.target_[mn])?!0:delete ua[m]}};g.extend_=function(m,
K,Z,ia){void 0===ia&&(ia=!1);!0===Z&&(Z=this.defaultAnnotation_);if(!1===Z)return this.defineProperty_(m,K,ia);if(K=Z.extend_(this,m,K,ia)){var ua;null==(ua=this.target_[mn])?!0:delete ua[m]}return K};g.defineProperty_=function(m,K,Z){void 0===Z&&(Z=!1);try{Kd();var ia=this.delete_(m);if(!ia)return ia;if(Qd(this)){var ua=od(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:K.value});if(!ua)return null;var Ia=ua.newValue;K.value!==Ia&&(K=N({},K,{value:Ia}))}if(Z){if(!Reflect.defineProperty(this.target_,
m,K))return!1}else zn(this.target_,m,K);this.notifyPropertyAddition_(m,K.value)}finally{nd()}return!0};g.defineObservableProperty_=function(m,K,Z,ia){void 0===ia&&(ia=!1);try{Kd();var ua=this.delete_(m);if(!ua)return ua;if(Qd(this)){var Ia=od(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:K});if(!Ia)return null;K=Ia.newValue}var Xa=Dd(m),bb={configurable:Ie.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Xa.get,set:Xa.set};if(ia){if(!Reflect.defineProperty(this.target_,
m,bb))return!1}else zn(this.target_,m,bb);var pb=new Uf(K,Z,"ObservableObject.key",!1);this.values_.set(m,pb);this.notifyPropertyAddition_(m,pb.value_)}finally{nd()}return!0};g.defineComputedProperty_=function(m,K,Z){void 0===Z&&(Z=!1);try{Kd();var ia=this.delete_(m);if(!ia)return ia;if(Qd(this)&&!od(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:void 0}))return null;K.name||(K.name="ObservableObject.key");K.context=this.proxy_||this.target_;var ua=Dd(m),Ia={configurable:Ie.safeDescriptors?
this.isPlainObject_:!0,enumerable:!1,get:ua.get,set:ua.set};if(Z){if(!Reflect.defineProperty(this.target_,m,Ia))return!1}else zn(this.target_,m,Ia);this.values_.set(m,new ug(K));this.notifyPropertyAddition_(m,void 0)}finally{nd()}return!0};g.delete_=function(m,K){void 0===K&&(K=!1);if(!aa(this.target_,m))return!0;if(Qd(this)&&!od(this,{object:this.proxy_||this.target_,name:m,type:"remove"}))return null;try{var Z,ia;Kd();var ua=mc(this),Ia=this.values_.get(m),Xa=void 0;if(!Ia&&ua){var bb;Xa=null==
(bb=bg(this.target_,m))?void 0:bb.value}if(K){if(!Reflect.deleteProperty(this.target_,m))return!1}else delete this.target_[m];Ia&&(this.values_["delete"](m),Ia instanceof Uf&&(Xa=Ia.value_),Nb(Ia));this.keysAtom_.reportChanged();null==(Z=this.pendingKeys_)?void 0:null==(ia=Z.get(m))?void 0:ia.set(m in this.target_);if(ua){var pb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Xa,name:m};ua&&Jf(this,pb)}}finally{nd()}return!0};g.observe_=
function(m,K){return Ue(this,m)};g.intercept_=function(m){return me(this,m)};g.notifyPropertyAddition_=function(m,K){var Z,ia,ua=mc(this);ua&&(K=ua?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:m,newValue:K}:null,ua&&Jf(this,K));null==(Z=this.pendingKeys_)?void 0:null==(ia=Z.get(m))?void 0:ia.set(!0);this.keysAtom_.reportChanged()};g.ownKeys_=function(){this.keysAtom_.reportObserved();return Bn(this.target_)};g.keys_=function(){this.keysAtom_.reportObserved();
return Object.keys(this.target_)};return b}(),yC=P("ObservableObjectAdministration",wy),FC=ce(0),sv=0,ty=function(){};(function(b,g){Object.setPrototypeOf?Object.setPrototypeOf(b.prototype,g):void 0!==b.prototype.__proto__?b.prototype.__proto__=g:b.prototype=g})(ty,Array.prototype);var tv=function(b,g,m){function K(ia,ua,Ia,Xa){void 0===Ia&&(Ia="ObservableArray");void 0===Xa&&(Xa=!1);var bb=b.call(this)||this;ua=new vv(Ia,ua,Xa,!0);ua.proxy_=ea(bb);L(ea(bb),Yg,ua);ia&&ia.length&&(ua=Cb(!0),bb.spliceWithArray(0,
0,ia),Ie.allowStateChanges=ua);Object.defineProperty(ea(bb),"0",FC);return bb}da(K,b);var Z=K.prototype;Z.concat=function(){this[Yg].atom_.reportObserved();for(var ia=arguments.length,ua=Array(ia),Ia=0;Ia<ia;Ia++)ua[Ia]=arguments[Ia];return Array.prototype.concat.apply(this.slice(),ua.map(function(Xa){return ec(Xa)?Xa.slice():Xa}))};Z[m]=function(){var ia=this,ua=0;return Ha({next:function(){return ua<ia.length?{value:ia[ua++],done:!1}:{done:!0,value:void 0}}})};ha(K,[{key:"length",get:function(){return this[Yg].getArrayLength_()},
set:function(ia){this[Yg].setArrayLength_(ia)}},{key:g,get:function(){return"Array"}}]);return K}(ty,Symbol.toStringTag,Symbol.iterator);Object.entries(It).forEach(function(b){var g=b[0];b=b[1];"concat"!==g&&V(tv.prototype,g,b)});Xe(1E3);var uy=np.toString;["Symbol","Map","Set"].forEach(function(b){"undefined"===typeof n()[b]&&v("MobX requires global '"+b+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:ac,extras:{getDebugName:qf},
$mobx:Yg});var Jb=T(616),am=class{constructor(b){F(this,"props");F(this,"aspectRatio");F(this,"type");F(this,"hideCloneHandles",!1);F(this,"hideResizeHandles",!1);F(this,"hideRotateHandle",!1);F(this,"hideContextBar",!1);F(this,"hideSelectionDetail",!1);F(this,"hideSelection",!1);F(this,"canChangeAspectRatio",!0);F(this,"canUnmount",!0);F(this,"canResize",[!0,!0]);F(this,"canScale",!0);F(this,"canFlip",!0);F(this,"canEdit",!1);F(this,"canBind",!1);F(this,"nonce");F(this,"bindingDistance",4);F(this,
"isDirty",!1);F(this,"lastSerialized");F(this,"getCenter",()=>rf.getBoundsCenter(this.bounds));F(this,"getRotatedBounds",()=>{const {bounds:ia,props:{rotation:ua}}=this;return ua?rf.getBoundsFromPoints(rf.getRotatedCorners(ia,ua)):ia});F(this,"hitTestPoint",ia=>{var ua=this.rotatedBounds;if(!this.props.rotation)return si.pointInBounds(ia,ua);ua=rf.getRotatedCorners(ua,this.props.rotation);return si.pointInPolygon(ia,ua)});F(this,"hitTestLineSegment",(ia,ua)=>{const Ia=rf.getBoundsFromPoints([ia,ua]),
{rotatedBounds:Xa,props:{rotation:bb=0}}=this;return rf.boundsContain(Xa,Ia)||bb?t(ia,ua,rf.getRotatedCorners(this.bounds)).didIntersect:0<w(Xa,ia,ua).length});F(this,"hitTestBounds",ia=>{const {rotatedBounds:ua,props:{rotation:Ia=0}}=this,Xa=rf.getRotatedCorners(this.bounds,Ia);return rf.boundsContain(ia,ua)||0<I([ia.minX,ia.minY],[ia.width,ia.height],Xa).length});F(this,"getExpandedBounds",()=>rf.expandBounds(this.getBounds(),this.bindingDistance));F(this,"getBindingPoint",(ia,ua,Ia,Xa)=>{var bb=
this.getBounds(),pb=this.getExpandedBounds();if(si.pointInBounds(ia,pb)){var sb=B(ua,Ia,pb).filter(Ub=>Ub.didIntersect).map(Ub=>Ub.points[0]);if(sb.length)return Ia=this.getCenter(),sb=sb.sort((Ub,kc)=>re.dist(kc,ua)-re.dist(Ub,ua))[0],sb=re.med(ia,sb),Xa?(Xa=2>re.dist(ia,Ia)?Ia:ia,bb=0):(Xa=2>re.distanceToLineSegment(ia,sb,Ia)?Ia:sb,bb=si.pointInBounds(ia,bb)?this.bindingDistance:Math.max(this.bindingDistance,rf.getBoundsSides(bb).map(Ub=>re.distanceToLineSegment(Ub[1][0],Ub[1][1],ia)).sort((Ub,
kc)=>Ub-kc)[0])),pb=re.divV(re.sub(Xa,[pb.minX,pb.minY]),[pb.width,pb.height]),{point:re.clampV(pb,0,1),distance:bb}}});F(this,"getSerialized",()=>le(rb(Wa({},this.props),{type:this.type,nonce:this.nonce})));F(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||zb(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});F(this,"validateProps",ia=>ia);F(this,
"update",(ia,ua=!1,Ia=!1)=>{ua||this.isDirty||this.setIsDirty(!0);ua||Ia||this.incNonce();Object.assign(this.props,this.validateProps(ia));return this});F(this,"clone",()=>new this.constructor(this.serialized));F(this,"onResetBounds",ia=>this);F(this,"scale",[1,1]);F(this,"onResizeStart",ia=>{var ua;this.scale=[...(null!=(ua=this.props.scale)?ua:[1,1])];return this});F(this,"onResize",(ia,ua)=>{const {bounds:Ia,rotation:Xa,scale:[bb,pb]}=ua;ia=[...this.scale];0>bb&&(ia[0]*=-1);0>pb&&(ia[1]*=-1);this.update({point:[Ia.minX,
Ia.minY],scale:ia,rotation:Xa});return this});F(this,"onHandleChange",(ia,{id:ua,delta:Ia})=>{if(void 0!==ia.handles){var Xa=Tq(ia.handles);Xa[ua]=rb(Wa({},Xa[ua]),{point:re.add(Ia,ia.handles[ua].point)});var bb=rf.getCommonTopLeft(Object.values(Xa).map(pb=>pb.point));Object.values(Xa).forEach(pb=>{pb.point=re.sub(pb.point,bb)});this.update({point:re.add(ia.point,bb),handles:Xa})}});var g,m;const K=this.constructor.id,Z=null!=(g=this.constructor.defaultProps)?g:{};this.type=K;this.props=Wa(Wa({scale:[1,
1]},Z),b);this.nonce=null!=(m=b.nonce)?m:Date.now();Se(this)}get id(){return this.props.id}setNonce(b){this.nonce=b}incNonce(){this.nonce++}setIsDirty(b){this.isDirty=b}setLastSerialized(b){this.lastSerialized=b}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(b){b=this.getBounds();const {stroke:g,strokeWidth:m,strokeType:K,opacity:Z,fill:ia,noFill:ua,borderRadius:Ia}=
this.props;return(0,Jb.jsx)("rect",{fill:ua?"none":jf(ia,"background"),stroke:jf(g,"stroke"),strokeWidth:null!=m?m:2,strokeDasharray:"dashed"===K?"8 2":void 0,fillOpacity:null!=Z?Z:.2,width:b.width,height:b.height,rx:Ia,ry:Ia})}};F(am,"type");id([tg],am.prototype,"props",2);id([tg],am.prototype,"canResize",2);id([tg],am.prototype,"nonce",2);id([tg],am.prototype,"isDirty",2);id([tg],am.prototype,"lastSerialized",2);id([Da],am.prototype,"id",1);id([pg],am.prototype,"setNonce",1);id([pg],am.prototype,
"incNonce",1);id([pg],am.prototype,"setIsDirty",1);id([pg],am.prototype,"setLastSerialized",1);id([Da],am.prototype,"center",1);id([Da],am.prototype,"bounds",1);id([Da],am.prototype,"rotatedBounds",1);id([Da],am.prototype,"serialized",1);id([pg],am.prototype,"update",2);var Vn=class extends am{constructor(b={}){super(b);F(this,"canBind",!0);F(this,"getBounds",()=>{const [g,m]=this.props.point,[K,Z]=this.props.size;return{minX:g,minY:m,maxX:g+K,maxY:m+Z,width:K,height:Z}});F(this,"getRotatedBounds",
()=>rf.getBoundsFromPoints(rf.getRotatedCorners(this.bounds,this.props.rotation)));F(this,"onResize",(g,m)=>{const {bounds:K,rotation:Z,scale:[ia,ua]}=m;g=[...this.scale];0>ia&&(g[0]*=-1);0>ua&&(g[1]*=-1);this.update({point:[K.minX,K.minY],scale:g,rotation:Z});return this.update({rotation:Z,point:[K.minX,K.minY],size:[Math.max(1,K.width),Math.max(1,K.height)],scale:g})});F(this,"validateProps",g=>{void 0!==g.size&&(g.size[0]=Math.max(g.size[0],1),g.size[1]=Math.max(g.size[1],1));return g});Se(this)}};
F(Vn,"id","box");F(Vn,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var sr=class extends am{constructor(b={}){super(b);F(this,"getBounds",()=>{const {pointBounds:g,props:{point:m}}=this;return rf.translateBounds(g,m)});F(this,"getRotatedBounds",()=>{const {props:{rotation:g,point:m},bounds:K,rotatedPoints:Z}=this;return g?rf.translateBounds(rf.getBoundsFromPoints(Z),m):K});F(this,"normalizedPoints",[]);F(this,"isResizeFlippedX",!1);F(this,"isResizeFlippedY",!1);
F(this,"onResizeStart",()=>{var g;const {bounds:m,props:{points:K}}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const Z=[m.width,m.height];this.normalizedPoints=K.map(ia=>Ed.divV(ia,Z));return this});F(this,"onResize",(g,m)=>{const {bounds:K,scale:[Z,ia]}=m,ua=[K.width,K.height];g=[...this.scale];0>Z&&(g[0]*=-1);0>ia&&(g[1]*=-1);return this.update(Z||ia?{point:[K.minX,K.minY],points:this.normalizedPoints.map(Ia=>Ed.mulV(Ia,ua).concat(Ia[2])),scale:g}:{point:[K.minX,K.minY],points:this.normalizedPoints.map(Ia=>
Ed.mulV(Ia,ua).concat(Ia[2]))})});F(this,"hitTestPoint",g=>{const {props:{points:m,point:K}}=this;return si.pointNearToPolyline(Ed.sub(g,K),m)});F(this,"hitTestLineSegment",(g,m)=>{const {bounds:K,props:{points:Z,point:ia}}=this;if(si.pointInBounds(g,K)||si.pointInBounds(m,K)||0<w(K,g,m).length){const ua=Ed.sub(g,ia),Ia=Ed.sub(m,ia);return t(ua,Ia,Z).didIntersect||!!Z.find(Xa=>5>Ed.dist(ua,Xa)||5>Ed.dist(Ia,Xa))}return!1});F(this,"hitTestBounds",g=>{const {rotatedBounds:m,props:{points:K,point:Z}}=
this,ia=rf.translateBounds(g,Ed.neg(Z));return rf.boundsContain(g,m)||K.every(ua=>si.pointInBounds(ua,ia))||rf.boundsCollide(g,m)&&0<x([ia.minX,ia.minY],[ia.width,ia.height],K).length});Se(this)}get pointBounds(){const {props:{points:b}}=this;return rf.getBoundsFromPoints(b)}get rotatedPoints(){const {props:{point:b,points:g,rotation:m},center:K}=this;if(!m)return g;const Z=Ed.sub(K,b);return g.map(ia=>Ed.rotWith(ia,Z,m))}};F(sr,"id","draw");F(sr,"defaultProps",{id:"draw",type:"draw",parentId:"page",
point:[0,0],points:[],isComplete:!1});id([Da],sr.prototype,"pointBounds",1);id([Da],sr.prototype,"rotatedPoints",1);var rv=class extends am{constructor(b={}){super(b);F(this,"hideSelection",!0);F(this,"hideResizeHandles",!0);F(this,"hideRotateHandle",!0);F(this,"hideSelectionDetail",!0);F(this,"getBounds",()=>{const {props:{point:[g,m],radius:K=0}}=this;return{minX:g,minY:m,maxX:g+2*K,maxY:m+2*K,width:2*K,height:2*K}});F(this,"getRotatedBounds",()=>rf.getBoundsFromPoints(rf.getRotatedCorners(this.bounds,
this.props.rotation)));F(this,"onResize",(g,m)=>{({props:{radius:g=0}}=this);return this.update({point:[m.bounds.minX+m.bounds.width/2-g,m.bounds.minY+m.bounds.height/2-g]})});Se(this)}};F(rv,"id","dot");F(rv,"defaultProps",{id:"dot",type:"dot",parentId:"page",point:[0,0],radius:6});var qv=class extends Vn{constructor(b={}){super(b);F(this,"getBounds",()=>{const {props:{point:[g,m],size:[K,Z]}}=this;return rf.getRotatedEllipseBounds(g,m,K/2,Z/2,0)});F(this,"getRotatedBounds",()=>{const {props:{point:[g,
m],size:[K,Z],rotation:ia}}=this;return rf.getRotatedEllipseBounds(g,m,K/2,Z/2,ia)});F(this,"hitTestPoint",g=>{const {props:{size:m,rotation:K},center:Z}=this;return si.pointInEllipse(g,Z,m[0],m[1],K||0)});F(this,"hitTestLineSegment",(g,m)=>{const {props:{size:[K,Z],rotation:ia=0},center:ua}=this;return H(g,m,ua,K,Z,ia).didIntersect});F(this,"hitTestBounds",g=>{const {props:{size:[m,K],rotation:Z=0},rotatedBounds:ia}=this;var ua;if(!(ua=rf.boundsContain(g,ia))){const {minX:Ia,minY:Xa,width:bb,height:pb}=
g;ua=0<z(this.center,m/2,K/2,Z,[Ia,Xa],[bb,pb]).length}return ua});Se(this)}};F(qv,"id","ellipse");F(qv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var uv=class extends Vn{constructor(b={}){super(b);F(this,"onResetBounds",g=>{const {clipping:m,size:K,point:Z}=this.props;if(m){const [ia,ua,Ia,Xa]=Array.isArray(m)?m:[m,m,m,m];return this.update({clipping:0,point:[Z[0]-Xa,Z[1]-ia],size:[K[0]+(Xa-ua),K[1]+(ia-Ia)]})}if(g.asset){const {size:[ia,ua]}=g.asset;
this.update({clipping:0,point:[Z[0]+K[0]/2-ia/2,Z[1]+K[1]/2-ua/2],size:[ia,ua]})}return this});F(this,"onResize",(g,m)=>{const {bounds:K,clip:Z,scale:ia}=m;({clipping:m}=this.props);const {clipping:ua}=g;if(Z){const {point:[Ia,Xa],size:[bb,pb]}=g,[sb,Ub,kc,Mb]=ua?Array.isArray(ua)?ua:[ua,ua,ua,ua]:[0,0,0,0];m=[sb+(K.minY-Xa),Ub+(K.maxX-(Ia+bb)),kc+(K.maxY-(Xa+pb)),Mb+(K.minX-Ia)]}else void 0!==ua&&(m=Array.isArray(ua)?ua:[ua,ua,ua,ua],m=[m[0]*ia[1],m[1]*ia[0],m[2]*ia[1],m[3]*ia[0]]);if(m&&Array.isArray(m)){const Ia=
m;Ia.every((Xa,bb)=>0===bb||Xa===Ia[bb-1])&&(m=Ia[0])}return this.update({point:[K.minX,K.minY],size:[Math.max(1,K.width),Math.max(1,K.height)],clipping:m})});Se(this)}};F(uv,"id","ellipse");F(uv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var ry=class extends am{constructor(b={}){super(b);F(this,"getBounds",()=>{const {points:g,props:{point:m}}=this;return rf.translateBounds(rf.getBoundsFromPoints(g),m)});F(this,
"getRotatedBounds",()=>{const {rotatedPoints:g,props:{point:m}}=this;return rf.translateBounds(rf.getBoundsFromPoints(g),m)});F(this,"normalizedHandles",[]);F(this,"onResizeStart",()=>{var g;const {props:{handles:m},bounds:K}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const Z=[K.width,K.height];this.normalizedHandles=Object.values(m).map(ia=>Ed.divV(ia.point,Z));return this});F(this,"onResize",(g,m)=>{const {bounds:K,scale:[Z,ia]}=m,{props:{handles:ua},normalizedHandles:Ia}=this,Xa=
[K.width,K.height];g=[...this.scale];0>Z&&(g[0]*=-1);0>ia&&(g[1]*=-1);return this.update({point:[K.minX,K.minY],handles:Object.values(ua).map((bb,pb)=>rb(Wa({},bb),{point:Ed.mulV(Ia[pb],Xa)})),scale:g})});F(this,"hitTestPoint",g=>{const {points:m}=this;return si.pointNearToPolyline(Ed.sub(g,this.props.point),m)});F(this,"hitTestLineSegment",(g,m)=>{const {bounds:K,points:Z,props:{point:ia}}=this;if(si.pointInBounds(g,K)||si.pointInBounds(m,K)||0<w(K,g,m).length){const ua=Ed.sub(g,ia),Ia=Ed.sub(m,
ia);return t(ua,Ia,Z).didIntersect||!!Z.find(Xa=>5>Ed.dist(ua,Xa)||5>Ed.dist(Ia,Xa))}return!1});F(this,"hitTestBounds",g=>{const {rotatedBounds:m,points:K,props:{point:Z}}=this,ia=rf.translateBounds(g,Ed.neg(Z));return rf.boundsContain(g,m)||K.every(ua=>si.pointInBounds(ua,ia))||rf.boundsCollide(g,m)&&0<x([ia.minX,ia.minY],[ia.width,ia.height],K).length});F(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=ry.defaultProps.handles);
return g});Se(this)}get points(){return Object.values(this.props.handles).map(b=>b.point)}get centroid(){const {points:b}=this;return dl.getPolygonCentroid(b)}get rotatedPoints(){const {centroid:b,props:{handles:g,rotation:m}}=this;return m?Object.values(g).map(K=>Ed.rotWith(K.point,b,m)):this.points}},rr=ry;F(rr,"id","polyline");F(rr,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});id([Da],rr.prototype,"points",1);id([Da],rr.prototype,"centroid",1);id([Da],rr.prototype,
"rotatedPoints",1);var qy=class extends rr{constructor(b={}){super(b);F(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=qy.defaultProps.handles);return g});F(this,"getHandlesChange",(g,m)=>{var K=ld(g.handles,m);K=ld(K,{start:{point:re.toFixed(K.start.point)},end:{point:re.toFixed(K.end.point)}});if(!re.isEqual(K.start.point,K.end.point)){m={point:g.point,handles:Tq(K)};g=g.point;K=rf.translateBounds(rf.getBoundsFromPoints(Object.values(K).map(ia=>
ia.point)),m.point);var Z=re.sub([K.minX,K.minY],g);re.isEqual(Z,[0,0])||(Object.values(m.handles).forEach(ia=>{ia.point=re.toFixed(re.sub(ia.point,Z))}),m.point=re.toFixed(re.add(m.point,Z)));return m}});Se(this)}},ts=qy;F(ts,"id","line");F(ts,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Np=class extends Vn{constructor(b={}){super(b);F(this,"getRotatedBounds",()=>{const {rotatedVertices:g,
props:{point:m},offset:K}=this;return rf.translateBounds(rf.getBoundsFromPoints(g),Ed.add(m,K))});F(this,"hitTestPoint",g=>{const {vertices:m}=this;return si.pointInPolygon(Ed.add(g,this.props.point),m)});F(this,"hitTestLineSegment",(g,m)=>{const {vertices:K,props:{point:Z}}=this;return t(Ed.sub(g,Z),Ed.sub(m,Z),K).didIntersect});F(this,"hitTestBounds",g=>{const {rotatedBounds:m,offset:K,rotatedVertices:Z,props:{point:ia}}=this,ua=rf.translateBounds(g,Ed.neg(Ed.add(ia,K)));return rf.boundsContain(g,
m)||Z.every(Ia=>si.pointInBounds(Ia,ua))||0<I([ua.minX,ua.minY],[ua.width,ua.height],Z).length});F(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.sides&&3>g.sides&&(g.sides=3);return g});Se(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:b},vertices:g}=this;return g.map(m=>Ed.add(m,b))}get centroid(){const {vertices:b}=this;return dl.getPolygonCentroid(b)}get rotatedVertices(){const {vertices:b,centroid:g,props:{rotation:m}}=this;return m?b.map(K=>
Ed.rotWith(K,g,m)):b}get offset(){const {props:{size:[b,g]}}=this,m=rf.getBoundsCenter(rf.getBoundsFromPoints(this.vertices));return Ed.sub(Ed.div([b,g],2),m)}getVertices(b=0){const {ratio:g,sides:m,size:K}=this.props;return 3===m?dl.getTriangleVertices(K,b,g):dl.getPolygonVertices(K,m,b,g)}};F(Np,"id","polygon");F(Np,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});id([Da],Np.prototype,"vertices",1);id([Da],Np.prototype,"pageVertices",
1);id([Da],Np.prototype,"centroid",1);id([Da],Np.prototype,"rotatedVertices",1);id([Da],Np.prototype,"offset",1);var pv=class extends Vn{constructor(b={}){super(b);F(this,"canEdit",!0);F(this,"canFlip",!1);Se(this)}};F(pv,"id","text");F(pv,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var qr=class{constructor(){F(this,"_id");F(this,"_initial");F(this,"_states");F(this,"_isActive",!1);F(this,"cursor");F(this,"_disposables",[]);F(this,"children",
new Map([]));F(this,"registerStates",m=>{m.forEach(K=>this.children.set(K.id,new K(this,this)));return this});F(this,"deregisterStates",m=>{m.forEach(K=>{var Z;null==(Z=this.children.get(K.id))?void 0:Z.dispose();this.children.delete(K.id)});return this});F(this,"currentState",{});F(this,"transition",(m,K={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${m}.`);const Z=this.children.get(m),ia=this.currentState;if(!Z)throw Error(`Could not find a state named ${m}.`);
zb(()=>{this.currentState?(ia._events.onExit(rb(Wa({},K),{toId:m})),ia.dispose(),Z.registerKeyboardShortcuts(),this.setCurrentState(Z),this._events.onTransition(rb(Wa({},K),{fromId:ia.id,toId:m})),Z._events.onEnter(rb(Wa({},K),{fromId:ia.id}))):(this.currentState=Z,Z._events.onEnter(rb(Wa({},K),{fromId:""})))});return this});F(this,"isIn",m=>{m=m.split(".").reverse();let K=this;for(;0<m.length;){const Z=m.pop();if(!Z)return!0;if(K.currentState.id===Z){if(0===m.length)return!0;K=K.currentState}else break}return!1});
F(this,"isInAny",(...m)=>m.some(this.isIn));F(this,"forwardEvent",(m,...K)=>{var Z,ia;(null==(ia=null==(Z=this.currentState)?void 0:Z._events)?0:ia[m])&&zb(()=>{var ua;return null==(ua=this.currentState._events)?void 0:ua[m](...K)})});F(this,"_events",{onTransition:m=>{var K;null==(K=this.onTransition)?void 0:K.call(this,m)},onEnter:m=>{var K;this._isActive=!0;this.initial&&this.transition(this.initial,m);null==(K=this.onEnter)?void 0:K.call(this,m)},onExit:m=>{var K,Z,ia;this._isActive=!1;null==
(Z=null==(K=this.currentState)?void 0:K.onExit)?void 0:Z.call(K,{toId:"parent"});null==(ia=this.onExit)?void 0:ia.call(this,m)},onPointerDown:(m,K)=>{var Z;null==(Z=this.onPointerDown)?void 0:Z.call(this,m,K);this.forwardEvent("onPointerDown",m,K)},onPointerUp:(m,K)=>{var Z;null==(Z=this.onPointerUp)?void 0:Z.call(this,m,K);this.forwardEvent("onPointerUp",m,K)},onPointerMove:(m,K)=>{var Z;null==(Z=this.onPointerMove)?void 0:Z.call(this,m,K);this.forwardEvent("onPointerMove",m,K)},onPointerEnter:(m,
K)=>{var Z;null==(Z=this.onPointerEnter)?void 0:Z.call(this,m,K);this.forwardEvent("onPointerEnter",m,K)},onPointerLeave:(m,K)=>{var Z;null==(Z=this.onPointerLeave)?void 0:Z.call(this,m,K);this.forwardEvent("onPointerLeave",m,K)},onDoubleClick:(m,K)=>{var Z;null==(Z=this.onDoubleClick)?void 0:Z.call(this,m,K);this.forwardEvent("onDoubleClick",m,K)},onKeyDown:(m,K)=>{var Z;this._events.onModifierKey(m,K);null==(Z=this.onKeyDown)?void 0:Z.call(this,m,K);this.forwardEvent("onKeyDown",m,K)},onKeyUp:(m,
K)=>{var Z;this._events.onModifierKey(m,K);null==(Z=this.onKeyUp)?void 0:Z.call(this,m,K);this.forwardEvent("onKeyUp",m,K)},onPinchStart:(m,K)=>{var Z;null==(Z=this.onPinchStart)?void 0:Z.call(this,m,K);this.forwardEvent("onPinchStart",m,K)},onPinch:(m,K)=>{var Z;null==(Z=this.onPinch)?void 0:Z.call(this,m,K);this.forwardEvent("onPinch",m,K)},onPinchEnd:(m,K)=>{var Z;null==(Z=this.onPinchEnd)?void 0:Z.call(this,m,K);this.forwardEvent("onPinchEnd",m,K)},onModifierKey:(m,K)=>{switch(K.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(m,
K)}}});F(this,"onEnter");F(this,"onExit");F(this,"onTransition");F(this,"onPointerDown");F(this,"onPointerUp");F(this,"onPointerMove");F(this,"onPointerEnter");F(this,"onPointerLeave");F(this,"onDoubleClick");F(this,"onKeyDown");F(this,"onKeyUp");F(this,"onPinchStart");F(this,"onPinch");F(this,"onPinchEnd");const b=this.constructor.initial,g=this.constructor.states;this._id=this.constructor.id;this._initial=b;this._states=g}dispose(){this._disposables.forEach(b=>b());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(b=>
[b,...b.descendants])}setCurrentState(b){this.currentState=b}};F(qr,"id");F(qr,"shortcuts");id([tg],qr.prototype,"currentState",2);id([pg],qr.prototype,"setCurrentState",1);var nv=class extends qr{constructor(b,g){var m,K;super();F(this,"registerKeyboardShortcuts",()=>{var Z;null!=(Z=this._shortcuts)&&Z.length&&this._disposables.push(...this._shortcuts.map(({keys:ia,fn:ua})=>Xo.registerShortcut(ia,Ia=>{this.isActive&&ua(this.root,this,Ia)})))});F(this,"_root");F(this,"_parent");F(this,"_shortcuts",
[]);F(this,"children",new Map([]));F(this,"registerStates",Z=>{Z.forEach(ia=>this.children.set(ia.id,new ia(this,this._root)));return this});F(this,"deregisterStates",Z=>{Z.forEach(ia=>{var ua;null==(ua=this.children.get(ia.id))?void 0:ua.dispose();this.children.delete(ia.id)});return this});this._parent=b;this._root=g;this.states&&0<this.states.length&&(this.registerStates(this.states),b=null!=(m=this.initial)?m:this.states[0].id,m=this.children.get(b))&&(this.setCurrentState(m),null==(K=this.currentState)?
void 0:K._events.onEnter({fromId:"initial"}));this._shortcuts=this.constructor.shortcuts;Se(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};F(nv,"cursor");var Mp=class extends nv{constructor(){super(...arguments);F(this,"isLocked",!1);F(this,"previous");F(this,"onEnter",({fromId:b})=>{this.previous=b;this.cursor&&this.app.cursors.setCursor(this.cursor)});
F(this,"onTransition",b=>{({toId:b}=b);b=this.children.get(b);this.app.cursors.reset();b.cursor?this.app.cursors.setCursor(b.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},vi=class extends nv{get app(){return this.root}get tool(){return this.parent}},Yx=class extends vi{constructor(){super(...arguments);F(this,"cursor","crosshair");F(this,"creatingShape");F(this,"aspectRatio");F(this,"initialBounds",{});F(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g,
currentPoint:m}}=this.app;var {Shape:K}=this.tool;K=new K({id:li(),type:K.id,parentId:b.id,point:[...g],size:re.abs(re.sub(m,g))});this.initialBounds={minX:g[0],minY:g[1],maxX:g[0]+1,maxY:g[1]+1,width:1,height:1};K.canChangeAspectRatio||(K.aspectRatio?(this.aspectRatio=K.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=K;this.app.currentPage.addShapes(K);
this.app.setSelectedShapes([K])});F(this,"onPointerMove",b=>{if(!b.order){if(!this.creatingShape)throw Error("Expected a creating shape.");({initialBounds:b}=this);var {currentPoint:g,originPoint:m,shiftKey:K}=this.app.inputs;b=rf.getTransformedBoundingBox(b,"bottom_right_corner",re.sub(g,m),0,K||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio);this.creatingShape.update({point:[b.minX,b.minY],size:[b.width,b.height]})}});F(this,"onPointerUp",()=>{this.tool.transition("idle");
this.creatingShape&&this.app.setSelectedShapes([this.creatingShape]);this.app.persist()});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};F(Yx,"id","creating");var Zx=class extends vi{constructor(){super(...arguments);F(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});F(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",
{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};F(Zx,"id","idle");var $x=class extends vi{constructor(){super(...arguments);F(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Ed.dist(b,g)&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});F(this,"onPointerUp",()=>{this.tool.transition("idle")})}};
F($x,"id","pointing");var op=class extends Mp{constructor(){super(...arguments);F(this,"cursor","crosshair")}};F(op,"id","box");F(op,"states",[Zx,$x,Yx]);F(op,"initial","idle");var ay=class extends vi{constructor(){super(...arguments);F(this,"shape",{});F(this,"points",[[0,0,.5]]);F(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});F(this,"onEnter",()=>{var b;const {Shape:g,previousShape:m}=this.tool;var {originPoint:K}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&
m){this.shape=m;var {shape:Z}=this;var ia=Z.props.points[Z.props.points.length-1];const Ia=Ed.sub(K,Z.props.point).concat(null!=(b=K[2])?b:.5);this.points=[...Z.props.points,ia,ia];const Xa=Math.ceil(Ed.dist(ia,K)/16);for(let bb=0,pb=bb/(Xa-1);bb<Xa;bb++){b=this.points;K=b.push;Z=Ed.lrp(ia,Ia,pb);var ua=ia[2];K.call(b,Z.concat.call(Z,ua+(Ia[2]-ua)*pb))}this.addNextPoint(Ia)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(ia=K[2])?ia:.5]],this.shape=new g({id:li(),type:g.id,parentId:this.app.currentPage.id,
point:K.slice(0,2),points:this.points,isComplete:!1}),this.app.currentPage.addShapes(this.shape)});F(this,"onPointerMove",()=>{const {shape:b}=this,{currentPoint:g,previousPoint:m}=this.app.inputs;Ed.isEqual(m,g)||this.addNextPoint(Ed.sub(g,b.props.point).concat(g[2]))});F(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?si.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});
this.tool.previousShape=this.shape;this.tool.transition("idle");this.app.persist()});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(b){const {shape:g}=this,m=Ed.min(b,[0,0]);this.points.push(b);0>m[0]||0>m[1]?(this.points=this.points.map(K=>Ed.sub(K,m).concat(K[2])),g.update({point:Ed.add(g.props.point,m),points:this.points})):g.update({points:this.points})}};
F(ay,"id","creating");var by=class extends vi{constructor(){super(...arguments);F(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("creating")});F(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};F(by,"id","idle");var cy=class extends vi{constructor(){super(...arguments);F(this,"origin",[0,0]);F(this,"prevDelta",[0,0]);F(this,"onEnter",b=>{this.prevDelta=b.info.delta;
this.origin=b.info.point});F(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});F(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};F(cy,"id","pinching");var ss=class extends Mp{constructor(){super(...arguments);F(this,"cursor","crosshair");F(this,"simplify",!0);F(this,"simplifyTolerance",1);F(this,"previousShape");F(this,"onPinchStart",(b,g)=>{this.transition("pinching",{info:b,event:g})})}};F(ss,"id","draw");F(ss,"states",[by,ay,cy]);F(ss,"initial","idle");var dy=
class extends vi{constructor(){super(...arguments);F(this,"points",[[0,0,.5]]);F(this,"hitShapes",new Set);F(this,"onEnter",()=>{const {originPoint:b}=this.app.inputs;this.points=[b];this.hitShapes.clear()});F(this,"onPointerMove",()=>{const {currentPoint:b,previousPoint:g}=this.app.inputs;Ed.isEqual(g,b)||(this.points.push(b),this.app.shapesInViewport.filter(m=>m.hitTestLineSegment(g,b)).forEach(m=>this.hitShapes.add(m)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});F(this,"onPointerUp",
()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};F(dy,"id","erasing");var Rx=class extends vi{constructor(){super(...arguments);F(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});F(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?
void 0:m.call(g,...b)});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};F(Rx,"id","idle");var Sx=class extends vi{constructor(){super(...arguments);F(this,"onEnter",()=>{const {currentPoint:b}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(g=>g.hitTestPoint(b)))});F(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Ed.dist(b,g)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});F(this,
"onPointerUp",()=>{const b=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(b);this.tool.transition("idle")})}};F(Sx,"id","pointing");var Dt=class extends Mp{constructor(){super(...arguments);F(this,"cursor","crosshair")}};F(Dt,"id","erase");F(Dt,"states",[Rx,Sx,dy]);F(Dt,"initial","idle");var mv=class extends vi{constructor(){super(...arguments);F(this,"handle",{});F(this,"handleId","end");F(this,"currentShape",{});F(this,"initialShape",{});F(this,"bindableShapeIds",
[]);F(this,"startBindingShapeId");F(this,"newStartBindingId","");F(this,"draggedBindingId","");F(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,previousPoint:g,originPoint:m,currentPoint:K,modKey:Z,altKey:ia}}=this.app;var ua=this.app.getShapeById(this.initialShape.id),{handles:Ia}=this.initialShape,Xa=this.handleId,bb="start"===this.handleId?"end":"start";if(!re.isEqual(g,K)){var pb=re.sub(K,m);if(b){var sb=Ia[bb].point,Ub=re.add(Ia[Xa].point,pb),kc=re.angle(sb,Ub);sb=re.rotWith(Ub,sb,Zk.snapAngleToSegments(kc,
24)-kc);pb=re.add(pb,re.sub(sb,Ub))}pb=re.add(Ia[Xa].point,pb);Ia={[Xa]:rb(Wa({},Ia[Xa]),{point:re.toFixed(pb),bindingId:void 0})};var Mb=this.currentShape.getHandlesChange(this.initialShape,Ia);if(Mb){Ia=ld(ua.props,Mb);var sc={},lc;Xa=Ia.handles[Xa];bb=Ia.handles[bb];if(this.startBindingShapeId){var Rb;if(pb=this.app.getShapeById(this.startBindingShapeId)){Ub=pb.getCenter();sb=Ia.handles.end;var rc=re.add(Ia.handles.start.point,Ia.point);re.isEqual(rc,Ub)&&rc[1]++;kc=pb.hitTestPoint(K);rc=re.uni(re.sub(rc,
Ub));const Gc=void 0!==this.app.currentPage.bindings[this.newStartBindingId];Z||pb.hitTestPoint(re.add(Ia.point,sb.point))||(Rb=jc(ua.props,pb,"start",this.newStartBindingId,Ub,Ub,rc,kc));Rb&&!Gc?(sc[this.newStartBindingId]=Rb,Ia.handles.start.bindingId=Rb.id):!Rb&&Gc&&(console.log("removing start binding"),delete sc[this.newStartBindingId],Ia.handles.start.bindingId=void 0)}}if(!Z){Rb=re.add(bb.point,Ia.point);bb=re.add(Xa.point,Ia.point);Xa=re.uni(re.sub(bb,Rb));const Gc=re.add(Ia.point,Ia.handles.start.point),
Cc=re.add(Ia.point,Ia.handles.end.point);pb=this.bindableShapeIds.map(Uc=>this.app.getShapeById(Uc)).sort((Uc,ae)=>ae.nonce-Uc.nonce).filter(Uc=>![Gc,Cc].every(ae=>Uc.hitTestPoint(ae)));for(const Uc of pb)if(lc=jc(ua.props,Uc,this.handleId,this.draggedBindingId,bb,Rb,Xa,ia))break}lc?(sc[this.draggedBindingId]=lc,Ia=ld(Ia,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(ua=ua.props.handles[this.handleId].bindingId,void 0!==ua&&(delete sc[ua],Ia=ld(Ia,{handles:{[this.handleId]:{bindingId:void 0}}})));
Mb=this.currentShape.getHandlesChange(Ia,Ia.handles);zb(()=>{var Gc;if(Mb){this.currentShape.update(Mb);this.app.currentPage.updateBindings(sc);const Cc=Object.values(null!=(Gc=Mb.handles)?Gc:{}).map(Uc=>Uc.bindingId).map(Uc=>this.app.currentPage.bindings[Uc]).filter(Boolean).flatMap(Uc=>[Uc.toId,Uc.fromId].filter(Boolean));this.app.setBindingShapes(Cc)}})}}});F(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.persist()});
F(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};F(mv,"id","creating");var Tx=class extends mv{constructor(){super(...arguments);F(this,"onEnter",()=>{var b;this.app.history.pause();this.newStartBindingId=li();this.draggedBindingId=li();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:g}=this.tool;
const {originPoint:m}=this.app.inputs;g=new g(rb(Wa({},g.defaultProps),{id:li(),type:g.id,parentId:this.app.currentPage.id,point:m}));this.initialShape=le(g.props);this.currentShape=g;this.app.currentPage.addShapes(g);this.app.setSelectedShapes([g]);if(this.startBindingShapeId=null==(b=this.bindableShapeIds.map(K=>this.app.getShapeById(K)).filter(K=>si.pointInBounds(m,K.bounds))[0])?void 0:b.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};
F(Tx,"id","creating");var Ux=class extends vi{constructor(){super(...arguments);F(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});F(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});F(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);
break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b)}});F(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};F(Ux,"id","idle");var Vx=class extends vi{constructor(){super(...arguments);F(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Ed.dist(b,g)&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};
F(Vx,"id","pointing");var Et=class extends Mp{constructor(){super(...arguments);F(this,"cursor","crosshair")}};F(Et,"id","line");F(Et,"states",[Ux,Vx,Tx]);F(Et,"initial","idle");var Wx=class extends vi{constructor(){super(...arguments);F(this,"cursor","crosshair");F(this,"creatingShape");F(this,"aspectRatio");F(this,"initialBounds",{});F(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g}}=this.app,{Shape:m}=this.tool,K=new m({id:li(),type:m.id,parentId:b.id,point:[...g],text:"",size:[16,
32],isSizeLocked:!0});this.creatingShape=K;zb(()=>{this.app.currentPage.addShapes(K);const {bounds:Z}=K;K.update({point:re.sub(g,[Z.width/2,Z.height/2])});this.app.transition("select");this.app.setSelectedShapes([K]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};F(Wx,"id","creating");var Xx=class extends vi{constructor(){super(...arguments);F(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("creating")});F(this,"onPinchStart",(...b)=>
{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};F(Xx,"id","idle");var Ft=class extends Mp{constructor(){super(...arguments);F(this,"cursor","crosshair")}};F(Ft,"id","box");F(Ft,"states",[Xx,Wx]);F(Ft,"initial","idle");var vC=td(wb()),wC=class extends vC.default{constructor(){super(...arguments);F(this,"toBBox",b=>b.rotatedBounds)}},
ey=class extends vi{constructor(){super(...arguments);F(this,"initialSelectedIds",[]);F(this,"initialSelectedShapes",[]);F(this,"tree",new wC);F(this,"onEnter",()=>{const {selectedShapes:b,currentPage:g,selectedIds:m}=this.app;this.initialSelectedIds=Array.from(m.values());this.initialSelectedShapes=Array.from(b.values());this.tree.load(g.shapes)});F(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear()});F(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,ctrlKey:g,originPoint:m,currentPoint:K}}=
this.app,Z=rf.getBoundsFromPoints([K,m],0);this.app.setBrush(Z);const ia=this.tree.search(Z).filter(ua=>g?rf.boundsContain(Z,ua.rotatedBounds):ua.hitTestBounds(Z));b?ia.every(ua=>this.initialSelectedShapes.includes(ua))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(ua=>!ia.includes(ua))):this.app.setSelectedShapes(Array.from((new Set([...this.initialSelectedShapes,...ia])).values())):this.app.setSelectedShapes(ia)});F(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});
F(this,"handleModifierKey",(b,g)=>{switch(g.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};F(ey,"id","brushing");var fy=class extends vi{constructor(){super(...arguments);F(this,"onEnter",b=>{const {selectedIds:g,selectedShapes:m,inputs:{shiftKey:K}}=this.app;"shape"!==b.type||m.has(b.shape)||(K?this.app.setSelectedShapes([...Array.from(g.values()),b.shape.id]):this.app.setSelectedShapes([b.shape]))});F(this,"onPointerDown",
()=>{this.tool.transition("idle")})}};F(fy,"id","contextMenu");var gy=class extends vi{constructor(){super(...arguments);F(this,"onEnter",b=>{"pinching"===b.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});F(this,"onExit",()=>{this.app.setHoveredShape(void 0)});F(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",
b)}});F(this,"onPointerDown",(b,g)=>{const {selectedShapes:m,inputs:{ctrlKey:K}}=this.app;if(2===g.button)this.tool.transition("contextMenu",b);else if(K)this.tool.transition("pointingCanvas");else switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",b)}break;case "shape":if(m.has(b.shape))this.tool.transition("pointingSelectedShape",
b);else{const {selectionBounds:Z,inputs:ia}=this.app;Z&&si.pointInBounds(ia.currentPoint,Z)?this.tool.transition("pointingShapeBehindBounds",b):this.tool.transition("pointingShape",b)}break;case "handle":this.tool.transition("pointingHandle",b);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",Wa(Wa({},g),b))}});F(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});F(this,"onPinchStart",
(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});F(this,"onDoubleClick",b=>{if(!b.order&&1===this.app.selectedShapesArray.length){var g=this.app.selectedShapesArray[0];if(g.canEdit&&si.pointInBounds(this.app.inputs.currentPoint,g.bounds))switch(b.type){case "shape":this.tool.transition("editingShape",b);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:g})}}});F(this,"onKeyDown",(b,g)=>{({selectedShapesArray:b}=this.app);
switch(g.key){case "Enter":1===b.length&&b[0].canEdit&&this.tool.transition("editingShape",{type:"shape",shape:b[0],order:0});break;case "Escape":b.length&&this.app.setSelectedShapes([])}})}};F(gy,"id","idle");var hy=class extends vi{constructor(){super(...arguments);F(this,"onEnter",b=>{const {selectedIds:g,inputs:{shiftKey:m}}=this.app;m?this.app.setSelectedShapes([...Array.from(g.values()),b.shape.id]):this.app.setSelectedShapes([b.shape])});F(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=
this.app.inputs;5<Ed.dist(b,g)&&this.tool.transition("translating")});F(this,"onPointerUp",()=>{this.tool.transition("idle")});F(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};F(hy,"id","pointingShape");var iy=class extends vi{constructor(){super(...arguments);F(this,"cursor","move");F(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Ed.dist(b,g)&&this.tool.transition("translating")});F(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);
this.tool.transition("idle")});F(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};F(iy,"id","pointingBoundsBackground");var jy=class extends vi{constructor(){super(...arguments);F(this,"onEnter",()=>{var b;const {shiftKey:g}=this.app.inputs;g||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(b=window.getSelection())?void 0:b.removeAllRanges())});F(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Ed.dist(b,g)&&this.tool.transition("brushing")});
F(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});F(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});F(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};F(jy,"id","pointingCanvas");var ky=class extends vi{constructor(){super(...arguments);F(this,"cursor","move");F(this,"isCloning",!1);F(this,"didClone",!1);F(this,"initialPoints",{});F(this,"initialShapePoints",
{});F(this,"initialClonePoints",{});F(this,"clones",[]);F(this,"onEnter",()=>{var b;this.app.history.pause();const {selectedShapesArray:g,inputs:m}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(g.map(({id:K,props:{point:Z}})=>[K,Z.slice()]));document.querySelectorAll("input,textarea").forEach(K=>K.blur());null==(b=document.getSelection())?void 0:b.empty();m.altKey?this.startCloning():this.moveSelectedShapesToPointer()});F(this,"onExit",()=>{this.app.history.resume();this.app.persist();
this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});F(this,"onPointerMove",()=>{this.moveSelectedShapesToPointer()});F(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});F(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Alt":this.startCloning();break;case "Escape":this.app.selectedShapes.forEach(m=>
{m.update({point:this.initialPoints[m.id]})}),this.tool.transition("idle")}});F(this,"onKeyUp",(b,g)=>{switch(g.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:m,selectedShapes:K}=this.app;m.removeShapes(...K);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {selectedShapes:b,inputs:{shiftKey:g,originPoint:m,
currentPoint:K}}=this.app,{initialPoints:Z}=this,ia=Ed.sub(K,m);g&&(Math.abs(ia[0])<Math.abs(ia[1])?ia[0]=0:ia[1]=0);zb(()=>{b.forEach(ua=>ua.update({point:Ed.add(Z[ua.id],ia)}))})}startCloning(){this.didClone||(this.clones=this.app.selectedShapesArray.map(b=>{const g=this.app.getShapeClass(b.type);if(!g)throw Error("Could not find that shape class.");return new g(rb(Wa({},b.serialized),{id:li(),type:b.type,point:this.initialPoints[b.id],rotation:b.props.rotation}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:b,
props:{point:g}})=>[b,g.slice()])),this.didClone=!0);this.app.selectedShapes.forEach(b=>{b.update({point:this.initialPoints[b.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0;this.moveSelectedShapesToPointer()}};F(ky,"id","translating");var ly=class extends vi{constructor(){super(...arguments);F(this,"pointedSelectedShape");F(this,"onEnter",
b=>{this.pointedSelectedShape=b.shape});F(this,"onExit",()=>{this.pointedSelectedShape=void 0});F(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Ed.dist(b,g)&&this.tool.transition("translating")});F(this,"onPointerUp",()=>{const {shiftKey:b,currentPoint:g}=this.app.inputs;var {selectedShapesArray:m}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(b)({selectedIds:m}=this.app),m=Array.from(m.values()),m.splice(m.indexOf(this.pointedSelectedShape.id),
1),this.app.setSelectedShapes(m);else{if(1===m.length&&this.pointedSelectedShape.canEdit&&this.pointedSelectedShape instanceof Vn&&si.pointInBounds(g,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});F(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};F(ly,"id","pointingSelectedShape");var my=class extends vi{constructor(){super(...arguments);
F(this,"info",{});F(this,"onEnter",b=>{this.info=b;this.updateCursor()});F(this,"onExit",()=>{this.app.cursors.reset()});F(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Ed.dist(b,g)&&this.tool.transition("resizing",this.info)});F(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});F(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(To[this.info.handle],this.app.selectionBounds.rotation)}};
F(my,"id","pointingResizeHandle");var ny=class extends vi{constructor(){super(...arguments);F(this,"isSingle",!1);F(this,"handle","bottom_right_corner");F(this,"snapshots",{});F(this,"initialCommonBounds",{});F(this,"selectionRotation",0);F(this,"resizeType","corner");F(this,"onEnter",b=>{var g,m;const {history:K,selectedShapesArray:Z,selectionBounds:ia}=this.app;if(!ia)throw Error("Expected a selected bounds.");this.handle=b.handle;this.resizeType="left_edge"===b.handle||"right_edge"===b.handle?
"horizontal-edge":"top_edge"===b.handle||"bottom_edge"===b.handle?"vertical-edge":"corner";this.app.cursors.setCursor(ny.CURSORS[b.handle],null==(g=this.app.selectionBounds)?void 0:g.rotation);K.pause();const ua=rf.getBoundsFromPoints(Z.map(Ia=>rf.getBoundsCenter(Ia.bounds)));this.selectionRotation=(this.isSingle=1===Z.length)?null!=(m=Z[0].props.rotation)?m:0:0;this.initialCommonBounds=Wa({},ia);this.snapshots=Object.fromEntries(Z.map(Ia=>{const Xa=Wa({},Ia.bounds),[bb,pb]=rf.getBoundsCenter(Xa);
return[Ia.id,{props:Ia.serialized,bounds:Xa,transformOrigin:[(bb-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(pb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(bb-ua.minX)/ua.width,(pb-ua.minY)/ua.height],isAspectRatioLocked:Ia.props.isAspectRatioLocked||!(Ia.canChangeAspectRatio&&!Ia.props.rotation)}]}));Z.forEach(Ia=>{var Xa;null==(Xa=Ia.onResizeStart)?void 0:Xa.call(Ia,{isSingle:this.isSingle})})});F(this,"onExit",()=>{this.app.cursors.reset();
this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});F(this,"onPointerMove",()=>{const {inputs:{altKey:b,shiftKey:g,ctrlKey:m,originPoint:K,currentPoint:Z}}=this.app,{handle:ia,snapshots:ua,initialCommonBounds:Ia}=this;let Xa=Ed.sub(Z,K);b&&(Xa=Ed.mul(Xa,2));const bb=this.app.selectedShapes.values().next().value;let pb=rf.getTransformedBoundingBox(Ia,ia,Xa,this.selectionRotation,g||this.isSingle&&(m?!("clipping"in bb.props):!bb.canChangeAspectRatio||bb.props.isAspectRatioLocked));
b&&(pb=Wa(Wa({},pb),rf.centerBounds(pb,rf.getBoundsCenter(Ia))));const {scaleX:sb,scaleY:Ub}=pb;this.app.selectedShapes.forEach(kc=>{var Mb,sc;const {props:lc,bounds:Rb,transformOrigin:rc}=ua[kc.id];let Gc=rf.getRelativeTransformedBoundingBox(pb,Ia,Rb,0>sb,0>Ub);if(kc.canResize.some(ae=>ae)||kc.props.isSizeLocked||!this.isSingle){var Cc=[sb,Ub],Uc=null!=(Mb=lc.rotation)?Mb:0;Mb=rf.getBoundsCenter(Gc);kc.canFlip||(Cc=Ed.abs(Cc));kc.canScale||(Cc=null!=(sc=lc.scale)?sc:[1,1]);if(Uc&&0>sb&&0<=Ub||0>
Ub&&0<=sb)Uc*=-1;kc.onResize(lc,{center:Mb,rotation:Uc,scale:Cc,bounds:Gc,type:ia,clip:m,transformOrigin:rc})}});this.updateCursor(sb,Ub)});F(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(m=>{m.update(Wa({},this.snapshots[m.id].props))}),this.tool.transition("idle")}})}updateCursor(b,g){var m,K,Z,ia;const ua=0>b&&0<=g;b=0>g&&0<=b;switch(this.handle){case "top_left_corner":case "bottom_right_corner":ua||
b?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(m=this.app.selectionBounds)?void 0:m.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(K=this.app.selectionBounds)?void 0:K.rotation);break;case "top_right_corner":case "bottom_left_corner":ua||b?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(Z=this.app.selectionBounds)?void 0:Z.rotation):"nwse-resize"===this.app.cursors.cursor&&
this.app.cursors.setCursor("nesw-resize",null==(ia=this.app.selectionBounds)?void 0:ia.rotation)}}},ov=ny;F(ov,"id","resizing");F(ov,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var oy=class extends vi{constructor(){super(...arguments);F(this,"cursor","rotate");F(this,"handle","");F(this,"onEnter",b=>{this.app.history.pause();
this.handle=b.handle;this.updateCursor()});F(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Ed.dist(b,g)&&this.tool.transition("rotating",{handle:this.handle})});F(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});F(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(To[this.handle],this.app.selectionRotation)}};F(oy,"id","pointingRotateHandle");
var py=class extends vi{constructor(){super(...arguments);F(this,"info",{});F(this,"onEnter",b=>{this.info=b});F(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Ed.dist(b,g)&&this.tool.transition("translating")});F(this,"onPointerUp",()=>{const {selectedIds:b,inputs:{shiftKey:g}}=this.app;g?this.app.setSelectedShapes([...Array.from(b.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);this.tool.transition("idle")});F(this,"onPinchStart",
(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};F(py,"id","pointingShapeBehindBounds");var lv=class extends vi{constructor(){super(...arguments);F(this,"cursor","rotate");F(this,"snapshot",{});F(this,"initialCommonCenter",[0,0]);F(this,"initialCommonBounds",{});F(this,"initialAngle",0);F(this,"initialSelectionRotation",0);F(this,"handle","");F(this,"onEnter",b=>{const {history:g,selectedShapesArray:m,selectionBounds:K}=this.app;if(!K)throw Error("Expected selected bounds.");g.pause();
this.handle=b.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=Wa({},K);this.initialCommonCenter=rf.getBoundsCenter(K);this.initialAngle=Ed.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(m.map(Z=>[Z.id,{point:[...Z.props.point],center:[...Z.center],rotation:Z.props.rotation,handles:"handles"in Z?Tq(Z.handles):void 0}]));this.updateCursor()});F(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});F(this,
"onPointerMove",()=>{const {selectedShapes:b,inputs:{shiftKey:g,currentPoint:m}}=this.app,{snapshot:K,initialCommonCenter:Z,initialAngle:ia,initialSelectionRotation:ua}=this;let Ia=Ed.angle(Z,m)-ia;g&&(Ia=Zk.snapAngleToSegments(Ia,24));b.forEach(bb=>{var pb=K[bb.id];let sb=0;if(g){var {rotation:Ub=0}=pb;sb=Zk.snapAngleToSegments(Ub,24)-Ub}const kc=Ed.sub(pb.center,pb.point);Ub=Ed.rotWith(pb.center,Z,Ia);if("handles"in bb){pb=pb.handles;const Mb=pb.map(lc=>Ed.rotWith(lc.point,kc,Ia)),sc=rf.getCommonTopLeft(Mb);
bb.update({point:Ed.add(sc,Ed.sub(Ub,kc)),handles:pb.map((lc,Rb)=>rb(Wa({},lc),{point:Ed.sub(Mb[Rb],sc)}))})}else bb.update({point:Ed.sub(Ub,kc),rotation:Zk.clampRadians((pb.rotation||0)+Ia+sb)})});const Xa=Zk.clampRadians(ua+Ia);this.app.setSelectionRotation(g?Zk.snapAngleToSegments(Xa,24):Xa);this.updateCursor()});F(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(m=>
{m.update(this.snapshot[m.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(To[this.handle],this.app.selectionRotation)}};F(lv,"id","rotating");var Hx=class extends vi{constructor(){super(...arguments);F(this,"onPinch",(b,g)=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});F(this,"onPinchEnd",()=>{this.tool.transition("idle")});F(this,"onPointerDown",()=>{this.tool.transition("idle")})}};F(Hx,"id","pinching");var Ix=class extends mv{constructor(){super(...arguments);
F(this,"cursor","grabbing");F(this,"onEnter",b=>{this.app.history.pause();this.newStartBindingId=li();this.draggedBindingId=li();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=b.id;this.currentShape=b.shape;this.initialShape=le(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};F(Ix,"id","translatingHandle");var Jx=class extends vi{constructor(){super(...arguments);F(this,"cursor","grabbing");F(this,"info",{});F(this,"onEnter",b=>{this.info=
b});F(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Ed.dist(b,g)&&this.tool.transition("translatingHandle",this.info)});F(this,"onPointerUp",()=>{this.tool.transition("idle")});F(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};F(Jx,"id","pointingHandle");var Kx=class extends vi{constructor(){super(...arguments);F(this,"handle");F(this,"onEnter",b=>{var g;this.app.cursors.setCursor(To[b.handle],null!=(g=this.app.selectionBounds.rotation)?
g:0);this.handle=b.handle});F(this,"onExit",()=>{this.app.cursors.reset()});F(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});F(this,"onPointerDown",b=>{switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",b);break;default:this.tool.transition("pointingResizeHandle",
b)}}});F(this,"onPointerLeave",()=>{this.tool.transition("idle")});F(this,"onDoubleClick",b=>{var g;if(!b.order&&1===this.app.selectedShapes.size){var m=this.app.selectedShapes.values().next().value;if(m.canEdit)switch(b.type){case "shape":this.tool.transition("editingShape",b);break;case "selection":null==(g=m.onResetBounds)?void 0:g.call(m,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:m})}else m.onResetBounds({asset:m.props.assetId?
this.app.assets[m.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle")}})}};F(Kx,"id","hoveringSelectionHandle");var Lx=class extends vi{constructor(){super(...arguments);F(this,"editingShape",{});F(this,"onEnter",b=>{this.editingShape=b.shape;this.app.setEditingShape(b.shape)});F(this,"onExit",()=>{var b;if(this.editingShape&&"text"in this.editingShape.props){const g=this.editingShape.props.text.trim();""===g&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):
(this.editingShape.onResetBounds(),this.editingShape.update({text:g}))}this.app.persist();this.app.setEditingShape();null==(b=document.querySelector(".tl-canvas"))?void 0:b.focus()});F(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});F(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.editingShape)break;this.tool.transition("idle",b);break;case "canvas":b.order||this.tool.transition("idle",b)}});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":zb(()=>
{g.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};F(Lx,"id","editingShape");var Mx=class extends vi{constructor(){super(...arguments);F(this,"minimapZoom",1);F(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});F(this,"getCameraPoint",b=>{const g=document.querySelector(".tl-preview-minimap svg");var m=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(g&&m){const K=g.getBoundingClientRect();this.minimapRect.height=
K.height;this.minimapRect.width=K.width;this.minimapRect.minX=K.left;this.minimapRect.minY=K.top;this.minimapRect.maxX=K.right;this.minimapRect.maxY=K.bottom;this.minimapZoom=+g.dataset.commonBoundWidth/this.minimapRect.width;b=Ed.sub(b,[this.minimapRect.minX,this.minimapRect.minY]);m=m.getBoundingClientRect();m=Ed.mul(Ed.sub(b,[m.left+m.width/2,m.top+m.height/2]),this.minimapZoom);return Ed.sub(this.app.viewport.camera.point,m)}});F(this,"onEnter",b=>{(b=this.getCameraPoint([b.clientX,b.clientY]))?
this.app.viewport.update({point:b}):this.tool.transition("idle")});F(this,"onPointerMove",(b,g)=>{(b=this.getCameraPoint([g.clientX,g.clientY]))&&this.app.viewport.update({point:b})});F(this,"onPointerUp",()=>{this.tool.transition("idle")})}};F(Mx,"id","pointingMinimap");var or=class extends Mp{constructor(){super(...arguments);F(this,"returnTo","");F(this,"onEnter",b=>{this.returnTo=null==b?void 0:b.returnTo})}};F(or,"id","select");F(or,"initial","idle");F(or,"shortcut",["1"]);F(or,"states",[gy,
ey,fy,jy,hy,py,ly,iy,Kx,my,oy,Mx,Jx,Ix,ky,ov,lv,lv,Hx,Lx]);var Nx=class extends vi{constructor(){super(...arguments);F(this,"cursor","grabbing");F(this,"originalScreenPoint",[]);F(this,"originalCameraPoint",[]);F(this,"prevState","idle");F(this,"onEnter",b=>{this.prevState=null==b?void 0:b.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});F(this,"onPointerMove",(b,g)=>{b=re.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);
this.app.viewport.update({point:re.sub(this.originalCameraPoint,re.div(b,this.app.viewport.camera.zoom))})});F(this,"onPointerUp",()=>{var b;this.tool.transition(null!=(b=this.prevState)?b:"idle")})}};F(Nx,"id","panning");var Ox=class extends vi{constructor(){super(...arguments);F(this,"onEnter",b=>{this.parent.prevTool&&b.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});F(this,"onPointerDown",
(b,g)=>{b.order||this.tool.transition("panning")})}};F(Ox,"id","idle");var Px=class extends vi{constructor(){super(...arguments);F(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning",{prevState:"idleHold"})});F(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};F(Px,"id","idleHold");var Qx=class extends vi{constructor(){super(...arguments);F(this,"origin",[0,0]);F(this,"prevDelta",[0,0]);F(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});
F(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});F(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};F(Qx,"id","pinching");var pr=class extends Mp{constructor(){super(...arguments);F(this,"cursor","grab");F(this,"prevTool",null);F(this,"onEnter",b=>{this.prevTool=null==b?void 0:b.prevTool});F(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});F(this,"onPinchStart",(b,g)=>{this.transition("pinching",{info:b,event:g})})}};F(pr,"id",
"move");F(pr,"shortcut",["2"]);F(pr,"states",[Ox,Px,Nx,Qx]);F(pr,"initial","idle");var vm=class{constructor(b,g={}){F(this,"lastShapesNounces",null);F(this,"app");F(this,"id");F(this,"name");F(this,"shapes",[]);F(this,"bindings",{});F(this,"nonce",0);F(this,"bump",()=>{this.nonce++});F(this,"bringForward",Ia=>{const Xa=this.parseShapesArg(Ia);Xa.sort((bb,pb)=>this.shapes.indexOf(pb)-this.shapes.indexOf(bb)).map(bb=>this.shapes.indexOf(bb)).forEach(bb=>{if(bb!==this.shapes.length-1&&!Xa.includes(this.shapes[bb+
1])){var pb=this.shapes[bb];this.shapes[bb]=this.shapes[bb+1];this.shapes[bb+1]=pb}});this.app.persist();return this});F(this,"sendBackward",Ia=>{const Xa=this.parseShapesArg(Ia);Xa.sort((bb,pb)=>this.shapes.indexOf(bb)-this.shapes.indexOf(pb)).map(bb=>this.shapes.indexOf(bb)).forEach(bb=>{if(0!==bb&&!Xa.includes(this.shapes[bb-1])){var pb=this.shapes[bb];this.shapes[bb]=this.shapes[bb-1];this.shapes[bb-1]=pb}});this.app.persist();return this});F(this,"bringToFront",Ia=>{const Xa=this.parseShapesArg(Ia);
this.shapes=this.shapes.filter(bb=>!Xa.includes(bb)).concat(Xa);this.app.persist();return this});F(this,"sendToBack",Ia=>{const Xa=this.parseShapesArg(Ia);this.shapes=Xa.concat(this.shapes.filter(bb=>!Xa.includes(bb)));this.app.persist();return this});F(this,"flip",(Ia,Xa)=>{Ia=this.parseShapesArg(Ia);const bb=rf.getCommonBounds(Ia.map(pb=>pb.bounds));Ia.forEach(pb=>{var sb;const Ub=rf.getRelativeTransformedBoundingBox(bb,bb,pb.bounds,"horizontal"===Xa,"vertical"===Xa);if(pb.serialized)pb.onResize(pb.serialized,
{bounds:Ub,center:rf.getBoundsCenter(Ub),rotation:null!=(sb=pb.props.rotation)?sb:-0,type:"top_left_corner",scale:pb.canFlip&&pb.props.scale?"horizontal"===Xa?[-pb.props.scale[0],1]:[1,-pb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});F(this,"getShapeById",Ia=>this.shapes.find(Xa=>Xa.id===Ia));F(this,"cleanup",Ia=>{Ia=Hb(this.bindings,Ia);const Xa=new Set;let bb=!1,pb=!1;const sb=Tq(this.bindings);Ia.forEach(Ub=>{var kc;if(this.bindings[Ub.id]){var Mb=
this.getShapeById(Ub.toId),sc=this.getShapeById(Ub.fromId);Mb&&sc?Xa.has(sc.id)||(Ub=this.updateArrowBindings(sc),Xa.add(sc.id),Ub&&(sc=Wa(Wa({},sc.props),Ub),bb=!0,null==(kc=this.getShapeById(sc.id))?void 0:kc.update(sc,!1,!0))):(delete sb[Ub.id],pb=!0)}});Object.keys(sb).forEach(Ub=>{const kc=this.bindings[Ub];0===this.shapes.filter(Mb=>Mb.id===kc.fromId||Mb.id===kc.toId).length&&(delete sb[Ub],pb=!0)});pb&&this.update({bindings:sb});(bb||pb)&&this.app.persist(!0)});F(this,"updateArrowBindings",
Ia=>{var Xa,bb,pb,sb={start:Tq(Ia.props.handles.start),end:Tq(Ia.props.handles.end)},Ub={isBound:!1,handle:Ia.props.handles.start,point:re.add(Ia.props.handles.start.point,Ia.props.point)},kc={isBound:!1,handle:Ia.props.handles.end,point:re.add(Ia.props.handles.end.point,Ia.props.point)};if(Ia.props.handles.start.bindingId){var Mb=void 0!==(null==(Xa=Ia.props.decorations)?void 0:Xa.start);Xa=Ia.props.handles.start;var sc=this.bindings[Ia.props.handles.start.bindingId],lc=this.getShapeById(null==sc?
void 0:sc.toId);if(lc){Ub=lc.getBounds();var Rb=lc.getExpandedBounds(),rc=rf.expandBounds(Ub,Mb?sc.distance:1);const {minX:Gc,minY:Cc,width:Uc,height:ae}=Rb,Gd=re.add([Gc,Cc],re.mulV([Uc,ae],re.rotWith(sc.point,[.5,.5],lc.props.rotation||0)));Ub={isBound:!0,hasDecoration:Mb,binding:sc,handle:Xa,point:Gd,target:lc,bounds:Ub,expandedBounds:Rb,intersectBounds:rc,center:lc.getCenter()}}}if(Ia.props.handles.end.bindingId&&(Mb=void 0!==(null==(bb=Ia.props.decorations)?void 0:bb.end),bb=Ia.props.handles.end,
Xa=this.bindings[Ia.props.handles.end.bindingId],sc=this.getShapeById(null==Xa?void 0:Xa.toId))){kc=sc.getBounds();lc=sc.getExpandedBounds();Rb=Mb?rf.expandBounds(kc,Xa.distance):kc;const {minX:Gc,minY:Cc,width:Uc,height:ae}=lc;rc=re.add([Gc,Cc],re.mulV([Uc,ae],re.rotWith(Xa.point,[.5,.5],sc.props.rotation||0)));kc={isBound:!0,hasDecoration:Mb,binding:Xa,handle:bb,point:rc,target:sc,bounds:kc,expandedBounds:lc,intersectBounds:Rb,center:sc.getCenter()}}for(const Gc of["end","start"]){bb="start"===
Gc?Ub:kc;const Cc="start"===Gc?kc:Ub;if(bb.isBound)if(bb.binding.distance){if(Mb=re.uni(re.sub(bb.point,Cc.point)),Xa=B(Cc.point,Mb,bb.intersectBounds,bb.target.props.rotation).filter(Uc=>Uc.didIntersect).map(Uc=>Uc.points[0]).sort((Uc,ae)=>re.dist(Uc,Cc.point)-re.dist(ae,Cc.point)),Xa[0])if(sc=void 0,Cc.isBound&&(sc=B(Cc.point,Mb,Cc.intersectBounds,Cc.target.props.rotation).filter(Uc=>Uc.didIntersect).map(Uc=>Uc.points[0]).sort((Uc,ae)=>re.dist(Uc,Cc.point)-re.dist(ae,Cc.point))[0]),Cc.isBound&&
(2>Xa.length||sc&&Xa[0]&&10>Math.ceil(re.dist(Xa[0],sc))||rf.boundsContain(bb.expandedBounds,Cc.expandedBounds)||rf.boundsCollide(bb.expandedBounds,Cc.expandedBounds)))Mb=re.uni(re.sub(Cc.point,bb.point)),Xa=B(bb.point,Mb,bb.bounds,bb.target.props.rotation).filter(Uc=>Uc.didIntersect).map(Uc=>Uc.points[0]),Xa[0]&&(sb[Gc].point=re.toFixed(re.sub(Xa[0],Ia.props.point)),sb["start"===Gc?"end":"start"].point=re.toFixed(re.add(re.sub(Xa[0],Ia.props.point),re.mul(Mb,Math.min(re.dist(Xa[0],Cc.point),10*(rf.boundsContain(Cc.bounds,
bb.intersectBounds)?-1:1))))));else{if(!Cc.isBound&&(Xa[0]&&10>re.dist(Xa[0],Cc.point)||si.pointInBounds(Cc.point,bb.intersectBounds)))return sb=re.uni(re.sub(bb.center,Cc.point)),null==(pb=Ia.getHandlesChange)?void 0:pb.call(Ia,Ia.props,{[Gc]:rb(Wa({},Ia.props.handles[Gc]),{point:re.toFixed(re.add(re.sub(Cc.point,Ia.props.point),re.mul(sb,10)))})});Xa[0]&&(sb[Gc].point=re.toFixed(re.sub(Xa[0],Ia.props.point)))}}else sb[Gc].point=re.sub(bb.point,Ia.props.point)}return Ia.getHandlesChange(Ia.props,
sb)});const {id:m,name:K,shapes:Z=[],bindings:ia={},nonce:ua}=g;this.id=m;this.name=K;this.bindings=Object.assign({},ia);this.app=b;this.nonce=ua||0;this.addShapes(...Z);Se(this);ad(()=>{const Ia=0<this.shapes.length?Object.fromEntries(this.shapes.map(Xa=>[Xa.id,Xa.nonce])):null;if(this.lastShapesNounces&&Ia){const Xa=this.lastShapesNounces,bb=[...(new Set([...Object.keys(Ia),...Object.keys(Xa)]))].filter(pb=>Xa[pb]!==Ia[pb]);requestAnimationFrame(()=>{this.cleanup(bb)})}Ia&&(this.lastShapesNounces=
Ia)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(b=>b.serialized).filter(b=>!!b).map(b=>le(b)),bindings:Tq(this.bindings),nonce:this.nonce}}update(b){Object.assign(this,b);return this}updateBindings(b){Object.assign(this.bindings,b);return this}addShapes(...b){if(0!==b.length)return b="getBounds"in b[0]?b:b.map(g=>new (this.app.getShapeClass(g.type))(g)),this.shapes.push(...b),this.bump(),b}parseShapesArg(b){return"string"===typeof b[0]?this.shapes.filter(g=>b.includes(g.id)):
b}removeShapes(...b){const g=this.parseShapesArg(b);this.shapes=this.shapes.filter(m=>!g.includes(m));return g}getBindableShapes(){return this.shapes.filter(b=>b.canBind).sort((b,g)=>g.nonce-b.nonce).map(b=>b.id)}};id([tg],vm.prototype,"id",2);id([tg],vm.prototype,"name",2);id([tg],vm.prototype,"shapes",2);id([tg],vm.prototype,"bindings",2);id([Da],vm.prototype,"serialized",1);id([tg],vm.prototype,"nonce",2);id([pg],vm.prototype,"bump",2);id([pg],vm.prototype,"update",1);id([pg],vm.prototype,"updateBindings",
1);id([pg],vm.prototype,"addShapes",1);id([pg],vm.prototype,"removeShapes",1);id([pg],vm.prototype,"bringForward",2);id([pg],vm.prototype,"sendBackward",2);id([pg],vm.prototype,"bringToFront",2);id([pg],vm.prototype,"sendToBack",2);id([pg],vm.prototype,"cleanup",2);var Sk=class{constructor(){F(this,"shiftKey",!1);F(this,"ctrlKey",!1);F(this,"modKey",!1);F(this,"altKey",!1);F(this,"spaceKey",!1);F(this,"isPinching",!1);F(this,"currentScreenPoint",[0,0]);F(this,"currentPoint",[0,0]);F(this,"previousScreenPoint",
[0,0]);F(this,"previousPoint",[0,0]);F(this,"originScreenPoint",[0,0]);F(this,"originPoint",[0,0]);F(this,"pointerIds",new Set);F(this,"state","idle");F(this,"containerOffset",[0,0]);F(this,"onPointerDown",(b,g)=>{this.pointerIds.add(g.pointerId);this.updateModifiers(g);this.originScreenPoint=this.currentScreenPoint;this.originPoint=b;this.state="pointing"});F(this,"onPointerMove",(b,g)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(g),this.previousPoint=
this.currentPoint,this.currentPoint=b)});F(this,"onPointerUp",(b,g)=>{this.pointerIds.clear();this.updateModifiers(g);this.state="idle"});F(this,"onKeyDown",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=!0}});F(this,"onKeyUp",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=!1}});F(this,"onPinchStart",(b,g)=>{this.updateModifiers(g);this.state="pinching"});F(this,"onPinch",(b,g)=>{"pinching"===this.state&&this.updateModifiers(g)});F(this,"onPinchEnd",(b,g)=>{"pinching"===
this.state&&(this.updateModifiers(g),this.state="idle")});Se(this)}updateContainerOffset(b){Object.assign(this.containerOffset,b)}updateModifiers(b){b.isPrimary&&("clientX"in b&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=re.sub([b.clientX,b.clientY],this.containerOffset)),"shiftKey"in b&&(this.shiftKey=b.shiftKey,this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.modKey=ji()?b.metaKey:b.ctrlKey))}};id([tg],Sk.prototype,"shiftKey",2);id([tg],Sk.prototype,"ctrlKey",2);id([tg],
Sk.prototype,"modKey",2);id([tg],Sk.prototype,"altKey",2);id([tg],Sk.prototype,"spaceKey",2);id([tg],Sk.prototype,"isPinching",2);id([tg],Sk.prototype,"currentScreenPoint",2);id([tg],Sk.prototype,"currentPoint",2);id([tg],Sk.prototype,"previousScreenPoint",2);id([tg],Sk.prototype,"previousPoint",2);id([tg],Sk.prototype,"originScreenPoint",2);id([tg],Sk.prototype,"originPoint",2);id([tg],Sk.prototype,"state",2);id([tg],Sk.prototype,"containerOffset",2);id([pg],Sk.prototype,"updateContainerOffset",
1);id([pg],Sk.prototype,"updateModifiers",1);id([pg],Sk.prototype,"onPointerDown",2);id([pg],Sk.prototype,"onPointerMove",2);id([pg],Sk.prototype,"onPointerUp",2);id([pg],Sk.prototype,"onKeyDown",2);id([pg],Sk.prototype,"onKeyUp",2);id([pg],Sk.prototype,"onPinchStart",2);id([pg],Sk.prototype,"onPinch",2);id([pg],Sk.prototype,"onPinchEnd",2);var Bt=class{constructor(){F(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});F(this,"camera",{point:[0,0],zoom:1});F(this,"updateBounds",
b=>{this.bounds=b;return this});F(this,"panCamera",b=>this.update({point:Ed.sub(this.camera.point,Ed.div(b,this.camera.zoom))}));F(this,"update",({point:b,zoom:g})=>{void 0!==b&&(this.camera.point=b);void 0!==g&&(this.camera.zoom=g);return this});F(this,"getPagePoint",b=>{const {camera:g,bounds:m}=this;return Ed.sub(Ed.div(Ed.sub(b,[m.minX,m.minY]),g.zoom),g.point)});F(this,"getScreenPoint",b=>{const {camera:g}=this;return Ed.mul(Ed.add(b,g.point),g.zoom)});F(this,"onZoom",(b,g)=>this.pinchZoom(b,
[0,0],g));F(this,"pinchZoom",(b,g,m)=>{var {camera:K}=this;g=Ed.sub(K.point,Ed.div(g,K.zoom));m=Ed.clamp(m,Bt.minZoom,Bt.maxZoom);K=Ed.sub(Ed.div(b,K.zoom),g);b=Ed.sub(Ed.div(b,m),g);return this.update({point:Ed.toFixed(Ed.add(g,Ed.sub(b,K))),zoom:m})});F(this,"setZoom",b=>{const {bounds:g}=this;this.onZoom([g.width/2,g.height/2],b)});F(this,"zoomIn",()=>{const {camera:b}=this;this.setZoom(b.zoom/.8)});F(this,"zoomOut",()=>{const {camera:b}=this;this.setZoom(.8*b.zoom)});F(this,"resetZoom",()=>{const {bounds:b,
camera:{zoom:g,point:m}}=this;var K=[b.width/2,b.height/2];const Z=Ed.sub(Ed.div(K,g),m);K=Ed.sub(Ed.div(K,1),m);return this.update({point:Ed.toFixed(Ed.add(m,Ed.sub(K,Z))),zoom:1})});F(this,"zoomToBounds",({width:b,height:g,minX:m,minY:K})=>{const {bounds:Z,camera:ia}=this;let ua=Math.min((Z.width-100)/b,(Z.height-100)/g);ua=Math.min(1,Math.max(Bt.minZoom,ia.zoom===ua||1>ia.zoom?Math.min(1,ua):ua));return this.update({point:Ed.add([-m,-K],[(Z.width-b*ua)/2/ua,(Z.height-g*ua)/2/ua]),zoom:ua})});Se(this)}get currentView(){const {bounds:b,
camera:{point:g,zoom:m}}=this,K=b.width/m,Z=b.height/m;return{minX:-g[0],minY:-g[1],maxX:K-g[0],maxY:Z-g[1],width:K,height:Z}}},$o=Bt;F($o,"minZoom",.1);F($o,"maxZoom",4);id([tg],$o.prototype,"bounds",2);id([tg],$o.prototype,"camera",2);id([pg],$o.prototype,"updateBounds",2);id([pg],$o.prototype,"update",2);id([Da],$o.prototype,"currentView",1);var tC=class{constructor(b){F(this,"app");F(this,"editShape",g=>{this.app.transition("select").selectedTool.transition("editingShape",{shape:g});return this});
F(this,"hoverShape",g=>{this.app.setHoveredShape(g);return this});F(this,"createShapes",(...g)=>{this.app.createShapes(g);return this});F(this,"updateShapes",(...g)=>{this.app.updateShapes(g);return this});F(this,"deleteShapes",(...g)=>{this.app.deleteShapes(g.length?g:this.app.selectedShapesArray);return this});F(this,"selectShapes",(...g)=>{this.app.setSelectedShapes(g);return this});F(this,"deselectShapes",(...g)=>{const m="string"===typeof g[0]?g:g.map(K=>K.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(K=>
!m.includes(K.id)));return this});F(this,"flipHorizontal",(...g)=>{this.app.flipHorizontal(g);return this});F(this,"flipVertical",(...g)=>{this.app.flipVertical(g);return this});F(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes);return this});F(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});F(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});F(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});F(this,"resetZoom",()=>{this.app.viewport.resetZoom();
return this});F(this,"zoomToFit",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=rf.getCommonBounds(g.map(m=>m.bounds));this.app.viewport.zoomToBounds(g);return this});F(this,"cameraToCenter",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=rf.getCommonBounds(g.map(m=>m.bounds));this.app.viewport.update({point:re.add(re.neg(rf.getBoundsCenter(g)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});F(this,"zoomToSelection",
()=>{const {selectionBounds:g}=this.app;if(!g)return this;this.app.viewport.zoomToBounds(g);return this});F(this,"resetZoomToCursor",()=>{this.app.viewport.update({zoom:1,point:re.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});F(this,"toggleGrid",()=>{const {settings:g}=this.app;g.update({showGrid:!g.showGrid});return this});F(this,"save",()=>{this.app.save();return this});F(this,"saveAs",()=>{this.app.save();return this});F(this,"undo",()=>{this.app.undo();return this});
F(this,"redo",()=>{this.app.redo();return this});F(this,"createNewLineBinding",(g,m)=>this.app.createNewLineBinding(g,m));F(this,"cloneShapes",({shapes:g,assets:m,bindings:K,point:Z=[0,0]})=>{const ia=rf.getCommonBounds(g.map(Xa=>{var bb,pb,sb,Ub,kc,Mb,sc,lc,Rb,rc,Gc,Cc,Uc,ae,Gd,qe;return{minX:null!=(pb=null==(bb=Xa.point)?void 0:bb[0])?pb:Z[0],minY:null!=(Ub=null==(sb=Xa.point)?void 0:sb[1])?Ub:Z[1],width:null!=(Mb=null==(kc=Xa.size)?void 0:kc[0])?Mb:4,height:null!=(lc=null==(sc=Xa.size)?void 0:
sc[1])?lc:4,maxX:(null!=(rc=null==(Rb=Xa.point)?void 0:Rb[0])?rc:Z[0])+(null!=(Cc=null==(Gc=Xa.size)?void 0:Gc[0])?Cc:4),maxY:(null!=(ae=null==(Uc=Xa.point)?void 0:Uc[1])?ae:Z[1])+(null!=(qe=null==(Gd=Xa.size)?void 0:Gd[1])?qe:4)}})),ua=g.map(Xa=>rb(Wa({},Xa),{id:li(),point:[Z[0]+Xa.point[0]-ia.minX,Z[1]+Xa.point[1]-ia.minY]})),Ia=[];ua.flatMap(Xa=>{var bb;return Object.values(null!=(bb=Xa.handles)?bb:{})}).forEach(Xa=>{if(Xa.bindingId){var bb=K[Xa.bindingId];if(bb){var pb=g.findIndex(Ub=>Ub.id===
bb.fromId);const sb=g.findIndex(Ub=>Ub.id===bb.toId);bb&&-1!==pb&&-1!==sb?(pb=rb(Wa({},bb),{id:li(),fromId:ua[pb].id,toId:ua[sb].id}),Ia.push(pb),Xa.bindingId=pb.id):Xa.bindingId=void 0}else console.warn("binding not found",Xa.bindingId)}});m=m.filter(Xa=>ua.some(bb=>bb.assetId===Xa.id));return{shapes:ua,assets:m,bindings:Ia}});F(this,"getClonedShapesFromTldrString",(g,m)=>{try{{var K;const bb=null==(K=g.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:K[1];if(bb){try{var Z=JSON.parse(bb)}catch(pb){Z=
null}var ia=Z}else ia=void 0}g=ia;if(!g)return null;const {shapes:ua,bindings:Ia,assets:Xa}=g;return this.cloneShapes({shapes:ua,bindings:Ia,assets:Xa,point:m})}catch(ua){console.log(ua)}return null});F(this,"cloneShapesIntoCurrentPage",g=>{(g=this.cloneShapes(g))&&this.addClonedShapes(g);return this});F(this,"addClonedShapes",g=>{const {shapes:m,assets:K,bindings:Z}=g;0<K.length&&this.app.createAssets(K);0<m.length&&this.app.createShapes(m);this.app.currentPage.updateBindings(Object.fromEntries(Z.map(ia=>
[ia.id,ia])));this.app.selectedTool.transition("idle");return this});F(this,"addClonedShapesFromTldrString",(g,m)=>{(g=this.getClonedShapesFromTldrString(g,m))&&this.addClonedShapes(g);return this});this.app=b}},nr=class{constructor(){F(this,"cursor","default");F(this,"rotation",0);F(this,"reset",()=>{this.cursor="default"});F(this,"setCursor",(b,g=0)=>{if(b!==this.cursor||g!==this.rotation)this.cursor=b,this.rotation=g});F(this,"setRotation",b=>{b!==this.rotation&&(this.rotation=b)});Se(this)}};
id([tg],nr.prototype,"cursor",2);id([tg],nr.prototype,"rotation",2);id([pg],nr.prototype,"reset",2);id([pg],nr.prototype,"setCursor",2);id([pg],nr.prototype,"setRotation",2);var uC=(b,g)=>{b=Gg(b.pages[0],"nonce");g=Gg(g.pages[0],"nonce");return!(0,By.default)(b,g)},Co=class{constructor(b){F(this,"app");F(this,"stack",[]);F(this,"pointer",0);F(this,"isPaused",!0);F(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});F(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});F(this,"reset",()=>{this.stack=
[this.app.serialized];this.pointer=0;this.resume();this.app.notify("persist",null)});F(this,"persist",(g=!1)=>{if(!this.isPaused&&!this.creating){var {serialized:m}=this.app;0<this.stack.length&&!uC(this.stack[this.pointer],m)||(g?this.stack[this.pointer]=m:(this.pointer<this.stack.length&&(this.stack=this.stack.slice(0,this.pointer+1)),this.stack.push(m),this.pointer=this.stack.length-1),this.app.pages.forEach(K=>K.bump()),this.app.notify("persist",null))}});F(this,"setPointer",g=>{this.pointer=
g;this.deserialize(this.stack[this.pointer]);this.app.notify("persist",null)});F(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.canUndo&&this.setPointer(this.pointer-1)});F(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.canRedo&&this.setPointer(this.pointer+1)});F(this,"deserialize",g=>{zb(()=>{var m,{pages:K}=g;const Z=this.isPaused;this.pause();const ia=[...this.app.selectedIds];try{const ua=new Map(this.app.pages),Ia=[];
for(const Xa of K){const bb=ua.get(Xa.id);if(void 0!==bb){const pb=new Map(bb.shapes.map(sb=>[sb.props.id,sb]));K=[];for(const sb of Xa.shapes){const Ub=pb.get(sb.id);if(void 0!==Ub)Ub.nonce!==sb.nonce&&(Ub.update(sb,!0),Ub.nonce=sb.nonce,Ub.setLastSerialized(sb)),pb.delete(sb.id);else{const kc=new (this.app.getShapeClass(sb.type))(sb);K.push(kc)}}0<pb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&bb.removeShapes(...pb.values());0<K.length&&bb.addShapes(...K);ua.delete(Xa.id);bb.updateBindings(Xa.bindings);
bb.nonce=null!=(m=Xa.nonce)?m:0}else{const {id:pb,name:sb,shapes:Ub,bindings:kc,nonce:Mb}=Xa;Ia.push(new vm(this.app,{id:pb,name:sb,nonce:Mb,bindings:kc,shapes:Ub.map(sc=>new (this.app.getShapeClass(sc.type))(sc))}))}}0<Ia.length&&this.app.addPages(Ia);0<ua.size&&this.app.removePages(Array.from(ua.values()));this.app.setSelectedShapes(ia).setErasingShapes([])}catch(ua){console.warn(ua)}Z||this.resume()})});this.app=b;Se(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}get canUndo(){return 0<
this.pointer}get canRedo(){return this.pointer<this.stack.length-1}};id([tg],Co.prototype,"stack",2);id([tg],Co.prototype,"pointer",2);id([Da],Co.prototype,"canUndo",1);id([Da],Co.prototype,"canRedo",1);id([pg],Co.prototype,"reset",2);id([pg],Co.prototype,"persist",2);id([pg],Co.prototype,"setPointer",2);id([pg],Co.prototype,"undo",2);id([pg],Co.prototype,"redo",2);id([pg],Co.prototype,"deserialize",2);var At=class{constructor(){F(this,"mode","light");F(this,"showGrid",!0);Se(this)}update(b){Object.assign(this,
b)}};id([tg],At.prototype,"mode",2);id([tg],At.prototype,"showGrid",2);id([pg],At.prototype,"update",1);var lh=class extends qr{constructor(b,g,m){var K,Z;super();F(this,"keybindingRegistered",!1);F(this,"uuid",li());F(this,"api");F(this,"inputs",new Sk);F(this,"cursors",new nr);F(this,"viewport",new $o);F(this,"settings",new At);F(this,"Tools",[]);F(this,"history",new Co(this));F(this,"persist",this.history.persist);F(this,"undo",this.history.undo);F(this,"redo",this.history.redo);F(this,"saving",
!1);F(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});F(this,"load",()=>{this.notify("load",null);return this});F(this,"save",()=>{this.notify("save",null);return this});F(this,"saveAs",()=>{this.notify("saveAs",null);return this});F(this,"pages",new Map([["page",new vm(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));F(this,"getPageById",ia=>{const ua=this.pages.get(ia);if(!ua)throw Error(`Could not find a page named ${ia}.`);
return ua});F(this,"getShapeById",(ia,ua=this.currentPage.id)=>{var Ia;return null==(Ia=this.getPageById(ua))?void 0:Ia.shapes.find(Xa=>Xa.id===ia)});F(this,"createShapes",ia=>{(ia=this.currentPage.addShapes(...ia))&&this.notify("create-shapes",ia);this.persist();return this});F(this,"updateShapes",ia=>{ia.forEach(ua=>{var Ia;return null==(Ia=this.getShapeById(ua.id))?void 0:Ia.update(ua)});this.persist();return this});F(this,"deleteShapes",ia=>{if(0===ia.length)return this;let ua;ua="string"===typeof ia[0]?
new Set(ia):new Set(ia.map(Ia=>Ia.id));this.setSelectedShapes(this.selectedShapesArray.filter(Ia=>!ua.has(Ia.id)));(ia=this.currentPage.removeShapes(...ia))&&this.notify("delete-shapes",ia);this.persist();return this});F(this,"bringForward",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.bringForward(ia);return this});F(this,"sendBackward",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.sendBackward(ia);return this});F(this,"sendToBack",(ia=this.selectedShapesArray)=>{0<
ia.length&&this.currentPage.sendToBack(ia);return this});F(this,"bringToFront",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.bringToFront(ia);return this});F(this,"flipHorizontal",(ia=this.selectedShapesArray)=>{this.currentPage.flip(ia,"horizontal");return this});F(this,"flipVertical",(ia=this.selectedShapesArray)=>{this.currentPage.flip(ia,"vertical");return this});F(this,"align",(ia,ua=this.selectedShapesArray)=>{if(2>ua.length)return this;const Ia=ua.map(Ub=>{const kc=Ub.getBounds();
return{id:Ub.id,point:[kc.minX,kc.minY],bounds:kc}}),Xa=rf.getCommonBounds(Ia.map(({bounds:Ub})=>Ub)),bb=Xa.minX+Xa.width/2,pb=Xa.minY+Xa.height/2,sb=Object.fromEntries(Ia.map(({id:Ub,point:kc,bounds:Mb})=>[Ub,{prev:kc,next:{top:[kc[0],Xa.minY],centerVertical:[kc[0],pb-Mb.height/2],bottom:[kc[0],Xa.maxY-Mb.height],left:[Xa.minX,kc[1]],centerHorizontal:[bb-Mb.width/2,kc[1]],right:[Xa.maxX-Mb.width,kc[1]]}[ia]}]));ua.forEach(Ub=>{sb[Ub.id]&&Ub.update({point:sb[Ub.id].next})});this.persist();return this});
F(this,"distribute",(ia,ua=this.selectedShapesArray)=>{if(2>ua.length)return this;const Ia=Object.fromEntries(rf.getDistributions(ua,ia).map(Xa=>[Xa.id,Xa]));ua.forEach(Xa=>{Ia[Xa.id]&&Xa.update({point:Ia[Xa.id].next})});this.persist();return this});F(this,"packIntoRectangle",(ia=this.selectedShapesArray)=>{if(2>ia.length)return this;const ua=Object.fromEntries(rf.getPackedDistributions(ia).map(Ia=>[Ia.id,Ia]));ia.forEach(Ia=>{ua[Ia.id]&&Ia.update({point:ua[Ia.id].next})});this.persist();return this});
F(this,"assets",{});F(this,"removeUnusedAssets",()=>{const ia=this.getCleanUpAssets();Object.keys(this.assets).forEach(ua=>{ia.some(Ia=>Ia.id===ua)||delete this.assets[ua]});this.persist();return this});F(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){var ia=JSON.stringify({shapes:this.selectedShapesArray.map(ua=>ua.serialized),assets:this.getCleanUpAssets().filter(ua=>this.selectedShapesArray.some(Ia=>Ia.props.assetId===ua.id)),bindings:le(this.currentPage.bindings)});
ia=encodeURIComponent(`<whiteboard-tldr>${ia}</whiteboard-tldr>`);navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([ia],{type:"text/html"})})])}});F(this,"paste",(ia,ua)=>{var Ia;this.editingShape||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!ua,dataTransfer:null!=(Ia=null==ia?void 0:ia.clipboardData)?Ia:void 0})});F(this,"cut",()=>{this.copy();this.api.deleteShapes()});F(this,"drop",(ia,ua)=>{this.notify("drop",{dataTransfer:ia,point:ua?this.viewport.getPagePoint(ua):
rf.getBoundsCenter(this.viewport.currentView)})});F(this,"selectTool",this.transition);F(this,"editingId");F(this,"setEditingShape",ia=>{this.editingId="string"===typeof ia?ia:null==ia?void 0:ia.id;return this});F(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});F(this,"hoveredId");F(this,"setHoveredShape",ia=>{this.hoveredId="string"===typeof ia?ia:null==ia?void 0:ia.id;return this});F(this,"selectedIds",new Set);F(this,"selectedShapes",new Set);
F(this,"selectionRotation",0);F(this,"setSelectedShapes",ia=>{var ua;const {selectedIds:Ia,selectedShapes:Xa}=this;Ia.clear();Xa.clear();ia[0]&&"string"===typeof ia[0]?ia.forEach(pb=>Ia.add(pb)):ia.forEach(pb=>Ia.add(pb.id));const bb=this.currentPage.shapes.filter(pb=>Ia.has(pb.id));bb.forEach(pb=>Xa.add(pb));this.selectionRotation=1===bb.length?null!=(ua=bb[0].props.rotation)?ua:0:0;0===ia.length&&this.setEditingShape();return this});F(this,"erasingIds",new Set);F(this,"erasingShapes",new Set);F(this,
"setErasingShapes",ia=>{const {erasingIds:ua,erasingShapes:Ia}=this;ua.clear();Ia.clear();ia[0]&&"string"===typeof ia[0]?ia.forEach(Xa=>ua.add(Xa)):ia.forEach(Xa=>ua.add(Xa.id));this.currentPage.shapes.filter(Xa=>ua.has(Xa.id)).forEach(Xa=>Ia.add(Xa));return this});F(this,"bindingIds");F(this,"setBindingShapes",ia=>{this.bindingIds=ia;return this});F(this,"clearBindingShape",()=>this.setBindingShapes());F(this,"createNewLineBinding",(ia,ua)=>{ia="string"===typeof ia?this.getShapeById(ia):ia;ua="string"===
typeof ua?this.getShapeById(ua):ua;if((null==ia?0:ia.canBind)&&(null==ua?0:ua.canBind)&&(ua=Qc(ia,ua))){const [Ia,Xa]=ua;this.createShapes([Ia]);this.currentPage.updateBindings(Object.fromEntries(Xa.map(bb=>[bb.id,bb])));this.persist();return!0}return!1});F(this,"brush");F(this,"setBrush",ia=>{this.brush=ia;return this});F(this,"setCamera",(ia,ua)=>{this.viewport.update({point:ia,zoom:ua});return this});F(this,"getPagePoint",ia=>{const {camera:ua}=this.viewport;return Ed.sub(Ed.div(ia,ua.zoom),ua.point)});
F(this,"getScreenPoint",ia=>{const {camera:ua}=this.viewport;return Ed.mul(Ed.add(ia,ua.point),ua.zoom)});F(this,"Shapes",new Map);F(this,"registerShapes",ia=>{ia.forEach(ua=>this.Shapes.set(ua.id,ua))});F(this,"deregisterShapes",ia=>{ia.forEach(ua=>this.Shapes.delete(ua.id))});F(this,"getShapeClass",ia=>{if(!ia)throw Error("No shape type provided.");const ua=this.Shapes.get(ia);if(!ua)throw Error(`Could not find shape class for ${ia}`);return ua});F(this,"wrapUpdate",ia=>{zb(()=>{const ua=!this.history.isPaused;
ua&&this.history.pause();ia();ua&&(this.history.resume(),this.persist())})});F(this,"subscriptions",new Set([]));F(this,"subscribe",(ia,ua)=>{if(void 0===ua)throw Error("Callback is required.");const Ia={event:ia,callback:ua};this.subscriptions.add(Ia);return()=>this.unsubscribe(Ia)});F(this,"unsubscribe",ia=>{this.subscriptions.delete(ia);return this});F(this,"notify",(ia,ua)=>{this.subscriptions.forEach(Ia=>{Ia.event===ia&&Ia.callback(this,ua)});return this});F(this,"onTransition",()=>{});F(this,
"onPointerDown",(ia,ua)=>{if(!this.editingShape&&1===ua.button&&!this.isIn("move"))this.temporaryTransitionToMove(ua);else if(2===ua.button)this.transition("select");else if("clientX"in ua)this.inputs.onPointerDown([...this.viewport.getPagePoint([ua.clientX,ua.clientY]),.5],ua)});F(this,"onPointerUp",(ia,ua)=>{if(!this.editingShape&&1===ua.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),ua.stopPropagation(),ua.preventDefault();else if("clientX"in ua)this.inputs.onPointerUp([...this.viewport.getPagePoint([ua.clientX,
ua.clientY]),.5],ua)});F(this,"onPointerMove",(ia,ua)=>{if("clientX"in ua)this.inputs.onPointerMove([...this.viewport.getPagePoint([ua.clientX,ua.clientY]),.5],ua)});F(this,"onKeyDown",(ia,ua)=>{if(this.editingShape||" "!==ua.key||this.isIn("move"))this.inputs.onKeyDown(ua);else this.temporaryTransitionToMove(ua)});F(this,"onKeyUp",(ia,ua)=>{if(!this.editingShape&&" "===ua.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),ua.stopPropagation(),ua.preventDefault();else this.inputs.onKeyUp(ua)});
F(this,"onPinchStart",(ia,ua)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(ia.point),.5],ua)});F(this,"onPinch",(ia,ua)=>{this.inputs.onPinch([...this.viewport.getPagePoint(ia.point),.5],ua)});F(this,"onPinchEnd",(ia,ua)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(ia.point),.5],ua)});this._states=[or,pr];this.history.pause();if(this.states&&0<this.states.length){this.registerStates(this.states);const ia=null!=(K=this.initial)?K:this.states[0].id;if(K=this.children.get(ia))this.currentState=
K,null==(Z=this.currentState)?void 0:Z._events.onEnter({fromId:"initial"})}g&&this.registerShapes(g);m&&this.registerTools(m);this.history.resume();b&&this.history.deserialize(b);this.api=new tC(this);Se(this);this.notify("mount",null)}dispose(){super.dispose();this.keybindingRegistered=!1;return this}initKeyboardShortcuts(){if(!this.keybindingRegistered){var b=this.constructor.shortcuts||[],g=Array.from(this.children.values()).filter(m=>m.constructor.shortcut).map(m=>({keys:m.constructor.shortcut,
fn:(K,Z,ia)=>{this.transition(m.id);ia.stopPropagation()}}));this._disposables.push(...[{keys:"shift+0",fn:()=>this.api.resetZoom()},{keys:"shift+1",fn:()=>this.api.zoomToFit()},{keys:"mod+shift+1",fn:()=>this.api.zoomToSelection()},{keys:"mod+-",fn:()=>this.api.zoomOut()},{keys:"mod+\x3d",fn:()=>this.api.zoomIn()},{keys:"mod+z",fn:()=>this.undo()},{keys:"mod+x",fn:()=>this.cut()},{keys:"mod+shift+z",fn:()=>this.redo()},{keys:"[",fn:()=>this.sendBackward()},{keys:"shift+[",fn:()=>this.sendToBack()},
{keys:"]",fn:()=>this.bringForward()},{keys:"shift+]",fn:()=>this.bringToFront()},{keys:"mod+a",fn:()=>{const {selectedTool:m}=this;"select"!==m.id&&this.selectTool("select");this.api.selectAll()}},{keys:"mod+shift+s",fn:()=>{this.saveAs();this.notify("saveAs",null)}},{keys:"mod+shift+v",fn:(m,K,Z)=>{this.editingShape||(Z.preventDefault(),this.paste(void 0,!0))}},{keys:["del","backspace"],fn:()=>{this.api.deleteShapes();this.selectedTool.transition("idle")}},...b,...g].map(({keys:m,fn:K})=>Xo.registerShortcut(m,
Z=>{K(this,this,Z)})));this.keybindingRegistered=!0}}loadDocumentModel(b){this.history.deserialize(b);b.assets&&0<b.assets.length&&this.addAssets(b.assets);return this}get serialized(){return{selectedIds:Array.from(this.selectedIds.values()),pages:Array.from(this.pages.values()).map(b=>b.serialized),assets:this.getCleanUpAssets()}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(b){b.forEach(g=>this.pages.set(g.id,g));
this.persist();return this}removePages(b){b.forEach(g=>this.pages.delete(g.id));this.persist();return this}addAssets(b){b.forEach(g=>this.assets[g.id]=g);this.persist();return this}removeAssets(b){"string"===typeof b[0]?b.forEach(g=>delete this.assets[g]):b.forEach(g=>delete this.assets[g.id]);this.persist();return this}getCleanUpAssets(){const b=new Set;this.pages.forEach(g=>g.shapes.forEach(m=>{m.props.assetId&&this.assets[m.props.assetId]&&b.add(this.assets[m.props.assetId])}));return Array.from(b)}createAssets(b){this.addAssets(b);
this.notify("create-assets",{assets:b});this.persist();return this}get selectedTool(){return this.currentState}registerTools(b){this.Tools=b;return this.registerStates(b)}get editingShape(){const {editingId:b,currentPage:g}=this;return b?g.shapes.find(m=>m.id===b):void 0}get hoveredShape(){const {hoveredId:b,currentPage:g}=this;return b?g.shapes.find(m=>m.id===b):void 0}get selectedShapesArray(){const {selectedShapes:b,selectedTool:g}=this;return"select"!==g.id?[]:Array.from(b.values())}setSelectionRotation(b){this.selectionRotation=
b}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var b;const g=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(K=>{var Z;return Object.values(null!=(Z=K.props.handles)?Z:{})}).flatMap(K=>K.bindingId).filter(Ch).flatMap(K=>{var Z,ia;return[null==(Z=this.currentPage.bindings[K])?void 0:Z.fromId,null==(ia=this.currentPage.bindings[K])?void 0:ia.toId]}).filter(Ch):[],m=[...(null!=(b=this.bindingIds)?b:[]),...g];return m?this.currentPage.shapes.filter(K=>
null==m?void 0:m.includes(K.id)):void 0}get currentGrid(){const {zoom:b}=this.viewport.camera;return.15>b?128:1>b?32:8}get shapes(){const {currentPage:{shapes:b}}=this;return Array.from(b.values())}get shapesInViewport(){const {selectedShapes:b,currentPage:g,viewport:{currentView:m}}=this;return g.shapes.filter(K=>!K.canUnmount||b.has(K)||rf.boundsContain(m,K.rotatedBounds)||rf.boundsCollide(m,K.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:b,viewport:{currentView:g}}=this;if(b&&
!rf.boundsContain(g,b)&&!rf.boundsCollide(g,b)){var m=rf.getBoundsCenter(b);return Ed.clampV([(m[0]-g.minX-g.width/2)/g.width,(m[1]-g.minY-g.height/2)/g.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:b}=this;if(0!==b.length)return 1===b.length?rb(Wa({},b[0].bounds),{rotation:b[0].props.rotation}):rf.getCommonBounds(this.selectedShapesArray.map(g=>g.rotatedBounds))}get showSelection(){var b;const {selectedShapesArray:g}=this;return this.isIn("select")&&!this.isInAny("select.translating",
"select.pinching","select.rotating")&&(1===g.length&&!(null==(b=g[0])?0:b.hideSelection)||1<g.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(b=>b.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle",
"select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<b.length&&!b.every(g=>g.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<b.length&&!b.some(g=>g.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape",
"select.pointingRotateHandle","select.pointingResizeHandle")&&1===b.length&&!b.every(g=>g.hideResizeHandles)}temporaryTransitionToMove(b){b.stopPropagation();b.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};F(lh,"id","app");F(lh,"initial","select");id([Da],lh.prototype,"serialized",1);id([tg],lh.prototype,"pages",2);id([Da],lh.prototype,"currentPageId",1);id([Da],lh.prototype,"currentPage",1);id([pg],lh.prototype,"addPages",1);id([pg],
lh.prototype,"removePages",1);id([pg],lh.prototype,"createShapes",2);id([pg],lh.prototype,"updateShapes",2);id([pg],lh.prototype,"deleteShapes",2);id([tg],lh.prototype,"assets",2);id([pg],lh.prototype,"addAssets",1);id([pg],lh.prototype,"removeAssets",1);id([pg],lh.prototype,"removeUnusedAssets",2);id([Da],lh.prototype,"selectedTool",1);id([tg],lh.prototype,"editingId",2);id([Da],lh.prototype,"editingShape",1);id([pg],lh.prototype,"setEditingShape",2);id([tg],lh.prototype,"hoveredId",2);id([Da],lh.prototype,
"hoveredShape",1);id([pg],lh.prototype,"setHoveredShape",2);id([tg],lh.prototype,"selectedIds",2);id([tg],lh.prototype,"selectedShapes",2);id([tg],lh.prototype,"selectionRotation",2);id([Da],lh.prototype,"selectedShapesArray",1);id([pg],lh.prototype,"setSelectedShapes",2);id([pg],lh.prototype,"setSelectionRotation",1);id([tg],lh.prototype,"erasingIds",2);id([tg],lh.prototype,"erasingShapes",2);id([Da],lh.prototype,"erasingShapesArray",1);id([pg],lh.prototype,"setErasingShapes",2);id([tg],lh.prototype,
"bindingIds",2);id([Da],lh.prototype,"bindingShapes",1);id([pg],lh.prototype,"setBindingShapes",2);id([pg],lh.prototype,"createNewLineBinding",2);id([tg],lh.prototype,"brush",2);id([pg],lh.prototype,"setBrush",2);id([pg],lh.prototype,"setCamera",2);id([Da],lh.prototype,"currentGrid",1);id([Da],lh.prototype,"shapes",1);id([Da],lh.prototype,"shapesInViewport",1);id([Da],lh.prototype,"selectionDirectionHint",1);id([Da],lh.prototype,"selectionBounds",1);id([Da],lh.prototype,"showSelection",1);id([Da],
lh.prototype,"showSelectionDetail",1);id([Da],lh.prototype,"showSelectionRotation",1);id([Da],lh.prototype,"showContextBar",1);id([Da],lh.prototype,"showRotateHandles",1);id([Da],lh.prototype,"showResizeHandles",1);var QC=td(bc()),By=td(vc()),SC=td(Vc()),Tq=QC.default,Wn=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const m=b.ownerDocument,
K=m.activeElement;K!==b&&b.focus();m.execCommand("insertText",!1,g)||Wn.insertTextFirefox(b,g);K===m.body?b.blur():K instanceof HTMLElement&&K!==b&&K.focus()}static set(b,g){b.select();Wn.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:m}=b;return b.value.slice(g?g:void 0,m?m:void 0)}static wrapSelection(b,g,m){const {selectionStart:K,selectionEnd:Z}=b,ia=Wn.getSelection(b);Wn.insert(b,g+ia+(null!=m?m:g));b.selectionStart=(K||0)+g.length;b.selectionEnd=(Z||0)+g.length}static replace(b,
g,m){let K=0;b.value.replace(g,(...Z)=>{const ia=K+Z[Z.length-2],ua=Z[0].length;b.selectionStart=ia;b.selectionEnd=ia+ua;Z="string"===typeof m?m:m(...Z);Wn.insert(b,Z);b.selectionStart=ia;K+=Z.length-ua;return Z})}static findLineEnd(b,g){const m=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(m)?g:m+1}static indent(b){var g;const {selectionStart:m,selectionEnd:K,value:Z}=b;var ia=Z.slice(m,K);if((ia=null==(g=/\n/g.exec(ia))?void 0:g.length)&&0<ia){g=Z.lastIndexOf("\n",m-1)+1;var ua=b.value.slice(g,
K-1);ia=ua.replace(/^|\n/g,`$&${Wn.INDENT}`);ua=ia.length-ua.length;b.setSelectionRange(g,K-1);Wn.insert(b,ia);b.setSelectionRange(m+1,K+ua)}else Wn.insert(b,Wn.INDENT)}static unindent(b){const {selectionStart:g,selectionEnd:m,value:K}=b;var Z=K.lastIndexOf("\n",g-1)+1;const ia=Wn.findLineEnd(K,m);var ua=b.value.slice(Z,ia);const Ia=ua.replace(/(^|\n)(\t| {1,2})/g,"$1");ua=ua.length-Ia.length;b.setSelectionRange(Z,ia);Wn.insert(b,Ia);Z=(Z=/\t| {1,2}/.exec(K.slice(Z,g)))?Z[0].length:0;b.setSelectionRange(g-
Z,Math.max(g-Z,m-ua))}static normalizeText(b){return b.replace(Wn.fixNewLines,"\n")}},Er=Wn;F(Er,"fixNewLines",/\r?\n|\r/g);F(Er,"INDENT","  ");var Yp;"undefined"!==typeof window&&(Yp=Yf());var xv=new Map,Uq=ji()?"":"Ctrl",TC=class extends lh{},Cy=td(T(20)),PC=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var Ay=td(T(20)),wv={},Js=td(T(20)),UC=b=>{for(b=b.parentElement;b&&b!==document.body;){const {overflowY:g}=window.getComputedStyle(b);if(b.scrollHeight>b.clientHeight&&("auto"===
g||"scroll"===g||"overlay"===g))return b;b=b.parentElement}return document},zv=td(T(20)),yv=new Map,OD={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"rgb(66, 133, 244)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},
PD=((b,...g)=>b.reduce((m,K,Z)=>m+K+(Z<g.length?g[Z]:""),""))`
  .tl-container {
    --tl-cursor: inherit;
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: var(--tl-cursor) !important;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-touch-callout: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,$y=td(T(20)),Iy=td(T(20)),Bv={},Vk={toVector(b,g){void 0===b&&(b=g);return Array.isArray(b)?b:[b,b]},add(b,g){return[b[0]+g[0],b[1]+g[1]]},sub(b,g){return[b[0]-g[0],b[1]-g[1]]},addTo(b,g){b[0]+=g[0];b[1]+=g[1]},subTo(b,g){b[0]-=g[0];b[1]-=g[1]}},Hy={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},YC=["enter","leave"],XC=["gotpointercapture","lostpointercapture"],
Gy=class{constructor(b,g,m){this.ctrl=b;this.args=g;this.key=m;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(b){this.ctrl.state[this.key]=b}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:b,
shared:g,ingKey:m,args:K}=this;g[m]=b._active=b.active=b._blocked=b._force=!1;b._step=[!1,!1];b.intentional=!1;b._movement=[0,0];b._distance=[0,0];b._direction=[0,0];b._delta=[0,0];b._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];b.args=K;b.axis=void 0;b.memo=void 0;b.elapsedTime=0;b.direction=[0,0];b.distance=[0,0];b.overflow=[0,0];b._movementBound=[!1,!1];b.velocity=[0,0];b.movement=[0,0];b.delta=[0,0];b.timeStamp=0}start(b){const g=this.state,m=this.config;g._active||(this.reset(),this.computeInitial(),
g._active=!0,g.target=b.target,g.currentTarget=b.currentTarget,g.lastOffset=m.from?Kj(m.from,g):g.offset,g.offset=g.lastOffset);g.startTime=g.timeStamp=b.timeStamp}computeValues(b){const g=this.state;g._values=b;g.values=this.config.transform(b)}computeInitial(){const b=this.state;b._initial=b._values;b.initial=b.values}compute(b){const {state:g,config:m,shared:K}=this;g.args=this.args;var Z=0;if(b){g.event=b;m.preventDefault&&b.cancelable&&g.event.preventDefault();g.type=b.type;K.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;K.locked=!!document.pointerLockElement;Z=Object;var ia=Z.assign,ua={};"buttons"in b&&(ua.buttons=b.buttons);if("shiftKey"in b){const {shiftKey:Cc,altKey:Uc,metaKey:ae,ctrlKey:Gd}=b;Object.assign(ua,{shiftKey:Cc,altKey:Uc,metaKey:ae,ctrlKey:Gd})}ia.call(Z,K,ua);K.down=K.pressed=1===K.buttons%2||0<K.touches;Z=b.timeStamp-g.timeStamp;g.timeStamp=b.timeStamp;g.elapsedTime=g.timeStamp-g.startTime}g._active&&(ia=g._delta.map(Math.abs),Vk.addTo(g._distance,ia));this.axisIntent&&this.axisIntent(b);
const [Ia,Xa]=g._movement,[bb,pb]=m.threshold,{_step:sb,values:Ub}=g;m.hasCustomTransform?(!1===sb[0]&&(sb[0]=Math.abs(Ia)>=bb&&Ub[0]),!1===sb[1]&&(sb[1]=Math.abs(Xa)>=pb&&Ub[1])):(!1===sb[0]&&(sb[0]=Math.abs(Ia)>=bb&&Math.sign(Ia)*bb),!1===sb[1]&&(sb[1]=Math.abs(Xa)>=pb&&Math.sign(Xa)*pb));g.intentional=!1!==sb[0]||!1!==sb[1];if(g.intentional){ia=[0,0];if(m.hasCustomTransform){const [Cc,Uc]=Ub;ia[0]=!1!==sb[0]?Cc-sb[0]:0;ia[1]=!1!==sb[1]?Uc-sb[1]:0}else ia[0]=!1!==sb[0]?Ia-sb[0]:0,ia[1]=!1!==sb[1]?
Xa-sb[1]:0;this.restrictToAxis&&!g._blocked&&this.restrictToAxis(ia);ua=g.offset;var kc=g._active&&!g._blocked||g.active;kc&&(g.first=g._active&&!g.active,g.last=!g._active&&g.active,g.active=K[this.ingKey]=g._active,b&&(g.first&&("bounds"in m&&(g._bounds=Kj(m.bounds,g)),this.setup&&this.setup()),g.movement=ia,this.computeOffset()));var [Mb,sc]=g.offset,[[lc,Rb],[rc,Gc]]=g._bounds;g.overflow=[Mb<lc?-1:Mb>Rb?1:0,sc<rc?-1:sc>Gc?1:0];g._movementBound[0]=g.overflow[0]?!1===g._movementBound[0]?g._movement[0]:
g._movementBound[0]:!1;g._movementBound[1]=g.overflow[1]?!1===g._movementBound[1]?g._movement[1]:g._movementBound[1]:!1;g.offset=yh(g._bounds,g.offset,g._active?m.rubberband||[0,0]:[0,0]);g.delta=Vk.sub(g.offset,ua);this.computeMovement();kc&&(!g.last||32<Z)&&(g.delta=Vk.sub(g.offset,ua),b=g.delta.map(Math.abs),Vk.addTo(g.distance,b),g.direction=g.delta.map(Math.sign),g._direction=g._delta.map(Math.sign),!g.first&&0<Z&&(g.velocity=[b[0]/Z,b[1]/Z]))}}emit(){const b=this.state;var g=this.shared;const m=
this.config;b._active||this.clean();if(!b._blocked&&b.intentional||b._force||m.triggerAllEvents)g=this.handler(ki(ki(ki({},g),b),{},{[this.aliasKey]:b.values})),void 0!==g&&(b.memo=g)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Gs=class extends Gy{constructor(...b){super(...b);Ih(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Vk.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=
Vk.sub(this.state.offset,this.state.lastOffset)}axisIntent(b){const g=this.state,m=this.config;!g.axis&&b&&(b="object"===typeof m.axisThreshold?m.axisThreshold[tl(b)]:m.axisThreshold,g.axis=wk(g._movement,b));g._blocked=(m.lockDirection||!!m.axis)&&!g.axis||!!m.axis&&m.axis!==g.axis}restrictToAxis(b){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":b[1]=0;break;case "y":b[0]=0}}},ZC=b=>b,Fy={enabled(b=!0){return b},eventOptions(b,g,m){return ki(ki({},m.shared.eventOptions),
b)},preventDefault(b=!1){return b},triggerAllEvents(b=!1){return b},rubberband(b=0){switch(b){case !0:return[.15,.15];case !1:return[0,0];default:return Vk.toVector(b)}},from(b){if("function"===typeof b)return b;if(null!=b)return Vk.toVector(b)},transform(b,g,m){b=b||m.shared.transform;this.hasCustomTransform=!!b;return b||ZC},threshold(b){return Vk.toVector(b,0)}},Vq=ki(ki({},Fy),{},{axis(b,g,{axis:m}){this.lockDirection="lock"===m;if(!this.lockDirection)return m},axisThreshold(b=0){return b},bounds(b=
{}){if("function"===typeof b)return ia=>Vq.bounds(b(ia));if("current"in b)return()=>b.current;if("function"===typeof HTMLElement&&b instanceof HTMLElement)return b;const {left:g=-Infinity,right:m=Infinity,top:K=-Infinity,bottom:Z=Infinity}=b;return[[g,m],[K,Z]]}}),Ey={ArrowRight:(b=1)=>[10*b,0],ArrowLeft:(b=1)=>[-10*b,0],ArrowUp:(b=1)=>[0,-10*b],ArrowDown:(b=1)=>[0,10*b]},WC=class extends Gs{constructor(...b){super(...b);Ih(this,"ingKey","dragging")}reset(){super.reset();const b=this.state;b._pointerId=
void 0;b._pointerActive=!1;b._keyboardActive=!1;b._preventScroll=!1;b._delayed=!1;b.swipe=[0,0];b.tap=!1;b.canceled=!1;b.cancel=this.cancel.bind(this)}setup(){const b=this.state;if(b._bounds instanceof HTMLElement){const g=b._bounds.getBoundingClientRect(),m=b.currentTarget.getBoundingClientRect();b._bounds=Vq.bounds({left:g.left-m.left+b.offset[0],right:g.right-m.right+b.offset[0],top:g.top-m.top+b.offset[1],bottom:g.bottom-m.bottom+b.offset[1]})}}cancel(){const b=this.state;b.canceled||(b.canceled=
!0,b._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(b){const g=this.config,m=this.state;if(null==b.buttons||(Array.isArray(g.pointerButtons)?g.pointerButtons.includes(b.buttons):-1===g.pointerButtons||g.pointerButtons===b.buttons)){var K=this.ctrl.setEventIds(b);g.pointerCapture&&b.target.setPointerCapture(b.pointerId);
K&&1<K.size&&m._pointerActive||(this.start(b),this.setupPointer(b),m._pointerId=dj(b),m._pointerActive=!0,this.computeValues(jh(b)),this.computeInitial(),g.preventScrollAxis&&"mouse"!==tl(b)?(m._active=!1,this.setupScrollPrevention(b)):0<g.delay?(this.setupDelayTrigger(b),g.triggerAllEvents&&(this.compute(b),this.emit())):this.startPointerDrag(b))}}startPointerDrag(b){const g=this.state;g._active=!0;g._preventScroll=!0;g._delayed=!1;this.compute(b);this.emit()}pointerMove(b){const g=this.state,m=
this.config;if(g._pointerActive&&(g.type!==b.type||b.timeStamp!==g.timeStamp)){var K=dj(b);if(void 0===g._pointerId||K===g._pointerId)K=jh(b),document.pointerLockElement===b.target?g._delta=[b.movementX,b.movementY]:(g._delta=Vk.sub(K,g._values),this.computeValues(K)),Vk.addTo(g._movement,g._delta),this.compute(b),g._delayed&&g.intentional?(this.timeoutStore.remove("dragDelay"),g.active=!1,this.startPointerDrag(b)):m.preventScrollAxis&&!g._preventScroll?g.axis&&(g.axis===m.preventScrollAxis||"xy"===
m.preventScrollAxis?(g._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(b))):this.emit()}}pointerUp(b){this.ctrl.setEventIds(b);try{this.config.pointerCapture&&b.target.hasPointerCapture(b.pointerId)&&b.target.releasePointerCapture(b.pointerId)}catch(ua){}const g=this.state,m=this.config;if(g._active&&g._pointerActive){var K=dj(b);if(void 0===g._pointerId||K===g._pointerId){this.state._pointerActive=!1;this.setActive();this.compute(b);var [Z,ia]=g._distance;
g.tap=Z<=m.tapsThreshold&&ia<=m.tapsThreshold;if(g.tap&&m.filterTaps)g._force=!0;else{const [ua,Ia]=g.direction,[Xa,bb]=g.velocity,[pb,sb]=g.movement,[Ub,kc]=m.swipe.velocity,[Mb,sc]=m.swipe.distance;g.elapsedTime<m.swipe.duration&&(Math.abs(Xa)>Ub&&Math.abs(pb)>Mb&&(g.swipe[0]=ua),Math.abs(bb)>kc&&Math.abs(sb)>sc&&(g.swipe[1]=Ia))}this.emit()}}}pointerClick(b){!this.state.tap&&0<b.detail&&(b.preventDefault(),b.stopPropagation())}setupPointer(b){const g=this.config,m=g.device;g.pointerLock&&b.currentTarget.requestPointerLock();
g.pointerCapture||(this.eventStore.add(this.sharedConfig.window,m,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,m,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,m,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(b){this.state._preventScroll&&b.cancelable&&b.preventDefault()}setupScrollPrevention(b){this.state._preventScroll=
!1;"persist"in b&&"function"===typeof b.persist&&b.persist();const g=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",g);this.eventStore.add(this.sharedConfig.window,"touch","cancel",g);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,b)}setupDelayTrigger(b){this.state._delayed=!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=
[0,0];this.startPointerDrag(b)},this.config.delay)}keyDown(b){const g=Ey[b.key];if(g){const m=this.state,K=b.shiftKey?10:b.altKey?.1:1;this.start(b);m._delta=g(K);m._keyboardActive=!0;Vk.addTo(m._movement,m._delta);this.compute(b);this.emit()}}keyUp(b){b.key in Ey&&(this.state._keyboardActive=!1,this.setActive(),this.compute(b),this.emit())}bind(b){const g=this.config.device;b(g,"start",this.pointerDown.bind(this));this.config.pointerCapture&&(b(g,"change",this.pointerMove.bind(this)),b(g,"end",this.pointerUp.bind(this)),
b(g,"cancel",this.pointerUp.bind(this)),b("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(b("key","down",this.keyDown.bind(this)),b("key","up",this.keyUp.bind(this)));this.config.filterTaps&&b("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Wq="undefined"!==typeof window&&window.document&&window.document.createElement;try{var Av="constructor"in GestureEvent}catch(b){Av=!1}var VC=Av,Ks=Wq&&"ontouchstart"in window||Wq&&1<window.navigator.maxTouchPoints,Py=Wq&&
"ontouchstart"in window||Wq&&1<window.navigator.maxTouchPoints,Oy=Wq&&"onpointerdown"in window,pD=Wq&&"exitPointerLock"in window.document,Qy={mouse:0,touch:0,pen:8},qD=ki(ki({},Vq),{},{device(b,g,{pointer:{touch:m=!1,lock:K=!1,mouse:Z=!1}={}}){this.pointerLock=K&&pD;return Ks&&m?"touch":this.pointerLock?"mouse":Oy&&!Z?"pointer":Ks?"touch":"mouse"},preventScrollAxis(b,g,{preventScroll:m}){this.preventScrollDelay="number"===typeof m?m:m||void 0===m&&b?250:void 0;if(Py&&!1!==m)return b?b:void 0!==m?
"y":void 0},pointerCapture(b,g,{pointer:{capture:m=!0,buttons:K=1}={}}){this.pointerButtons=K;return!this.pointerLock&&"pointer"===this.device&&m},keys(b=!0){return b},threshold(b,g,{filterTaps:m=!1,tapsThreshold:K=3,axis:Z}){b=Vk.toVector(b,m?K:Z?1:0);this.filterTaps=m;this.tapsThreshold=K;return b},swipe({velocity:b=.5,distance:g=50,duration:m=250}={}){return{velocity:this.transform(Vk.toVector(b)),distance:this.transform(Vk.toVector(g)),duration:m}},delay(b=0){switch(b){case !0:return 180;case !1:return 0;
default:return b}},axisThreshold(b){return b?ki(ki({},Qy),b):Qy}}),rD=class extends Gy{constructor(...b){super(...b);Ih(this,"ingKey","pinching");Ih(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const b=this.state;b._touchIds=[];b.canceled=!1;b.cancel=this.cancel.bind(this);b.turns=0}computeOffset(){const {type:b,movement:g,lastOffset:m}=this.state;this.state.offset="wheel"===b?Vk.add(g,m):[(1+g[0])*m[0],g[1]+
m[1]]}computeMovement(){const {offset:b,lastOffset:g}=this.state;this.state.movement=[b[0]/g[0],b[1]-g[1]]}axisIntent(){const b=this.state,[g,m]=b._movement;if(!b.axis){const K=30*Math.abs(g)-Math.abs(m);0>K?b.axis="angle":0<K&&(b.axis="scale")}}restrictToAxis(b){this.config.lockDirection&&("scale"===this.state.axis?b[1]=0:"angle"===this.state.axis&&(b[0]=0))}cancel(){const b=this.state;b.canceled||setTimeout(()=>{b.canceled=!0;b._active=!1;this.compute();this.emit()},0)}touchStart(b){this.ctrl.setEventIds(b);
var g=this.state;const m=this.ctrl.touchIds;g._active&&g._touchIds.every(K=>m.has(K))||2>m.size||(this.start(b),g._touchIds=Array.from(m).slice(0,2),g=jg(b,g._touchIds),this.pinchStart(b,g))}pointerStart(b){if(null==b.buttons||1===b.buttons%2){this.ctrl.setEventIds(b);b.target.setPointerCapture(b.pointerId);var g=this.state,m=g._pointerEvents,K=this.ctrl.pointerIds;g._active&&Array.from(m.keys()).every(Z=>K.has(Z))||(2>m.size&&m.set(b.pointerId,b),2>g._pointerEvents.size||(this.start(b),g=ik(...Array.from(m.values())),
this.pinchStart(b,g)))}}pinchStart(b,g){this.state.origin=g.origin;this.computeValues([g.distance,g.angle]);this.computeInitial();this.compute(b);this.emit()}touchMove(b){if(this.state._active){var g=jg(b,this.state._touchIds);this.pinchMove(b,g)}}pointerMove(b){var g=this.state._pointerEvents;g.has(b.pointerId)&&g.set(b.pointerId,b);this.state._active&&(g=ik(...Array.from(g.values())),this.pinchMove(b,g))}pinchMove(b,g){const m=this.state,K=g.angle-m._values[1];let Z=0;270<Math.abs(K)&&(Z+=Math.sign(K));
this.computeValues([g.distance,g.angle-360*Z]);m.origin=g.origin;m.turns=Z;m._movement=[m._values[0]/m._initial[0]-1,m._values[1]-m._initial[1]];this.compute(b);this.emit()}touchEnd(b){this.ctrl.setEventIds(b);this.state._active&&this.state._touchIds.some(g=>!this.ctrl.touchIds.has(g))&&(this.state._active=!1,this.compute(b),this.emit())}pointerEnd(b){const g=this.state;this.ctrl.setEventIds(b);try{b.target.releasePointerCapture(b.pointerId)}catch(m){}g._pointerEvents.has(b.pointerId)&&g._pointerEvents.delete(b.pointerId);
g._active&&2>g._pointerEvents.size&&(g._active=!1,this.compute(b),this.emit())}gestureStart(b){b.cancelable&&b.preventDefault();const g=this.state;g._active||(this.start(b),this.computeValues([b.scale,b.rotation]),g.origin=[b.clientX,b.clientY],this.compute(b),this.emit())}gestureMove(b){b.cancelable&&b.preventDefault();if(this.state._active){var g=this.state;this.computeValues([b.scale,b.rotation]);g.origin=[b.clientX,b.clientY];var m=g._movement;g._movement=[b.scale-1,b.rotation];g._delta=Vk.sub(g._movement,
m);this.compute(b);this.emit()}}gestureEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}wheel(b){const g=this.config.modifierKey;if(!g||b[g])this.state._active?this.wheelChange(b):this.wheelStart(b),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(b){this.start(b);this.wheelChange(b)}wheelChange(b){"uv"in b||b.cancelable&&b.preventDefault();const g=this.state;g._delta=[-ri(b)[1]/100*g.offset[0],0];Vk.addTo(g._movement,g._delta);this.state.origin=
[b.clientX,b.clientY];this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){const g=this.config.device;g&&(b(g,"start",this[g+"Start"].bind(this)),b(g,"change",this[g+"Move"].bind(this)),b(g,"end",this[g+"End"].bind(this)),b(g,"cancel",this[g+"End"].bind(this)));b("wheel","",this.wheel.bind(this),{passive:!1})}},sD=ki(ki({},Fy),{},{device(b,g,{shared:m,pointer:{touch:K=!1}={}}){if(m.target&&!Ks&&VC)return"gesture";if(Ks&&K)return"touch";
if(Py){if(Oy)return"pointer";if(Ks)return"touch"}},bounds(b,g,{scaleBounds:m={},angleBounds:K={}}){const Z=ua=>{ua=Kj(m,ua);ua=Object.assign({},{min:-Infinity,max:Infinity},ua||{});return[ua.min,ua.max]},ia=ua=>{ua=Kj(K,ua);ua=Object.assign({},{min:-Infinity,max:Infinity},ua||{});return[ua.min,ua.max]};return"function"!==typeof m&&"function"!==typeof K?[Z(),ia()]:ua=>[Z(ua),ia(ua)]},threshold(b,g,m){this.lockDirection="lock"===m.axis;return Vk.toVector(b,this.lockDirection?[.1,3]:0)},modifierKey(b){return void 0===
b?"ctrlKey":b}}),tD=class extends Gs{constructor(...b){super(...b);Ih(this,"ingKey","moving")}move(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.state._active?this.moveChange(b):this.moveStart(b),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(b){this.start(b);this.computeValues(jh(b));this.compute(b);this.computeInitial();this.emit()}moveChange(b){if(this.state._active){var g=jh(b),m=this.state;m._delta=Vk.sub(g,m._values);Vk.addTo(m._movement,m._delta);this.computeValues(g);
this.compute(b);this.emit()}}moveEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}bind(b){b("pointer","change",this.move.bind(this));b("pointer","leave",this.moveEnd.bind(this))}},uD=ki(ki({},Vq),{},{mouseOnly:(b=!0)=>b}),vD=class extends Gs{constructor(...b){super(...b);Ih(this,"ingKey","scrolling")}scroll(b){this.state._active||this.start(b);this.scrollChange(b);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(b){b.cancelable&&b.preventDefault();
const g=this.state;var m,K;const {scrollX:Z,scrollY:ia,scrollLeft:ua,scrollTop:Ia}=b.currentTarget;var Xa=[null!==(m=null!==Z&&void 0!==Z?Z:ua)&&void 0!==m?m:0,null!==(K=null!==ia&&void 0!==ia?ia:Ia)&&void 0!==K?K:0];g._delta=Vk.sub(Xa,g._values);Vk.addTo(g._movement,g._delta);this.computeValues(Xa);this.compute(b);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("scroll","",this.scroll.bind(this))}},wD=Vq,xD=class extends Gs{constructor(...b){super(...b);
Ih(this,"ingKey","wheeling")}wheel(b){this.state._active||this.start(b);this.wheelChange(b);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(b){const g=this.state;g._delta=ri(b);Vk.addTo(g._movement,g._delta);const [m,K]=g.overflow,[Z,ia]=g._delta,[ua,Ia]=g._direction;if(0>m&&0<Z&&0>ua||0<m&&0>Z&&0<ua)g._movement[0]=g._movementBound[0];if(0>K&&0<ia&&0>Ia||0<K&&0>ia&&0<Ia)g._movement[1]=g._movementBound[1];this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=
!1,this.compute(),this.emit())}bind(b){b("wheel","",this.wheel.bind(this))}},zD=Vq,yD=class extends Gs{constructor(...b){super(...b);Ih(this,"ingKey","hovering")}enter(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.start(b),this.computeValues(jh(b)),this.compute(b),this.emit())}leave(b){if(!this.config.mouseOnly||"mouse"===b.pointerType){var g=this.state;if(g._active){g._active=!1;var m=jh(b);g._movement=g._delta=Vk.sub(m,g._values);this.computeValues(m);this.compute(b);g.delta=g.movement;
this.emit()}}}bind(b){b("pointer","enter",this.enter.bind(this));b("pointer","leave",this.leave.bind(this))}},oD=ki(ki({},Vq),{},{mouseOnly:(b=!0)=>b}),Hv=new Map,Gv=new Map,mD={key:"drag",engine:WC,resolver:qD},nD={key:"hover",engine:yD,resolver:oD},iD={key:"move",engine:tD,resolver:uD},jD={key:"pinch",engine:rD,resolver:sD},kD={key:"scroll",engine:vD,resolver:wD},hD={key:"wheel",engine:xD,resolver:zD},Ev=td(T(20)),fD={target(b){if(b)return()=>"current"in b?b.current:b},enabled(b=!0){return b},window(b=
Wq?window:void 0){return b},eventOptions({passive:b=!0,capture:g=!1}={}){return{passive:b,capture:g}},transform(b){return b}},gD=["target","eventOptions","window","enabled","transform"],Ly=class{constructor(b,g){Ih(this,"_listeners",new Set);this._ctrl=b;this._gestureKey=g}add(b,g,m,K,Z){const ia=this._listeners,ua=ml(g,m),Ia=ki(ki({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),Z);b.addEventListener(ua,K,Ia);const Xa=()=>{b.removeEventListener(ua,K,Ia);ia.delete(Xa)};ia.add(Xa);
return Xa}clean(){this._listeners.forEach(b=>b());this._listeners.clear()}},dD=class{constructor(){Ih(this,"_timeouts",new Map)}add(b,g,m=140,...K){this.remove(b);this._timeouts.set(b,window.setTimeout(g,m,...K))}remove(b){(b=this._timeouts.get(b))&&window.clearTimeout(b)}clean(){this._timeouts.forEach(b=>void window.clearTimeout(b));this._timeouts.clear()}},eD=class{constructor(b){Ih(this,"gestures",new Set);Ih(this,"_targetEventStore",new Ly(this));Ih(this,"gestureEventStores",{});Ih(this,"gestureTimeoutStores",
{});Ih(this,"handlers",{});Ih(this,"config",{});Ih(this,"pointerIds",new Set);Ih(this,"touchIds",new Set);Ih(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});b.drag&&oh(this,"drag");b.wheel&&oh(this,"wheel");b.scroll&&oh(this,"scroll");b.move&&oh(this,"move");b.pinch&&oh(this,"pinch");b.hover&&oh(this,"hover")}setEventIds(b){if("touches"in b)return this.touchIds=new Set(eg(b));if("pointerId"in b)return"pointerup"===b.type||"pointercancel"===b.type?this.pointerIds.delete(b.pointerId):
"pointerdown"===b.type&&this.pointerIds.add(b.pointerId),this.pointerIds}applyHandlers(b,g){this.handlers=b;this.nativeHandlers=g}applyConfig(b,g){this.config=Di(b,g,this.config)}clean(){this._targetEventStore.clean();for(const b of this.gestures)this.gestureEventStores[b].clean(),this.gestureTimeoutStores[b].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...b){var g=this.config.shared;const m={};let K;if(g.target&&(K=g.target(),!K))return;if(g.enabled){for(const Z of this.gestures){const ia=
this.config[Z],ua=My(m,ia.eventOptions,!!K);ia.enabled&&(new (Hv.get(Z))(this,b,Z)).bind(ua)}g=My(m,g.eventOptions,!!K);for(const Z in this.nativeHandlers)g(Z,"",ia=>this.nativeHandlers[Z](ki(ki({},this.state.shared),{},{event:ia,args:b})),void 0,!0)}for(const Z in m)m[Z]=Vh(...m[Z]);if(!K)return m;for(const Z in m){const {device:ia,capture:ua,passive:Ia}=sl(Z);this._targetEventStore.add(K,ia,"",m[Z],{capture:ua,passive:Ia})}}},My=(b,g,m)=>(K,Z,ia,ua={},Ia=!1)=>{var Xa,bb;const pb=null!==(Xa=ua.capture)&&
void 0!==Xa?Xa:g.capture;ua=null!==(bb=ua.passive)&&void 0!==bb?bb:g.passive;K=Ia?K:Uj(K,Z,pb);m&&ua&&(K+="Passive");b[K]=b[K]||[];b[K].push(ia)},cD=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,Cv=td(T(20)),Dv=td(T(20)),Ky=td(T(20)),Jy=td(T(20)),vp=td(T(20)),Ho=td(T(20)),lD=td(T(20)),bD=td(T(20)),aD={none:(b,g)=>"none",["default"]:(b,g)=>"default",pointer:(b,g)=>"pointer",crosshair:(b,g)=>"crosshair",move:(b,g)=>"move",wait:(b,g)=>"wait",progress:(b,g)=>"progress",grab:(b,g)=>Dh('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
b,g),grabbing:(b,g)=>Dh("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
b,g),text:(b,g)=>Dh("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
b,g),["resize-edge"]:(b,g)=>Dh("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["resize-corner"]:(b,g)=>Dh("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b,g),["ew-resize"]:(b,g)=>Dh("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["ns-resize"]:(b,g)=>Dh("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
b+90,g),["nesw-resize"]:(b,g)=>Dh("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",b,g),["nwse-resize"]:(b,g)=>Dh("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b+90,g),rotate:(b,g)=>Dh('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+45,g),["nwse-rotate"]:(b,g)=>Dh('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b,g),["nesw-rotate"]:(b,g)=>Dh('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+90,g),["senw-rotate"]:(b,g)=>Dh('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+180,g),["swne-rotate"]:(b,g)=>Dh('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+270,g)},QD=td(T(20));td(T(20));var az=T(20),Fv=td(T(20));if(!T(20).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!Se)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var Ny=T(29),Hs=td(T(20)),Kt="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,Lt=1E4,BD=function(b){var g="function"===typeof Symbol&&Symbol.iterator,m=g&&b[g],K=0;if(m)return m.call(b);if(b&&"number"===typeof b.length)return{next:function(){b&&K>=
b.length&&(b=void 0);return{value:b&&b[K++],done:!b}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.");},bz=Kt?Nj(Kt):Eh(),JD=bz.addReactionToTrack,RD=bz.recordReactionAsCommitted,cz=function(b,g){var m="function"===typeof Symbol&&b[Symbol.iterator];if(!m)return b;b=m.call(b);var K,Z=[];try{for(;(void 0===g||0<g--)&&!(K=b.next()).done;)Z.push(K.value)}catch(ua){var ia={error:ua}}finally{try{K&&!K.done&&(m=b["return"])&&m.call(b)}finally{if(ia)throw ia.error;}}return Z},
SD=function(){return function(){}}(),Hr=T(20),dz="function"===typeof Symbol&&Symbol.for,ez=dz?Symbol.for("react.forward_ref"):"function"===typeof Hr.forwardRef&&(0,Hr.forwardRef)(function(b){return null}).$$typeof,fz=dz?Symbol.for("react.memo"):"function"===typeof Hr.memo&&(0,Hr.memo)(function(b){return null}).$$typeof,TD={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};Cm.displayName="Observer";T(20);T(20);T(20);(function(b){b||=Hg;Mc({reactionScheduler:b})})(Ny.unstable_batchedUpdates);
var UD=td(T(20));Jb=T(616);var wp=UD.forwardRef(function(b,g){var {children:m,opacity:K,centered:Z,className:ia=""}=b,ua=Yb(b,["children","opacity","centered","className"]);return(0,Jb.jsx)(Cm,{children:()=>(0,Jb.jsx)("div",{ref:g,className:`tl-positioned-div ${ia}`,style:K?{opacity:K}:void 0,draggable:!1,children:(0,Jb.jsx)("div",rb(Wa({className:`tl-positioned-inner ${Z?"tl-centered":""}`},ua),{children:m}))})})}),VD=td(T(20));Jb=T(616);var ro=VD.forwardRef(function(b,g){var {id:m,className:K="",
style:Z,children:ia}=b,ua=Yb(b,["id","className","style","children"]);return(0,Jb.jsx)(Cm,{children:()=>(0,Jb.jsx)("svg",{ref:g,style:Z,className:`tl-positioned-svg ${K}`,children:(0,Jb.jsx)("g",rb(Wa({id:m,className:"tl-centered-g"},ua),{children:ia}))})})}),Is=td(T(20)),Zy=td(T(20)),Mt=td(T(20));Jb=T(616);var Fr=pf(function(b){var {id:g,bounds:m,zIndex:K,rotation:Z=0,className:ia="",children:ua}=b;b=Yb(b,"id bounds zIndex rotation className children".split(" "));const Ia=Mt.useRef(null);Mt.useLayoutEffect(()=>
{Ia.current.style.transform=`translate(
        calc(${m.minX}px - var(--tl-padding)),
        calc(${m.minY}px - var(--tl-padding)))
        rotate(${Z+(m.rotation||0)}rad)`},[m.minX,m.minY,Z,m.rotation]);Mt.useLayoutEffect(()=>{const Xa=Ia.current;Xa.style.width=`calc(${Math.floor(m.width)}px + (var(--tl-padding) * 2))`;Xa.style.height=`calc(${Math.floor(m.height)}px + (var(--tl-padding) * 2))`},[m.width,m.height]);Mt.useLayoutEffect(()=>{const Xa=Ia.current;void 0!==K&&(Xa.style.zIndex=K.toString())},[K]);return(0,Jb.jsx)("div",rb(Wa({id:g,ref:Ia,className:`tl-positioned ${ia}`,"aria-label":"container"},b),{children:ua}))}),
HD=td(T(20));Jb=T(616);var Iv=b=>b.stopPropagation(),ID=pf(function({shapes:b,hidden:g,bounds:m,rotation:K=0}){const {components:{ContextBar:Z},viewport:{bounds:ia,camera:{point:[ua,Ia],zoom:Xa}}}=Rg(),bb=HD.useRef(null);var pb=rf.getRotatedBounds(m,K);pb=rf.multiplyBounds(pb,Xa);jk(bb,m,K,10003);if(!Z)throw Error("Expected a ContextBar component.");const sb=rf.translateBounds(pb,[ua*Xa,Ia*Xa]);return(0,Jb.jsx)("div",{ref:bb,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container",
onPointerMove:Iv,onPointerUp:Iv,onPointerDown:Iv,children:(0,Jb.jsx)(Z,{hidden:g,shapes:b,bounds:m,offsets:{left:sb.minX,right:ia.width-sb.maxX,top:sb.minY,bottom:ia.height-sb.maxY,width:sb.width,height:sb.height},scaledBounds:pb,rotation:K})})}),Vy=td(T(20));Jb=T(616);var DD=pf(function({children:b}){const g=Vy.useRef(null),{viewport:m}=Rg();Vy.useEffect(()=>ad(()=>{const K=g.current;if(K){var {zoom:Z,point:ia}=m.camera;K.style.setProperty("transform",`scale(${Z}) translate3d(${ia[0]}px, ${ia[1]}px, 0)`)}}),
[]);return(0,Jb.jsx)("div",{ref:g,className:"tl-absolute tl-layer",children:b})});Jb=T(616);var Wy=pf(function({shape:b,isHovered:g=!1,isSelected:m=!1,isBinding:K=!1,isEditing:Z=!1,meta:ia}){const {bounds:ua,props:{scale:Ia,rotation:Xa=0},ReactIndicator:bb}=b;return(0,Jb.jsx)(Fr,{"data-type":"Indicator",bounds:ua,rotation:Xa,scale:Ia,zIndex:Z?1E3:1E4,children:(0,Jb.jsx)(ro,{children:(0,Jb.jsx)("g",{className:`tl-indicator-container ${m?"tl-selected":"tl-hovered"}`,children:(0,Jb.jsx)(bb,{isEditing:Z,
isBinding:K,isHovered:g,isSelected:m,isErasing:!1,meta:ia})})})})}),ED=td(T(20));Jb=T(616);var FD=pf(function({bounds:b,hidden:g,shapes:m,rotation:K=0,detail:Z="size"}){const {components:{SelectionDetail:ia},viewport:{camera:{zoom:ua}}}=Rg(),Ia=ED.useRef(null),Xa=rf.multiplyBounds(b,ua);jk(Ia,b,K,10003);if(!ia)throw Error("Expected a SelectionDetail component.");return(0,Jb.jsx)("div",{ref:Ia,className:`tl-counter-scaled-positioned ${g?"tl-fade-out":""}`,"aria-label":"bounds-detail-container",children:(0,Jb.jsx)(ia,
{shapes:m,bounds:b,scaledBounds:Xa,zoom:ua,rotation:K,detail:Z})})}),Xy=td(T(20));Jb=T(616);var GD=pf(function({shape:b,isHovered:g=!1,isSelected:m=!1,isBinding:K=!1,isErasing:Z=!1,isEditing:ia=!1,onEditingEnd:ua,asset:Ia,meta:Xa,zIndex:bb}){const {bounds:pb,props:{rotation:sb,scale:Ub},ReactComponent:kc}=b,Mb=ul(b);return(0,Jb.jsx)(Fr,{"data-shape-id":b.id,zIndex:bb,"data-type":"Shape",bounds:pb,rotation:sb,scale:Ub,children:(0,Jb.jsx)(kc,{meta:Xa,isEditing:ia,isBinding:K,isHovered:g,isSelected:m,
isErasing:Z,events:Mb,asset:Ia,onEditingEnd:ua})})});Jb=T(616);var Yy=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],gz=pf(function({size:b}){const {viewport:{camera:{point:g,zoom:m}}}=Rg();return(0,Jb.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,Jb.jsx)("defs",{children:Yy.map(([K,Z,ia],ua)=>{ia=ia*b*m;var Ia=g[0]*m,Xa=g[1]*m;Ia=0<Ia?Ia%ia:ia+Ia%ia;Xa=0<Xa?Xa%ia:ia+Xa%ia;K=m<Z?xe(m,[K,Z],[0,1]):1;return(0,Jb.jsx)("pattern",{id:`grid-${ua}`,width:ia,
height:ia,patternUnits:"userSpaceOnUse",children:(0,Jb.jsx)("circle",{className:"tl-grid-dot",cx:Ia,cy:Xa,r:1.5,opacity:K})},`grid-pattern-${ua}`)})}),Yy.map((K,Z)=>(0,Jb.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${Z})`},`grid-rect-${Z}`))]})});Jb=T(616);var hz=pf(function({bounds:b}){const g=ef("background");return(0,Jb.jsx)(ro,rb(Wa({},g),{children:(0,Jb.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,b.width),height:Math.max(1,b.height),pointerEvents:"all",rx:8,ry:8})}))});
T(20);Jb=T(616);var Ty=pf(function({scaledBounds:b,shapes:g,detail:m="size",rotation:K=0}){var Z;const ia=1===g.length?K:null!=(Z=b.rotation)?Z:0;return(0,Jb.jsx)(wp,{centered:!0,children:(0,Jb.jsx)("div",{className:"tl-bounds-detail",style:{transform:ia<Yj||ia>3*Yj?`rotate(${ia}rad) translateY(${b.height/2+24}px)`:`rotate(${Math.PI+ia}rad) translateY(${b.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===g.length&&"line"===g[0].type?`${re.dist(g[0].props.handles.start.point,g[0].props.handles.end.point).toFixed()}`:
"size"===m?`${b.width.toFixed()} \xD7 ${b.height.toFixed()}`:`\u2220${Zk.radiansToDegrees(Zk.clampRadians(K)).toFixed()}\xB0`})})});Jb=T(616);var CD={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},Pt=pf(function({cx:b,cy:g,size:m,targetSize:K,corner:Z,isHidden:ia}){const ua=ef(Z);return(0,Jb.jsxs)("g",rb(Wa({opacity:ia?0:1},ua),{children:[(0,Jb.jsx)("rect",{className:"tl-transparent "+(ia?"":CD[Z]),"aria-label":`${Z} target`,
x:b-1.25*K,y:g-1.25*K,width:2.5*K,height:2.5*K,pointerEvents:ia?"none":"all"}),(0,Jb.jsx)("rect",{className:"tl-corner-handle","aria-label":`${Z} handle`,x:b-m/2,y:g-m/2,width:m,height:m,pointerEvents:"none"})]}))});Jb=T(616);var WD={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},Qt=pf(function({x:b,y:g,width:m,height:K,targetSize:Z,edge:ia,disabled:ua,isHidden:Ia}){const Xa=ef(ia);return(0,Jb.jsx)("rect",Wa({pointerEvents:Ia||ua?"none":"all",
className:"tl-transparent tl-edge-handle "+(Ia?"":WD[ia]),"aria-label":`${ia} target`,opacity:Ia?0:1,x:b-Z,y:g-Z,width:Math.max(1,m+2*Z),height:Math.max(1,K+2*Z)},Xa))});T(20);Jb=T(616);pf(function({cx:b,cy:g,size:m,targetSize:K,isHidden:Z}){const ia=ef("rotate");return(0,Jb.jsxs)("g",rb(Wa({opacity:Z?0:1},ia),{children:[(0,Jb.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:b,cy:g,r:K,pointerEvents:Z?"none":"all"}),(0,Jb.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",
cx:b,cy:g,r:m/2,pointerEvents:"none"})]}))});T(20);Jb=T(616);var Rt=pf(function({cx:b,cy:g,targetSize:m,corner:K,isHidden:Z}){const ia=ef(K);return(0,Jb.jsx)("g",rb(Wa({opacity:Z?0:1},ia),{children:(0,Jb.jsx)("rect",{className:"tl-transparent","aria-label":`${K} target`,x:b-2.5*m,y:g-2.5*m,width:3*m,height:3*m,pointerEvents:Z?"none":"all"})}))});Jb=T(616);var iz=pf(function({bounds:b,showResizeHandles:g,showRotateHandles:m,shapes:K}){var Z,ia,ua=dg();let {width:Ia,height:Xa}=b;var bb=ua.viewport.camera.zoom;
b=8/bb;bb=6/bb;K=1===K.length?K[0].canResize:[!0,!0];ua=null!=(ia=null==(Z=ua.editingShape)?void 0:Z.props.borderRadius)?ia:0;return(0,Jb.jsxs)(ro,{children:[(0,Jb.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(Ia,1),height:Math.max(Xa,1),rx:ua,ry:ua,pointerEvents:"none"}),(0,Jb.jsx)(Qt,{x:2*bb,y:0,width:Ia-4*bb,height:0,targetSize:bb,edge:"top_edge",disabled:!K[1],isHidden:!g}),(0,Jb.jsx)(Qt,{x:Ia,y:2*bb,width:0,height:Xa-4*bb,targetSize:bb,edge:"right_edge",disabled:!K[0],isHidden:!g}),(0,Jb.jsx)(Qt,
{x:2*bb,y:Xa,width:Ia-4*bb,height:0,targetSize:bb,edge:"bottom_edge",disabled:!K[1],isHidden:!g}),(0,Jb.jsx)(Qt,{x:0,y:2*bb,width:0,height:Xa-4*bb,targetSize:bb,edge:"left_edge",disabled:!K[0],isHidden:!g}),(0,Jb.jsx)(Rt,{cx:0,cy:0,targetSize:bb,corner:"top_left_resize_corner",isHidden:!m}),(0,Jb.jsx)(Rt,{cx:Ia+2*bb,cy:0,targetSize:bb,corner:"top_right_resize_corner",isHidden:!m}),(0,Jb.jsx)(Rt,{cx:Ia+2*bb,cy:Xa+2*bb,targetSize:bb,corner:"bottom_right_resize_corner",isHidden:!m}),(0,Jb.jsx)(Rt,{cx:0,
cy:Xa+2*bb,targetSize:bb,corner:"bottom_left_resize_corner",isHidden:!m}),(null==K?void 0:K.every(pb=>pb))&&(0,Jb.jsxs)(Jb.Fragment,{children:[(0,Jb.jsx)(Pt,{cx:0,cy:0,size:b,targetSize:bb,corner:"top_left_corner",isHidden:!g}),(0,Jb.jsx)(Pt,{cx:Ia,cy:0,size:b,targetSize:bb,corner:"top_right_corner",isHidden:!g}),(0,Jb.jsx)(Pt,{cx:Ia,cy:Xa,size:b,targetSize:bb,corner:"bottom_right_corner",isHidden:!g}),(0,Jb.jsx)(Pt,{cx:0,cy:Xa,size:b,targetSize:bb,corner:"bottom_left_corner",isHidden:!g})]})]})});
Jb=T(616);var Uy=pf(function({bounds:b}){return(0,Jb.jsx)(Fr,{bounds:b,zIndex:10001,children:(0,Jb.jsx)(ro,{children:(0,Jb.jsx)("rect",{className:"tl-brush",x:0,y:0,width:b.width,height:b.height})})})});Jb=T(616);pf(function(){return(0,Jb.jsx)(Jb.Fragment,{})});Jb=T(616);var jz=pf(function({shape:b,handle:g,id:m}){b=Lh(b,m);const [K,Z]=g.point;return(0,Jb.jsxs)("g",rb(Wa({className:"tl-handle","aria-label":"handle"},b),{transform:`translate(${K}, ${Z})`,children:[(0,Jb.jsx)("circle",{className:"tl-handle-bg",
pointerEvents:"all"}),(0,Jb.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),kz=td(T(20));Jb=T(616);var Mv=pf(function({direction:b}){const {viewport:{bounds:g}}=Rg(),m=kz.useRef(null);kz.useLayoutEffect(()=>{const K=m.current;if(K){var Z=[g.width/2,g.height/2],ia=rf.getRectangleSides([12,12],[g.width-24,g.height-24]);for(const [,[ua,Ia]]of ia)ia=c(Z,b,ua,Ia),ia.didIntersect&&(ia=ia.points[0],K.style.setProperty("transform",`translate(${ia[0]-6}px,${ia[1]-6}px) rotate(${re.toAngle(b)}rad)`))}},
[b,g]);return(0,Jb.jsx)("div",{ref:m,className:"tl-direction-indicator",children:(0,Jb.jsx)("svg",{height:12,width:12,children:(0,Jb.jsx)("polygon",{points:"0,0 12,6 0,12"})})})});Jb=T(616);var XD=pf(function({id:b,className:g,brush:m,shapes:K,assets:Z,bindingShapes:ia,editingShape:ua,hoveredShape:Ia,selectionBounds:Xa,selectedShapes:bb,erasingShapes:pb,selectionDirectionHint:sb,cursor:Ub="default",cursorRotation:kc=0,selectionRotation:Mb=0,showSelection:sc=!0,showHandles:lc=!0,showSelectionRotation:Rb=
!1,showResizeHandles:rc=!0,showRotateHandles:Gc=!0,showSelectionDetail:Cc=!0,showContextBar:Uc=!0,showGrid:ae=!0,gridSize:Gd=8,onEditingEnd:qe=PC,theme:cf=Ao,children:Fe}){var df;const ie=Is.useRef(null),{viewport:Id,components:fd,meta:$c}=Rg(),vd=dg(),Md=Is.useCallback(Ke=>{vd.inputs.updateContainerOffset([Ke.minX,Ke.minY])},[]);Ij(cf,b);hj(ie);cj(ie,Id,Md);Um(ie);ij();pi(ie,Ub,kc);nl(ie);Kk(ie);b=Ml();const Rd=(Ub=1===(null==bb?void 0:bb.length)&&bb[0])&&"handles"in Ub.props?null==bb?void 0:bb[0]:
void 0,Be=Is.useMemo(()=>new Set(bb||[]),[bb]),Ce=Is.useMemo(()=>new Set(pb||[]),[pb]);return(0,Jb.jsxs)("div",{ref:ie,className:`tl-container ${null!=g?g:""}`,children:[(0,Jb.jsxs)("div",rb(Wa({tabIndex:-1,className:"tl-absolute tl-canvas"},b),{children:[ae&&fd.Grid&&(0,Jb.jsx)(fd.Grid,{size:Gd}),(0,Jb.jsxs)(DD,{children:[fd.SelectionBackground&&bb&&Xa&&sc&&(0,Jb.jsx)(Fr,{"data-type":"SelectionBackground",bounds:Xa,zIndex:2,children:(0,Jb.jsx)(fd.SelectionBackground,{shapes:bb,bounds:Xa,showResizeHandles:rc,
showRotateHandles:Gc})}),K&&K.map((Ke,Bf)=>(0,Jb.jsx)(GD,{shape:Ke,asset:Z&&Ke.props.assetId?Z[Ke.props.assetId]:void 0,isEditing:Ke===ua,isHovered:Ke===Ia,isBinding:null==ia?void 0:ia.includes(Ke),isSelected:Be.has(Ke),isErasing:Ce.has(Ke),meta:$c,zIndex:1E3+Bf,onEditingEnd:qe},"shape_"+Ke.id)),!vd.isIn("select.pinching")&&(null==bb?void 0:bb.map(Ke=>(0,Jb.jsx)(Wy,{shape:Ke,isEditing:Ke===ua,isHovered:!1,isBinding:!1,isSelected:!0},"selected_indicator_"+Ke.id))),Ia&&vd.isInAny("creating")&&(0,Jb.jsx)(Wy,
{shape:Ia},"hovered_indicator_"+Ia.id),m&&fd.Brush&&(0,Jb.jsx)(fd.Brush,{bounds:m}),bb&&Xa&&(0,Jb.jsxs)(Jb.Fragment,{children:[sc&&fd.SelectionForeground&&(0,Jb.jsx)(Fr,{"data-type":"SelectionForeground",bounds:Xa,zIndex:ua&&bb.includes(ua)?1002:10002,children:(0,Jb.jsx)(fd.SelectionForeground,{shapes:bb,bounds:Xa,showResizeHandles:rc,showRotateHandles:Gc})}),lc&&Rd&&fd.Handle&&(0,Jb.jsx)(Fr,{"data-type":"onlySelectedShapeWithHandles",bounds:Xa,zIndex:10003,children:(0,Jb.jsx)(ro,{children:Object.entries(null!=
(df=Rd.props.handles)?df:{}).map(([Ke,Bf])=>Is.createElement(fd.Handle,{key:`${Bf.id}_handle_${Bf.id}`,shape:Rd,handle:Bf,id:Ke}))})}),bb&&fd.SelectionDetail&&(0,Jb.jsx)(FD,{shapes:bb,bounds:Xa,detail:Rb?"rotation":"size",hidden:!Cc,rotation:Mb},"detail"+bb.map(Ke=>Ke.id).join("")),bb&&fd.ContextBar&&(0,Jb.jsx)(ID,{shapes:bb,hidden:!Uc,bounds:1===bb.length?bb[0].bounds:Xa,rotation:1===bb.length?bb[0].props.rotation:0},"context"+bb.map(Ke=>Ke.id).join(""))]})]}),sb&&Xa&&bb&&(0,Jb.jsx)(Mv,{direction:sb,
bounds:Xa,shapes:bb}),(0,Jb.jsx)("div",{id:"tl-dev-tools-canvas-anchor"})]})),Fe]})}),lz=td(T(20)),mz=td(T(20));Jb=T(616);pf(function({children:b}){const g=mz.useRef(null),{viewport:m}=Rg();mz.useEffect(()=>ad(()=>{const K=g.current;if(K){var {zoom:Z,point:ia}=m.camera;K.style.setProperty("transform",`scale(${Z}) translateX(${ia[0]}px) translateY(${ia[1]}px)`)}}),[]);return(0,Jb.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,Jb.jsx)("g",{ref:g,pointerEvents:"none",
children:b})})});Jb=T(616);var YD=pf(function(b){const g=kk(b),m=tk(b.id);Zh(g,b);Ei(g,b);return(0,Jb.jsx)(m.Provider,{value:g,children:b.children})});Jb=T(616);var ZD=pf(function({id:b="noid",viewport:g,inputs:m,callbacks:K=Ao,meta:Z=Ao,components:ia=Ao,children:ua}){const [Ia,Xa]=lz.useState(()=>{const {Brush:pb,ContextBar:sb,DirectionIndicator:Ub,Grid:kc,Handle:Mb,SelectionBackground:sc,SelectionDetail:lc,SelectionForeground:Rb}=ia;return{id:b,viewport:g,inputs:m,callbacks:K,meta:Z,components:{Brush:null===
pb?void 0:Uy,ContextBar:sb,DirectionIndicator:null===Ub?void 0:Mv,Grid:null===kc?void 0:gz,Handle:null===Mb?void 0:jz,SelectionBackground:null===sc?void 0:hz,SelectionDetail:null===lc?void 0:Ty,SelectionForeground:null===Rb?void 0:iz}}});lz.useLayoutEffect(()=>{const {Brush:pb,ContextBar:sb,DirectionIndicator:Ub,Grid:kc,Handle:Mb,SelectionBackground:sc,SelectionDetail:lc,SelectionForeground:Rb}=ia;return ad(()=>{Xa({id:b,viewport:g,inputs:m,callbacks:K,meta:Z,components:{Brush:null===pb?void 0:Uy,
ContextBar:sb,DirectionIndicator:null===Ub?void 0:Mv,Grid:null===kc?void 0:gz,Handle:null===Mb?void 0:jz,SelectionBackground:null===sc?void 0:hz,SelectionDetail:null===lc?void 0:Ty,SelectionForeground:null===Rb?void 0:iz}})})},[]);const bb=qg(b);return(0,Jb.jsx)(bb.Provider,{value:Ia,children:ua})});Jb=T(616);Jb=T(616);var $D=pf(function(b){const g=dg();return(0,Jb.jsx)(qm,Wa({viewport:g.viewport,inputs:g.inputs,callbacks:g._events,brush:g.brush,editingShape:g.editingShape,hoveredShape:g.hoveredShape,
bindingShapes:g.bindingShapes,selectionDirectionHint:g.selectionDirectionHint,selectionBounds:g.selectionBounds,selectedShapes:g.selectedShapesArray,erasingShapes:g.erasingShapesArray,shapes:g.shapes,assets:g.assets,showGrid:g.settings.showGrid,showSelection:g.showSelection,showSelectionRotation:g.showSelectionRotation,showResizeHandles:g.showResizeHandles,showRotateHandles:g.showRotateHandles,showSelectionDetail:g.showSelectionDetail,showContextBar:g.showContextBar,cursor:g.cursors.cursor,cursorRotation:g.cursors.rotation,
selectionRotation:g.selectionRotation,onEditingEnd:g.clearEditingState},b))});Jb=T(616);var St=td(T(20)),Nt=td(T(20));Jb=T(616);Jb=T(616);var KD="object-compact object-expanded block block-search page page-search references-hide references-show whiteboard whiteboard-element select-cursor text connector".split(" "),Bi=b=>{var {name:g,className:m}=b;b=Yb(b,["name","className"]);const K=KD.includes(g)?"tie tie-":"ti ti-";return(0,Jb.jsx)("i",Wa({className:[K+g,m].join(" ")},b))};Jb=T(616);var qo=T(20),
ND=T(20),Io=T(20),Ot=T(20),Kv=T(20),Lv=T(20),MD=T(29),Hm=T(20),Gr=(0,Hm.forwardRef)((b,g)=>{var {children:m}=b;b=Yb(b,["children"]);const K=Hm.Children.toArray(m),Z=K.find($k);if(Z){const ia=Z.props.children;m=K.map(ua=>ua===Z?1<Hm.Children.count(ia)?Hm.Children.only(null):(0,Hm.isValidElement)(ia)?ia.props.children:null:ua);return(0,Hm.createElement)(Jv,hf({},b,{ref:g}),(0,Hm.isValidElement)(ia)?(0,Hm.cloneElement)(ia,void 0,m):null)}return(0,Hm.createElement)(Jv,hf({},b,{ref:g}),m)});Gr.displayName=
"Slot";var Jv=(0,Hm.forwardRef)((b,g)=>{const {children:m}=b;b=Yb(b,["children"]);return(0,Hm.isValidElement)(m)?(0,Hm.cloneElement)(m,rb(Wa({},zj(b,m.props)),{ref:Si(g,m.ref)})):1<Hm.Children.count(m)?Hm.Children.only(null):null});Jv.displayName="SlotClone";var LD=({children:b})=>(0,Hm.createElement)(Hm.Fragment,null,b),gl="a button div h2 h3 img li nav ol p span svg ul".split(" ").reduce((b,g)=>{const m=(0,Lv.forwardRef)((K,Z)=>{var {asChild:ia}=K;K=Yb(K,["asChild"]);ia=ia?Gr:g;(0,Lv.useEffect)(()=>
{window[Symbol.for("radix-ui")]=!0},[]);return(0,Lv.createElement)(ia,hf({},K,{ref:Z}))});m.displayName=`Primitive.${g}`;return rb(Wa({},b),{[g]:m})},{}),Og=T(20),ep=td(T(20)),nz=T(20),aE=(0,nz.createContext)(void 0),Gn=T(20),bE=T(20),oz,cE=(0,Gn.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pz=(0,Gn.forwardRef)((b,g)=>{const {disableOutsidePointerEvents:m=!1,onEscapeKeyDown:K,onPointerDownOutside:Z,onFocusOutside:ia,onInteractOutside:ua,onDismiss:Ia}=
b,Xa=Yb(b,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),bb=(0,Gn.useContext)(cE),[pb,sb]=(0,Gn.useState)(null),[,Ub]=(0,Gn.useState)({});g=Wg(g,rc=>sb(rc));var kc=Array.from(bb.layers),[Mb]=[...bb.layersWithOutsidePointerEventsDisabled].slice(-1);Mb=kc.indexOf(Mb);const sc=pb?kc.indexOf(pb):-1;kc=0<bb.layersWithOutsidePointerEventsDisabled.size;const lc=sc>=Mb;Mb=fg(rc=>{const Gc=rc.target,Cc=[...bb.branches].some(Uc=>Uc.contains(Gc));
lc&&!Cc&&(null===Z||void 0===Z||Z(rc),null===ua||void 0===ua||ua(rc),rc.defaultPrevented||null===Ia||void 0===Ia||Ia())});const Rb=sm(rc=>{const Gc=rc.target;[...bb.branches].some(Cc=>Cc.contains(Gc))||(null===ia||void 0===ia||ia(rc),null===ua||void 0===ua||ua(rc),rc.defaultPrevented||null===Ia||void 0===Ia||Ia())});em(rc=>{sc===bb.layers.size-1&&(null===K||void 0===K||K(rc),!rc.defaultPrevented&&Ia&&(rc.preventDefault(),Ia()))});(0,Gn.useEffect)(()=>{if(pb)return m&&(0===bb.layersWithOutsidePointerEventsDisabled.size&&
(oz=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),bb.layersWithOutsidePointerEventsDisabled.add(pb)),bb.layers.add(pb),jj(),()=>{m&&1===bb.layersWithOutsidePointerEventsDisabled.size&&(document.body.style.pointerEvents=oz)}},[pb,m,bb]);(0,Gn.useEffect)(()=>()=>{pb&&(bb.layers.delete(pb),bb.layersWithOutsidePointerEventsDisabled.delete(pb),jj())},[pb,bb]);(0,Gn.useEffect)(()=>{const rc=()=>Ub({});document.addEventListener("dismissableLayer.update",rc);return()=>document.removeEventListener("dismissableLayer.update",
rc)},[]);return(0,Gn.createElement)(gl.div,hf({},Xa,{ref:g,style:Wa({pointerEvents:kc?lc?"auto":"none":void 0},b.style),onFocusCapture:Of(b.onFocusCapture,Rb.onFocusCapture),onBlurCapture:Of(b.onBlurCapture,Rb.onBlurCapture),onPointerDownCapture:Of(b.onPointerDownCapture,Mb.onPointerDownCapture)}))}),dE=T(20),Nv=0,Zp=T(20),qz={bubbles:!1,cancelable:!0},rz=(0,Zp.forwardRef)((b,g)=>{const {loop:m=!1,trapped:K=!1,onMountAutoFocus:Z,onUnmountAutoFocus:ia}=b;b=Yb(b,["loop","trapped","onMountAutoFocus",
"onUnmountAutoFocus"]);const [ua,Ia]=(0,Zp.useState)(null),Xa=Ti(Z),bb=Ti(ia),pb=(0,Zp.useRef)(null);g=Wg(g,kc=>Ia(kc));const sb=(0,Zp.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Zp.useEffect)(()=>{if(K){let kc=function(sc){!sb.paused&&ua&&(sc=sc.target,ua.contains(sc)?pb.current=sc:wf(pb.current,{select:!0}))},Mb=function(sc){!sb.paused&&ua&&(ua.contains(sc.relatedTarget)||wf(pb.current,{select:!0}))};document.addEventListener("focusin",kc);document.addEventListener("focusout",
Mb);return()=>{document.removeEventListener("focusin",kc);document.removeEventListener("focusout",Mb)}}},[K,ua,sb.paused]);(0,Zp.useEffect)(()=>{if(ua){sz.add(sb);const kc=document.activeElement;if(!ua.contains(kc)){const Mb=new CustomEvent("focusScope.autoFocusOnMount",qz);ua.addEventListener("focusScope.autoFocusOnMount",Xa);ua.dispatchEvent(Mb);Mb.defaultPrevented||(al(Lj(gg(ua)),{select:!0}),document.activeElement===kc&&wf(ua))}return()=>{ua.removeEventListener("focusScope.autoFocusOnMount",Xa);
setTimeout(()=>{const Mb=new CustomEvent("focusScope.autoFocusOnUnmount",qz);ua.addEventListener("focusScope.autoFocusOnUnmount",bb);ua.dispatchEvent(Mb);Mb.defaultPrevented||wf(null!==kc&&void 0!==kc?kc:document.body,{select:!0});ua.removeEventListener("focusScope.autoFocusOnUnmount",bb);sz.remove(sb)},0)}}},[ua,Xa,bb,sb]);const Ub=(0,Zp.useCallback)(kc=>{if((m||K)&&!sb.paused){var Mb=document.activeElement;if("Tab"===kc.key&&!kc.altKey&&!kc.ctrlKey&&!kc.metaKey&&Mb){const lc=kc.currentTarget;var sc=
lc;const Rb=gg(sc),rc=Wi(Rb,sc);sc=Wi(Rb.reverse(),sc);const [Gc,Cc]=[rc,sc];Gc&&Cc?kc.shiftKey||Mb!==Cc?kc.shiftKey&&Mb===Gc&&(kc.preventDefault(),m&&wf(Cc,{select:!0})):(kc.preventDefault(),m&&wf(Gc,{select:!0})):Mb===lc&&kc.preventDefault()}}},[m,K,sb.paused]);return(0,Zp.createElement)(gl.div,hf({tabIndex:-1},b,{ref:g,onKeyDown:Ub}))}),sz=function(){let b=[];return{add(g){const m=b[0];g===m||null!==m&&void 0!==m&&m.pause();b=nk(b,g);b.unshift(g)},remove(g){var m;b=nk(b,g);null===(m=b[0])||void 0===
m||m.resume()}}}(),tz=td(T(20)),eE=T(20),an=(null===globalThis||void 0===globalThis?0:globalThis.document)?eE.useLayoutEffect:()=>{},fE=tz["useId".toString()]||(()=>{}),gE=0,Im=T(20),hE=(b,g,m)=>wa(void 0,null,function*(){const {placement:K="bottom",strategy:Z="absolute",middleware:ia=[],platform:ua}=m,Ia=yield null==ua.isRTL?void 0:ua.isRTL(g);let Xa=yield ua.getElementRects({reference:b,floating:g,strategy:Z}),{x:bb,y:pb}=Bj(Xa,K,Ia),sb=K,Ub={},kc=0;for(let Mb=0;Mb<ia.length;Mb++){const {name:sc,
fn:lc}=ia[Mb],{x:Rb,y:rc,data:Gc,reset:Cc}=yield lc({x:bb,y:pb,initialPlacement:K,placement:sb,strategy:Z,middlewareData:Ub,rects:Xa,platform:ua,elements:{reference:b,floating:g}});bb=null!=Rb?Rb:bb;pb=null!=rc?rc:pb;Ub=rb(Wa({},Ub),{[sc]:Wa(Wa({},Ub[sc]),Gc)});Cc&&50>=kc&&(kc++,"object"==typeof Cc&&(Cc.placement&&(sb=Cc.placement),Cc.rects&&(Xa=!0===Cc.rects?yield ua.getElementRects({reference:b,floating:g,strategy:Z}):Cc.rects),{x:bb,y:pb}=Bj(Xa,sb,Ia)),Mb=-1)}return{x:bb,y:pb,placement:sb,strategy:Z,
middlewareData:Ub}}),Ov=Math.min,Pv=Math.max,uz=b=>({name:"arrow",options:b,fn(g){return wa(this,null,function*(){const {element:m,padding:K=0}=null!=b?b:{},{x:Z,y:ia,placement:ua,rects:Ia,platform:Xa}=g;if(null==m)return{};const bb=vl(K),pb={x:Z,y:ia},sb=Ol(ua),Ub=ua.split("-")[1],kc=Mi(sb);var Mb=yield Xa.getDimensions(m);const sc="y"===sb?"top":"left",lc="y"===sb?"bottom":"right";var Rb=Ia.reference[kc]+Ia.reference[sb]-pb[sb]-Ia.floating[kc];const rc=pb[sb]-Ia.reference[sb];var Gc=yield null==
Xa.getOffsetParent?void 0:Xa.getOffsetParent(m);let Cc=Gc?"y"===sb?Gc.clientHeight||0:Gc.clientWidth||0:0;0===Cc&&(Cc=Ia.floating[kc]);Gc=bb[sc];const Uc=Cc-Mb[kc]-bb[lc];Mb=Cc/2-Mb[kc]/2+(Rb/2-rc/2);Rb=Pv(Gc,Ov(Mb,Uc));return{[sb]:pb[sb]-(0<("start"===Ub?bb[sc]:bb[lc])&&Mb!==Rb&&Ia.reference[kc]<=Ia.floating[kc]?Mb<Gc?Gc-Mb:Uc-Mb:0),data:{[sb]:Rb,centerOffset:Mb-Rb}}})}}),iE={left:"right",right:"left",bottom:"top",top:"bottom"},jE={start:"end",end:"start"},vz=["top","right","bottom","left"];vz.reduce((b,
g)=>b.concat(g,g+"-start",g+"-end"),[]);var wz=function(b){return void 0===b&&(b={}),{name:"flip",options:b,fn(g){return wa(this,null,function*(){var m;const {placement:K,middlewareData:Z,rects:ia,initialPlacement:ua,platform:Ia,elements:Xa}=g;var bb=b;const {mainAxis:pb=!0,crossAxis:sb=!0,fallbackPlacements:Ub,fallbackStrategy:kc="bestFit",flipAlignment:Mb=!0}=bb;bb=Yb(bb,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const sc=Mj(K);var lc=Ub||(sc!==ua&&Mb?function(ae){const Gd=
tm(ae);return[Yl(ae),Gd,Yl(Gd)]}(ua):[tm(ua)]);lc=[ua,...lc];const Rb=yield Qk(g,bb),rc=[];bb=(null==(m=Z.flip)?void 0:m.overflows)||[];if(pb&&rc.push(Rb[sc]),sb){const {main:ae,cross:Gd}=Cn(K,ia,yield null==Ia.isRTL?void 0:Ia.isRTL(Xa.floating));rc.push(Rb[ae],Rb[Gd])}if(bb=[...bb,{placement:K,overflows:rc}],!rc.every(ae=>0>=ae)){var Gc,Cc;m=(null!=(Gc=null==(Cc=Z.flip)?void 0:Cc.index)?Gc:0)+1;if(Gc=lc[m])return{data:{index:m,overflows:bb},reset:{placement:Gc}};Gc="bottom";switch(kc){case "bestFit":var Uc;
(Cc=null==(Uc=bb.map(ae=>[ae,ae.overflows.filter(Gd=>0<Gd).reduce((Gd,qe)=>Gd+qe,0)]).sort((ae,Gd)=>ae[1]-Gd[1])[0])?void 0:Uc[0].placement)&&(Gc=Cc);break;case "initialPlacement":Gc=ua}if(K!==Gc)return{reset:{placement:Gc}}}return{}})}}},xz=function(b){b=void 0===b?{}:b;let {strategy:g="referenceHidden"}=b,m=Yb(b,["strategy"]);return{name:"hide",fn(K){return wa(this,null,function*(){var {rects:Z}=K;switch(g){case "referenceHidden":return Z=Dm(yield Qk(K,rb(Wa({},m),{elementContext:"reference"})),
Z.reference),{data:{referenceHiddenOffsets:Z,referenceHidden:bl(Z)}};case "escaped":return Z=Dm(yield Qk(K,rb(Wa({},m),{altBoundary:!0})),Z.floating),{data:{escapedOffsets:Z,escaped:bl(Z)}};default:return{}}})}}},yz=function(b){return void 0===b&&(b=0),{name:"offset",options:b,fn(g){return wa(this,null,function*(){const {x:m,y:K}=g,Z=yield function(ia,ua){return wa(this,null,function*(){const {placement:Ia,platform:Xa,elements:bb}=ia;var pb=yield null==Xa.isRTL?void 0:Xa.isRTL(bb.floating),sb=Mj(Ia);
const Ub=Ia.split("-")[1],kc="x"===Ol(Ia);sb=["left","top"].includes(sb)?-1:1;pb=pb&&kc?-1:1;const Mb="function"==typeof ua?ua(ia):ua;let {mainAxis:sc,crossAxis:lc,alignmentAxis:Rb}="number"==typeof Mb?{mainAxis:Mb,crossAxis:0,alignmentAxis:null}:Wa({mainAxis:0,crossAxis:0,alignmentAxis:null},Mb);return Ub&&"number"==typeof Rb&&(lc="end"===Ub?-1*Rb:Rb),kc?{x:lc*pb,y:sc*sb}:{x:sc*sb,y:lc*pb}})}(g,b);return{x:m+Z.x,y:K+Z.y,data:Z}})}}},zz=function(b){return void 0===b&&(b={}),{name:"shift",options:b,
fn(g){return wa(this,null,function*(){const {x:m,y:K,placement:Z}=g;var ia=b;const {mainAxis:ua=!0,crossAxis:Ia=!1,limiter:Xa={fn:kc=>{let {x:Mb,y:sc}=kc;return{x:Mb,y:sc}}}}=ia;var bb=Yb(ia,["mainAxis","crossAxis","limiter"]);ia={x:m,y:K};bb=yield Qk(g,bb);const pb=Ol(Mj(Z)),sb="x"===pb?"y":"x";let Ub=ia[pb];ia=ia[sb];ua&&(Ub=Pv(Ub+bb["y"===pb?"top":"left"],Ov(Ub,Ub-bb["y"===pb?"bottom":"right"])));Ia&&(ia=Pv(ia+bb["y"===sb?"top":"left"],Ov(ia,ia-bb["y"===sb?"bottom":"right"])));ia=Xa.fn(rb(Wa({},
g),{[pb]:Ub,[sb]:ia}));return rb(Wa({},ia),{data:{x:ia.x-m,y:ia.y-K}})})}}},Az=function(b){return void 0===b&&(b={}),{options:b,fn(g){const {x:m,y:K,placement:Z,rects:ia,middlewareData:ua}=g,{offset:Ia=0,mainAxis:Xa=!0,crossAxis:bb=!0}=b;var pb={x:m,y:K};g=Ol(Z);const sb="x"===g?"y":"x";let Ub=pb[g];pb=pb[sb];var kc="function"==typeof Ia?Ia(rb(Wa({},ia),{placement:Z})):Ia;kc="number"==typeof kc?{mainAxis:kc,crossAxis:0}:Wa({mainAxis:0,crossAxis:0},kc);if(Xa){var Mb="y"===g?"height":"width",sc=ia.reference[g]-
ia.floating[Mb]+kc.mainAxis;Mb=ia.reference[g]+ia.reference[Mb]-kc.mainAxis;Ub<sc?Ub=sc:Ub>Mb&&(Ub=Mb)}if(bb){var lc,Rb,rc,Gc;const Cc="y"===g?"width":"height";sc=["top","left"].includes(Mj(Z));Mb=ia.reference[sb]-ia.floating[Cc]+(sc&&null!=(lc=null==(Rb=ua.offset)?void 0:Rb[sb])?lc:0)+(sc?0:kc.crossAxis);lc=ia.reference[sb]+ia.reference[Cc]+(sc?0:null!=(rc=null==(Gc=ua.offset)?void 0:Gc[sb])?rc:0)-(sc?kc.crossAxis:0);pb<Mb?pb=Mb:pb>lc&&(pb=lc)}return{[g]:Ub,[sb]:pb}}}},Bz=Math.min,Ls=Math.max,Tt=
Math.round,kE={getClippingRect:function(b){let {element:g,boundary:m,rootBoundary:K,strategy:Z}=b;b=[...("clippingAncestors"===m?zh(g):[].concat(m)),K];b=b.reduce((ia,ua)=>{ua=uk(g,ua,Z);return ia.top=Ls(ua.top,ia.top),ia.right=Bz(ua.right,ia.right),ia.bottom=Bz(ua.bottom,ia.bottom),ia.left=Ls(ua.left,ia.left),ia},uk(g,b[0],Z));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(b){let {rect:g,offsetParent:m,strategy:K}=
b;var Z=Dj(m);const ia=Ck(m);if(m===ia)return g;b={scrollLeft:0,scrollTop:0};var ua=0,Ia=0;(Z||!Z&&"fixed"!==K)&&(("body"!==Xi(m)||el(ia))&&(b=Dk(m)),Dj(m))&&(Z=Mk(m,!0),ua=Z.x+m.clientLeft,Ia=Z.y+m.clientTop);return rb(Wa({},g),{x:g.x-b.scrollLeft+ua,y:g.y-b.scrollTop+Ia})},isElement:Cj,getDimensions:Kh,getOffsetParent:ck,getDocumentElement:Ck,getElementRects:b=>{let {reference:g,floating:m,strategy:K}=b;b=ck(m);var Z=Dj(b);const ia=Ck(b);var ua;if(ua=Z)ua=Mk(b),ua=Tt(ua.width)!==b.offsetWidth||
Tt(ua.height)!==b.offsetHeight;ua=Mk(g,ua,"fixed"===K);let Ia={scrollLeft:0,scrollTop:0};var Xa=0,bb=0;if(Z||!Z&&"fixed"!==K)(("body"!==Xi(b)||el(ia))&&(Ia=Dk(b)),Dj(b))?(Z=Mk(b,!0),Xa=Z.x+b.clientLeft,bb=Z.y+b.clientTop):ia&&(Xa=Lk(ia));return{reference:{x:ua.left+Ia.scrollLeft-Xa,y:ua.top+Ia.scrollTop-bb,width:ua.width,height:ua.height},floating:rb(Wa({},Kh(m)),{x:0,y:0})}},getClientRects:b=>Array.from(b.getClientRects()),isRTL:b=>"rtl"===bk(b).direction},lE=(b,g,m)=>hE(b,g,Wa({platform:kE},m)),
Xn=td(T(20),1),Cz=T(20),mE=td(T(29),1),Qv="undefined"!==typeof document?Cz.useLayoutEffect:Cz.useEffect,Dz=b=>{const {element:g,padding:m}=b;return{name:"arrow",options:b,fn(K){if(Object.prototype.hasOwnProperty.call(g,"current")){if(null!=g.current)return uz({element:g.current,padding:m}).fn(K)}else if(g)return uz({element:g,padding:m}).fn(K);return{}}}},nE=T(20),[Rv,Ez]=yi("Popper"),[oE,Fz]=Rv("Popper"),pE=(0,Im.forwardRef)((b,g)=>{const {__scopePopper:m,virtualRef:K}=b;b=Yb(b,["__scopePopper",
"virtualRef"]);const Z=Fz("PopperAnchor",m),ia=(0,Im.useRef)(null);g=Wg(g,ia);(0,Im.useEffect)(()=>{Z.onAnchorChange((null===K||void 0===K?void 0:K.current)||ia.current)});return K?null:(0,Im.createElement)(gl.div,hf({},b,{ref:g}))}),[qE]=Rv("PopperContent"),[rE,sE]=Rv("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),tE=(0,Im.forwardRef)((b,g)=>{var m,K,Z,ia,ua,Ia,Xa,bb;const {__scopePopper:pb,side:sb="bottom",sideOffset:Ub=0,align:kc="center",alignOffset:Mb=0,arrowPadding:sc=0,collisionBoundary:lc=
[],collisionPadding:Rb=0,sticky:rc="partial",hideWhenDetached:Gc=!1,avoidCollisions:Cc=!0}=b;b=Yb(b,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Uc=Fz("PopperContent",pb),[ae,Gd]=(0,Im.useState)(null);g=Wg(g,jp=>Gd(jp));const [qe,cf]=(0,Im.useState)(null);var Fe=Ni(qe),df=null!==(m=null===Fe||void 0===Fe?void 0:Fe.width)&&void 0!==m?m:0;m=null!==(K=null===Fe||void 0===Fe?void 0:Fe.height)&&
void 0!==K?K:0;K=sb+("center"!==kc?"-"+kc:"");Fe="number"===typeof Rb?Rb:Wa({top:0,right:0,bottom:0,left:0},Rb);const ie=Array.isArray(lc)?lc:[lc],Id=0<ie.length;Fe={padding:Fe,boundary:ie.filter(Yi),altBoundary:Id};const {reference:fd,floating:$c,strategy:vd,x:Md,y:Rd,placement:Be,middlewareData:Ce,update:Ke}=Jh({strategy:"fixed",placement:K,whileElementsMounted:ch,middleware:[yz({mainAxis:Ub+m,alignmentAxis:Mb}),Cc?zz(Wa({mainAxis:!0,crossAxis:!1,limiter:"partial"===rc?Az():void 0},Fe)):void 0,
qe?Dz({element:qe,padding:sc}):void 0,Cc?wz(Wa({},Fe)):void 0,uE({arrowWidth:df,arrowHeight:m}),Gc?xz({strategy:"referenceHidden"}):void 0].filter(rg)});an(()=>{fd(Uc.anchor)},[fd,Uc.anchor]);const Bf=null!==Md&&null!==Rd,[sf,bh]=Mf(Be);df=null===(Z=Ce.arrow)||void 0===Z?void 0:Z.x;Z=null===(ia=Ce.arrow)||void 0===ia?void 0:ia.y;ia=0!==(null===(ua=Ce.arrow)||void 0===ua?void 0:ua.centerOffset);const [Pg,ni]=(0,Im.useState)();an(()=>{ae&&ni(window.getComputedStyle(ae).zIndex)},[ae]);const {hasParent:rk,
positionUpdateFns:vj}=sE("PopperContent",pb),Nm=!rk;(0,Im.useLayoutEffect)(()=>{if(!Nm)return vj.add(Ke),()=>{vj.delete(Ke)}},[Nm,vj,Ke]);(0,Im.useLayoutEffect)(()=>{Nm&&Bf&&Array.from(vj).reverse().forEach(jp=>requestAnimationFrame(jp))},[Nm,Bf,vj]);ua=rb(Wa({"data-side":sf,"data-align":bh},b),{ref:g,style:rb(Wa({},b.style),{animation:Bf?void 0:"none",opacity:null!==(Ia=Ce.hide)&&void 0!==Ia&&Ia.referenceHidden?0:void 0})});return(0,Im.createElement)("div",{ref:$c,"data-radix-popper-content-wrapper":"",
style:{position:vd,left:0,top:0,transform:Bf?`translate3d(${Math.round(Md)}px, ${Math.round(Rd)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Pg,["--radix-popper-transform-origin"]:[null===(Xa=Ce.transformOrigin)||void 0===Xa?void 0:Xa.x,null===(bb=Ce.transformOrigin)||void 0===bb?void 0:bb.y].join(" ")}},(0,Im.createElement)(qE,{scope:pb,placedSide:sf,onArrowChange:cf,arrowX:df,arrowY:Z,shouldHideArrow:ia},Nm?(0,Im.createElement)(rE,{scope:pb,hasParent:!0,positionUpdateFns:vj},
(0,Im.createElement)(gl.div,ua)):(0,Im.createElement)(gl.div,ua)))}),uE=b=>({name:"transformOrigin",options:b,fn(g){var m,K,Z,ia,ua;const {placement:Ia,rects:Xa,middlewareData:bb}=g,pb=(g=0!==(null===(m=bb.arrow)||void 0===m?void 0:m.centerOffset))?0:b.arrowWidth;m=g?0:b.arrowHeight;const [sb,Ub]=Mf(Ia),kc={start:"0%",center:"50%",end:"100%"}[Ub],Mb=(null!==(K=null===(Z=bb.arrow)||void 0===Z?void 0:Z.x)&&void 0!==K?K:0)+pb/2;K=(null!==(ia=null===(ua=bb.arrow)||void 0===ua?void 0:ua.y)&&void 0!==ia?
ia:0)+m/2;ua=ia="";"bottom"===sb?(ia=g?kc:`${Mb}px`,ua=`${-m}px`):"top"===sb?(ia=g?kc:`${Mb}px`,ua=`${Xa.floating.height+m}px`):"right"===sb?(ia=`${-m}px`,ua=g?kc:`${K}px`):"left"===sb&&(ia=`${Xa.floating.width+m}px`,ua=g?kc:`${K}px`);return{data:{x:ia,y:ua}}}}),vE=b=>{const {__scopePopper:g,children:m}=b,[K,Z]=(0,Im.useState)(null);return(0,Im.createElement)(oE,{scope:g,anchor:K,onAnchorChange:Z},m)},Gz=T(20),wE=td(T(29)),Hz=(0,Gz.forwardRef)((b,g)=>{var m;const {container:K=null===globalThis||void 0===
globalThis?void 0:null===(m=globalThis.document)||void 0===m?void 0:m.body}=b;b=Yb(b,["container"]);return K?wE.default.createPortal((0,Gz.createElement)(gl.div,hf({},b,{ref:g})),K):null}),fp=T(20),Iz=T(29),Sv=b=>{const {present:g,children:m}=b;b=uj(g);const K="function"===typeof m?m({present:b.isPresent}):fp.Children.only(m),Z=Wg(b.ref,K.ref);return"function"===typeof m||b.isPresent?(0,fp.cloneElement)(K,{ref:Z}):null};Sv.displayName="Presence";var bn=T(20),xE={bubbles:!1,cancelable:!0},[Tv,Jz,yE]=
mk("RovingFocusGroup"),[zE,Ut]=yi("RovingFocusGroup",[yE]),[AE,BE]=zE("RovingFocusGroup"),Kz=(0,bn.forwardRef)((b,g)=>(0,bn.createElement)(Tv.Provider,{scope:b.__scopeRovingFocusGroup},(0,bn.createElement)(Tv.Slot,{scope:b.__scopeRovingFocusGroup},(0,bn.createElement)(CE,hf({},b,{ref:g}))))),CE=(0,bn.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:m,orientation:K,loop:Z=!1,dir:ia,currentTabStopId:ua,defaultCurrentTabStopId:Ia,onCurrentTabStopIdChange:Xa,onEntryFocus:bb}=b,pb=Yb(b,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),
sb=(0,bn.useRef)(null);g=Wg(g,sb);const Ub=Aj(ia),[kc=null,Mb]=Lg({prop:ua,defaultProp:Ia,onChange:Xa}),[sc,lc]=(0,bn.useState)(!1),Rb=Ti(bb),rc=Jz(m),Gc=(0,bn.useRef)(!1);(0,bn.useEffect)(()=>{const Cc=sb.current;if(Cc)return Cc.addEventListener("rovingFocusGroup.onEntryFocus",Rb),()=>Cc.removeEventListener("rovingFocusGroup.onEntryFocus",Rb)},[Rb]);return(0,bn.createElement)(AE,{scope:m,orientation:K,dir:Ub,loop:Z,currentTabStopId:kc,onItemFocus:(0,bn.useCallback)(Cc=>Mb(Cc),[Mb]),onItemShiftTab:(0,bn.useCallback)(()=>
lc(!0),[])},(0,bn.createElement)(gl.div,hf({tabIndex:sc?-1:0,"data-orientation":K},pb,{ref:g,style:Wa({outline:"none"},b.style),onMouseDown:Of(b.onMouseDown,()=>{Gc.current=!0}),onFocus:Of(b.onFocus,Cc=>{var Uc=!Gc.current;if(Cc.target===Cc.currentTarget&&Uc&&!sc&&(Uc=new CustomEvent("rovingFocusGroup.onEntryFocus",xE),Cc.currentTarget.dispatchEvent(Uc),!Uc.defaultPrevented)){Cc=rc().filter(Gd=>Gd.focusable);Uc=Cc.find(Gd=>Gd.active);const ae=Cc.find(Gd=>Gd.id===kc);Cc=[Uc,ae,...Cc].filter(Boolean).map(Gd=>
Gd.ref.current);kg(Cc)}Gc.current=!1}),onBlur:Of(b.onBlur,()=>lc(!1))})))}),Lz=(0,bn.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:m,focusable:K=!0,active:Z=!1}=b,ia=Yb(b,["__scopeRovingFocusGroup","focusable","active"]),ua=xk(),Ia=BE("RovingFocusGroupItem",m),Xa=Ia.currentTabStopId===ua,bb=Jz(m);return(0,bn.createElement)(Tv.ItemSlot,{scope:m,id:ua,focusable:K,active:Z},(0,bn.createElement)(gl.span,hf({tabIndex:Xa?0:-1,"data-orientation":Ia.orientation},ia,{ref:g,onMouseDown:Of(b.onMouseDown,
pb=>{if(K)Ia.onItemFocus(ua);else pb.preventDefault()}),onFocus:Of(b.onFocus,()=>Ia.onItemFocus(ua)),onKeyDown:Of(b.onKeyDown,pb=>{if("Tab"===pb.key&&pb.shiftKey)Ia.onItemShiftTab();else if(pb.target===pb.currentTarget){var sb=kh(pb,Ia.orientation,Ia.dir);if(void 0!==sb){pb.preventDefault();let Ub=bb().filter(kc=>kc.focusable).map(kc=>kc.ref.current);if("last"===sb)Ub.reverse();else if("prev"===sb||"next"===sb)"prev"===sb&&Ub.reverse(),pb=Ub.indexOf(pb.currentTarget),Ub=Ia.loop?ph(Ub,pb+1):Ub.slice(pb+
1);setTimeout(()=>kg(Ub))}}})})))}),DE={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},EE=function(b){return"undefined"===typeof document?null:(Array.isArray(b)?b[0]:b).ownerDocument.body},Ir=new WeakMap,Vt=new WeakMap,Wt={},Uv=0,Vv=function(b,g,m){void 0===g&&(g=EE(b));void 0===m&&(m="data-aria-hidden");var K=Array.isArray(b)?b:[b];Wt[m]||(Wt[m]=new WeakMap);var Z=Wt[m],ia=[],ua=new Set,Ia=function(bb){bb&&!ua.has(bb)&&(ua.add(bb),
Ia(bb.parentNode))};K.forEach(Ia);var Xa=function(bb){!bb||0<=K.indexOf(bb)||Array.prototype.forEach.call(bb.children,function(pb){if(ua.has(pb))Xa(pb);else{var sb=pb.getAttribute("aria-hidden");sb=null!==sb&&"false"!==sb;var Ub=(Ir.get(pb)||0)+1,kc=(Z.get(pb)||0)+1;Ir.set(pb,Ub);Z.set(pb,kc);ia.push(pb);1===Ub&&sb&&Vt.set(pb,!0);1===kc&&pb.setAttribute(m,"true");sb||pb.setAttribute("aria-hidden","true")}})};Xa(g);ua.clear();Uv++;return function(){ia.forEach(function(bb){var pb=Ir.get(bb)-1,sb=Z.get(bb)-
1;Ir.set(bb,pb);Z.set(bb,sb);pb||(Vt.has(bb)||bb.removeAttribute("aria-hidden"),Vt.delete(bb));sb||bb.removeAttribute(m)});Uv--;Uv||(Ir=new WeakMap,Ir=new WeakMap,Vt=new WeakMap,Wt={})}},FE=td(pd(),1),{__assign:Hn,__rest:Wv,__spreadArray:Mz}=FE.default,Nz=td(T(20)),xp=td(T(20)),GE=T(20),HE=td(T(20)),Xv=function(b){var g=b.sideCar;b=Wv(b,["sideCar"]);if(!g)throw Error("Sidecar: please provide `sideCar` property to import the right car");g=g.read();if(!g)throw Error("Sidecar medium not found");return HE.createElement(g,
Hn({},b))};Xv.isSideCarExport=!0;var Oz=dc(),Yv=function(){},Xt=xp.forwardRef(function(b,g){var m=xp.useRef(null),K=xp.useState({onScrollCapture:Yv,onWheelCapture:Yv,onTouchMoveCapture:Yv}),Z=K[0];K=K[1];var ia=b.forwardProps,ua=b.children,Ia=b.className,Xa=b.removeScrollBar,bb=b.enabled,pb=b.shards,sb=b.sideCar,Ub=b.noIsolation,kc=b.inert,Mb=b.allowPinchZoom,sc=b.as;sc=void 0===sc?"div":sc;b=Wv(b,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));
g=ti([m,g]);Z=Hn(Hn({},b),Z);return xp.createElement(xp.Fragment,null,bb&&xp.createElement(sb,{sideCar:Oz,removeScrollBar:Xa,shards:pb,noIsolation:Ub,inert:kc,setCallbacks:K,allowPinchZoom:!!Mb,lockRef:m}),ia?xp.cloneElement(xp.Children.only(ua),Hn(Hn({},Z),{ref:g})):xp.createElement(sc,Hn({},Z,{className:Ia,ref:g}),ua))});Xt.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xt.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var jm=td(T(20)),Pz=td(T(20)),
IE=td(T(20)),JE=function(){var b=0,g=null;return{add:function(m){if(0==b){if(document){var K=document.createElement("style");K.type="text/css";var Z="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;Z&&K.setAttribute("nonce",Z)}else K=null;if(g=K)K=g,K.styleSheet?K.styleSheet.cssText=m:K.appendChild(document.createTextNode(m)),m=g,(document.head||document.getElementsByTagName("head")[0]).appendChild(m)}b++},remove:function(){b--;!b&&g&&(g.parentNode&&g.parentNode.removeChild(g),g=null)}}},
KE=function(){var b=JE();return function(g,m){IE.useEffect(function(){b.add(g);return function(){b.remove()}},[g&&m])}},Zv=function(){var b=KE();return function(g){b(g.styles,g.dynamic);return null}},LE={left:0,top:0,right:0,gap:0},ME=Zv(),NE=function(b,g,m,K){var Z=b.left,ia=b.top,ua=b.right;b=b.gap;void 0===m&&(m="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(K,";\n   padding-right: ").concat(b,"px ").concat(K,";\n  }\n  body {\n    overflow: hidden ").concat(K,
";\n    overscroll-behavior: contain;\n    ").concat([g&&"position: relative ".concat(K,";"),"margin"===m&&"\n    padding-left: ".concat(Z,"px;\n    padding-top: ").concat(ia,"px;\n    padding-right: ").concat(ua,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(b,"px ").concat(K,";\n    "),"padding"===m&&"padding-right: ".concat(b,"px ").concat(K,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(b,"px ").concat(K,
";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(b,"px ").concat(K,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(K,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(K,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(b,"px;\n  }\n")},Qz=function(b){var g=b.noRelative,m=b.noImportant;
b=b.gapMode;var K=void 0===b?"margin":b;b=Pz.useMemo(function(){var Z=K;void 0===Z&&(Z="margin");if("undefined"===typeof window)Z=LE;else{var ia=window.getComputedStyle(document.body),ua=ia["padding"===Z?"paddingTop":"marginTop"],Ia=ia["padding"===Z?"paddingRight":"marginRight"];Z=[parseInt(ia["padding"===Z?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(ua||"",10)||0,parseInt(Ia||"",10)||0];Z={left:Z[0],top:Z[1],right:Z[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+Z[2]-
Z[0])}}return Z},[K]);return Pz.createElement(ME,{styles:NE(b,!g,K,m?"":"!important")})},$v=!1;if("undefined"!==typeof window)try{var yp=Object.defineProperty({},"passive",{get:function(){return $v=!0}});window.addEventListener("test",yp,yp);window.removeEventListener("test",yp,yp)}catch(b){$v=!1}var Jr=$v?{passive:!1}:!1,Rz=function(b,g){do{"undefined"!==typeof ShadowRoot&&g instanceof ShadowRoot&&(g=g.host);if(Sz(b,g)){var m=Tz(b,g);if(m[1]>m[2])return!0}g=g.parentNode}while(g&&g!==document.body);
return!1},Sz=function(b,g){"v"===b?(b=window.getComputedStyle(g),b="hidden"!==b.overflowY&&!(b.overflowY===b.overflowX&&"visible"===b.overflowY)):(b=window.getComputedStyle(g),b="hidden"!==b.overflowX&&!(b.overflowY===b.overflowX&&"visible"===b.overflowX));return b},Tz=function(b,g){return"v"===b?[g.scrollTop,g.scrollHeight,g.clientHeight]:[g.scrollLeft,g.scrollWidth,g.clientWidth]},Yt=function(b){return"changedTouches"in b?[b.changedTouches[0].clientX,b.changedTouches[0].clientY]:[0,0]},Uz=function(b){return b&&
"current"in b?b.current:b},OE=function(b){return"\n  .block-interactivity-".concat(b," {pointer-events: none;}\n  .allow-interactivity-").concat(b," {pointer-events: all;}\n")},PE=0,Kr=[];Oz.useMedium(function(b){var g=jm.useRef([]),m=jm.useRef([0,0]),K=jm.useRef(),Z=jm.useState(PE++)[0],ia=jm.useState(function(){return Zv()})[0],ua=jm.useRef(b);jm.useEffect(function(){ua.current=b},[b]);jm.useEffect(function(){if(b.inert){document.body.classList.add("block-interactivity-".concat(Z));var Mb=Mz([b.lockRef.current],
(b.shards||[]).map(Uz),!0).filter(Boolean);Mb.forEach(function(sc){return sc.classList.add("allow-interactivity-".concat(Z))});return function(){document.body.classList.remove("block-interactivity-".concat(Z));Mb.forEach(function(sc){return sc.classList.remove("allow-interactivity-".concat(Z))})}}},[b.inert,b.lockRef.current,b.shards]);var Ia=jm.useCallback(function(Mb,sc){if("touches"in Mb&&2===Mb.touches.length)return!ua.current.allowPinchZoom;var lc=Yt(Mb),Rb=m.current,rc="deltaX"in Mb?Mb.deltaX:
Rb[0]-lc[0];Rb="deltaY"in Mb?Mb.deltaY:Rb[1]-lc[1];var Gc=Mb.target,Cc=Math.abs(rc)>Math.abs(Rb)?"h":"v";if("touches"in Mb&&"h"===Cc&&"range"===Gc.type)return!1;var Uc=Rz(Cc,Gc);if(!Uc)return!0;Uc?lc=Cc:(lc="v"===Cc?"h":"v",Uc=Rz(Cc,Gc));if(!Uc)return!1;!K.current&&"changedTouches"in Mb&&(rc||Rb)&&(K.current=lc);if(!lc)return!0;lc=K.current||lc;Rb="h"===lc?rc:Rb;rc=window.getComputedStyle(sc).direction;rc="h"===lc&&"rtl"===rc?-1:1;Cc=rc*Rb;Mb=Mb.target;Rb=sc.contains(Mb);Gc=!1;Cc=0<Cc;var ae=Uc=0;
do{var Gd=Tz(lc,Mb),qe=Gd[0];Gd=Gd[1]-Gd[2]-rc*qe;(qe||Gd)&&Sz(lc,Mb)&&(Uc+=Gd,ae+=qe);Mb=Mb.parentNode}while(!Rb&&Mb!==document.body||Rb&&(sc.contains(Mb)||sc===Mb));Cc&&0===Uc?Gc=!0:Cc||0!==ae||(Gc=!0);return Gc},[]),Xa=jm.useCallback(function(Mb){if(Kr.length&&Kr[Kr.length-1]===ia){var sc="deltaY"in Mb?[Mb.deltaX,Mb.deltaY]:Yt(Mb),lc=g.current.filter(function(Rb){var rc;if(rc=Rb.name===Mb.type&&Rb.target===Mb.target)Rb=Rb.delta,rc=Rb[0]===sc[0]&&Rb[1]===sc[1];return rc})[0];lc&&lc.should?Mb.preventDefault():
lc||(lc=(ua.current.shards||[]).map(Uz).filter(Boolean).filter(function(Rb){return Rb.contains(Mb.target)}),(0<lc.length?Ia(Mb,lc[0]):!ua.current.noIsolation)&&Mb.preventDefault())}},[]),bb=jm.useCallback(function(Mb,sc,lc,Rb){var rc={name:Mb,delta:sc,target:lc,should:Rb};g.current.push(rc);setTimeout(function(){g.current=g.current.filter(function(Gc){return Gc!==rc})},1)},[]),pb=jm.useCallback(function(Mb){m.current=Yt(Mb);K.current=void 0},[]),sb=jm.useCallback(function(Mb){bb(Mb.type,[Mb.deltaX,
Mb.deltaY],Mb.target,Ia(Mb,b.lockRef.current))},[]),Ub=jm.useCallback(function(Mb){bb(Mb.type,Yt(Mb),Mb.target,Ia(Mb,b.lockRef.current))},[]);jm.useEffect(function(){Kr.push(ia);b.setCallbacks({onScrollCapture:sb,onWheelCapture:sb,onTouchMoveCapture:Ub});document.addEventListener("wheel",Xa,Jr);document.addEventListener("touchmove",Xa,Jr);document.addEventListener("touchstart",pb,Jr);return function(){Kr=Kr.filter(function(Mb){return Mb!==ia});document.removeEventListener("wheel",Xa,Jr);document.removeEventListener("touchmove",
Xa,Jr);document.removeEventListener("touchstart",pb,Jr)}},[]);var kc=b.removeScrollBar;return jm.createElement(jm.Fragment,null,b.inert?jm.createElement(ia,{styles:OE(Z)}):null,kc?jm.createElement(Qz,{gapMode:"margin"}):null)});var aw=Nz.forwardRef(function(b,g){return Nz.createElement(Xt,Hn({},b,{ref:g,sideCar:Xv}))});aw.classNames=Xt.classNames;var bw=["Enter"," "],Vz=["ArrowUp","PageDown","End"],QE=["ArrowDown","PageUp","Home",...Vz];[...bw];[...bw];var [cw,RE,SE]=mk("Menu"),[Xq,Zt]=yi("Menu",
[SE,Ez,Ut]),dw=Ez(),Wz=Ut(),[TE,$t]=Xq("Menu"),[UE,ew]=Xq("Menu"),Xz=(0,Og.forwardRef)((b,g)=>{var {__scopeMenu:m}=b;b=Yb(b,["__scopeMenu"]);m=dw(m);return(0,Og.createElement)(pE,hf({},m,b,{ref:g}))}),[,VE]=Xq("MenuPortal",{forceMount:void 0}),[WE,Yz]=Xq("MenuContent"),Zz=(0,Og.forwardRef)((b,g)=>{var m=VE("MenuContent",b.__scopeMenu);({forceMount:m=m.forceMount}=b);const K=Yb(b,["forceMount"]),Z=$t("MenuContent",b.__scopeMenu),ia=ew("MenuContent",b.__scopeMenu);return(0,Og.createElement)(cw.Provider,
{scope:b.__scopeMenu},(0,Og.createElement)(Sv,{present:m||Z.open},(0,Og.createElement)(cw.Slot,{scope:b.__scopeMenu},ia.modal?(0,Og.createElement)(XE,hf({},K,{ref:g})):(0,Og.createElement)(YE,hf({},K,{ref:g})))))}),XE=(0,Og.forwardRef)((b,g)=>{const m=$t("MenuContent",b.__scopeMenu),K=(0,Og.useRef)(null);g=Wg(g,K);(0,Og.useEffect)(()=>{const Z=K.current;if(Z)return Vv(Z)},[]);return(0,Og.createElement)($z,hf({},b,{ref:g,trapFocus:m.open,disableOutsidePointerEvents:m.open,disableOutsideScroll:!0,onFocusOutside:Of(b.onFocusOutside,
Z=>Z.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>m.onOpenChange(!1)}))}),YE=(0,Og.forwardRef)((b,g)=>{const m=$t("MenuContent",b.__scopeMenu);return(0,Og.createElement)($z,hf({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>m.onOpenChange(!1)}))}),$z=(0,Og.forwardRef)((b,g)=>{const {__scopeMenu:m,loop:K=!1,trapFocus:Z,onOpenAutoFocus:ia,onCloseAutoFocus:ua,disableOutsidePointerEvents:Ia,onEscapeKeyDown:Xa,onPointerDownOutside:bb,onFocusOutside:pb,
onInteractOutside:sb,onDismiss:Ub,disableOutsideScroll:kc}=b,Mb=Yb(b,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),sc=$t("MenuContent",m),lc=ew("MenuContent",m),Rb=dw(m),rc=Wz(m),Gc=RE(m),[Cc,Uc]=(0,Og.useState)(null),ae=(0,Og.useRef)(null);g=Wg(g,ae,sc.onContentChange);const Gd=(0,Og.useRef)(0),qe=(0,Og.useRef)(""),cf=(0,Og.useRef)(0),Fe=(0,Og.useRef)(null),
df=(0,Og.useRef)("right"),ie=(0,Og.useRef)(0),Id=kc?aw:Og.Fragment,fd=kc?{as:Gr,allowPinchZoom:!0}:void 0,$c=Md=>{var Rd,Be;Md=qe.current+Md;const Ce=Gc().filter(Pg=>!Pg.disabled),Ke=document.activeElement,Bf=null===(Rd=Ce.find(Pg=>Pg.ref.current===Ke))||void 0===Rd?void 0:Rd.textValue;Rd=Ce.map(Pg=>Pg.textValue);const sf=Db(Rd,Md,Bf),bh=null===(Be=Ce.find(Pg=>Pg.textValue===sf))||void 0===Be?void 0:Be.ref.current;(function rk(ni){qe.current=ni;window.clearTimeout(Gd.current);""!==ni&&(Gd.current=
window.setTimeout(()=>rk(""),1E3))})(Md);bh&&setTimeout(()=>bh.focus())};(0,Og.useEffect)(()=>()=>window.clearTimeout(Gd.current),[]);zg();const vd=(0,Og.useCallback)(Md=>{var Rd,Be,Ce;if(Ce=df.current===(null===(Rd=Fe.current)||void 0===Rd?void 0:Rd.side)){if(Rd=null===(Be=Fe.current)||void 0===Be?void 0:Be.area){const {x:Ke,y:Bf}={x:Md.clientX,y:Md.clientY};Md=!1;for(let sf=0,bh=Rd.length-1;sf<Rd.length;bh=sf++){Be=Rd[sf].x;Ce=Rd[sf].y;const Pg=Rd[bh].x,ni=Rd[bh].y;Ce>Bf!==ni>Bf&&Ke<(Pg-Be)*(Bf-
Ce)/(ni-Ce)+Be&&(Md=!Md)}Rd=Md}else Rd=!1;Ce=Rd}return Ce},[]);return(0,Og.createElement)(WE,{scope:m,searchRef:qe,onItemEnter:(0,Og.useCallback)(Md=>{vd(Md)&&Md.preventDefault()},[vd]),onItemLeave:(0,Og.useCallback)(Md=>{var Rd;vd(Md)||(null===(Rd=ae.current)||void 0===Rd||Rd.focus(),Uc(null))},[vd]),onTriggerLeave:(0,Og.useCallback)(Md=>{vd(Md)&&Md.preventDefault()},[vd]),pointerGraceTimerRef:cf,onPointerGraceIntentChange:(0,Og.useCallback)(Md=>{Fe.current=Md},[])},(0,Og.createElement)(Id,fd,(0,Og.createElement)(rz,
{asChild:!0,trapped:Z,onMountAutoFocus:Of(ia,Md=>{var Rd;Md.preventDefault();null===(Rd=ae.current)||void 0===Rd||Rd.focus()}),onUnmountAutoFocus:ua},(0,Og.createElement)(pz,{asChild:!0,disableOutsidePointerEvents:Ia,onEscapeKeyDown:Xa,onPointerDownOutside:bb,onFocusOutside:pb,onInteractOutside:sb,onDismiss:Ub},(0,Og.createElement)(Kz,hf({asChild:!0},rc,{dir:lc.dir,orientation:"vertical",loop:K,currentTabStopId:Cc,onCurrentTabStopIdChange:Uc,onEntryFocus:Md=>{lc.isUsingKeyboardRef.current||Md.preventDefault()}}),
(0,Og.createElement)(tE,hf({role:"menu","aria-orientation":"vertical","data-state":sc.open?"open":"closed",dir:lc.dir},Rb,Mb,{ref:g,style:Wa({outline:"none"},Mb.style),onKeyDown:Of(Mb.onKeyDown,Md=>{var Rd=Md.target.closest('[role\x3d"menu"]')===Md.currentTarget;const Be=Md.ctrlKey||Md.altKey||Md.metaKey,Ce=1===Md.key.length;Rd&&("Tab"===Md.key&&Md.preventDefault(),!Be&&Ce&&$c(Md.key));Md.target===ae.current&&QE.includes(Md.key)&&(Md.preventDefault(),Rd=Gc().filter(Ke=>!Ke.disabled).map(Ke=>Ke.ref.current),
Vz.includes(Md.key)&&Rd.reverse(),cc(Rd))}),onBlur:Of(b.onBlur,Md=>{Md.currentTarget.contains(Md.target)||(window.clearTimeout(Gd.current),qe.current="")}),onPointerMove:Of(b.onPointerMove,Sb(Md=>{const Rd=ie.current!==Md.clientX;Md.currentTarget.contains(Md.target)&&Rd&&(df.current=Md.clientX>ie.current?"right":"left",ie.current=Md.clientX)}))})))))))}),aA=(0,Og.forwardRef)((b,g)=>{const {disabled:m=!1,onSelect:K}=b,Z=Yb(b,["disabled","onSelect"]),ia=(0,Og.useRef)(null),ua=ew("MenuItem",b.__scopeMenu),
Ia=Yz("MenuItem",b.__scopeMenu);g=Wg(g,ia);const Xa=(0,Og.useRef)(!1);return(0,Og.createElement)(ZE,hf({},Z,{ref:g,disabled:m,onClick:Of(b.onClick,()=>{const bb=ia.current;if(!m&&bb){const pb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});bb.addEventListener("menu.itemSelect",sb=>null===K||void 0===K?void 0:K(sb),{once:!0});Vi(bb,pb);if(pb.defaultPrevented)Xa.current=!1;else ua.onClose()}}),onPointerDown:bb=>{var pb;null===(pb=b.onPointerDown)||void 0===pb||pb.call(b,bb);Xa.current=
!0},onPointerUp:Of(b.onPointerUp,bb=>{var pb;Xa.current||null===(pb=bb.currentTarget)||void 0===pb||pb.click()}),onKeyDown:Of(b.onKeyDown,bb=>{const pb=""!==Ia.searchRef.current;m||pb&&" "===bb.key||!bw.includes(bb.key)||(bb.currentTarget.click(),bb.preventDefault())})}))}),ZE=(0,Og.forwardRef)((b,g)=>{const {__scopeMenu:m,disabled:K=!1,textValue:Z}=b,ia=Yb(b,["__scopeMenu","disabled","textValue"]),ua=Yz("MenuItem",m),Ia=Wz(m),Xa=(0,Og.useRef)(null);g=Wg(g,Xa);const [bb,pb]=(0,Og.useState)(!1),[sb,
Ub]=(0,Og.useState)("");(0,Og.useEffect)(()=>{const kc=Xa.current;if(kc){var Mb;Ub((null!==(Mb=kc.textContent)&&void 0!==Mb?Mb:"").trim())}},[ia.children]);return(0,Og.createElement)(cw.ItemSlot,{scope:m,disabled:K,textValue:null!==Z&&void 0!==Z?Z:sb},(0,Og.createElement)(Lz,hf({asChild:!0},Ia,{focusable:!K}),(0,Og.createElement)(gl.div,hf({role:"menuitem","data-highlighted":bb?"":void 0,"aria-disabled":K||void 0,"data-disabled":K?"":void 0},ia,{ref:g,onPointerMove:Of(b.onPointerMove,Sb(kc=>{if(K)ua.onItemLeave(kc);
else ua.onItemEnter(kc),kc.defaultPrevented||kc.currentTarget.focus()})),onPointerLeave:Of(b.onPointerLeave,Sb(kc=>ua.onItemLeave(kc))),onFocus:Of(b.onFocus,()=>pb(!0)),onBlur:Of(b.onBlur,()=>pb(!1))}))))});Xq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});Xq("MenuItemIndicator",{checked:!1});var $E=(0,Og.forwardRef)((b,g)=>{b=Yb(b,["__scopeMenu"]);return(0,Og.createElement)(gl.div,hf({role:"separator","aria-orientation":"horizontal"},b,{ref:g}))});Xq("MenuSub");var bA=b=>{const {__scopeMenu:g,
open:m=!1,children:K,dir:Z,onOpenChange:ia,modal:ua=!0}=b;b=dw(g);const [Ia,Xa]=(0,Og.useState)(null),bb=(0,Og.useRef)(!1),pb=Ti(ia),sb=Aj(Z);(0,Og.useEffect)(()=>{const Ub=()=>{bb.current=!0;document.addEventListener("pointerdown",kc,{capture:!0,once:!0});document.addEventListener("pointermove",kc,{capture:!0,once:!0})},kc=()=>bb.current=!1;document.addEventListener("keydown",Ub,{capture:!0});return()=>{document.removeEventListener("keydown",Ub,{capture:!0});document.removeEventListener("pointerdown",
kc,{capture:!0});document.removeEventListener("pointermove",kc,{capture:!0})}},[]);return(0,Og.createElement)(vE,b,(0,Og.createElement)(TE,{scope:g,open:m,onOpenChange:pb,content:Ia,onContentChange:Xa},(0,Og.createElement)(UE,{scope:g,onClose:(0,Og.useCallback)(()=>pb(!1),[pb]),isUsingKeyboardRef:bb,dir:sb,modal:ua},K)))},[aF]=yi("DropdownMenu",[Zt]),au=Zt(),[bF,cA]=aF("DropdownMenu"),cF=(0,qo.forwardRef)((b,g)=>{const {__scopeDropdownMenu:m,disabled:K=!1}=b,Z=Yb(b,["__scopeDropdownMenu","disabled"]),
ia=cA("DropdownMenuTrigger",m),ua=au(m);return(0,qo.createElement)(Xz,hf({asChild:!0},ua),(0,qo.createElement)(gl.button,hf({type:"button",id:ia.triggerId,"aria-haspopup":"menu","aria-expanded":ia.open?!0:void 0,"aria-controls":ia.open?ia.contentId:void 0,"data-state":ia.open?"open":"closed","data-disabled":K?"":void 0,disabled:K},Z,{ref:Si(g,ia.triggerRef),onPointerDown:Of(b.onPointerDown,Ia=>{K||0!==Ia.button||!1!==Ia.ctrlKey||(ia.onOpenToggle(),ia.open||Ia.preventDefault())}),onKeyDown:Of(b.onKeyDown,
Ia=>{if(!K){if(["Enter"," "].includes(Ia.key))ia.onOpenToggle();if("ArrowDown"===Ia.key)ia.onOpenChange(!0);[" ","ArrowDown"].includes(Ia.key)&&Ia.preventDefault()}})})))}),dF=(0,qo.forwardRef)((b,g)=>{var {__scopeDropdownMenu:m}=b;const K=Yb(b,["__scopeDropdownMenu"]),Z=cA("DropdownMenuContent",m);m=au(m);const ia=(0,qo.useRef)(!1);return(0,qo.createElement)(Zz,hf({id:Z.contentId,"aria-labelledby":Z.triggerId},m,K,{ref:g,onCloseAutoFocus:Of(b.onCloseAutoFocus,ua=>{var Ia;ia.current||null===(Ia=Z.triggerRef.current)||
void 0===Ia||Ia.focus();ia.current=!1;ua.preventDefault()}),onInteractOutside:Of(b.onInteractOutside,ua=>{ua=ua.detail.originalEvent;const Ia=0===ua.button&&!0===ua.ctrlKey;ua=2===ua.button||Ia;if(!Z.modal||ua)ia.current=!0}),style:rb(Wa({},b.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Ms=(0,qo.forwardRef)((b,g)=>{var {__scopeDropdownMenu:m}=b;b=Yb(b,["__scopeDropdownMenu"]);m=au(m);return(0,qo.createElement)(aA,hf({},m,b,{ref:g}))}),eF=
b=>{const {__scopeDropdownMenu:g,children:m,dir:K,open:Z,defaultOpen:ia,onOpenChange:ua,modal:Ia=!0}=b;b=au(g);const Xa=(0,qo.useRef)(null),[bb=!1,pb]=Lg({prop:Z,defaultProp:ia,onChange:ua});return(0,qo.createElement)(bF,{scope:g,triggerId:xk(),triggerRef:Xa,contentId:xk(),open:bb,onOpenChange:pb,onOpenToggle:(0,qo.useCallback)(()=>pb(sb=>!sb),[pb]),modal:Ia},(0,qo.createElement)(bA,hf({},b,{open:bb,onOpenChange:pb,dir:K,modal:Ia}),m))};Jb=T(616);var fF=pf(function(){const b=dg(),g=m=>{m.preventDefault()};
return(0,Jb.jsxs)(eF,{children:[(0,Jb.jsx)(cF,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*b.viewport.camera.zoom).toFixed(0)+"%"}),(0,Jb.jsxs)(dF,{className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,Jb.jsxs)(Ms,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToFit,children:["Zoom to fit",(0,Jb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Jb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Jb.jsx)("code",{children:""})," ",(0,Jb.jsx)("code",
{children:"1"})]})})]}),(0,Jb.jsxs)(Ms,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToSelection,children:["Zoom to selection",(0,Jb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Jb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Jb.jsx)("code",{children:Uq})," ",(0,Jb.jsx)("code",{children:""})," ",(0,Jb.jsx)("code",{children:"1"})]})})]}),(0,Jb.jsxs)(Ms,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomIn,children:["Zoom in",(0,Jb.jsx)("div",{className:"tl-menu-right-slot",
children:(0,Jb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Jb.jsx)("code",{children:Uq})," ",(0,Jb.jsx)("code",{children:"+"})]})})]}),(0,Jb.jsxs)(Ms,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomOut,children:["Zoom out",(0,Jb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Jb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Jb.jsx)("code",{children:Uq})," ",(0,Jb.jsx)("code",{children:"-"})]})})]}),(0,Jb.jsxs)(Ms,{className:"tl-menu-item",onSelect:g,onClick:b.api.resetZoom,
children:["Reset zoom",(0,Jb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Jb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Jb.jsx)("code",{children:""})," ",(0,Jb.jsx)("code",{children:"0"})]})})]})]})]})}),dA=T(20),eA=["horizontal","vertical"],Ns=(0,dA.forwardRef)((b,g)=>{const {decorative:m,orientation:K="horizontal"}=b;b=Yb(b,["decorative","orientation"]);const Z=eA.includes(K)?K:"horizontal";return(0,dA.createElement)(gl.div,hf({"data-orientation":Z},m?{role:"none"}:{"aria-orientation":"vertical"===
Z?Z:void 0,role:"separator"},b,{ref:g}))});Ns.propTypes={orientation(b,g,m){b=b[g];g=String(b);return b&&!eA.includes(b)?Error(`Invalid prop \`orientation\` of value \`${g}\` supplied to \`${m}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};Jb=T(616);var gF=pf(function(){const b=dg(),g=Nt.useCallback(()=>{b.api.undo()},[b]),m=Nt.useCallback(()=>{b.api.redo()},[b]),K=Nt.useCallback(()=>{b.api.zoomIn()},[b]),Z=Nt.useCallback(()=>{b.api.zoomOut()},[b]);return(0,Jb.jsxs)("div",{className:"tl-action-bar",children:[(0,Jb.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,Jb.jsx)(Fi,{title:"Undo",onClick:g,children:(0,Jb.jsx)(Bi,{name:"arrow-back-up"})}),(0,Jb.jsx)(Fi,{title:"Redo",onClick:m,
children:(0,Jb.jsx)(Bi,{name:"arrow-forward-up"})})]}),(0,Jb.jsxs)("div",{className:"tl-toolbar tl-zoom-bar",children:[(0,Jb.jsx)(Fi,{title:"Zoom in",onClick:K,id:"tl-zoom-in",children:(0,Jb.jsx)(Bi,{name:"plus"})}),(0,Jb.jsx)(Fi,{title:"Zoom out",onClick:Z,id:"tl-zoom-out",children:(0,Jb.jsx)(Bi,{name:"minus"})}),(0,Jb.jsx)(Ns,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Jb.jsx)(fF,{})]})]})}),Yq=td(T(20)),fA=td(T(29));Jb=T(616);var bu=b=>`[${b.map(g=>{var m;return null!=(m=null==
g?void 0:g.toFixed(2))?m:"-"}).join(", ")}]`,hF=pf(function(){const b=dg(),g=Yq.default.useRef(),[,m]=Yq.default.useState(0);Yq.default.useEffect(()=>{g.current=document.createElement("div");g.current.style.display="contents";document.body.append(g.current);m(K=>K+1);return()=>{var K;null==(K=g.current)?void 0:K.remove()}},[]);Yq.default.useEffect(()=>{requestAnimationFrame(()=>{var K,Z;null==(Z=null==(K=g.current)?void 0:K.querySelector(`[data-item-index="${b.history.pointer}"]`))?void 0:Z.scrollIntoView()})},
[b.history.pointer]);return g.current?fA.default.createPortal((0,Jb.jsx)("div",{className:"fixed z-[1000] left-4 max-w-[400px] top-4 overflow-scroll bg-gray-200 flex gap-2 p-2",children:b.history.stack.map((K,Z)=>(0,Jb.jsx)("div",{"data-item-index":Z,style:{background:b.history.pointer===Z?"pink":"grey"},onClick:()=>b.history.setPointer(Z),className:"flex items-center rounded-lg px-2 h-[32px] whitespace-nowrap",children:K.pages[0].nonce},Z))}),g.current):null});pf(()=>{var b;const {viewport:{bounds:g,
camera:{point:m,zoom:K}},inputs:Z}=Rg(),ia=Yq.default.useRef(),ua=Yq.default.useRef();Yq.default.useEffect(()=>{var Xa=document.getElementById("tl-dev-tools-canvas-anchor");ia.current=Xa;Xa=document.getElementById("tl-statusbar-anchor");ua.current=Xa},[]);const Ia=[["Z",null!=(b=null==K?void 0:K.toFixed(2))?b:"null"],["MP",bu(Z.currentPoint)],["MS",bu(Z.currentScreenPoint)],["VP",bu(m)],["VBR",bu([g.maxX,g.maxY])]].map(Xa=>Xa.join("")).join("|");b=ua.current?fA.default.createPortal((0,Jb.jsx)("div",
{style:{flex:1,display:"flex",alignItems:"center"},children:Ia}),ua.current):null;return(0,Jb.jsxs)(Jb.Fragment,{children:[b,(0,Jb.jsx)(hF,{})]})});var cu=td(T(20));Jb=T(616);var gp=pf(b=>{var {id:g,icon:m,title:K}=b;b=Yb(b,["id","icon","title"]);var Z,ia;const ua=dg(),Ia=cu.useCallback(bb=>{(bb=bb.currentTarget.dataset.tool)&&ua.selectTool(bb)},[ua]),Xa=null==(ia=(null==(Z=[...ua.Tools,or,pr])?void 0:Z.find(bb=>bb.id===g)).shortcut)?void 0:ia[0];Z=Xa?`${K} (${Xa})`:K;return(0,Jb.jsx)(Fi,rb(Wa({},
b),{title:Z,"data-tool":g,"data-selected":g===ua.selectedTool.id,onClick:Ia,children:"string"===typeof m?(0,Jb.jsx)(Bi,{name:m}):m}))}),iF=pf(()=>{const b=[{id:"box",icon:"square",title:"Rectangle"},{id:"ellipse",icon:"circle",title:"Circle"},{id:"polygon",icon:"triangle",title:"Triangle"}],g=dg(),[m,K]=cu.useState(()=>{var ua;return(null!=(ua=b.find(Ia=>Ia.id===g.selectedTool.id))?ua:b[0]).id}),[Z,ia]=cu.useState(!1);cu.useEffect(()=>{K(ua=>{var Ia,Xa;return null!=(Xa=null==(Ia=b.find(bb=>bb.id===
g.selectedTool.id))?void 0:Ia.id)?Xa:ua})},[g.selectedTool.id]);return(0,Jb.jsxs)("div",{className:"tl-geometry-tools-pane-anchor",onMouseEnter:()=>ia(!0),onMouseLeave:()=>ia(!1),children:[(0,Jb.jsx)(gp,Wa({},b.find(ua=>ua.id===m))),Z&&(0,Jb.jsx)("div",{className:"tl-geometry-tools-pane",children:b.map(ua=>(0,Jb.jsx)(gp,Wa({},ua),ua.id))})]})}),jF=pf(function(){const b=dg();return(0,Jb.jsx)("div",{className:"tl-primary-tools",children:(0,Jb.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",
children:[(0,Jb.jsx)(gp,{title:"Select",id:"select",icon:"select-cursor"}),(0,Jb.jsx)(gp,{title:"Move",id:"move",icon:b.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,Jb.jsx)(gp,{title:"Draw",id:"pencil",icon:"ballpen"}),(0,Jb.jsx)(gp,{title:"Highlight",id:"highlighter",icon:"highlight"}),(0,Jb.jsx)(gp,{title:"Eraser",id:"erase",icon:"eraser"}),(0,Jb.jsx)(gp,{title:"Connector",id:"line",icon:"connector"}),(0,Jb.jsx)(gp,{title:"Text",id:"text",icon:"text"}),(0,Jb.jsx)(iF,{}),(0,Jb.jsx)(gp,{title:"Logseq Portal",
id:"logseq-portal",icon:(0,Jb.jsx)(Zl,{})})]})})}),kF=td(T(20));Jb=T(616);pf(function(){const b=dg();kF.useEffect(()=>{const g=document.querySelector(".logseq-tldraw-wrapper .tl-canvas"),m=document.querySelector(".logseq-tldraw-wrapper .tl-action-bar");g&&(g.style.height="calc(100% - 32px)");m&&(m.style.marginBottom="32px");return()=>{g&&(g.style.height="100%");m&&(m.style.marginBottom="0px")}});return(0,Jb.jsxs)("div",{className:"tl-statusbar",children:[b.selectedTool.id," | ",b.selectedTool.currentState.id,
(0,Jb.jsx)("div",{style:{flex:1}}),(0,Jb.jsx)("div",{id:"tl-statusbar-anchor",style:{display:"flex"}})]})});Jb=T(616);var lF=pf(function(){return(0,Jb.jsxs)(Jb.Fragment,{children:[!1,!1,(0,Jb.jsx)(jF,{}),(0,Jb.jsx)(gF,{})]})}),Os=td(T(20)),Zq=td(T(20)),zp=td(T(20)).default.createContext({}),mF=td(T(20)),Pj=T(20),In=T(20),fw=T(20),nF=T(29),Jm=T(20),gw=(0,Jm.forwardRef)((b,g)=>{var {children:m}=b;b=Yb(b,["children"]);const K=Jm.Children.toArray(m),Z=K.find(ub);if(Z){const ia=Z.props.children;m=K.map(ua=>
ua===Z?1<Jm.Children.count(ia)?Jm.Children.only(null):(0,Jm.isValidElement)(ia)?ia.props.children:null:ua);return(0,Jm.createElement)(hw,hf({},b,{ref:g}),(0,Jm.isValidElement)(ia)?(0,Jm.cloneElement)(ia,void 0,m):null)}return(0,Jm.createElement)(hw,hf({},b,{ref:g}),m)});gw.displayName="Slot";var hw=(0,Jm.forwardRef)((b,g)=>{const {children:m}=b;b=Yb(b,["children"]);return(0,Jm.isValidElement)(m)?(0,Jm.cloneElement)(m,rb(Wa({},xb(b,m.props)),{ref:Si(g,m.ref)})):1<Jm.Children.count(m)?Jm.Children.only(null):
null});hw.displayName="SlotClone";var oF=({children:b})=>(0,Jm.createElement)(Jm.Fragment,null,b),iw="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const m=(0,fw.forwardRef)((K,Z)=>{var {asChild:ia}=K;K=Yb(K,["asChild"]);ia=ia?gw:g;(0,fw.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,fw.createElement)(ia,hf({},K,{ref:Z}))});m.displayName=`Primitive.${g}`;return rb(Wa({},b),{[g]:m})},{}),pF=T(20),gA,qF=(0,In.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,
branches:new Set}),rF=(0,In.forwardRef)((b,g)=>{var m;const {disableOutsidePointerEvents:K=!1,onEscapeKeyDown:Z,onPointerDownOutside:ia,onFocusOutside:ua,onInteractOutside:Ia,onDismiss:Xa}=b,bb=Yb(b,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),pb=(0,In.useContext)(qF),[sb,Ub]=(0,In.useState)(null),kc=null!==(m=null===sb||void 0===sb?void 0:sb.ownerDocument)&&void 0!==m?m:null===globalThis||void 0===globalThis?void 0:globalThis.document,
[,Mb]=(0,In.useState)({});g=Wg(g,Gc=>Ub(Gc));m=Array.from(pb.layers);var [sc]=[...pb.layersWithOutsidePointerEventsDisabled].slice(-1);sc=m.indexOf(sc);const lc=sb?m.indexOf(sb):-1;m=0<pb.layersWithOutsidePointerEventsDisabled.size;const Rb=lc>=sc;sc=Kb(Gc=>{const Cc=Gc.target,Uc=[...pb.branches].some(ae=>ae.contains(Cc));Rb&&!Uc&&(null===ia||void 0===ia||ia(Gc),null===Ia||void 0===Ia||Ia(Gc),Gc.defaultPrevented||null===Xa||void 0===Xa||Xa())},kc);const rc=$b(Gc=>{const Cc=Gc.target;[...pb.branches].some(Uc=>
Uc.contains(Cc))||(null===ua||void 0===ua||ua(Gc),null===Ia||void 0===Ia||Ia(Gc),Gc.defaultPrevented||null===Xa||void 0===Xa||Xa())},kc);qb(Gc=>{lc===pb.layers.size-1&&(null===Z||void 0===Z||Z(Gc),!Gc.defaultPrevented&&Xa&&(Gc.preventDefault(),Xa()))},kc);(0,In.useEffect)(()=>{if(sb)return K&&(0===pb.layersWithOutsidePointerEventsDisabled.size&&(gA=kc.body.style.pointerEvents,kc.body.style.pointerEvents="none"),pb.layersWithOutsidePointerEventsDisabled.add(sb)),pb.layers.add(sb),Ac(),()=>{K&&1===
pb.layersWithOutsidePointerEventsDisabled.size&&(kc.body.style.pointerEvents=gA)}},[sb,kc,K,pb]);(0,In.useEffect)(()=>()=>{sb&&(pb.layers.delete(sb),pb.layersWithOutsidePointerEventsDisabled.delete(sb),Ac())},[sb,pb]);(0,In.useEffect)(()=>{const Gc=()=>Mb({});document.addEventListener("dismissableLayer.update",Gc);return()=>document.removeEventListener("dismissableLayer.update",Gc)},[]);return(0,In.createElement)(iw.div,hf({},bb,{ref:g,style:Wa({pointerEvents:m?Rb?"auto":"none":void 0},b.style),onFocusCapture:Of(b.onFocusCapture,
rc.onFocusCapture),onBlurCapture:Of(b.onBlurCapture,rc.onBlurCapture),onPointerDownCapture:Of(b.onPointerDownCapture,sc.onPointerDownCapture)}))}),$p=T(20),aq={bubbles:!1,cancelable:!0},sF=(0,$p.forwardRef)((b,g)=>{const {loop:m=!1,trapped:K=!1,onMountAutoFocus:Z,onUnmountAutoFocus:ia}=b;b=Yb(b,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [ua,Ia]=(0,$p.useState)(null),Xa=Ti(Z),bb=Ti(ia),pb=(0,$p.useRef)(null);g=Wg(g,kc=>Ia(kc));const sb=(0,$p.useRef)({paused:!1,pause(){this.paused=
!0},resume(){this.paused=!1}}).current;(0,$p.useEffect)(()=>{if(K){let kc=function(sc){!sb.paused&&ua&&(sc=sc.target,ua.contains(sc)?pb.current=sc:zd(pb.current,{select:!0}))},Mb=function(sc){!sb.paused&&ua&&(ua.contains(sc.relatedTarget)||zd(pb.current,{select:!0}))};document.addEventListener("focusin",kc);document.addEventListener("focusout",Mb);return()=>{document.removeEventListener("focusin",kc);document.removeEventListener("focusout",Mb)}}},[K,ua,sb.paused]);(0,$p.useEffect)(()=>{if(ua){hA.add(sb);
const kc=document.activeElement;if(!ua.contains(kc)){const Mb=new CustomEvent("focusScope.autoFocusOnMount",aq);ua.addEventListener("focusScope.autoFocusOnMount",Xa);ua.dispatchEvent(Mb);Mb.defaultPrevented||(Rc(ze(wd(ua)),{select:!0}),document.activeElement===kc&&zd(ua))}return()=>{ua.removeEventListener("focusScope.autoFocusOnMount",Xa);setTimeout(()=>{const Mb=new CustomEvent("focusScope.autoFocusOnUnmount",aq);ua.addEventListener("focusScope.autoFocusOnUnmount",bb);ua.dispatchEvent(Mb);Mb.defaultPrevented||
zd(null!==kc&&void 0!==kc?kc:document.body,{select:!0});ua.removeEventListener("focusScope.autoFocusOnUnmount",bb);hA.remove(sb)},0)}}},[ua,Xa,bb,sb]);const Ub=(0,$p.useCallback)(kc=>{if((m||K)&&!sb.paused){var Mb=document.activeElement;if("Tab"===kc.key&&!kc.altKey&&!kc.ctrlKey&&!kc.metaKey&&Mb){const lc=kc.currentTarget;var sc=lc;const Rb=wd(sc),rc=Td(Rb,sc);sc=Td(Rb.reverse(),sc);const [Gc,Cc]=[rc,sc];Gc&&Cc?kc.shiftKey||Mb!==Cc?kc.shiftKey&&Mb===Gc&&(kc.preventDefault(),m&&zd(Cc,{select:!0})):
(kc.preventDefault(),m&&zd(Gc,{select:!0})):Mb===lc&&kc.preventDefault()}}},[m,K,sb.paused]);return(0,$p.createElement)(iw.div,hf({tabIndex:-1},b,{ref:g,onKeyDown:Ub}))}),hA=function(){let b=[];return{add(g){const m=b[0];g===m||null!==m&&void 0!==m&&m.pause();b=Jd(b,g);b.unshift(g)},remove(g){var m;b=Jd(b,g);null===(m=b[0])||void 0===m||m.resume()}}}(),cm=T(20),jw=T(20),kw=T(20);T(29);var Km=T(20),iA=(0,Km.forwardRef)((b,g)=>{var {children:m}=b;b=Yb(b,["children"]);const K=Km.Children.toArray(m),
Z=K.find(Pf);if(Z){const ia=Z.props.children;m=K.map(ua=>ua===Z?1<Km.Children.count(ia)?Km.Children.only(null):(0,Km.isValidElement)(ia)?ia.props.children:null:ua);return(0,Km.createElement)(lw,hf({},b,{ref:g}),(0,Km.isValidElement)(ia)?(0,Km.cloneElement)(ia,void 0,m):null)}return(0,Km.createElement)(lw,hf({},b,{ref:g}),m)});iA.displayName="Slot";var lw=(0,Km.forwardRef)((b,g)=>{const {children:m}=b;b=Yb(b,["children"]);return(0,Km.isValidElement)(m)?(0,Km.cloneElement)(m,rb(Wa({},we(b,m.props)),
{ref:Si(g,m.ref)})):1<Km.Children.count(m)?Km.Children.only(null):null});lw.displayName="SlotClone";var tF=({children:b})=>(0,Km.createElement)(Km.Fragment,null,b),uF="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const m=(0,kw.forwardRef)((K,Z)=>{var {asChild:ia}=K;K=Yb(K,["asChild"]);ia=ia?iA:g;(0,kw.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,kw.createElement)(ia,hf({},K,{ref:Z}))});m.displayName=`Primitive.${g}`;return rb(Wa({},b),{[g]:m})},
{}),vF=(0,jw.forwardRef)((b,g)=>{const {children:m,width:K=10,height:Z=5}=b,ia=Yb(b,["children","width","height"]);return(0,jw.createElement)(uF.svg,hf({},ia,{ref:g,width:K,height:Z,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),b.asChild?m:(0,jw.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),mw=T(20);T(29);var Lm=T(20),jA=(0,Lm.forwardRef)((b,g)=>{var {children:m}=b;b=Yb(b,["children"]);const K=Lm.Children.toArray(m),Z=K.find(Ze);if(Z){const ia=Z.props.children;m=K.map(ua=>ua===Z?1<Lm.Children.count(ia)?
Lm.Children.only(null):(0,Lm.isValidElement)(ia)?ia.props.children:null:ua);return(0,Lm.createElement)(nw,hf({},b,{ref:g}),(0,Lm.isValidElement)(ia)?(0,Lm.cloneElement)(ia,void 0,m):null)}return(0,Lm.createElement)(nw,hf({},b,{ref:g}),m)});jA.displayName="Slot";var nw=(0,Lm.forwardRef)((b,g)=>{const {children:m}=b;b=Yb(b,["children"]);return(0,Lm.isValidElement)(m)?(0,Lm.cloneElement)(m,rb(Wa({},Oe(b,m.props)),{ref:Si(g,m.ref)})):1<Lm.Children.count(m)?Lm.Children.only(null):null});nw.displayName=
"SlotClone";var wF=({children:b})=>(0,Lm.createElement)(Lm.Fragment,null,b),ow="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const m=(0,mw.forwardRef)((K,Z)=>{var {asChild:ia}=K;K=Yb(K,["asChild"]);ia=ia?jA:g;(0,mw.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,mw.createElement)(ia,hf({},K,{ref:Z}))});m.displayName=`Primitive.${g}`;return rb(Wa({},b),{[g]:m})},{}),[pw,kA]=yi("Popper"),[xF,lA]=pw("Popper"),yF=(0,cm.forwardRef)((b,g)=>{const {__scopePopper:m,
virtualRef:K}=b;b=Yb(b,["__scopePopper","virtualRef"]);const Z=lA("PopperAnchor",m),ia=(0,cm.useRef)(null);g=Wg(g,ia);(0,cm.useEffect)(()=>{Z.onAnchorChange((null===K||void 0===K?void 0:K.current)||ia.current)});return K?null:(0,cm.createElement)(ow.div,hf({},b,{ref:g}))}),[zF,AF]=pw("PopperContent"),[BF,CF]=pw("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),DF=(0,cm.forwardRef)((b,g)=>{var m,K,Z,ia,ua,Ia,Xa,bb;const {__scopePopper:pb,side:sb="bottom",sideOffset:Ub=0,align:kc="center",alignOffset:Mb=
0,arrowPadding:sc=0,collisionBoundary:lc=[],collisionPadding:Rb=0,sticky:rc="partial",hideWhenDetached:Gc=!1,avoidCollisions:Cc=!0}=b;b=Yb(b,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Uc=lA("PopperContent",pb),[ae,Gd]=(0,cm.useState)(null);g=Wg(g,jp=>Gd(jp));const [qe,cf]=(0,cm.useState)(null);var Fe=Ni(qe),df=null!==(m=null===Fe||void 0===Fe?void 0:Fe.width)&&void 0!==m?m:0;m=null!==(K=
null===Fe||void 0===Fe?void 0:Fe.height)&&void 0!==K?K:0;K=sb+("center"!==kc?"-"+kc:"");Fe="number"===typeof Rb?Rb:Wa({top:0,right:0,bottom:0,left:0},Rb);const ie=Array.isArray(lc)?lc:[lc],Id=0<ie.length;Fe={padding:Fe,boundary:ie.filter(ng),altBoundary:Id};const {reference:fd,floating:$c,strategy:vd,x:Md,y:Rd,placement:Be,middlewareData:Ce,update:Ke}=Jh({strategy:"fixed",placement:K,whileElementsMounted:ch,middleware:[yz({mainAxis:Ub+m,alignmentAxis:Mb}),Cc?zz(Wa({mainAxis:!0,crossAxis:!1,limiter:"partial"===
rc?Az():void 0},Fe)):void 0,qe?Dz({element:qe,padding:sc}):void 0,Cc?wz(Wa({},Fe)):void 0,GF({arrowWidth:df,arrowHeight:m}),Gc?xz({strategy:"referenceHidden"}):void 0].filter(Ve)});an(()=>{fd(Uc.anchor)},[fd,Uc.anchor]);const Bf=null!==Md&&null!==Rd,[sf,bh]=Kf(Be);df=null===(Z=Ce.arrow)||void 0===Z?void 0:Z.x;Z=null===(ia=Ce.arrow)||void 0===ia?void 0:ia.y;ia=0!==(null===(ua=Ce.arrow)||void 0===ua?void 0:ua.centerOffset);const [Pg,ni]=(0,cm.useState)();an(()=>{ae&&ni(window.getComputedStyle(ae).zIndex)},
[ae]);const {hasParent:rk,positionUpdateFns:vj}=CF("PopperContent",pb),Nm=!rk;(0,cm.useLayoutEffect)(()=>{if(!Nm)return vj.add(Ke),()=>{vj.delete(Ke)}},[Nm,vj,Ke]);(0,cm.useLayoutEffect)(()=>{Nm&&Bf&&Array.from(vj).reverse().forEach(jp=>requestAnimationFrame(jp))},[Nm,Bf,vj]);ua=rb(Wa({"data-side":sf,"data-align":bh},b),{ref:g,style:rb(Wa({},b.style),{animation:Bf?void 0:"none",opacity:null!==(Ia=Ce.hide)&&void 0!==Ia&&Ia.referenceHidden?0:void 0})});return(0,cm.createElement)("div",{ref:$c,"data-radix-popper-content-wrapper":"",
style:{position:vd,left:0,top:0,transform:Bf?`translate3d(${Math.round(Md)}px, ${Math.round(Rd)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Pg,["--radix-popper-transform-origin"]:[null===(Xa=Ce.transformOrigin)||void 0===Xa?void 0:Xa.x,null===(bb=Ce.transformOrigin)||void 0===bb?void 0:bb.y].join(" ")}},(0,cm.createElement)(zF,{scope:pb,placedSide:sf,onArrowChange:cf,arrowX:df,arrowY:Z,shouldHideArrow:ia},Nm?(0,cm.createElement)(BF,{scope:pb,hasParent:!0,positionUpdateFns:vj},
(0,cm.createElement)(ow.div,ua)):(0,cm.createElement)(ow.div,ua)))}),EF={top:"bottom",right:"left",bottom:"top",left:"right"},FF=(0,cm.forwardRef)(function(b,g){var {__scopePopper:m}=b;b=Yb(b,["__scopePopper"]);m=AF("PopperArrow",m);return(0,cm.createElement)("span",{ref:m.onArrowChange,style:{position:"absolute",left:m.arrowX,top:m.arrowY,[EF[m.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[m.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",
bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[m.placedSide],visibility:m.shouldHideArrow?"hidden":void 0}},(0,cm.createElement)(vF,hf({},b,{ref:g,style:rb(Wa({},b.style),{display:"block"})})))}),GF=b=>({name:"transformOrigin",options:b,fn(g){var m,K,Z,ia,ua;const {placement:Ia,rects:Xa,middlewareData:bb}=g,pb=(g=0!==(null===(m=bb.arrow)||void 0===m?void 0:m.centerOffset))?0:b.arrowWidth;m=g?0:b.arrowHeight;const [sb,Ub]=Kf(Ia),kc={start:"0%",center:"50%",end:"100%"}[Ub],
Mb=(null!==(K=null===(Z=bb.arrow)||void 0===Z?void 0:Z.x)&&void 0!==K?K:0)+pb/2;K=(null!==(ia=null===(ua=bb.arrow)||void 0===ua?void 0:ua.y)&&void 0!==ia?ia:0)+m/2;ua=ia="";"bottom"===sb?(ia=g?kc:`${Mb}px`,ua=`${-m}px`):"top"===sb?(ia=g?kc:`${Mb}px`,ua=`${Xa.floating.height+m}px`):"right"===sb?(ia=`${-m}px`,ua=g?kc:`${K}px`):"left"===sb&&(ia=`${Xa.floating.width+m}px`,ua=g?kc:`${K}px`);return{data:{x:ia,y:ua}}}}),HF=b=>{const {__scopePopper:g,children:m}=b,[K,Z]=(0,cm.useState)(null);return(0,cm.createElement)(xF,
{scope:g,anchor:K,onAnchorChange:Z},m)},mA=td(T(20)),Ap=td(T(20)),nA=dc(),qw=function(){},du=Ap.forwardRef(function(b,g){var m=Ap.useRef(null),K=Ap.useState({onScrollCapture:qw,onWheelCapture:qw,onTouchMoveCapture:qw}),Z=K[0];K=K[1];var ia=b.forwardProps,ua=b.children,Ia=b.className,Xa=b.removeScrollBar,bb=b.enabled,pb=b.shards,sb=b.sideCar,Ub=b.noIsolation,kc=b.inert,Mb=b.allowPinchZoom,sc=b.as;sc=void 0===sc?"div":sc;b=Wv(b,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));
g=ti([m,g]);Z=Hn(Hn({},b),Z);return Ap.createElement(Ap.Fragment,null,bb&&Ap.createElement(sb,{sideCar:nA,removeScrollBar:Xa,shards:pb,noIsolation:Ub,inert:kc,setCallbacks:K,allowPinchZoom:!!Mb,lockRef:m}),ia?Ap.cloneElement(Ap.Children.only(ua),Hn(Hn({},Z),{ref:g})):Ap.createElement(sc,Hn({},Z,{className:Ia,ref:g}),ua))});du.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};du.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var km=td(T(20)),rw=!1;if("undefined"!==
typeof window)try{yp=Object.defineProperty({},"passive",{get:function(){return rw=!0}}),window.addEventListener("test",yp,yp),window.removeEventListener("test",yp,yp)}catch(b){rw=!1}var Lr=rw?{passive:!1}:!1,oA=function(b,g){var m=window.getComputedStyle(b);return"hidden"!==m[g]&&!(m.overflowY===m.overflowX&&"TEXTAREA"!==b.tagName&&"visible"===m[g])},pA=function(b,g){do{"undefined"!==typeof ShadowRoot&&g instanceof ShadowRoot&&(g=g.host);if(qA(b,g)){var m=rA(b,g);if(m[1]>m[2])return!0}g=g.parentNode}while(g&&
g!==document.body);return!1},qA=function(b,g){return"v"===b?oA(g,"overflowY"):oA(g,"overflowX")},rA=function(b,g){return"v"===b?[g.scrollTop,g.scrollHeight,g.clientHeight]:[g.scrollLeft,g.scrollWidth,g.clientWidth]},eu=function(b){return"changedTouches"in b?[b.changedTouches[0].clientX,b.changedTouches[0].clientY]:[0,0]},sA=function(b){return b&&"current"in b?b.current:b},IF=function(b){return"\n  .block-interactivity-".concat(b," {pointer-events: none;}\n  .allow-interactivity-").concat(b," {pointer-events: all;}\n")},
JF=0,Mr=[];nA.useMedium(function(b){var g=km.useRef([]),m=km.useRef([0,0]),K=km.useRef(),Z=km.useState(JF++)[0],ia=km.useState(function(){return Zv()})[0],ua=km.useRef(b);km.useEffect(function(){ua.current=b},[b]);km.useEffect(function(){if(b.inert){document.body.classList.add("block-interactivity-".concat(Z));var Mb=Mz([b.lockRef.current],(b.shards||[]).map(sA),!0).filter(Boolean);Mb.forEach(function(sc){return sc.classList.add("allow-interactivity-".concat(Z))});return function(){document.body.classList.remove("block-interactivity-".concat(Z));
Mb.forEach(function(sc){return sc.classList.remove("allow-interactivity-".concat(Z))})}}},[b.inert,b.lockRef.current,b.shards]);var Ia=km.useCallback(function(Mb,sc){if("touches"in Mb&&2===Mb.touches.length)return!ua.current.allowPinchZoom;var lc=eu(Mb),Rb=m.current,rc="deltaX"in Mb?Mb.deltaX:Rb[0]-lc[0];Rb="deltaY"in Mb?Mb.deltaY:Rb[1]-lc[1];var Gc=Mb.target,Cc=Math.abs(rc)>Math.abs(Rb)?"h":"v";if("touches"in Mb&&"h"===Cc&&"range"===Gc.type)return!1;var Uc=pA(Cc,Gc);if(!Uc)return!0;Uc?lc=Cc:(lc=
"v"===Cc?"h":"v",Uc=pA(Cc,Gc));if(!Uc)return!1;!K.current&&"changedTouches"in Mb&&(rc||Rb)&&(K.current=lc);if(!lc)return!0;lc=K.current||lc;Rb="h"===lc?rc:Rb;rc=window.getComputedStyle(sc).direction;rc="h"===lc&&"rtl"===rc?-1:1;Cc=rc*Rb;Mb=Mb.target;Rb=sc.contains(Mb);Gc=!1;Cc=0<Cc;var ae=Uc=0;do{var Gd=rA(lc,Mb),qe=Gd[0];Gd=Gd[1]-Gd[2]-rc*qe;(qe||Gd)&&qA(lc,Mb)&&(Uc+=Gd,ae+=qe);Mb=Mb.parentNode}while(!Rb&&Mb!==document.body||Rb&&(sc.contains(Mb)||sc===Mb));Cc&&0===Uc?Gc=!0:Cc||0!==ae||(Gc=!0);return Gc},
[]),Xa=km.useCallback(function(Mb){if(Mr.length&&Mr[Mr.length-1]===ia){var sc="deltaY"in Mb?[Mb.deltaX,Mb.deltaY]:eu(Mb),lc=g.current.filter(function(Rb){var rc;if(rc=Rb.name===Mb.type&&Rb.target===Mb.target)Rb=Rb.delta,rc=Rb[0]===sc[0]&&Rb[1]===sc[1];return rc})[0];lc&&lc.should?Mb.cancelable&&Mb.preventDefault():lc||(lc=(ua.current.shards||[]).map(sA).filter(Boolean).filter(function(Rb){return Rb.contains(Mb.target)}),(0<lc.length?Ia(Mb,lc[0]):!ua.current.noIsolation)&&Mb.cancelable&&Mb.preventDefault())}},
[]),bb=km.useCallback(function(Mb,sc,lc,Rb){var rc={name:Mb,delta:sc,target:lc,should:Rb};g.current.push(rc);setTimeout(function(){g.current=g.current.filter(function(Gc){return Gc!==rc})},1)},[]),pb=km.useCallback(function(Mb){m.current=eu(Mb);K.current=void 0},[]),sb=km.useCallback(function(Mb){bb(Mb.type,[Mb.deltaX,Mb.deltaY],Mb.target,Ia(Mb,b.lockRef.current))},[]),Ub=km.useCallback(function(Mb){bb(Mb.type,eu(Mb),Mb.target,Ia(Mb,b.lockRef.current))},[]);km.useEffect(function(){Mr.push(ia);b.setCallbacks({onScrollCapture:sb,
onWheelCapture:sb,onTouchMoveCapture:Ub});document.addEventListener("wheel",Xa,Lr);document.addEventListener("touchmove",Xa,Lr);document.addEventListener("touchstart",pb,Lr);return function(){Mr=Mr.filter(function(Mb){return Mb!==ia});document.removeEventListener("wheel",Xa,Lr);document.removeEventListener("touchmove",Xa,Lr);document.removeEventListener("touchstart",pb,Lr)}},[]);var kc=b.removeScrollBar;return km.createElement(km.Fragment,null,b.inert?km.createElement(ia,{styles:IF(Z)}):null,kc?km.createElement(Qz,
{gapMode:"margin"}):null)});var tA=mA.forwardRef(function(b,g){return mA.createElement(du,Hn({},b,{ref:g,sideCar:Xv}))});tA.classNames=du.classNames;var [uA]=yi("Popover",[kA]),fu=kA(),[KF,Ps]=uA("Popover"),LF=(0,Pj.forwardRef)((b,g)=>{var {__scopePopover:m}=b;const K=Yb(b,["__scopePopover"]),Z=Ps("PopoverTrigger",m);m=fu(m);g=Wg(g,Z.triggerRef);b=(0,Pj.createElement)(iw.button,hf({type:"button","aria-haspopup":"dialog","aria-expanded":Z.open,"aria-controls":Z.contentId,"data-state":Z.open?"open":
"closed"},K,{ref:g,onClick:Of(b.onClick,Z.onOpenToggle)}));return Z.hasCustomAnchor?b:(0,Pj.createElement)(yF,hf({asChild:!0},m),b)}),[,MF]=uA("PopoverPortal",{forceMount:void 0}),NF=(0,Pj.forwardRef)((b,g)=>{var m=MF("PopoverContent",b.__scopePopover);({forceMount:m=m.forceMount}=b);const K=Yb(b,["forceMount"]);b=Ps("PopoverContent",b.__scopePopover);return(0,Pj.createElement)(Sv,{present:m||b.open},b.modal?(0,Pj.createElement)(OF,hf({},K,{ref:g})):(0,Pj.createElement)(PF,hf({},K,{ref:g})))}),OF=
(0,Pj.forwardRef)((b,g)=>{const m=Ps("PopoverContent",b.__scopePopover),K=(0,Pj.useRef)(null);g=Wg(g,K);const Z=(0,Pj.useRef)(!1);(0,Pj.useEffect)(()=>{const ia=K.current;if(ia)return Vv(ia)},[]);return(0,Pj.createElement)(tA,{as:gw,allowPinchZoom:!0},(0,Pj.createElement)(vA,hf({},b,{ref:g,trapFocus:m.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Of(b.onCloseAutoFocus,ia=>{var ua;ia.preventDefault();Z.current||null===(ua=m.triggerRef.current)||void 0===ua||ua.focus()}),onPointerDownOutside:Of(b.onPointerDownOutside,
ia=>{ia=ia.detail.originalEvent;const ua=0===ia.button&&!0===ia.ctrlKey;Z.current=2===ia.button||ua},{checkForDefaultPrevented:!1}),onFocusOutside:Of(b.onFocusOutside,ia=>ia.preventDefault(),{checkForDefaultPrevented:!1})})))}),PF=(0,Pj.forwardRef)((b,g)=>{const m=Ps("PopoverContent",b.__scopePopover),K=(0,Pj.useRef)(!1);return(0,Pj.createElement)(vA,hf({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Z=>{var ia;null===(ia=b.onCloseAutoFocus)||void 0===ia||ia.call(b,Z);if(!Z.defaultPrevented){var ua;
K.current||null===(ua=m.triggerRef.current)||void 0===ua||ua.focus();Z.preventDefault()}K.current=!1},onInteractOutside:Z=>{var ia,ua;null===(ia=b.onInteractOutside)||void 0===ia||ia.call(b,Z);Z.defaultPrevented||(K.current=!0);ia=Z.target;(null===(ua=m.triggerRef.current)||void 0===ua?0:ua.contains(ia))&&Z.preventDefault()}}))}),vA=(0,Pj.forwardRef)((b,g)=>{const {__scopePopover:m,trapFocus:K,onOpenAutoFocus:Z,onCloseAutoFocus:ia,disableOutsidePointerEvents:ua,onEscapeKeyDown:Ia,onPointerDownOutside:Xa,
onFocusOutside:bb,onInteractOutside:pb}=b;b=Yb(b,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const sb=Ps("PopoverContent",m),Ub=fu(m);zg();return(0,Pj.createElement)(sF,{asChild:!0,loop:!0,trapped:K,onMountAutoFocus:Z,onUnmountAutoFocus:ia},(0,Pj.createElement)(rF,{asChild:!0,disableOutsidePointerEvents:ua,onInteractOutside:pb,onEscapeKeyDown:Ia,onPointerDownOutside:Xa,onFocusOutside:bb,
onDismiss:()=>sb.onOpenChange(!1)},(0,Pj.createElement)(DF,hf({"data-state":sb.open?"open":"closed",role:"dialog",id:sb.contentId},Ub,b,{ref:g,style:rb(Wa({},b.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),QF=(0,Pj.forwardRef)((b,g)=>{var {__scopePopover:m}=b;b=Yb(b,["__scopePopover"]);m=fu(m);return(0,Pj.createElement)(FF,hf({},m,b,{ref:g}))}),RF=b=>{const {__scopePopover:g,children:m,open:K,defaultOpen:Z,onOpenChange:ia,modal:ua=!1}=b;b=fu(g);
const Ia=(0,Pj.useRef)(null),[Xa,bb]=(0,Pj.useState)(!1),[pb=!1,sb]=Lg({prop:K,defaultProp:Z,onChange:ia});return(0,Pj.createElement)(HF,b,(0,Pj.createElement)(KF,{scope:g,contentId:xk(),triggerRef:Ia,open:pb,onOpenChange:sb,onOpenToggle:(0,Pj.useCallback)(()=>sb(Ub=>!Ub),[sb]),hasCustomAnchor:Xa,onCustomAnchorAdd:(0,Pj.useCallback)(()=>bb(!0),[]),onCustomAnchorRemove:(0,Pj.useCallback)(()=>bb(!1),[]),modal:ua},m))},SF=LF,TF=NF,UF=QF,mi=T(20),wA=T(20),sw=T(20);T(29);var Mm=T(20),gu=(0,Mm.forwardRef)((b,
g)=>{var {children:m}=b;b=Yb(b,["children"]);const K=Mm.Children.toArray(m),Z=K.find($f);if(Z){const ia=Z.props.children;m=K.map(ua=>ua===Z?1<Mm.Children.count(ia)?Mm.Children.only(null):(0,Mm.isValidElement)(ia)?ia.props.children:null:ua);return(0,Mm.createElement)(tw,hf({},b,{ref:g}),(0,Mm.isValidElement)(ia)?(0,Mm.cloneElement)(ia,void 0,m):null)}return(0,Mm.createElement)(tw,hf({},b,{ref:g}),m)});gu.displayName="Slot";var tw=(0,Mm.forwardRef)((b,g)=>{const {children:m}=b;b=Yb(b,["children"]);
return(0,Mm.isValidElement)(m)?(0,Mm.cloneElement)(m,rb(Wa({},hh(b,m.props)),{ref:Si(g,m.ref)})):1<Mm.Children.count(m)?Mm.Children.only(null):null});tw.displayName="SlotClone";var VF=({children:b})=>(0,Mm.createElement)(Mm.Fragment,null,b),hu="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const m=(0,sw.forwardRef)((K,Z)=>{var {asChild:ia}=K;K=Yb(K,["asChild"]);ia=ia?gu:g;(0,sw.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,sw.createElement)(ia,hf({},
K,{ref:Z}))});m.displayName=`Primitive.${g}`;return rb(Wa({},b),{[g]:m})},{}),hp=td(T(20)),xA=["PageUp","PageDown"],yA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],zA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[uw,WF,XF]=function(b){var g=b+"CollectionProvider";const [m,K]=yi(g),[Z,ia]=m(g,{collectionRef:{current:null},
itemMap:new Map}),ua=pb=>{const {scope:sb,children:Ub}=pb;pb=hp.default.useRef(null);const kc=hp.default.useRef(new Map).current;return hp.default.createElement(Z,{scope:sb,itemMap:kc,collectionRef:pb},Ub)};Object.assign(ua,{displayName:g});const Ia=b+"CollectionSlot";g=hp.default.forwardRef((pb,sb)=>{const {scope:Ub,children:kc}=pb;pb=ia(Ia,Ub);sb=Wg(sb,pb.collectionRef);return hp.default.createElement(gu,{ref:sb},kc)});Object.assign(g,{displayName:Ia});const Xa=b+"CollectionItemSlot",bb=hp.default.forwardRef((pb,
sb)=>{const {scope:Ub,children:kc}=pb,Mb=Yb(pb,["scope","children"]),sc=hp.default.useRef(null);pb=Wg(sb,sc);const lc=ia(Xa,Ub);hp.default.useEffect(()=>{lc.itemMap.set(sc,Wa({ref:sc},Mb));return()=>void lc.itemMap.delete(sc)});return hp.default.createElement(gu,{["data-radix-collection-item"]:"",ref:pb},kc)});Object.assign(bb,{displayName:Xa});return[{Provider:ua,Slot:g,ItemSlot:bb},function(pb){const sb=ia(b+"CollectionConsumer",pb);return hp.default.useCallback(()=>{const Ub=sb.collectionRef.current;
if(!Ub)return[];const kc=Array.from(Ub.querySelectorAll("[data-radix-collection-item]"));return Array.from(sb.itemMap.values()).sort((Mb,sc)=>kc.indexOf(Mb.ref.current)-kc.indexOf(sc.ref.current))},[sb.collectionRef,sb.itemMap])},K]}("Slider"),[AA]=yi("Slider",[XF]),[YF,iu]=AA("Slider"),ZF=(0,mi.forwardRef)((b,g)=>{function m(ie){const Id=sg(cf,ie);ia(ie,Id)}function K(ie){ia(ie,ae.current)}function Z(){cf[ae.current]!==df.current[ae.current]&&lc(cf)}function ia(ie,Id,{commit:fd}={commit:!1}){const $c=
(String(bb).split(".")[1]||"").length;ie=Qi(Math.round((ie-Ia)/bb)*bb+Ia,$c);const vd=Hi(ie,[Ia,Xa]);Fe((Md=[])=>{const Rd=Kg(Md,vd,Id);var Be=Ub*bb;if(0<Be){const Ce=Zg(Rd);Be=Math.min(...Ce)>=Be}else Be=!0;return Be?(ae.current=Rd.indexOf(vd),(Be=String(Rd)!==String(Md))&&fd&&lc(Rd),Be?Rd:Md):Md})}const {name:ua,min:Ia=0,max:Xa=100,step:bb=1,orientation:pb="horizontal",disabled:sb=!1,minStepsBetweenThumbs:Ub=0,defaultValue:kc=[Ia],value:Mb,onValueChange:sc=()=>{},onValueCommit:lc=()=>{},inverted:Rb=
!1}=b,rc=Yb(b,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[Gc,Cc]=(0,mi.useState)(null);g=Wg(g,ie=>Cc(ie));const Uc=(0,mi.useRef)(new Set),ae=(0,mi.useRef)(0);var Gd="horizontal"===pb;const qe=Gc?!!Gc.closest("form"):!0;Gd=Gd?$F:aG;const [cf=[],Fe]=Lg({prop:Mb,defaultProp:kc,onChange:ie=>{var Id;null===(Id=[...Uc.current][ae.current])||void 0===Id||Id.focus();sc(ie)}}),df=(0,mi.useRef)(cf);return(0,mi.createElement)(YF,
{scope:b.__scopeSlider,disabled:sb,min:Ia,max:Xa,valueIndexToChangeRef:ae,thumbs:Uc.current,values:cf,orientation:pb},(0,mi.createElement)(uw.Provider,{scope:b.__scopeSlider},(0,mi.createElement)(uw.Slot,{scope:b.__scopeSlider},(0,mi.createElement)(Gd,hf({"aria-disabled":sb,"data-disabled":sb?"":void 0},rc,{ref:g,onPointerDown:Of(rc.onPointerDown,()=>{sb||(df.current=cf)}),min:Ia,max:Xa,inverted:Rb,onSlideStart:sb?void 0:m,onSlideMove:sb?void 0:K,onSlideEnd:sb?void 0:Z,onHomeKeyDown:()=>!sb&&ia(Ia,
0,{commit:!0}),onEndKeyDown:()=>!sb&&ia(Xa,cf.length-1,{commit:!0}),onStepKeyDown:({event:ie,direction:Id})=>{if(!sb){ie=xA.includes(ie.key)||ie.shiftKey&&yA.includes(ie.key);const fd=ae.current;ia(cf[fd]+bb*(ie?10:1)*Id,fd,{commit:!0})}}})))),qe&&cf.map((ie,Id)=>(0,mi.createElement)(fG,{key:Id,name:ua?ua+(1<cf.length?"[]":""):void 0,value:ie})))}),[BA,CA]=AA("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),$F=(0,mi.forwardRef)((b,g)=>{function m(rc){const Gc=Mb.current||Ub.getBoundingClientRect(),
Cc=Gf([0,Gc.width],Rb?[K,Z]:[Z,K]);Mb.current=Gc;return Cc(rc-Gc.left)}const {min:K,max:Z,dir:ia,inverted:ua,onSlideStart:Ia,onSlideMove:Xa,onSlideEnd:bb,onStepKeyDown:pb}=b,sb=Yb(b,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[Ub,kc]=(0,mi.useState)(null);g=Wg(g,rc=>kc(rc));const Mb=(0,mi.useRef)(),sc=Aj(ia),lc="ltr"===sc,Rb=lc&&!ua||!lc&&ua;return(0,mi.createElement)(BA,{scope:b.__scopeSlider,startEdge:Rb?"left":"right",endEdge:Rb?"right":"left",direction:Rb?
1:-1,size:"width"},(0,mi.createElement)(DA,hf({dir:sc,"data-orientation":"horizontal"},sb,{ref:g,style:rb(Wa({},sb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:rc=>{rc=m(rc.clientX);null===Ia||void 0===Ia||Ia(rc)},onSlideMove:rc=>{rc=m(rc.clientX);null===Xa||void 0===Xa||Xa(rc)},onSlideEnd:()=>{Mb.current=void 0;null===bb||void 0===bb||bb()},onStepKeyDown:rc=>{const Gc=zA[Rb?"from-left":"from-right"].includes(rc.key);null===pb||void 0===pb||pb({event:rc,direction:Gc?
-1:1})}})))}),aG=(0,mi.forwardRef)((b,g)=>{function m(Mb){const sc=Ub.current||sb.current.getBoundingClientRect(),lc=Gf([0,sc.height],kc?[Z,K]:[K,Z]);Ub.current=sc;return lc(Mb-sc.top)}const {min:K,max:Z,inverted:ia,onSlideStart:ua,onSlideMove:Ia,onSlideEnd:Xa,onStepKeyDown:bb}=b,pb=Yb(b,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),sb=(0,mi.useRef)(null);g=Wg(g,sb);const Ub=(0,mi.useRef)(),kc=!ia;return(0,mi.createElement)(BA,{scope:b.__scopeSlider,startEdge:kc?
"bottom":"top",endEdge:kc?"top":"bottom",size:"height",direction:kc?1:-1},(0,mi.createElement)(DA,hf({"data-orientation":"vertical"},pb,{ref:g,style:rb(Wa({},pb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Mb=>{Mb=m(Mb.clientY);null===ua||void 0===ua||ua(Mb)},onSlideMove:Mb=>{Mb=m(Mb.clientY);null===Ia||void 0===Ia||Ia(Mb)},onSlideEnd:()=>{Ub.current=void 0;null===Xa||void 0===Xa||Xa()},onStepKeyDown:Mb=>{const sc=zA[kc?"from-bottom":"from-top"].includes(Mb.key);null===
bb||void 0===bb||bb({event:Mb,direction:sc?-1:1})}})))}),DA=(0,mi.forwardRef)((b,g)=>{const {__scopeSlider:m,onSlideStart:K,onSlideMove:Z,onSlideEnd:ia,onHomeKeyDown:ua,onEndKeyDown:Ia,onStepKeyDown:Xa}=b,bb=Yb(b,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),pb=iu("Slider",m);return(0,mi.createElement)(hu.span,hf({},bb,{ref:g,onKeyDown:Of(b.onKeyDown,sb=>{"Home"===sb.key?(ua(sb),sb.preventDefault()):"End"===sb.key?(Ia(sb),sb.preventDefault()):
xA.concat(yA).includes(sb.key)&&(Xa(sb),sb.preventDefault())}),onPointerDown:Of(b.onPointerDown,sb=>{const Ub=sb.target;Ub.setPointerCapture(sb.pointerId);sb.preventDefault();pb.thumbs.has(Ub)?Ub.focus():K(sb)}),onPointerMove:Of(b.onPointerMove,sb=>{sb.target.hasPointerCapture(sb.pointerId)&&Z(sb)}),onPointerUp:Of(b.onPointerUp,sb=>{const Ub=sb.target;Ub.hasPointerCapture(sb.pointerId)&&(Ub.releasePointerCapture(sb.pointerId),ia(sb))})}))}),bG=(0,mi.forwardRef)((b,g)=>{var {__scopeSlider:m}=b;b=Yb(b,
["__scopeSlider"]);m=iu("SliderTrack",m);return(0,mi.createElement)(hu.span,hf({"data-disabled":m.disabled?"":void 0,"data-orientation":m.orientation},b,{ref:g}))}),cG=(0,mi.forwardRef)((b,g)=>{var {__scopeSlider:m}=b;const K=Yb(b,["__scopeSlider"]),Z=iu("SliderRange",m);m=CA("SliderRange",m);var ia=(0,mi.useRef)(null);g=Wg(g,ia);var ua=Z.values.length;ia=Z.values.map(Ia=>Ig(Ia,Z.min,Z.max));ua=1<ua?Math.min(...ia):0;ia=100-Math.max(...ia);return(0,mi.createElement)(hu.span,hf({"data-orientation":Z.orientation,
"data-disabled":Z.disabled?"":void 0},K,{ref:g,style:rb(Wa({},b.style),{[m.startEdge]:ua+"%",[m.endEdge]:ia+"%"})}))}),dG=(0,mi.forwardRef)((b,g)=>{const m=WF(b.__scopeSlider),[K,Z]=(0,mi.useState)(null);g=Wg(g,ua=>Z(ua));const ia=(0,mi.useMemo)(()=>K?m().findIndex(ua=>ua.ref.current===K):-1,[m,K]);return(0,mi.createElement)(eG,hf({},b,{ref:g,index:ia}))}),eG=(0,mi.forwardRef)((b,g)=>{const {__scopeSlider:m,index:K}=b,Z=Yb(b,["__scopeSlider","index"]),ia=iu("SliderThumb",m),ua=CA("SliderThumb",m),
[Ia,Xa]=(0,mi.useState)(null);g=Wg(g,kc=>Xa(kc));var bb=Ni(Ia);const pb=ia.values[K],sb=void 0===pb?0:Ig(pb,ia.min,ia.max),Ub=gh(K,ia.values.length);bb=(bb=null===bb||void 0===bb?void 0:bb[ua.size])?cg(bb,sb,ua.direction):0;(0,mi.useEffect)(()=>{if(Ia)return ia.thumbs.add(Ia),()=>{ia.thumbs.delete(Ia)}},[Ia,ia.thumbs]);return(0,mi.createElement)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[ua.startEdge]:`calc(${sb}% + ${bb}px)`}},(0,mi.createElement)(uw.ItemSlot,
{scope:b.__scopeSlider},(0,mi.createElement)(hu.span,hf({role:"slider","aria-label":b["aria-label"]||Ub,"aria-valuemin":ia.min,"aria-valuenow":pb,"aria-valuemax":ia.max,"aria-orientation":ia.orientation,"data-orientation":ia.orientation,"data-disabled":ia.disabled?"":void 0,tabIndex:ia.disabled?void 0:0},Z,{ref:g,style:void 0===pb?{display:"none"}:b.style,onFocus:Of(b.onFocus,()=>{ia.valueIndexToChangeRef.current=K})}))))}),fG=b=>{const {value:g}=b;b=Yb(b,["value"]);const m=(0,mi.useRef)(null),K=
If(g);(0,mi.useEffect)(()=>{const Z=m.current,ia=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(K!==g&&ia){const ua=new Event("input",{bubbles:!0});ia.call(Z,g);Z.dispatchEvent(ua)}},[K,g]);return(0,mi.createElement)("input",hf({style:{display:"none"}},b,{ref:m,defaultValue:g}))},gG=ZF,hG=bG,iG=cG,jG=dG;Jb=T(616);var kG=td(T(20)),Af=T(20),EA=T(29),lG=T(20),[,mG]=function(b,g){function m(Z){const {children:ia}=Z,ua=Yb(Z,["children"]);Z=(0,Io.useMemo)(()=>ua,Object.values(ua));
return(0,Io.createElement)(K.Provider,{value:Z},ia)}const K=(0,Io.createContext)(g);m.displayName=b+"Provider";return[m,function(Z){const ia=(0,Io.useContext)(K);if(ia)return ia;if(void 0!==g)return g;throw Error(`\`${Z}\` must be used within \`${b}\``);}]}("Label",{id:void 0,controlRef:{current:null}}),nG=b=>{const g=mG("LabelConsumer"),{controlRef:m}=g;(0,lG.useEffect)(()=>{b&&(m.current=b)},[b,m]);return g.id},FA=T(20),oG=(0,FA.forwardRef)((b,g)=>(0,FA.createElement)(gl.span,hf({},b,{ref:g,style:Wa({position:"absolute",
border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},b.style)}))),pG=[" ","Enter","ArrowUp","ArrowDown"],qG=[" ","Enter"],[ju,vw,rG]=mk("Select"),[Qs]=yi("Select",[rG]),[sG,Nr]=Qs("Select"),[tG,uG]=Qs("Select"),vG=(0,Af.forwardRef)((b,g)=>{const {__scopeSelect:m,disabled:K=!1,"aria-labelledby":Z}=b;b=Yb(b,["__scopeSelect","disabled","aria-labelledby"]);const ia=Nr("SelectTrigger",m);g=Wg(g,ia.onTriggerChange);const ua=vw(m);
var Ia=nG(ia.trigger);Ia=Z||Ia;const [Xa,bb,pb]=ei(sb=>{const Ub=ua().filter(Mb=>!Mb.disabled),kc=Ub.find(Mb=>Mb.value===ia.value);sb=Sj(Ub,sb,kc);if(void 0!==sb)ia.onValueChange(sb.value)});return(0,Af.createElement)(gl.button,hf({type:"button",role:"combobox","aria-controls":ia.contentId,"aria-expanded":ia.open,"aria-autocomplete":"none","aria-labelledby":Ia,dir:ia.dir,"data-state":ia.open?"open":"closed",disabled:K,"data-disabled":K?"":void 0,"data-placeholder":void 0===ia.value?"":void 0},b,{ref:g,
onPointerDown:Of(b.onPointerDown,sb=>{sb.target.releasePointerCapture(sb.pointerId);0===sb.button&&!1===sb.ctrlKey&&(K||(ia.onOpenChange(!0),pb()),ia.triggerPointerDownPosRef.current={x:Math.round(sb.pageX),y:Math.round(sb.pageY)},sb.preventDefault())}),onKeyDown:Of(b.onKeyDown,sb=>{const Ub=""!==Xa.current;sb.ctrlKey||sb.altKey||sb.metaKey||1!==sb.key.length||bb(sb.key);Ub&&" "===sb.key||!pG.includes(sb.key)||(K||(ia.onOpenChange(!0),pb()),sb.preventDefault())})}))}),wG=(0,Af.forwardRef)((b,g)=>
{const {__scopeSelect:m,children:K,placeholder:Z}=b;b=Yb(b,["__scopeSelect","className","style","children","placeholder"]);const ia=Nr("SelectValue",m),{onValueNodeHasChildrenChange:ua}=ia,Ia=void 0!==K;g=Wg(g,ia.onValueNodeChange);an(()=>{ua(Ia)},[ua,Ia]);return(0,Af.createElement)(gl.span,hf({},b,{ref:g,style:{pointerEvents:"none"}}),void 0===ia.value&&void 0!==Z?Z:K)}),xG=(0,Af.forwardRef)((b,g)=>{const {children:m}=b;b=Yb(b,["__scopeSelect","children"]);return(0,Af.createElement)(gl.span,hf({"aria-hidden":!0},
b,{ref:g}),m||"")}),yG=(0,Af.forwardRef)((b,g)=>{const m=Nr("SelectContent",b.__scopeSelect),[K,Z]=(0,Af.useState)();an(()=>{Z(new DocumentFragment)},[]);return(0,Af.createElement)(Af.Fragment,null,m.open?(0,Af.createElement)(zG,hf({},b,{ref:g})):K?(0,EA.createPortal)((0,Af.createElement)(GA,{scope:b.__scopeSelect},(0,Af.createElement)(ju.Slot,{scope:b.__scopeSelect},(0,Af.createElement)("div",null,b.children))),K):null)}),[GA,Or]=Qs("SelectContent"),zG=(0,Af.forwardRef)((b,g)=>{const {__scopeSelect:m,
onCloseAutoFocus:K}=b;b=Yb(b,["__scopeSelect","onCloseAutoFocus"]);const Z=Nr("SelectContent",m),[ia,ua]=(0,Af.useState)(null),[Ia,Xa]=(0,Af.useState)(null),[bb,pb]=(0,Af.useState)(null);g=Wg(g,Rd=>Xa(Rd));const [sb,Ub]=(0,Af.useState)(null),[kc,Mb]=(0,Af.useState)(null),sc=vw(m),[lc,Rb]=(0,Af.useState)(!1),rc=(0,Af.useRef)(!0),Gc=(0,Af.useRef)(!1),Cc=(0,Af.useRef)(!1);(0,Af.useEffect)(()=>{if(Ia)return Vv(Ia)},[Ia]);zg();const [Uc,ae]=(0,Af.useState)();an(()=>{Ia&&ae(window.getComputedStyle(Ia).zIndex)},
[Ia]);const Gd=(0,Af.useCallback)(Rd=>{const [Be,...Ce]=sc().map(sf=>sf.ref.current),[Ke]=Ce.slice(-1),Bf=document.activeElement;for(const sf of Rd){if(sf===Bf)break;null===sf||void 0===sf||sf.scrollIntoView({block:"nearest"});sf===Be&&bb&&(bb.scrollTop=0);sf===Ke&&bb&&(bb.scrollTop=bb.scrollHeight);null===sf||void 0===sf||sf.focus();if(document.activeElement!==Bf)break}},[sc,bb]),qe=(0,Af.useCallback)(()=>{if(Z.trigger&&Z.valueNode&&ia&&Ia&&bb&&sb&&kc){var Rd=Z.trigger.getBoundingClientRect(),Be=
Ia.getBoundingClientRect(),Ce=Z.valueNode.getBoundingClientRect(),Ke=kc.getBoundingClientRect();"rtl"!==Z.dir?(Ke=Ce.left-(Ke.left-Be.left),Ce=Rd.width+(Rd.left-Ke),Be=Hi(Ke,[10,window.innerWidth-10-Math.max(Ce,Be.width)]),ia.style.minWidth=Ce+"px",ia.style.left=Be+"px"):(Ke=window.innerWidth-Ce.right-(Be.right-Ke.right),Ce=Rd.width+(window.innerWidth-Rd.right-Ke),Be=Hi(Ke,[10,window.innerWidth-10-Math.max(Ce,Be.width)]),ia.style.minWidth=Ce+"px",ia.style.right=Be+"px");const rk=sc();Be=window.innerHeight-
20;var Bf=bb.scrollHeight,sf=window.getComputedStyle(Ia);Ce=parseInt(sf.borderTopWidth,10);var bh=parseInt(sf.paddingTop,10);Ke=parseInt(sf.borderBottomWidth,10);sf=parseInt(sf.paddingBottom,10);var Pg=Ce+bh+Bf+sf+Ke;Bf=Math.min(5*sb.offsetHeight,Pg);var ni=window.getComputedStyle(bb);sf=parseInt(ni.paddingTop,10);ni=parseInt(ni.paddingBottom,10);const vj=Rd.top+Rd.height/2-10,Nm=Be-vj;Rd=sb.offsetHeight/2;bh=Ce+bh+(sb.offsetTop+Rd);Pg-=bh;bh<=vj?(Ce=sb===rk[rk.length-1].ref.current,ia.style.bottom=
"0px",ia.style.height=bh+Math.max(Nm,Rd+(Ce?ni:0)+(Ia.clientHeight-bb.offsetTop-bb.offsetHeight)+Ke)+"px"):(Ke=sb===rk[0].ref.current,ia.style.top="0px",ia.style.height=Math.max(vj,Ce+bb.offsetTop+(Ke?sf:0)+Rd)+Pg+"px",bb.scrollTop=bh-vj+bb.offsetTop);ia.style.margin="10px 0";ia.style.minHeight=Bf+"px";ia.style.maxHeight=Be+"px";Rb(!0);requestAnimationFrame(()=>Gc.current=!0)}},[sc,Z.trigger,Z.valueNode,ia,Ia,bb,sb,kc,Z.dir]);an(()=>qe(),[qe]);const cf=(0,Af.useCallback)(()=>Gd([sb,Ia]),[Gd,sb,Ia]);
(0,Af.useEffect)(()=>{lc&&cf()},[lc,cf]);const Fe=(0,Af.useCallback)(Rd=>{Rd&&!0===rc.current&&(qe(),cf(),rc.current=!1)},[qe,cf]),{onOpenChange:df,triggerPointerDownPosRef:ie}=Z;(0,Af.useEffect)(()=>{if(Ia){var Rd=0,Be=0;const Ce=Bf=>{var sf,bh,Pg,ni;Rd=Math.abs(Math.round(Bf.pageX)-(null!==(sf=null===(bh=ie.current)||void 0===bh?void 0:bh.x)&&void 0!==sf?sf:0));Be=Math.abs(Math.round(Bf.pageY)-(null!==(Pg=null===(ni=ie.current)||void 0===ni?void 0:ni.y)&&void 0!==Pg?Pg:0))},Ke=Bf=>{10>=Rd&&10>=
Be?Bf.preventDefault():Ia.contains(Bf.target)||df(!1);document.removeEventListener("pointermove",Ce);ie.current=null};null!==ie.current&&(document.addEventListener("pointermove",Ce),document.addEventListener("pointerup",Ke,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",Ce);document.removeEventListener("pointerup",Ke,{capture:!0})}}},[Ia,df,ie]);(0,Af.useEffect)(()=>{const Rd=()=>df(!1);window.addEventListener("blur",Rd);window.addEventListener("resize",Rd);return()=>
{window.removeEventListener("blur",Rd);window.removeEventListener("resize",Rd)}},[df]);const [Id,fd]=ei(Rd=>{const Be=sc().filter(Bf=>!Bf.disabled),Ce=Be.find(Bf=>Bf.ref.current===document.activeElement),Ke=Sj(Be,Rd,Ce);Ke&&setTimeout(()=>Ke.ref.current.focus())}),$c=(0,Af.useCallback)((Rd,Be,Ce)=>{Ce=!Cc.current&&!Ce;if(void 0!==Z.value&&Z.value===Be||Ce)Ub(Rd),Ce&&(Cc.current=!0)},[Z.value]),vd=(0,Af.useCallback)(()=>null===Ia||void 0===Ia?void 0:Ia.focus(),[Ia]),Md=(0,Af.useCallback)((Rd,Be,Ce)=>
{Ce=!Cc.current&&!Ce;(void 0!==Z.value&&Z.value===Be||Ce)&&Mb(Rd)},[Z.value]);return(0,Af.createElement)(GA,{scope:m,contentWrapper:ia,content:Ia,viewport:bb,onViewportChange:pb,itemRefCallback:$c,selectedItem:sb,onItemLeave:vd,itemTextRefCallback:Md,selectedItemText:kc,onScrollButtonChange:Fe,isPositioned:lc,shouldExpandOnScrollRef:Gc,searchRef:Id},(0,Af.createElement)(aw,{as:Gr,allowPinchZoom:!0},(0,Af.createElement)("div",{ref:ua,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Uc}},
(0,Af.createElement)(rz,{asChild:!0,trapped:Z.open,onMountAutoFocus:Rd=>{Rd.preventDefault()},onUnmountAutoFocus:Of(K,Rd=>{var Be;null===(Be=Z.trigger)||void 0===Be||Be.focus({preventScroll:!0});Rd.preventDefault()})},(0,Af.createElement)(pz,hf({role:"listbox",id:Z.contentId,"data-state":Z.open?"open":"closed",dir:Z.dir,onContextMenu:Rd=>Rd.preventDefault()},b,{ref:g,style:Wa({display:"flex",flexDirection:"column",boxSizing:"border-box",maxHeight:"100%",outline:"none"},b.style),disableOutsidePointerEvents:!0,
onFocusOutside:Rd=>Rd.preventDefault(),onDismiss:()=>Z.onOpenChange(!1),onKeyDown:Of(b.onKeyDown,Rd=>{var Be=Rd.ctrlKey||Rd.altKey||Rd.metaKey;"Tab"===Rd.key&&Rd.preventDefault();Be||1!==Rd.key.length||fd(Rd.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Rd.key)){let Ce=sc().filter(Ke=>!Ke.disabled).map(Ke=>Ke.ref.current);["ArrowUp","End"].includes(Rd.key)&&(Ce=Ce.slice().reverse());["ArrowUp","ArrowDown"].includes(Rd.key)&&(Be=Ce.indexOf(Rd.target),Ce=Ce.slice(Be+1));setTimeout(()=>Gd(Ce));
Rd.preventDefault()}})}))))))}),AG=(0,Af.forwardRef)((b,g)=>{const {__scopeSelect:m}=b;b=Yb(b,["__scopeSelect"]);const K=Or("SelectViewport",m);g=Wg(g,K.onViewportChange);const Z=(0,Af.useRef)(0);return(0,Af.createElement)(Af.Fragment,null,(0,Af.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,Af.createElement)(ju.Slot,
{scope:m},(0,Af.createElement)(gl.div,hf({"data-radix-select-viewport":"",role:"presentation"},b,{ref:g,style:Wa({position:"relative",flex:1,overflow:"auto"},b.style),onScroll:Of(b.onScroll,ia=>{ia=ia.currentTarget;const {contentWrapper:ua,shouldExpandOnScrollRef:Ia}=K;if(null!==Ia&&void 0!==Ia&&Ia.current&&ua){var Xa=Math.abs(Z.current-ia.scrollTop);if(0<Xa){var bb=window.innerHeight-20,pb=parseFloat(ua.style.minHeight);const sb=parseFloat(ua.style.height);pb=Math.max(pb,sb);pb<bb&&(Xa=pb+Xa,bb=
Math.min(bb,Xa),Xa-=bb,ua.style.height=bb+"px","0px"===ua.style.bottom&&(ia.scrollTop=0<Xa?Xa:0,ua.style.justifyContent="flex-end"))}}Z.current=ia.scrollTop})}))))});Qs("SelectGroup");var [BG,CG]=Qs("SelectItem"),DG=(0,Af.forwardRef)((b,g)=>{const {__scopeSelect:m,value:K,disabled:Z=!1,textValue:ia}=b;b=Yb(b,["__scopeSelect","value","disabled","textValue"]);const ua=Nr("SelectItem",m),Ia=Or("SelectItem",m),Xa=ua.value===K,[bb,pb]=(0,Af.useState)(null!==ia&&void 0!==ia?ia:""),[sb,Ub]=(0,Af.useState)(!1);
g=Wg(g,sc=>{var lc;return null===(lc=Ia.itemRefCallback)||void 0===lc?void 0:lc.call(Ia,sc,K,Z)});const kc=xk(),Mb=()=>{Z||(ua.onValueChange(K),ua.onOpenChange(!1))};return(0,Af.createElement)(BG,{scope:m,value:K,disabled:Z,textId:kc,isSelected:Xa,onItemTextChange:(0,Af.useCallback)(sc=>{pb(lc=>{var Rb;return lc||(null!==(Rb=null===sc||void 0===sc?void 0:sc.textContent)&&void 0!==Rb?Rb:"").trim()})},[])},(0,Af.createElement)(ju.ItemSlot,{scope:m,value:K,disabled:Z,textValue:bb},(0,Af.createElement)(gl.div,
hf({role:"option","aria-labelledby":kc,"data-highlighted":sb?"":void 0,"aria-selected":Xa&&sb,"data-state":Xa?"checked":"unchecked","aria-disabled":Z||void 0,"data-disabled":Z?"":void 0,tabIndex:Z?void 0:-1},b,{ref:g,onFocus:Of(b.onFocus,()=>Ub(!0)),onBlur:Of(b.onBlur,()=>Ub(!1)),onPointerUp:Of(b.onPointerUp,Mb),onPointerMove:Of(b.onPointerMove,sc=>{if(Z){var lc;null===(lc=Ia.onItemLeave)||void 0===lc||lc.call(Ia)}else sc.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Of(b.onPointerLeave,
sc=>{if(sc.currentTarget===document.activeElement){var lc;null===(lc=Ia.onItemLeave)||void 0===lc||lc.call(Ia)}}),onKeyDown:Of(b.onKeyDown,sc=>{var lc;if(""===(null===(lc=Ia.searchRef)||void 0===lc?void 0:lc.current)||" "!==sc.key)qG.includes(sc.key)&&Mb()," "===sc.key&&sc.preventDefault()})}))))}),EG=(0,Af.forwardRef)((b,g)=>{var {__scopeSelect:m}=b;b=Yb(b,["__scopeSelect","className","style"]);const K=Nr("SelectItemText",m),Z=Or("SelectItemText",m),ia=CG("SelectItemText",m);m=uG("SelectItemText",
m);const [ua,Ia]=(0,Af.useState)(null);g=Wg(g,Ub=>Ia(Ub),ia.onItemTextChange,Ub=>{var kc;return null===(kc=Z.itemTextRefCallback)||void 0===kc?void 0:kc.call(Z,Ub,ia.value,ia.disabled)});const Xa=null===ua||void 0===ua?void 0:ua.textContent,bb=(0,Af.useMemo)(()=>(0,Af.createElement)("option",{key:ia.value,value:ia.value,disabled:ia.disabled},Xa),[ia.disabled,ia.value,Xa]),{onNativeOptionAdd:pb,onNativeOptionRemove:sb}=m;an(()=>{pb(bb);return()=>sb(bb)},[pb,sb,bb]);return(0,Af.createElement)(Af.Fragment,
null,(0,Af.createElement)(gl.span,hf({id:ia.textId},b,{ref:g})),ia.isSelected&&K.valueNode&&!K.valueNodeHasChildren?(0,EA.createPortal)(b.children,K.valueNode):null)}),FG=(0,Af.forwardRef)((b,g)=>{const m=Or("SelectScrollUpButton",b.__scopeSelect),[K,Z]=(0,Af.useState)(!1);g=Wg(g,m.onScrollButtonChange);an(()=>{if(m.viewport&&m.isPositioned){let ia=function(){Z(0<ua.scrollTop)};const ua=m.viewport;ia();ua.addEventListener("scroll",ia);return()=>ua.removeEventListener("scroll",ia)}},[m.viewport,m.isPositioned]);
return K?(0,Af.createElement)(HA,hf({},b,{ref:g,onAutoScroll:()=>{const {viewport:ia,selectedItem:ua}=m;ia&&ua&&(ia.scrollTop-=ua.offsetHeight)}})):null}),GG=(0,Af.forwardRef)((b,g)=>{const m=Or("SelectScrollDownButton",b.__scopeSelect),[K,Z]=(0,Af.useState)(!1);g=Wg(g,m.onScrollButtonChange);an(()=>{if(m.viewport&&m.isPositioned){let ia=function(){Z(Math.ceil(ua.scrollTop)<ua.scrollHeight-ua.clientHeight)};const ua=m.viewport;ia();ua.addEventListener("scroll",ia);return()=>ua.removeEventListener("scroll",
ia)}},[m.viewport,m.isPositioned]);return K?(0,Af.createElement)(HA,hf({},b,{ref:g,onAutoScroll:()=>{const {viewport:ia,selectedItem:ua}=m;ia&&ua&&(ia.scrollTop+=ua.offsetHeight)}})):null}),HA=(0,Af.forwardRef)((b,g)=>{const {__scopeSelect:m,onAutoScroll:K}=b;b=Yb(b,["__scopeSelect","onAutoScroll"]);const Z=Or("SelectScrollButton",m),ia=(0,Af.useRef)(null),ua=vw(m),Ia=(0,Af.useCallback)(()=>{null!==ia.current&&(window.clearInterval(ia.current),ia.current=null)},[]);(0,Af.useEffect)(()=>()=>Ia(),[Ia]);
an(()=>{var Xa;const bb=ua().find(pb=>pb.ref.current===document.activeElement);null===bb||void 0===bb||null===(Xa=bb.ref.current)||void 0===Xa||Xa.scrollIntoView({block:"nearest"})},[ua]);return(0,Af.createElement)(gl.div,hf({"aria-hidden":!0},b,{ref:g,style:Wa({flexShrink:0},b.style),onPointerMove:Of(b.onPointerMove,()=>{var Xa;null===(Xa=Z.onItemLeave)||void 0===Xa||Xa.call(Z);null===ia.current&&(ia.current=window.setInterval(K,50))}),onPointerLeave:Of(b.onPointerLeave,()=>{Ia()})}))}),IA=(0,Af.forwardRef)((b,
g)=>{const {value:m}=b;b=Yb(b,["value"]);const K=(0,Af.useRef)(null);g=Wg(g,K);const Z=If(m);(0,Af.useEffect)(()=>{const ia=K.current,ua=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(Z!==m&&ua){const Ia=new Event("change",{bubbles:!0});ua.call(ia,m);ia.dispatchEvent(Ia)}},[Z,m]);return(0,Af.createElement)(oG,{asChild:!0},(0,Af.createElement)("select",hf({},b,{ref:g,defaultValue:m})))});IA.displayName="BubbleSelect";var HG=b=>{const {__scopeSelect:g,children:m,
open:K,defaultOpen:Z,onOpenChange:ia,value:ua,defaultValue:Ia,onValueChange:Xa,dir:bb,name:pb,autoComplete:sb}=b,[Ub,kc]=(0,Af.useState)(null),[Mb,sc]=(0,Af.useState)(null),[lc,Rb]=(0,Af.useState)(!1),rc=Aj(bb),[Gc=!1,Cc]=Lg({prop:K,defaultProp:Z,onChange:ia}),[Uc,ae]=Lg({prop:ua,defaultProp:Ia,onChange:Xa}),Gd=(0,Af.useRef)(null),qe=Ub?!!Ub.closest("form"):!0,[cf,Fe]=(0,Af.useState)(new Set),df=Array.from(cf).map(ie=>ie.props.value).join(";");return(0,Af.createElement)(sG,{scope:g,trigger:Ub,onTriggerChange:kc,
valueNode:Mb,onValueNodeChange:sc,valueNodeHasChildren:lc,onValueNodeHasChildrenChange:Rb,contentId:xk(),value:Uc,onValueChange:ae,open:Gc,onOpenChange:Cc,dir:rc,triggerPointerDownPosRef:Gd},(0,Af.createElement)(ju.Provider,{scope:g},(0,Af.createElement)(tG,{scope:b.__scopeSelect,onNativeOptionAdd:(0,Af.useCallback)(ie=>{Fe(Id=>(new Set(Id)).add(ie))},[]),onNativeOptionRemove:(0,Af.useCallback)(ie=>{Fe(Id=>{Id=new Set(Id);Id.delete(ie);return Id})},[])},m)),qe?(0,Af.createElement)(IA,{key:df,"aria-hidden":!0,
tabIndex:-1,name:pb,autoComplete:sb,value:Uc,onChange:ie=>ae(ie.target.value)},Array.from(cf)):null)},IG=vG,JG=wG,KG=xG,LG=b=>(0,Af.createElement)(Hz,hf({asChild:!0},b)),MG=yG,NG=AG,OG=DG,PG=EG,QG=FG,RG=GG;Jb=T(616);var SG=td(T(20));Jb=T(616);var ww=SG.forwardRef((b,g)=>{var {value:m,className:K}=b;b=Yb(b,["autoResize","value","className"]);return(0,Jb.jsx)("div",{className:"tl-input"+(K?" "+K:""),children:(0,Jb.jsxs)("div",{className:"tl-input-sizer",children:[(0,Jb.jsx)("div",{className:"tl-input-hidden",
children:m}),(0,Jb.jsx)("input",Wa({ref:g,value:m,className:"tl-text-input",type:"text"},b))]})})}),hl=td(T(20)),JA=T(20),KA=(0,JA.forwardRef)((b,g)=>{const {pressed:m,defaultPressed:K=!1,onPressedChange:Z}=b,ia=Yb(b,["pressed","defaultPressed","onPressedChange"]),[ua=!1,Ia]=Lg({prop:m,onChange:Z,defaultProp:K});return(0,JA.createElement)(gl.button,hf({type:"button","aria-pressed":ua,"data-state":ua?"on":"off","data-disabled":b.disabled?"":void 0},ia,{ref:g,onClick:Of(b.onClick,()=>{b.disabled||Ia(!ua)})}))}),
TG=KA,[LA]=yi("ToggleGroup",[Ut]),MA=Ut(),UG=hl.default.forwardRef((b,g)=>{const {type:m}=b;b=Yb(b,["type"]);if("single"===m)return hl.default.createElement(VG,hf({},b,{ref:g}));if("multiple"===m)return hl.default.createElement(WG,hf({},b,{ref:g}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[NA,OA]=LA("ToggleGroup"),VG=hl.default.forwardRef((b,g)=>{const {value:m,defaultValue:K,onValueChange:Z=()=>{}}=b,ia=Yb(b,["value","defaultValue","onValueChange"]),[ua,Ia]=Lg({prop:m,defaultProp:K,
onChange:Z});return hl.default.createElement(NA,{scope:b.__scopeToggleGroup,type:"single",value:ua?[ua]:[],onItemActivate:Ia,onItemDeactivate:hl.default.useCallback(()=>Ia(""),[Ia])},hl.default.createElement(QA,hf({},ia,{ref:g})))}),WG=hl.default.forwardRef((b,g)=>{const {value:m,defaultValue:K,onValueChange:Z=()=>{}}=b,ia=Yb(b,["value","defaultValue","onValueChange"]),[ua=[],Ia]=Lg({prop:m,defaultProp:K,onChange:Z}),Xa=hl.default.useCallback(pb=>Ia((sb=[])=>[...sb,pb]),[Ia]),bb=hl.default.useCallback(pb=>
Ia((sb=[])=>sb.filter(Ub=>Ub!==pb)),[Ia]);return hl.default.createElement(NA,{scope:b.__scopeToggleGroup,type:"multiple",value:ua,onItemActivate:Xa,onItemDeactivate:bb},hl.default.createElement(QA,hf({},ia,{ref:g})))}),[XG,PA]=LA("ToggleGroup"),QA=hl.default.forwardRef((b,g)=>{const {__scopeToggleGroup:m,disabled:K=!1,rovingFocus:Z=!0,orientation:ia,dir:ua,loop:Ia=!0}=b;var Xa=Yb(b,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));b=MA(m);const bb=Aj(ua);Xa=Wa({role:"group",
dir:bb},Xa);return hl.default.createElement(XG,{scope:m,rovingFocus:Z,disabled:K},Z?hl.default.createElement(Kz,hf({asChild:!0},b,{orientation:ia,dir:bb,loop:Ia}),hl.default.createElement(gl.div,hf({},Xa,{ref:g}))):hl.default.createElement(gl.div,hf({},Xa,{ref:g})))}),YG=hl.default.forwardRef((b,g)=>{var m=OA("ToggleGroupItem",b.__scopeToggleGroup);const K=PA("ToggleGroupItem",b.__scopeToggleGroup),Z=MA(b.__scopeToggleGroup);m=m.value.includes(b.value);const ia=K.disabled||b.disabled;b=rb(Wa({},b),
{pressed:m,disabled:ia});const ua=hl.default.useRef(null);return K.rovingFocus?hl.default.createElement(Lz,hf({asChild:!0},Z,{focusable:!ia,active:m,ref:ua}),hl.default.createElement(RA,hf({},b,{ref:g}))):hl.default.createElement(RA,hf({},b,{ref:g}))}),RA=hl.default.forwardRef((b,g)=>{const {__scopeToggleGroup:m,value:K}=b,Z=Yb(b,["__scopeToggleGroup","value"]),ia=OA("ToggleGroupItem",m);b={role:"radio","aria-checked":b.pressed,"aria-pressed":void 0};return hl.default.createElement(KA,hf({},"single"===
ia.type?b:void 0,Z,{ref:g,onPressedChange:ua=>{if(ua)ia.onItemActivate(K);else ia.onItemDeactivate(K)}}))}),SA=UG,TA=YG;Jb=T(616);Jb=T(616);Jb=T(616);var UA="Edit AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink IFrameSource LogseqPortalViewMode ArrowMode OpenPage".split(" "),ZG=["Edit","YoutubeLink","IFrameSource","OpenPage"],Yn=new Map,xw={"logseq-portal":"Swatch Edit LogseqPortalViewMode ScaleLevel OpenPage AutoResizing".split(" "),youtube:["YoutubeLink"],iframe:["IFrameSource"],
box:["Swatch","NoFill","StrokeType"],ellipse:["Swatch","NoFill","StrokeType"],polygon:["Swatch","NoFill","StrokeType"],line:["Edit","Swatch","ArrowMode"],pencil:["Swatch"],highlighter:["Swatch"],text:["Edit","Swatch","ScaleLevel","AutoResizing","TextStyle"],html:["ScaleLevel","AutoResizing"]};Object.entries(xw).filter(([,b])=>b.includes("NoFill")&&b.includes("Swatch")).map(([b])=>b);var $G=pf(()=>{const b=dg(),g=Tj(b.selectedShapesArray,"Edit")[0];return(0,Jb.jsx)(Fi,{type:"button",title:"Edit",onClick:()=>
{var m,K,Z,ia,ua,Ia;b.api.editShape(g);if("logseq-portal"===g.props.type){let Xa=g.props.pageId;"P"===g.props.blockType&&(Xa=(null==(Z=null==(K=null==(m=window.logseq)?void 0:m.api)?void 0:K.get_page_blocks_tree)?void 0:Z.call(K,g.props.pageId).find(bb=>!("propertiesOrder"in bb))).uuid);null==(Ia=null==(ua=null==(ia=window.logseq)?void 0:ia.api)?void 0:ua.edit_block)?void 0:Ia.call(ua,Xa)}},children:(0,Jb.jsx)(Bi,{name:"text"})})}),aH=pf(()=>{const b=dg(),g=Tj(b.selectedShapesArray,"AutoResizing"),
m=g.every(K=>K.props.isAutoResizing);return(0,Jb.jsx)(Fl,{title:"Auto Resize",toggle:g.every(K=>"logseq-portal"===K.props.type),className:"tl-button",pressed:m,onPressedChange:K=>{g.forEach(Z=>{if("logseq-portal"===Z.props.type)Z.update({isAutoResizing:K});else Z.onResetBounds({zoom:b.viewport.camera.zoom})});b.persist()},children:(0,Jb.jsx)(Bi,{name:"dimensions"})})}),bH=pf(()=>{const b=dg(),g=Tj(b.selectedShapesArray,"LogseqPortalViewMode"),m=g.every(K=>K.collapsed);return(0,Jb.jsx)(ql,{title:"View Mode",
options:[{value:"1",icon:"object-compact"},{value:"0",icon:"object-expanded"}],value:m?"1":"0",onValueChange:K=>{g.forEach(Z=>{Z.setCollapsed("1"===K?!0:!1)});b.persist()}})}),cH=pf(()=>{const b=dg(),g=Tj(b.selectedShapesArray,"ScaleLevel"),m=1<(new Set(g.map(K=>K.scaleLevel))).size?"":g[0].scaleLevel;return(0,Jb.jsx)(Gk,{title:"Scale Level",options:[{label:"Extra Small",value:"xs"},{label:"Small",value:"sm"},{label:"Medium",value:"md"},{label:"Large",value:"lg"},{label:"Extra Large",value:"xl"},
{label:"Huge",value:"xxl"}],value:m,onValueChange:K=>{g.forEach(Z=>{Z.setScaleLevel(K)});b.persist()}})}),dH=pf(()=>{const {handlers:b}=Zq.default.useContext(zp);var g=dg();g=Tj(g.selectedShapesArray,"OpenPage")[0];const {pageId:m,blockType:K}=g.props;return(0,Jb.jsxs)("span",{className:"flex gap-1",children:[(0,Jb.jsx)(Fi,{title:"Open Page in Right Sidebar",type:"button",onClick:()=>null==b?void 0:b.sidebarAddBlock(m,"B"===K?"block":"page"),children:(0,Jb.jsx)(Bi,{name:"layout-sidebar-right"})}),
(0,Jb.jsx)(Fi,{title:"Open Page",type:"button",onClick:()=>null==b?void 0:b.redirectToPage(m),children:(0,Jb.jsx)(Bi,{name:"external-link"})})]})}),eH=pf(()=>{const b=dg(),g=Tj(b.selectedShapesArray,"IFrameSource")[0],m=Zq.default.useCallback(Z=>{g.onIFrameSourceChange(Z.target.value.trim().toLowerCase());b.persist()},[]),K=Zq.default.useCallback(()=>{g.reload()},[]);return(0,Jb.jsxs)("span",{className:"flex gap-3",children:[(0,Jb.jsx)(Fi,{title:"Reload",type:"button",onClick:K,children:(0,Jb.jsx)(Bi,
{name:"refresh"})}),(0,Jb.jsx)(ww,{title:"Website Url",className:"tl-iframe-src",value:`${g.props.url}`,onChange:m}),(0,Jb.jsx)(Fi,{title:"Open website url",type:"button",onClick:()=>window.open(g.props.url),children:(0,Jb.jsx)(Bi,{name:"external-link"})})]})}),fH=pf(()=>{const b=dg(),g=Tj(b.selectedShapesArray,"YoutubeLink")[0],m=Zq.default.useCallback(K=>{g.onYoutubeLinkChange(K.target.value);b.persist()},[]);return(0,Jb.jsxs)("span",{className:"flex gap-3",children:[(0,Jb.jsx)(ww,{title:"YouTube Link",
className:"tl-youtube-link",value:`${g.props.url}`,onChange:m}),(0,Jb.jsx)(Fi,{title:"Open YouTube Link",type:"button",onClick:()=>{var K,Z,ia;return null==(ia=null==(Z=null==(K=window.logseq)?void 0:K.api)?void 0:Z.open_external_link)?void 0:ia.call(Z,g.props.url)},children:(0,Jb.jsx)(Bi,{name:"external-link"})})]})}),gH=pf(()=>{const b=dg(),g=Tj(b.selectedShapesArray,"NoFill"),m=Zq.default.useCallback(Z=>{g.forEach(ia=>ia.update({noFill:Z}));b.persist()},[]),K=g.every(Z=>Z.props.noFill);return(0,Jb.jsx)(Fl,
{title:"Fill Toggle",className:"tl-button",pressed:K,onPressedChange:m,children:(0,Jb.jsx)(Bi,{name:K?"droplet-off":"droplet"})})}),hH=pf(()=>{const b=dg(),g=Tj(b.selectedShapesArray,"Swatch"),m=Zq.default.useCallback(Z=>{g.forEach(ia=>{ia.update({fill:Z,stroke:Z})});b.persist()},[]),K=Zq.default.useCallback(Z=>{g.forEach(ia=>{ia.update({opacity:Z})});b.persist()},[]);return(0,Jb.jsx)(rh,{title:"Color Picker",color:g[0].props.noFill?g[0].props.stroke:g[0].props.fill,opacity:g[0].props.opacity,collisionRef:document.getElementById("main-content-container"),
setOpacity:K,setColor:m})}),iH=pf(()=>{const b=dg(),g=Tj(b.selectedShapesArray,"StrokeType"),m=g.every(K=>"dashed"===K.props.strokeType)?"dashed":g.every(K=>"line"===K.props.strokeType)?"line":"mixed";return(0,Jb.jsx)(ql,{title:"Stroke Type",options:[{value:"line",icon:"circle"},{value:"dashed",icon:"circle-dashed"}],value:m,onValueChange:K=>{g.forEach(Z=>{Z.update({strokeType:K})});b.persist()}})}),jH=pf(()=>{const b=dg(),g=Tj(b.selectedShapesArray,"ArrowMode");var m=g.every(Z=>{var ia;return"arrow"===
(null==(ia=Z.props.decorations)?void 0:ia.start)});const K=g.every(Z=>{var ia;return"arrow"===(null==(ia=Z.props.decorations)?void 0:ia.end)});m=[m?"start":null,K?"end":null].filter(Ch);return(0,Jb.jsx)(Oj,{title:"Arrow Head",options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:m,onValueChange:Z=>{g.forEach(ia=>{var ua=ia.update;var Ia={start:Z.includes("start")?"arrow":null,end:Z.includes("end")?"arrow":null};ua.call(ia,{decorations:Ia})});b.persist()}})}),
kH=pf(()=>{const b=dg(),g=Tj(b.selectedShapesArray,"TextStyle"),m=g.every(Z=>500<Z.props.fontWeight),K=g.every(Z=>Z.props.italic);return(0,Jb.jsxs)("span",{className:"flex gap-1",children:[(0,Jb.jsx)(Fl,{title:"Bold",className:"tl-button",pressed:m,onPressedChange:Z=>{g.forEach(ia=>{ia.update({fontWeight:Z?700:400});ia.onResetBounds()});b.persist()},children:(0,Jb.jsx)(Bi,{name:"bold"})}),(0,Jb.jsx)(Fl,{title:"Italic",className:"tl-button",pressed:K,onPressedChange:Z=>{g.forEach(ia=>{ia.update({italic:Z});
ia.onResetBounds()});b.persist()},children:(0,Jb.jsx)(Bi,{name:"italic"})})]})});Yn.set("Edit",$G);Yn.set("AutoResizing",aH);Yn.set("LogseqPortalViewMode",bH);Yn.set("ScaleLevel",cH);Yn.set("OpenPage",dH);Yn.set("YoutubeLink",fH);Yn.set("IFrameSource",eH);Yn.set("NoFill",gH);Yn.set("Swatch",hH);Yn.set("StrokeType",iH);Yn.set("ArrowMode",jH);Yn.set("TextStyle",kH);var VA=b=>{var g;return(null!=(g=xw[b])?g:[]).filter(Ch)},lH=b=>{const g=b.map(K=>K.props.type),m=new Set(0<b.length?VA(g[0]):[]);for(let K=
1;K<g.length&&0<m.size;K++){const Z=VA(g[K]);m.forEach(ia=>{Z.includes(ia)||m.delete(ia)})}1<b.length&&ZG.forEach(K=>{m.has(K)&&m.delete(K)});return Array.from(m).sort((K,Z)=>UA.indexOf(K)-UA.indexOf(Z)).map(K=>Yn.get(K))};Jb=T(616);var mH=pf(({shapes:b,offsets:g,hidden:m})=>{const K=dg(),Z=Os.useRef(null),ia=Os.useRef(null);Os.useLayoutEffect(()=>{setTimeout(()=>{const Ia=ia.current;if(Ia){var {offsetWidth:Xa,offsetHeight:bb}=Ia;Z.current=[Xa,bb]}})});Os.useLayoutEffect(()=>{var Ia;const Xa=ia.current;
if(Xa){var bb=null!=(Ia=Z.current)?Ia:[0,0];Ia=rb(Wa({},g),{bottom:g.bottom-32});var pb=0;if(116>Ia.top){var sb=Ia.height/2+72;140>Ia.bottom&&(sb+=Ia.bottom-140)}else sb=-(Ia.height/2+40);16>Ia.left+Ia.width/2-bb[0]/2?pb+=-(Ia.left+Ia.width/2-bb[0]/2-16):16>Ia.right+Ia.width/2-bb[0]/2&&(pb+=Ia.right+Ia.width/2-bb[0]/2-16);var [Ub,kc]=[pb,sb];Xa.style.setProperty("transform",`translateX(${Ub}px) translateY(${kc}px)`)}},[g]);if(!K)return null;const ua=lH(b);return(0,Jb.jsx)(wp,{centered:!0,children:0<
ua.length&&(0,Jb.jsx)("div",{ref:ia,className:"tl-toolbar tl-context-bar",style:{visibility:m?"hidden":"visible",pointerEvents:m?"none":"all"},children:ua.map((Ia,Xa)=>(0,Jb.jsxs)(Os.Fragment,{children:[(0,Jb.jsx)(Ia,{}),Xa<ua.length-1&&(0,Jb.jsx)(Ns,{className:"tl-toolbar-separator",orientation:"vertical"})]},Xa))})})}),WA=td(T(20)),Vl=T(20),[nH]=yi("ContextMenu",[Zt]),Rs=Zt(),[oH,XA]=nH("ContextMenu"),pH=(0,Vl.forwardRef)((b,g)=>{var {__scopeContextMenu:m}=b;const K=Yb(b,["__scopeContextMenu"]),
Z=XA("ContextMenuTrigger",m);m=Rs(m);const ia=(0,Vl.useRef)({x:0,y:0}),ua=(0,Vl.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(Wa({width:0,height:0},ia.current))}),Ia=(0,Vl.useRef)(0),Xa=(0,Vl.useCallback)(()=>window.clearTimeout(Ia.current),[]);(0,Vl.useEffect)(()=>Xa,[Xa]);return(0,Vl.createElement)(Vl.Fragment,null,(0,Vl.createElement)(Xz,hf({},m,{virtualRef:ua})),(0,Vl.createElement)(gl.span,hf({"data-state":Z.open?"open":"closed"},K,{ref:g,style:Wa({WebkitTouchCallout:"none"},b.style),onContextMenu:Of(b.onContextMenu,
bb=>{Xa();ia.current={x:bb.clientX,y:bb.clientY};Z.onOpenChange(!0);bb.preventDefault()}),onPointerDown:Of(b.onPointerDown,ag(bb=>{Xa();Ia.current=window.setTimeout(()=>{ia.current={x:bb.clientX,y:bb.clientY};Z.onOpenChange(!0)},700)})),onPointerMove:Of(b.onPointerMove,ag(Xa)),onPointerCancel:Of(b.onPointerCancel,ag(Xa)),onPointerUp:Of(b.onPointerUp,ag(Xa))})))}),qH=(0,Vl.forwardRef)((b,g)=>{var {__scopeContextMenu:m}=b;const K=Yb(b,["__scopeContextMenu"]),Z=XA("ContextMenuContent",m);m=Rs(m);const ia=
(0,Vl.useRef)(!1);return(0,Vl.createElement)(Zz,hf({},m,K,{ref:g,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:ua=>{var Ia;null===(Ia=b.onCloseAutoFocus)||void 0===Ia||Ia.call(b,ua);!ua.defaultPrevented&&ia.current&&ua.preventDefault();ia.current=!1},onInteractOutside:ua=>{var Ia;null===(Ia=b.onInteractOutside)||void 0===Ia||Ia.call(b,ua);ua.defaultPrevented||Z.modal||(ia.current=!0)},style:rb(Wa({},b.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Zn=(0,Vl.forwardRef)((b,g)=>{var {__scopeContextMenu:m}=b;b=Yb(b,["__scopeContextMenu"]);m=Rs(m);return(0,Vl.createElement)(aA,hf({},m,b,{ref:g}))}),Ss=(0,Vl.forwardRef)((b,g)=>{var {__scopeContextMenu:m}=b;b=Yb(b,["__scopeContextMenu"]);m=Rs(m);return(0,Vl.createElement)($E,hf({},m,b,{ref:g}))}),rH=b=>{const {__scopeContextMenu:g,children:m,onOpenChange:K,dir:Z,modal:ia=!0}=b,[ua,Ia]=(0,Vl.useState)(!1);b=Rs(g);const Xa=Ti(K),bb=(0,Vl.useCallback)(pb=>{Ia(pb);Xa(pb)},[Xa]);return(0,Vl.createElement)(oH,
{scope:g,open:ua,onOpenChange:bb,modal:ia},(0,Vl.createElement)(bA,hf({},b,{dir:Z,open:ua,onOpenChange:bb,modal:ia}),m))};Jb=T(616);var sH=pf(function({children:b,collisionRef:g}){var m,K,Z,ia,ua;const Ia=dg(),Xa=WA.useRef(null),bb=sb=>{sb();Ia.transition("select")},pb=WA.useMemo(()=>{var sb,Ub,kc;return(null==(kc=null==(Ub=null==(sb=null==window?void 0:window.logseq)?void 0:sb.api)?void 0:Ub.get_state_from_store)?void 0:kc.call(Ub,"ui/developer-mode?"))||!1},[]);return(0,Jb.jsxs)(rH,{onOpenChange:sb=>
{sb&&!Ia.isIn("select.contextMenu")?Ia.transition("select").selectedTool.transition("contextMenu"):!sb&&Ia.isIn("select.contextMenu")&&Ia.selectedTool.transition("idle")},children:[(0,Jb.jsx)(pH,{children:b}),(0,Jb.jsx)(qH,{className:"tl-menu tl-context-menu",ref:Xa,onEscapeKeyDown:()=>Ia.transition("select"),collisionBoundary:g.current,asChild:!0,tabIndex:-1,children:(0,Jb.jsxs)("div",{children:[1<(null==(m=Ia.selectedShapes)?void 0:m.size)&&(0,Jb.jsxs)(Jb.Fragment,{children:[(0,Jb.jsxs)(Zn,{children:[(0,Jb.jsxs)("div",
{className:"tl-menu-button-row pb-0",children:[(0,Jb.jsx)(Fi,{title:"Align left",onClick:()=>bb(()=>Ia.align("left")),children:(0,Jb.jsx)(Bi,{name:"layout-align-left"})}),(0,Jb.jsx)(Fi,{title:"Align center horizontally",onClick:()=>bb(()=>Ia.align("centerHorizontal")),children:(0,Jb.jsx)(Bi,{name:"layout-align-center"})}),(0,Jb.jsx)(Fi,{title:"Align right",onClick:()=>bb(()=>Ia.align("right")),children:(0,Jb.jsx)(Bi,{name:"layout-align-right"})}),(0,Jb.jsx)(Ns,{className:"tl-toolbar-separator",orientation:"vertical"}),
(0,Jb.jsx)(Fi,{title:"Distribute horizontally",onClick:()=>bb(()=>Ia.distribute("horizontal")),children:(0,Jb.jsx)(Bi,{name:"layout-distribute-vertical"})})]}),(0,Jb.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,Jb.jsx)(Fi,{title:"Align top",onClick:()=>bb(()=>Ia.align("top")),children:(0,Jb.jsx)(Bi,{name:"layout-align-top"})}),(0,Jb.jsx)(Fi,{title:"Align center vertically",onClick:()=>bb(()=>Ia.align("centerVertical")),children:(0,Jb.jsx)(Bi,{name:"layout-align-middle"})}),(0,Jb.jsx)(Fi,
{title:"Align bottom",onClick:()=>bb(()=>Ia.align("bottom")),children:(0,Jb.jsx)(Bi,{name:"layout-align-bottom"})}),(0,Jb.jsx)(Ns,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Jb.jsx)(Fi,{title:"Distribute vertically",onClick:()=>bb(()=>Ia.distribute("vertical")),children:(0,Jb.jsx)(Bi,{name:"layout-distribute-horizontal"})})]})]}),(0,Jb.jsx)(Ss,{className:"menu-separator"}),(0,Jb.jsxs)(Zn,{className:"tl-menu-item",onClick:()=>bb(Ia.packIntoRectangle),children:[(0,Jb.jsx)(Bi,{className:"tl-menu-icon",
name:"layout-grid"}),"Pack into rectangle"]}),(0,Jb.jsx)(Ss,{className:"menu-separator"})]}),0<(null==(K=Ia.selectedShapes)?void 0:K.size)&&(0,Jb.jsxs)(Jb.Fragment,{children:[(0,Jb.jsxs)(Zn,{className:"tl-menu-item",onClick:()=>bb(Ia.cut),children:[(0,Jb.jsx)(Bi,{className:"tl-menu-icon",name:"cut"}),"Cut",(0,Jb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Jb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Jb.jsx)("code",{children:Uq})," ",(0,Jb.jsx)("code",{children:"X"})]})})]}),
(0,Jb.jsxs)(Zn,{className:"tl-menu-item",onClick:()=>bb(Ia.copy),children:[(0,Jb.jsx)(Bi,{className:"tl-menu-icon",name:"copy"}),"Copy",(0,Jb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Jb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Jb.jsx)("code",{children:Uq})," ",(0,Jb.jsx)("code",{children:"C"})]})})]})]}),(0,Jb.jsxs)(Zn,{className:"tl-menu-item",onClick:()=>bb(Ia.paste),children:[(0,Jb.jsx)(Bi,{className:"tl-menu-icon",name:"clipboard"}),"Paste",(0,Jb.jsx)("div",{className:"tl-menu-right-slot",
children:(0,Jb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Jb.jsx)("code",{children:Uq})," ",(0,Jb.jsx)("code",{children:"V"})]})})]}),(0,Jb.jsx)(Ss,{className:"menu-separator"}),(0,Jb.jsxs)(Zn,{className:"tl-menu-item",onClick:()=>bb(Ia.api.selectAll),children:["Select all",(0,Jb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Jb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Jb.jsx)("code",{children:Uq})," ",(0,Jb.jsx)("code",{children:"A"})]})})]}),1<(null==(Z=Ia.selectedShapes)?
void 0:Z.size)&&(0,Jb.jsx)(Zn,{className:"tl-menu-item",onClick:()=>bb(Ia.api.deselectAll),children:"Deselect all"}),0<(null==(ia=Ia.selectedShapes)?void 0:ia.size)&&(0,Jb.jsxs)(Jb.Fragment,{children:[(0,Jb.jsxs)(Zn,{className:"tl-menu-item",onClick:()=>bb(Ia.api.deleteShapes),children:[(0,Jb.jsx)(Bi,{className:"tl-menu-icon",name:"backspace"}),"Delete",(0,Jb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Jb.jsx)("span",{className:"keyboard-shortcut",children:(0,Jb.jsx)("code",{children:"Del"})})})]}),
1<(null==(ua=Ia.selectedShapes)?void 0:ua.size)&&(0,Jb.jsxs)(Jb.Fragment,{children:[(0,Jb.jsx)(Ss,{className:"menu-separator"}),(0,Jb.jsxs)(Zn,{className:"tl-menu-item",onClick:()=>bb(Ia.flipHorizontal),children:[(0,Jb.jsx)(Bi,{className:"tl-menu-icon",name:"flip-horizontal"}),"Flip horizontally"]}),(0,Jb.jsxs)(Zn,{className:"tl-menu-item",onClick:()=>bb(Ia.flipVertical),children:[(0,Jb.jsx)(Bi,{className:"tl-menu-icon",name:"flip-vertical"}),"Flip vertically"]})]}),(0,Jb.jsx)(Ss,{className:"menu-separator"}),
(0,Jb.jsxs)(Zn,{className:"tl-menu-item",onClick:()=>bb(Ia.bringToFront),children:["Move to front",(0,Jb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Jb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Jb.jsx)("code",{children:""})," ",(0,Jb.jsx)("code",{children:"]"})]})})]}),(0,Jb.jsxs)(Zn,{className:"tl-menu-item",onClick:()=>bb(Ia.sendToBack),children:["Move to back",(0,Jb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Jb.jsxs)("span",{className:"keyboard-shortcut",
children:[(0,Jb.jsx)("code",{children:""})," ",(0,Jb.jsx)("code",{children:"["})]})})]}),pb&&(0,Jb.jsx)(Zn,{className:"tl-menu-item",onClick:()=>{1===Ia.selectedShapesArray.length?console.log(le(Ia.selectedShapesArray[0].serialized)):console.log(Ia.selectedShapesArray.map(sb=>le(sb.serialized)))},children:"(Dev) Print shape props"})]})]})})]})}),tH=td(T(20)),YA=td(T(20));Jb=T(616);Jb=T(616);var ku=class extends Vn{constructor(){super(...arguments);F(this,"ReactComponent",pf(({events:b,isErasing:g,
isBinding:m,isSelected:K})=>{const {props:{size:[Z,ia],stroke:ua,fill:Ia,noFill:Xa,strokeWidth:bb,strokeType:pb,borderRadius:sb,opacity:Ub}}=this;return(0,Jb.jsxs)(ro,rb(Wa({},b),{opacity:g?.2:Ub,children:[m&&(0,Jb.jsx)(zm,{mode:"svg",strokeWidth:bb,size:[Z,ia]}),(0,Jb.jsx)("rect",{className:K||!Xa?"tl-hitarea-fill":"tl-hitarea-stroke",x:bb/2,y:bb/2,rx:sb,ry:sb,width:Math.max(.01,Z-bb),height:Math.max(.01,ia-bb),pointerEvents:"all"}),(0,Jb.jsx)("rect",{x:bb/2,y:bb/2,rx:sb,ry:sb,width:Math.max(.01,
Z-bb),height:Math.max(.01,ia-bb),strokeWidth:bb,stroke:jf(ua,"stroke"),strokeDasharray:"dashed"===pb?"8 2":void 0,fill:Xa?"none":jf(Ia,"background")})]}))}));F(this,"ReactIndicator",pf(()=>{const {props:{size:[b,g],borderRadius:m}}=this;return(0,Jb.jsx)("rect",{width:b,height:g,rx:m,ry:m,fill:"transparent"})}));F(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));void 0!==b.borderRadius&&(b.borderRadius=Math.max(0,b.borderRadius));return sk(this,
b)})}};F(ku,"id","box");F(ku,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});Jb=T(616);var yw=class extends rv{constructor(){super(...arguments);F(this,"ReactComponent",pf(({events:b,isErasing:g})=>{const {radius:m,stroke:K,fill:Z,strokeWidth:ia,opacity:ua}=this.props;return(0,Jb.jsxs)(ro,rb(Wa({},b),{opacity:g?.2:ua,children:[(0,Jb.jsx)("circle",{className:"tl-hitarea-fill",cx:m,
cy:m,r:m}),(0,Jb.jsx)("circle",{cx:m,cy:m,r:m,stroke:K,fill:Z,strokeWidth:ia,pointerEvents:"none"})]}))}));F(this,"ReactIndicator",pf(()=>{const {radius:b}=this.props;return(0,Jb.jsx)("circle",{cx:b,cy:b,r:b,pointerEvents:"all"})}));F(this,"validateProps",b=>{void 0!==b.radius&&(b.radius=Math.max(b.radius,1));return sk(this,b)})}};F(yw,"id","dot");F(yw,"defaultProps",{id:"dot",parentId:"page",type:"dot",point:[0,0],radius:4,stroke:"#000000",fill:"var(--ls-secondary-background-color)",noFill:!1,strokeType:"line",
strokeWidth:2,opacity:1});Jb=T(616);var lu=class extends qv{constructor(){super(...arguments);F(this,"ReactComponent",pf(({isSelected:b,isErasing:g,events:m})=>{const {size:[K,Z],stroke:ia,fill:ua,noFill:Ia,strokeWidth:Xa,strokeType:bb,opacity:pb}=this.props;return(0,Jb.jsxs)(ro,rb(Wa({},m),{opacity:g?.2:pb,children:[(0,Jb.jsx)("ellipse",{className:b||!Ia?"tl-hitarea-fill":"tl-hitarea-stroke",cx:K/2,cy:Z/2,rx:Math.max(.01,(K-Xa)/2),ry:Math.max(.01,(Z-Xa)/2)}),(0,Jb.jsx)("ellipse",{cx:K/2,cy:Z/2,rx:Math.max(.01,
(K-Xa)/2),ry:Math.max(.01,(Z-Xa)/2),strokeWidth:Xa,stroke:jf(ia,"stroke"),strokeDasharray:"dashed"===bb?"8 2":void 0,fill:Ia?"none":jf(ua,"background")})]}))}));F(this,"ReactIndicator",pf(()=>{const {size:[b,g]}=this.props;return(0,Jb.jsx)("ellipse",{cx:b/2,cy:g/2,rx:b/2,ry:g/2,strokeWidth:2,fill:"transparent"})}));F(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return sk(this,b)})}getShapeSVGJsx(b){const {size:[g,m],stroke:K,fill:Z,noFill:ia,
strokeWidth:ua,strokeType:Ia,opacity:Xa}=this.props;return(0,Jb.jsxs)("g",{opacity:Xa,children:[(0,Jb.jsx)("ellipse",{className:ia?"tl-hitarea-stroke":"tl-hitarea-fill",cx:g/2,cy:m/2,rx:Math.max(.01,(g-ua)/2),ry:Math.max(.01,(m-ua)/2)}),(0,Jb.jsx)("ellipse",{cx:g/2,cy:m/2,rx:Math.max(.01,(g-ua)/2),ry:Math.max(.01,(m-ua)/2),strokeWidth:ua,stroke:jf(K,"stroke"),strokeDasharray:"dashed"===Ia?"8 2":void 0,fill:ia?"none":jf(Z,"background")})]})}};F(lu,"id","ellipse");F(lu,"defaultProps",{id:"ellipse",
parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});Jb=T(616);var Ts=class extends sr{constructor(b={}){super(b);F(this,"ReactComponent",pf(({events:g,isErasing:m})=>{const {pointsPath:K,props:{stroke:Z,strokeWidth:ia,opacity:ua}}=this;return(0,Jb.jsx)(ro,rb(Wa({},g),{opacity:m?.2:1,children:(0,Jb.jsx)("path",{d:K,strokeWidth:16*ia,stroke:jf(Z,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",
opacity:ua})}))}));F(this,"ReactIndicator",pf(()=>{const {pointsPath:g}=this;return(0,Jb.jsx)("path",{d:g,fill:"none"})}));F(this,"validateProps",g=>{g=sk(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});Se(this)}get pointsPath(){const {points:b}=this.props;return Aq.getCurvedPathForPoints(b)}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:m,opacity:K}}=this;return(0,Jb.jsx)("path",{d:b,strokeWidth:16*m,stroke:jf(g,"stroke"),fill:"none",pointerEvents:"all",
strokeLinejoin:"round",strokeLinecap:"round",opacity:K})}};F(Ts,"id","highlighter");F(Ts,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});id([Da],Ts.prototype,"pointsPath",1);var zw=td(T(20));Jb=T(616);var Aw={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},bq=class extends Vn{constructor(){super(...arguments);F(this,"canChangeAspectRatio",!0);F(this,"canFlip",!1);F(this,"canEdit",!0);
F(this,"htmlAnchorRef",zw.createRef());F(this,"setScaleLevel",b=>wa(this,null,function*(){var g;const m=re.mul(this.props.size,Aw[null!=b?b:"md"]/Aw[null!=(g=this.props.scaleLevel)?g:"md"]);this.update({scaleLevel:b});yield Nh();this.update({size:m})}));F(this,"onResetBounds",b=>{var g;if(this.htmlAnchorRef.current){const m=this.htmlAnchorRef.current.getBoundingClientRect(),[K,Z]=re.div([m.width,m.height],null!=(g=null==b?void 0:b.zoom)?g:1);this.update({size:[Math.max(Math.min(K||400,1400),10),Math.max(Math.min(Z||
400,1400),10)]})}return this});F(this,"ReactComponent",pf(({events:b,isErasing:g,isEditing:m})=>{const {props:{html:K,scaleLevel:Z}}=this,ia=Gl(),ua=dg(),Ia=ua.selectedIds.has(this.id),Xa=ia||Ia&&!m||"select"!==ua.selectedTool.id,bb=zw.useCallback(sb=>{Xa||sb.stopPropagation()},[Xa]),pb=Aw[null!=Z?Z:"md"];zw.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:ua.viewport.camera.zoom}),ua.persist(!0))},[]);return(0,Jb.jsx)(wp,rb(Wa({style:{overflow:"hidden",pointerEvents:"all",opacity:g?
.2:1}},b),{children:(0,Jb.jsx)("div",{onWheelCapture:bb,onPointerDown:bb,onPointerUp:bb,className:"tl-html-container",style:{pointerEvents:ia||!m&&!Ia?"none":"all",overflow:m?"auto":"hidden",width:`calc(100% / ${pb})`,height:`calc(100% / ${pb})`,transform:`scale(${pb})`},children:(0,Jb.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:K.trim()}})})}))}));F(this,"ReactIndicator",pf(()=>{const {props:{size:[b,g]}}=this;return(0,Jb.jsx)("rect",{width:b,height:g,
fill:"transparent"})}));F(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return sk(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};F(bq,"id","html");F(bq,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});id([Da],bq.prototype,"scaleLevel",1);id([pg],bq.prototype,"setScaleLevel",2);var uH=td(T(20));Jb=T(616);var mu=class extends uv{constructor(){super(...arguments);F(this,
"ReactComponent",pf(({events:b,isErasing:g,isBinding:m,asset:K})=>{const {props:{opacity:Z,objectFit:ia,clipping:ua,size:[Ia,Xa]}}=this,[bb,pb,sb,Ub]=Array.isArray(ua)?ua:[ua,ua,ua,ua],{handlers:kc}=uH.useContext(zp);return(0,Jb.jsxs)(wp,rb(Wa({},b),{opacity:g?.2:Z,children:[m&&(0,Jb.jsx)(zm,{mode:"html",strokeWidth:4,size:[Ia,Xa]}),(0,Jb.jsx)("div",{"data-asset-loaded":!!K,className:"tl-image-shape-container",children:K?(0,Jb.jsx)("img",{src:kc?kc.makeAssetUrl(K.src):K.src,draggable:!1,style:{position:"relative",
top:-bb,left:-Ub,width:Ia+(Ub-pb),height:Xa+(bb-sb),objectFit:ia}}):"Asset is missing"})]}))}));F(this,"ReactIndicator",pf(()=>{const {props:{size:[b,g]}}=this;return(0,Jb.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}getShapeSVGJsx({assets:b}){var g,m;if(mh())return super.getShapeSVGJsx(null);const K=this.getBounds(),{assetId:Z,clipping:ia,size:[ua,Ia]}=this.props;if(b=b.find(Xa=>Xa.id===Z)){const [Xa,bb,pb,sb]=Array.isArray(ia)?ia:[ia,ia,ia,ia],Ub=null==(m=null==(g=window.logseq)?void 0:
g.api)?void 0:m.make_asset_url;return(0,Jb.jsx)("g",{children:(0,Jb.jsx)("foreignObject",{width:K.width,height:K.height,children:(0,Jb.jsx)("img",{src:Ub?Ub(b.src):b.src,draggable:!1,loading:"lazy",style:{position:"relative",top:-Xa,left:-sb,width:ua+(sb-bb),height:Ia+(Xa-pb),objectFit:this.props.objectFit,pointerEvents:"all"}})})})}return super.getShapeSVGJsx({})}};F(mu,"id","image");F(mu,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,
objectFit:"fill",isAspectRatioLocked:!0});var ZA=td(T(20));Jb=T(616);var nu=class extends Vn{constructor(){super(...arguments);F(this,"canFlip",!1);F(this,"canEdit",!0);F(this,"canChangeAspectRatio",!1);F(this,"ReactComponent",pf(({events:b,isErasing:g,asset:m,isEditing:K})=>{const {props:{opacity:Z}}=this,ia=Gl();var ua=dg();const Ia=ua.selectedIds.has(this.id),Xa=ia||Ia&&!K||"select"!==ua.selectedTool.id;ua=ZA.useCallback(pb=>{Xa||pb.stopPropagation()},[Xa]);const {handlers:bb}=ZA.useContext(zp);
return(0,Jb.jsx)(wp,rb(Wa({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:Z}},b),{children:(0,Jb.jsx)("div",{onWheelCapture:ua,onPointerDown:ua,onPointerUp:ua,className:"tl-video-container",style:{pointerEvents:ia||!K&&!Ia?"none":"all",overflow:K?"auto":"hidden"},children:m&&(0,Jb.jsx)("video",{controls:!0,src:bb?bb.makeAssetUrl(m.src):m.src})})}))}));F(this,"ReactIndicator",pf(()=>{const {props:{size:[b,g]}}=this;return(0,Jb.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}};F(nu,
"id","video");F(nu,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});var $A=td(T(20));Jb=T(616);var $q=class extends Vn{constructor(){super(...arguments);F(this,"frameRef",$A.createRef());F(this,"canEdit",!0);F(this,"onIFrameSourceChange",b=>{this.update({url:b})});F(this,"reload",()=>{var b,g;this.frameRef.current&&(this.frameRef.current.src=null==(g=null==(b=this.frameRef)?void 0:b.current)?void 0:g.src)});
F(this,"ReactComponent",pf(({events:b,isErasing:g,isEditing:m})=>{$A.useRef(null);return(0,Jb.jsx)(wp,rb(Wa({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,Jb.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:m?"all":"none",userSelect:"none"},children:this.props.url&&(0,Jb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,Jb.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",
src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts"})})})}))}));F(this,"ReactIndicator",pf(()=>{const {props:{size:[b,g]}}=this;return(0,Jb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}))}};F($q,"id","iframe");F($q,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});id([pg],$q.prototype,"onIFrameSourceChange",2);id([pg],$q.prototype,"reload",2);var Bw=td(T(20)),vH=td(T(20));Jb=T(616);Jb=T(616);var wH=vH.memo(function({style:b,start:g,
end:m,decorationStart:K,decorationEnd:Z}){var ia=re.dist(g,m);if(2>ia)return null;const {strokeWidth:ua}=b,Ia=1+1.618*ua,Xa="M"+re.toFixed(g)+"L"+re.toFixed(m);ia=Math.min(ia/3,16*ua);K=K?wj(g,m,ia):null;Z=Z?wj(m,g,ia):null;return(0,Jb.jsxs)(Jb.Fragment,{children:[(0,Jb.jsx)("path",{className:"tl-stroke-hitarea",d:Xa}),(0,Jb.jsx)("path",{d:Xa,strokeWidth:Ia,stroke:b.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===b.strokeType?"8 4":void 0,pointerEvents:"stroke"}),K&&
(0,Jb.jsx)(Wk,{left:K.left,middle:g,right:K.right,stroke:b.stroke,strokeWidth:Ia}),Z&&(0,Jb.jsx)(Wk,{left:Z.left,middle:m,right:Z.right,stroke:b.stroke,strokeWidth:Ia})]})});Jb=T(616);var Jo=td(T(20)),$n=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const m=b.ownerDocument,K=m.activeElement;K!==b&&b.focus();m.execCommand("insertText",!1,g)||
$n.insertTextFirefox(b,g);K===m.body?b.blur():K instanceof HTMLElement&&K!==b&&K.focus()}static set(b,g){b.select();$n.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:m}=b;return b.value.slice(g?g:void 0,m?m:void 0)}static wrapSelection(b,g,m){const {selectionStart:K,selectionEnd:Z}=b,ia=$n.getSelection(b);$n.insert(b,g+ia+(null!=m?m:g));b.selectionStart=(K||0)+g.length;b.selectionEnd=(Z||0)+g.length}static replace(b,g,m){let K=0;b.value.replace(g,(...Z)=>{const ia=K+Z[Z.length-
2],ua=Z[0].length;b.selectionStart=ia;b.selectionEnd=ia+ua;Z="string"===typeof m?m:m(...Z);$n.insert(b,Z);b.selectionStart=ia;K+=Z.length-ua;return Z})}static findLineEnd(b,g){const m=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(m)?g:m+1}static indent(b){var g;const {selectionStart:m,selectionEnd:K,value:Z}=b;var ia=Z.slice(m,K);if((ia=null==(g=/\n/g.exec(ia))?void 0:g.length)&&0<ia){g=Z.lastIndexOf("\n",m-1)+1;var ua=b.value.slice(g,K-1);ia=ua.replace(/^|\n/g,"$\x26  ");ua=ia.length-ua.length;
b.setSelectionRange(g,K-1);$n.insert(b,ia);b.setSelectionRange(m+1,K+ua)}else $n.insert(b,"  ")}static unindent(b){const {selectionStart:g,selectionEnd:m,value:K}=b;var Z=K.lastIndexOf("\n",g-1)+1;const ia=$n.findLineEnd(K,m);var ua=b.value.slice(Z,ia);const Ia=ua.replace(/(^|\n)(\t| {1,2})/g,"$1");ua=ua.length-Ia.length;b.setSelectionRange(Z,ia);$n.insert(b,Ia);Z=(Z=/\t| {1,2}/.exec(K.slice(Z,g)))?Z[0].length:0;b.setSelectionRange(g-Z,Math.max(g-Z,m-ua))}};Jb=T(616);var ou=b=>b.stopPropagation(),
xH=Jo.memo(function({font:b,text:g,color:m,offsetX:K=0,offsetY:Z=0,scale:ia=1,isEditing:ua=!1,onBlur:Ia,onChange:Xa}){const bb=Jo.useRef(null),pb=Jo.useRef(!1),sb=Jo.useCallback(Rb=>{Xa(Er.normalizeText(Rb.currentTarget.value))},[Xa]),Ub=Jo.useCallback(Rb=>{if("Escape"!==Rb.key)if("Tab"===Rb.key&&0===g.length)Rb.preventDefault();else{if("Meta"!==Rb.key&&!Rb.metaKey)Rb.stopPropagation();else if("z"===Rb.key&&Rb.metaKey){Rb.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Rb.stopPropagation();
Rb.preventDefault();return}"Tab"===Rb.key&&(Rb.preventDefault(),Rb.shiftKey?$n.unindent(Rb.currentTarget):$n.indent(Rb.currentTarget),null==Xa?void 0:Xa(Er.normalizeText(Rb.currentTarget.value)))}},[Xa]),kc=Jo.useCallback(Rb=>{ua&&(Rb.currentTarget.setSelectionRange(0,0),null==Ia?void 0:Ia())},[Ia]),Mb=Jo.useCallback(Rb=>{ua&&pb.current&&document.activeElement===Rb.currentTarget&&Rb.currentTarget.select()},[ua]),sc=Jo.useCallback(Rb=>{ua&&Rb.stopPropagation()},[ua]);Jo.useEffect(()=>{ua&&requestAnimationFrame(()=>
{pb.current=!0;const Rb=bb.current;Rb&&(Rb.focus(),Rb.select())})},[ua,Ia]);const lc=Jo.useRef(null);Jo.useLayoutEffect(()=>{const Rb=lc.current;if(Rb){var rc=xf(g,b,4);Rb.style.transform=`scale(${ia}, ${ia}) translate(${K}px, ${Z}px)`;Rb.style.width=rc[0]+1+"px";Rb.style.height=rc[1]+1+"px"}},[g,b,Z,K,ia]);return(0,Jb.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Jb.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:lc,style:{font:b,color:m,pointerEvents:g?"all":"none",userSelect:ua?
"text":"none"},children:[ua?(0,Jb.jsx)("textarea",{ref:bb,style:{font:b,color:m},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:g,color:m,onFocus:Mb,onChange:sb,onKeyDown:Ub,onBlur:kc,onPointerDown:sc,onContextMenu:ou,onCopy:ou,onPaste:ou,onCut:ou}):g,""]})})});Jb=T(616);var pu=class extends ts{constructor(){super(...arguments);
F(this,"hideSelection",!0);F(this,"canEdit",!0);F(this,"ReactComponent",pf(({events:b,isErasing:g,isEditing:m,onEditingEnd:K})=>{const {stroke:Z,handles:{start:ia,end:ua},opacity:Ia,label:Xa,id:bb}=this.props,pb=Xa||m?xf(Xa,"18px / 1 var(--ls-font-family)",4):[0,0],sb=re.med(ia.point,ua.point);var Ub=re.dist(ia.point,ua.point);Ub=Math.max(.5,Math.min(1,Math.max(Ub/(pb[1]+128),Ub/(pb[0]+128))));const kc=this.getBounds(),Mb=Bw.useMemo(()=>re.sub(sb,re.toFixed([kc.width/2,kc.height/2])),[kc,Ub,sb]),
sc=Bw.useCallback(lc=>{var Rb;null==(Rb=this.update)?void 0:Rb.call(this,{label:lc})},[Xa]);return(0,Jb.jsxs)("div",rb(Wa({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,Jb.jsx)(xH,{font:"18px / 1 var(--ls-font-family)",text:Xa,color:jf(Z,"text"),offsetX:Mb[0],offsetY:Mb[1],scale:Ub,isEditing:m,onChange:sc,onBlur:K}),(0,Jb.jsxs)(ro,{opacity:g?.2:Ia,id:bb+"_svg",children:[(0,Jb.jsx)(wi,{id:bb,bounds:kc,labelSize:pb,offset:Mb,scale:Ub}),(0,Jb.jsx)("g",{pointerEvents:"none",
mask:Xa||m?`url(#${bb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));F(this,"ReactIndicator",pf(()=>{const {id:b,decorations:g,label:m,strokeWidth:K,handles:{start:Z,end:ia}}=this.props,ua=this.getBounds(),Ia=m?xf(m,"18px / 1 var(--ls-font-family)",4):[0,0],Xa=re.med(Z.point,ia.point);var bb=re.dist(Z.point,ia.point);bb=Math.max(.5,Math.min(1,Math.max(bb/(Ia[1]+128),bb/(Ia[0]+128))));const pb=Bw.useMemo(()=>re.sub(Xa,re.toFixed([ua.width/2,ua.height/2])),[ua,bb,Xa]);return(0,Jb.jsxs)("g",
{children:[(0,Jb.jsx)(wi,{id:b,bounds:ua,labelSize:Ia,offset:pb,scale:bb}),(0,Jb.jsx)("path",{mask:m?`url(#${b}_clip)`:"",d:Mh({strokeWidth:K},Z.point,ia.point,null==g?void 0:g.start,null==g?void 0:g.end)}),m&&(0,Jb.jsx)("rect",{x:ua.width/2-Ia[0]/2*bb+pb[0],y:ua.height/2-Ia[1]/2*bb+pb[1],width:Ia[0]*bb,height:Ia[1]*bb,rx:4*bb,ry:4*bb,fill:"transparent"})]})}));F(this,"validateProps",b=>sk(this,b))}getShapeSVGJsx({preview:b}){const {stroke:g,fill:m,strokeWidth:K,strokeType:Z,decorations:ia,label:ua,
handles:{start:Ia,end:Xa}}=this.props,bb=re.med(Ia.point,Xa.point);return(0,Jb.jsxs)(Jb.Fragment,{children:[(0,Jb.jsx)(wH,{style:{stroke:jf(g,"stroke"),fill:m,strokeWidth:K,strokeType:Z},start:Ia.point,end:Xa.point,decorationStart:null==ia?void 0:ia.start,decorationEnd:null==ia?void 0:ia.end}),b&&(0,Jb.jsx)(Jb.Fragment,{children:(0,Jb.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${bb[0]}, ${bb[1]})`,textAnchor:"middle",fill:jf(g,"text"),stroke:jf(g,
"text"),children:ua})})]})}};F(pu,"id","line");F(pu,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});var Jn=T(20),yH=["children"],qu="undefined"!==typeof document?Jn.useLayoutEffect:Jn.useEffect,ah=td(T(20)),ci=T(20),zH=T(29),Us,lm,AH="undefined"!=typeof document?ci.useLayoutEffect:ci.useEffect;
!function(b){b[b.DEBUG=0]="DEBUG";b[b.INFO=1]="INFO";b[b.WARN=2]="WARN";b[b.ERROR=3]="ERROR"}(lm||={});var BH=((Us={})[lm.DEBUG]="debug",Us[lm.INFO]="log",Us[lm.WARN]="warn",Us[lm.ERROR]="error",Us),cq=nh(function(){var b=Df(lm.ERROR);return{log:Df(function(g,m,K){var Z;void 0===K&&(K=lm.INFO);K>=(null!=(Z=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?Z:b(4))&&console[BH[K]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",g,m)}),logLevel:b}},
[],{singleton:!0}),Kn=nh(function(){var b=Zd(),g=Zd(),m=Df(0),K=Zd(),Z=Df(0),ia=Zd(),ua=Zd(),Ia=Df(0),Xa=Df(0),bb=Df(0),pb=Df(0),sb=Zd(),Ub=Zd(),kc=Df(!1),Mb=Df(!1);return oe(ke(b,Ge(function(sc){return sc.scrollTop})),g),oe(ke(b,Ge(function(sc){return sc.scrollHeight})),ua),oe(g,Z),{scrollContainerState:b,scrollTop:g,viewportHeight:ia,headerHeight:Ia,fixedHeaderHeight:Xa,fixedFooterHeight:bb,footerHeight:pb,scrollHeight:ua,smoothScrollTargetReached:K,react18ConcurrentRendering:Mb,scrollTo:sb,scrollBy:Ub,
statefulScrollTop:Z,deviation:m,scrollingInProgress:kc}},[],{singleton:!0}),Ji={lvl:0},Cw=nh(function(){return{recalcInProgress:Df(!1)}},[],{singleton:!0}),CH={offsetHeight:"height",offsetWidth:"width"},Bp=nh(function(b){var g=b[0].log,m=b[1].recalcInProgress;b=Zd();var K=Zd(),Z=eh(K,0),ia=Zd(),ua=Zd(),Ia=Df(0),Xa=Df([]),bb=Df(void 0),pb=Df(void 0),sb=Df(function(rc,Gc){return ek(rc,CH[Gc])}),Ub=Df(void 0),kc=Df(0),Mb={offsetTree:[],sizeTree:Ji,groupOffsetTree:Ji,lastIndex:0,lastOffset:0,lastSize:0,
groupIndices:[]},sc=eh(ke(b,ig(Xa,g,kc),Ej(Yh,Mb),$h()),Mb);oe(ke(Xa,Qg(function(rc){return 0<rc.length}),ig(sc,kc),Ge(function(rc){var Gc=rc[0],Cc=rc[1],Uc=rc[2];rc=Gc.reduce(function(ae,Gd,qe){return Fa(ae,Gd,Tf(Gd,Cc.offsetTree,Uc)||qe)},Ji);return Wf({},Cc,{groupIndices:Gc,groupOffsetTree:rc})})),sc);oe(ke(K,ig(sc),Qg(function(rc){return rc[0]<rc[1].lastIndex}),Ge(function(rc){var Gc=rc[1];return[{startIndex:rc[0],endIndex:Gc.lastIndex,size:Gc.lastSize}]})),b);oe(bb,pb);var lc=eh(ke(bb,Ge(function(rc){return void 0===
rc})),!0);oe(ke(pb,Qg(function(rc){return void 0!==rc&&sc(4).sizeTree===Ji}),Ge(function(rc){return[{startIndex:0,endIndex:0,size:rc}]})),b);Mb=bj(ke(b,ig(sc),Ej(function(rc,Gc){Gc=Gc[1];return{changed:Gc!==rc.sizes,sizes:Gc}},{changed:!1,sizes:Mb}),Ge(function(rc){return rc.changed})));Mg(ke(Ia,Ej(function(rc,Gc){return{diff:rc.prev-Gc,prev:Gc}},{diff:0,prev:0}),Ge(function(rc){return rc.diff})),function(rc){0<rc?(m(0,!0),ia(0,rc)):0>rc&&ua(0,rc)});Mg(ke(Ia,ig(g)),function(rc){0>rc[0]&&(0,rc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",
{firstItemIndex:Ia},lm.ERROR)});g=bj(ia);oe(ke(ia,ig(sc),Ge(function(rc){var Gc=rc[0];rc=rc[1];if(0<rc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return mb(rc.sizeTree).reduce(function(Cc,Uc){var ae=Uc.k;Uc=Uc.v;return{ranges:[].concat(Cc.ranges,[{startIndex:Cc.prevIndex,endIndex:ae+Gc-1,size:Cc.prevSize}]),prevIndex:ae+Gc,prevSize:Uc}},{ranges:[],prevIndex:0,prevSize:rc.lastSize}).ranges})),b);var Rb=bj(ke(ua,ig(sc,kc),Ge(function(rc){return Tf(-rc[0],
rc[1].offsetTree,rc[2])})));return oe(ke(ua,ig(sc,kc),Ge(function(rc){var Gc=rc[0],Cc=rc[1];rc=rc[2];if(0<Cc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Uc=mb(Cc.sizeTree).reduce(function(ae,Gd){return Fa(ae,Math.max(0,Gd.k+Gc),Gd.v)},Ji);return Wf({},Cc,{sizeTree:Uc},oi(Cc.offsetTree,0,Uc,rc))})),sc),{data:Ub,totalCount:K,sizeRanges:b,groupIndices:Xa,defaultItemSize:pb,fixedItemSize:bb,unshiftWith:ia,shiftWith:ua,shiftWithOffset:Rb,beforeUnshiftWith:g,
firstItemIndex:Ia,gap:kc,sizes:sc,listRefresh:Mb,statefulTotalCount:Z,trackItemSizes:lc,itemSize:sb}},ff(cq,Cw),{singleton:!0}),DH="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,Vs=nh(function(b){function g(){lc&&(lc(),lc=null);rc&&(rc(),rc=null);Rb&&(clearTimeout(Rb),Rb=null);Ia(0,!1)}var m=b[0],K=m.sizes,Z=m.totalCount,ia=m.listRefresh;m=m.gap;var ua=b[1],Ia=ua.scrollingInProgress,Xa=ua.viewportHeight,bb=ua.scrollTo,pb=ua.smoothScrollTargetReached,sb=ua.headerHeight,
Ub=ua.footerHeight,kc=ua.fixedHeaderHeight;ua=ua.fixedFooterHeight;b=b[2].log;var Mb=Zd(),sc=Df(0),lc=null,Rb=null,rc=null;return oe(ke(Mb,ig(K,Xa,Z,sc,sb,Ub,b),ig(m,kc,ua),Ge(function(Gc){var Cc=Gc[0],Uc=Cc[0],ae=Cc[1],Gd=Cc[2],qe=Cc[3],cf=Cc[4],Fe=Cc[5],df=Cc[6],ie=Cc[7],Id=Gc[1];Cc=Gc[2];Gc=Gc[3];var fd=dh(Uc),$c=fd.align,vd=fd.behavior,Md=fd.offset;--qe;fd=Hf(fd,ae,qe);Fe=Tf(fd,ae.offsetTree,Id)+Fe;"end"===$c?(Fe+=Cc+va(ae.sizeTree,fd)[1]-Gd+Gc,fd===qe&&(Fe+=df)):"center"===$c?Fe+=(Cc+va(ae.sizeTree,
fd)[1]-Gd+Gc)/2:Fe-=cf;Md&&(Fe+=Md);var Rd=function(Ce){g();Ce?(ie("retrying to scroll to",{location:Uc},lm.DEBUG),Mb(0,Uc)):ie("list did not change, scroll successful",{},lm.DEBUG)};if(g(),"smooth"===vd){var Be=!1;rc=Mg(ia,function(Ce){Be=Be||Ce});lc=Sh(pb,function(){Rd(Be)})}else lc=Sh(ke(ia,function(Ce){var Ke=setTimeout(function(){Ce(!1)},150);return function(Bf){Bf&&(Ce(!0),clearTimeout(Ke))}}),Rd);Rb=setTimeout(function(){g()},1200);Ia(0,!0);return ie("scrolling from index to",{index:fd,top:Fe,
behavior:vd},lm.DEBUG),{top:Fe,behavior:vd}})),bb),{scrollToIndex:Mb,topListHeight:sc}},ff(Bp,Kn,cq),{singleton:!0}),EH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},Ws=nh(function(b){var g=b[0],m=g.scrollContainerState;b=g.scrollTop;var K=g.viewportHeight,Z=g.headerHeight,ia=g.footerHeight,ua=g.scrollBy;g=Df(!1);var Ia=Df(!0),Xa=Zd(),bb=Zd(),pb=Df(4),sb=Df(0),Ub=eh(ke(on(ke(Vg(b),Ef(1),rl(!0)),ke(Vg(b),Ef(1),rl(!1),Gh(100))),
$h()),!1),kc=eh(ke(on(ke(ua,rl(!0)),ke(ua,rl(!1),Gh(200))),$h()),!1);oe(ke(ui(Vg(b),Vg(sb)),Ge(function(Mb){return Mb[0]<=Mb[1]}),$h()),Ia);oe(ke(Ia,Ek(50)),bb);K=bj(ke(ui(m,Vg(K),Vg(Z),Vg(ia),Vg(pb)),Ej(function(Mb,sc){var lc,Rb,rc=sc[0],Gc=rc.scrollTop;rc=rc.scrollHeight;var Cc=sc[1],Uc={viewportHeight:Cc,scrollTop:Gc,scrollHeight:rc};return Gc+Cc-rc>-sc[4]?(Gc>Mb.state.scrollTop?(lc="SCROLLED_DOWN",Rb=Mb.state.scrollTop-Gc):(lc="SIZE_DECREASED",Rb=Mb.state.scrollTop-Gc||Mb.scrollTopDelta),{atBottom:!0,
state:Uc,atBottomBecause:lc,scrollTopDelta:Rb}):{atBottom:!1,notAtBottomBecause:Uc.scrollHeight>Mb.state.scrollHeight?"SIZE_INCREASED":Cc<Mb.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":Gc<Mb.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Uc}},EH),$h(function(Mb,sc){return Mb&&Mb.atBottom===sc.atBottom})));Z=eh(ke(m,Ej(function(Mb,sc){var lc=sc.scrollTop,Rb=sc.scrollHeight;sc=sc.viewportHeight;return 1.01>Math.abs(Mb.scrollHeight-Rb)?{scrollTop:lc,scrollHeight:Rb,
jump:0,changed:!1}:Mb.scrollTop!==lc&&1>Rb-(lc+sc)?{scrollHeight:Rb,scrollTop:lc,jump:Mb.scrollTop-lc,changed:!0}:{scrollHeight:Rb,scrollTop:lc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Qg(function(Mb){return Mb.changed}),Ge(function(Mb){return Mb.jump})),0);oe(ke(K,Ge(function(Mb){return Mb.atBottom})),g);oe(ke(g,Ek(50)),Xa);ia=Df("down");oe(ke(m,Ge(function(Mb){return Mb.scrollTop}),$h(),Ej(function(Mb,sc){return kc(4)?{direction:Mb.direction,prevScrollTop:sc}:{direction:sc<
Mb.prevScrollTop?"up":"down",prevScrollTop:sc}},{direction:"down",prevScrollTop:0}),Ge(function(Mb){return Mb.direction})),ia);oe(ke(m,Ek(50),rl("none")),ia);m=Df(0);return oe(ke(Ub,Qg(function(Mb){return!Mb}),rl(0)),m),oe(ke(b,Ek(100),ig(Ub),Qg(function(Mb){return!!Mb[1]}),Ej(function(Mb,sc){return[Mb[1],sc[0]]},[0,0]),Ge(function(Mb){return Mb[1]-Mb[0]})),m),{isScrolling:Ub,isAtTop:Ia,isAtBottom:g,atBottomState:K,atTopStateChange:bb,atBottomStateChange:Xa,scrollDirection:ia,atBottomThreshold:pb,
atTopThreshold:sb,scrollVelocity:m,lastJumpDueToItemResize:Z}},ff(Kn)),ar=nh(function(b){var g=b[0].log;b=Df(!1);var m=bj(ke(b,Qg(function(K){return K}),$h()));return Mg(b,function(K){K&&g(4)("props updated",{},lm.DEBUG)}),{propsReady:b,didMount:m}},ff(cq),{singleton:!0}),Dw=nh(function(b){var g=b[0],m=g.sizes,K=g.listRefresh;g=g.defaultItemSize;var Z=b[1].scrollTop,ia=b[2].scrollToIndex;b=b[3].didMount;var ua=Df(!0),Ia=Df(0);return oe(ke(b,ig(Ia),Qg(function(Xa){return!!Xa[1]}),rl(!1)),ua),Mg(ke(ui(K,
b),ig(ua,m,g),Qg(function(Xa){var bb=Xa[1],pb=Xa[3];return Xa[0][1]&&(Xa[2].sizeTree!==Ji||void 0!==pb)&&!bb}),ig(Ia)),function(Xa){var bb=Xa[1];setTimeout(function(){Sh(Z,function(){ua(0,!0)});ia(0,bb)})}),{scrolledToInitialItem:ua,initialTopMostItemIndex:Ia}},ff(Bp,Kn,Vs,ar),{singleton:!0}),FH=nh(function(b){function g(sc){Xa(0,{index:"LAST",align:"end",behavior:sc})}function m(sc){var lc=Sh(Ia,function(Rb){!sc||Rb.atBottom||"SIZE_INCREASED"!==Rb.notAtBottomBecause||Mb||(sb(4)("scrolling to bottom due to increased size",
{},lm.DEBUG),g("auto"))});setTimeout(lc,100)}var K=b[0],Z=K.totalCount,ia=K.listRefresh,ua=b[1];K=ua.isAtBottom;var Ia=ua.atBottomState,Xa=b[2].scrollToIndex;ua=b[3].scrolledToInitialItem;var bb=b[4],pb=bb.propsReady;bb=bb.didMount;var sb=b[5].log;b=b[6].scrollingInProgress;var Ub=Df(!1),kc=Zd(),Mb=null;return Mg(ke(ui(ke(Vg(Z),Ef(1)),bb),ig(Vg(Ub),K,ua,b),Ge(function(sc){var lc=sc[0],Rb=lc[0];lc=lc[1]&&sc[3];var rc="auto";lc&&(rc=sc[1],sc=sc[2]||sc[4],rc="function"==typeof rc?kj(rc(sc)):sc&&kj(rc),
lc=lc&&!!rc);return{totalCount:Rb,shouldFollow:lc,followOutputBehavior:rc}}),Qg(function(sc){return sc.shouldFollow})),function(sc){var lc=sc.totalCount,Rb=sc.followOutputBehavior;Mb&&(Mb(),Mb=null);Mb=Sh(ia,function(){sb(4)("following output to ",{totalCount:lc},lm.DEBUG);g(Rb);Mb=null})}),Mg(ke(ui(Vg(Ub),Z,pb),Qg(function(sc){return sc[0]&&sc[2]}),Ej(function(sc,lc){lc=lc[1];return{refreshed:sc.value===lc,value:lc}},{refreshed:!1,value:0}),Qg(function(sc){return sc.refreshed}),ig(Ub,Z)),function(sc){m(!1!==
sc[1])}),Mg(kc,function(){m(!1!==Ub(4))}),Mg(ui(Vg(Ub),Ia),function(sc){var lc=sc[1];sc[0]&&!lc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===lc.notAtBottomBecause&&g("auto")}),{followOutput:Ub,autoscrollToBottom:kc}},ff(Bp,Ws,Vs,Dw,ar,cq,Kn)),aB=nh(function(b){var g=b[0],m=g.totalCount,K=g.groupIndices;g=g.sizes;var Z=b[1];b=Z.scrollTop;Z=Z.headerHeight;var ia=Zd(),ua=Zd(),Ia=bj(ke(ia,Ge(Ai)));return oe(ke(Ia,Ge(function(Xa){return Xa.totalCount})),m),oe(ke(Ia,Ge(function(Xa){return Xa.groupIndices})),
K),oe(ke(ui(b,g,Z),Qg(function(Xa){return Xa[1].groupOffsetTree!==Ji}),Ge(function(Xa){return va(Xa[1].groupOffsetTree,Math.max(Xa[0]-Xa[2],0),"v")[0]}),$h(),Ge(function(Xa){return[Xa]})),ua),{groupCounts:ia,topItemsIndexes:ua}},ff(Bp,Kn)),Ew=nh(function(b){var g=b[0];b=g.scrollTop;var m=g.viewportHeight,K=g.deviation,Z=g.headerHeight,ia=g.fixedHeaderHeight;g=Zd();var ua=Df(0),Ia=Df(0),Xa=Df(0);b=eh(ke(ui(Vg(b),Vg(m),Vg(Z),Vg(g,oj),Vg(Xa),Vg(ua),Vg(ia),Vg(K),Vg(Ia)),Ge(function(bb){var pb=bb[0],sb=
bb[1],Ub=bb[2],kc=bb[3],Mb=kc[0];kc=kc[1];var sc=bb[4],lc=bb[6],Rb=bb[7],rc=bb[8],Gc=pb-Rb;bb=bb[5]+lc;var Cc=Math.max(Ub-Gc,0),Uc="none",ae="number"==typeof rc?rc:rc.top||0;rc="number"==typeof rc?rc:rc.bottom||0;return Mb-=Rb,kc+=Ub+lc,Mb+(Ub+lc)>pb+bb-ae&&(Uc="up"),kc-Rb<pb-Cc+sb+rc&&(Uc="down"),"none"!==Uc?[Math.max(Gc-Ub-Rk(sc,"top",Uc)-ae,0),Gc-Cc-lc+sb+Rk(sc,"bottom",Uc)+rc]:null}),Qg(function(bb){return null!=bb}),$h(oj)),[0,0]);return{listBoundary:g,overscan:Xa,topListHeight:ua,increaseViewportBy:Ia,
visibleRange:b}},ff(Kn),{singleton:!0}),bB={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},Pr=nh(function(b){var g=b[0],m=g.sizes,K=g.totalCount,Z=g.data,ia=g.firstItemIndex,ua=g.gap,Ia=b[1],Xa=b[2],bb=Xa.visibleRange;g=Xa.listBoundary;Xa=Xa.topListHeight;var pb=b[3],sb=pb.scrolledToInitialItem,Ub=pb.initialTopMostItemIndex;pb=b[4].topListHeight;var kc=b[5],Mb=b[6].didMount,sc=b[7].recalcInProgress;b=Df([]);var lc=Zd();oe(Ia.topItemsIndexes,
b);m=eh(ke(ui(Mb,sc,Vg(bb,oj),Vg(K),Vg(m),Vg(Ub),sb,Vg(b),Vg(ia),Vg(ua),Z),Qg(function(Rb){return Rb[0]&&!Rb[1]}),Ge(function(Rb){var rc=Rb[2],Gc=rc[0],Cc=rc[1];rc=Rb[3];var Uc=Rb[5],ae=Rb[6],Gd=Rb[7],qe=Rb[8],cf=Rb[9],Fe=Rb[10];Rb=Rb[4];var df=Rb.sizeTree,ie=Rb.offsetTree;if(0===rc||0===Gc&&0===Cc)return Wf({},bB,{totalCount:rc});if(df===Ji)return ho(function(Bf,sf,bh){return sf.groupOffsetTree!==Ji?(Bf=wh(Bf,sf),[{index:va(sf.groupOffsetTree,Bf)[0],size:0,offset:0},{index:Bf,size:0,offset:0,data:bh&&
bh[0]}]):[{index:Bf,size:0,offset:0,data:bh&&bh[0]}]}("number"==typeof Uc?Uc:"LAST"===Uc.index?rc-1:Uc.index,Rb,Fe),[],rc,cf,Rb,qe);Uc=[];if(0<Gd.length){var Id,fd=Gd[0],$c=Gd[Gd.length-1],vd=0;for(df=Ri(Od(df,fd,$c));!(Id=df()).done;){var Md=Id.value;Id=Md.value;var Rd=Math.min(Md.end,$c);for(Md=Math.max(Md.start,fd);Md<=Rd;Md++)Uc.push({index:Md,size:Id,offset:vd,data:Fe&&Fe[Md]}),vd+=Id}}if(!ae)return ho([],Uc,rc,cf,Rb,qe);var Be=0<Gd.length?Gd[Gd.length-1]+1:0,Ce=function(Bf,sf,bh,Pg){return void 0===
Pg&&(Pg=0),0<Pg&&(sf=Math.max(sf,Bf[wg(Bf,Pg,hg)].offset)),rd((rk=bh,Nm=wg(ni=Bf,sf,vj=ih),jp=wg(ni,rk,vj,Nm),ni.slice(Nm,jp+1)),fi);var ni,rk,vj,Nm,jp}(ie,Gc,Cc,Be);if(0===Ce.length)return null;var Ke=rc-1;return ho(De([],function(Bf){for(var sf,bh=Ri(Ce);!(sf=bh()).done;){var Pg=sf.value,ni=Pg.value;sf=ni.offset;var rk=Pg.start,vj=ni.size;ni.offset<Gc&&(ni=(rk+=Math.floor((Gc-ni.offset+cf)/(vj+cf)))-Pg.start,sf+=ni*vj+ni*cf);rk<Be&&(sf+=(Be-rk)*vj,rk=Be);for(Pg=Math.min(Pg.end,Ke);rk<=Pg&&!(sf>=
Cc);rk++)Bf.push({index:rk,size:vj,offset:sf,data:Fe&&Fe[rk]}),sf+=vj+cf}}),Uc,rc,cf,Rb,qe)}),Qg(function(Rb){return null!==Rb}),$h()),bB);return oe(ke(Z,Qg(function(Rb){return void 0!==Rb}),Ge(function(Rb){return Rb.length})),K),oe(ke(m,Ge(function(Rb){return Rb.topListHeight})),pb),oe(pb,Xa),oe(ke(m,Ge(function(Rb){return[Rb.top,Rb.bottom]})),g),oe(ke(m,Ge(function(Rb){return Rb.items})),lc),Wf({listState:m,topItemsIndexes:b,endReached:bj(ke(m,Qg(function(Rb){return 0<Rb.items.length}),ig(K,Z),
Qg(function(Rb){var rc=Rb[0].items;return rc[rc.length-1].originalIndex===Rb[1]-1}),Ge(function(Rb){return[Rb[1]-1,Rb[2]]}),$h(oj),Ge(function(Rb){return Rb[0]}))),startReached:bj(ke(m,Ek(200),Qg(function(Rb){var rc=Rb.items;return 0<rc.length&&rc[0].originalIndex===Rb.topItems.length}),Ge(function(Rb){return Rb.items[0].index}),$h())),rangeChanged:bj(ke(m,Qg(function(Rb){return 0<Rb.items.length}),Ge(function(Rb){Rb=Rb.items;for(var rc=0,Gc=Rb.length-1;"group"===Rb[rc].type&&rc<Gc;)rc++;for(;"group"===
Rb[Gc].type&&Gc>rc;)Gc--;return{startIndex:Rb[rc].index,endIndex:Rb[Gc].index}}),$h(Hl))),itemsRendered:lc},kc)},ff(Bp,aB,Ew,Dw,Vs,Ws,ar,Cw),{singleton:!0}),GH=nh(function(b){var g=b[0],m=g.sizes,K=g.firstItemIndex,Z=g.data;g=g.gap;var ia=b[1].listState;b=b[2].didMount;var ua=Df(0);return oe(ke(b,ig(ua),Qg(function(Ia){return 0!==Ia[1]}),ig(m,K,g,Z),Ge(function(Ia){var Xa=Ia[0][1],bb=Ia[1],pb=Ia[2],sb=Ia[3];Ia=Ia[4];var Ub=void 0===Ia?[]:Ia;Ia=0;if(0<bb.groupIndices.length)for(var kc,Mb=Ri(bb.groupIndices);!((kc=
Mb()).done||kc.value-Ia>=Xa);)Ia++;Xa+=Ia;return ho(Array.from({length:Xa}).map(function(sc,lc){return{index:lc,size:0,offset:0,data:Ub[lc]}}),[],Xa,sb,bb,pb)})),ia),{initialItemCount:ua}},ff(Bp,Pr,ar),{singleton:!0}),cB=nh(function(b){b=b[0].scrollVelocity;var g=Df(!1),m=Zd(),K=Df(!1);return oe(ke(b,ig(K,g,m),Qg(function(Z){return!!Z[1]}),Ge(function(Z){var ia=Z[0],ua=Z[1],Ia=Z[2];Z=Z[3];var Xa=ua.enter;if(Ia){if((0,ua.exit)(ia,Z))return!1}else if(Xa(ia,Z))return!0;return Ia}),$h()),g),Mg(ke(ui(g,
b,m),ig(K)),function(Z){var ia=Z[0];Z=Z[1];return ia[0]&&Z&&Z.change&&Z.change(ia[1],ia[2])}),{isSeeking:g,scrollSeekConfiguration:K,scrollVelocity:b,scrollSeekRangeChanged:m}},ff(Ws),{singleton:!0}),HH=nh(function(b){b=b[0].topItemsIndexes;var g=Df(0);return oe(ke(g,Qg(function(m){return 0<m}),Ge(function(m){return Array.from({length:m}).map(function(K,Z){return Z})})),b),{topItemCount:g}},ff(Pr)),Fw=nh(function(b){var g=b[0],m=g.footerHeight,K=g.headerHeight,Z=g.fixedHeaderHeight;g=g.fixedFooterHeight;
var ia=b[1].listState;b=Zd();m=eh(ke(ui(m,g,K,Z,ia),Ge(function(ua){var Ia=ua[4];return ua[0]+ua[1]+ua[2]+ua[3]+Ia.offsetBottom+Ia.bottom})),0);return oe(Vg(m),b),{totalListHeight:m,totalListHeightChanged:b}},ff(Kn,Pr),{singleton:!0}),IH=nn(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),JH=nh(function(b){function g(lc){0<lc?(K(0,{top:-lc,behavior:"auto"}),ia(0,0)):(ia(0,0),K(0,{top:-lc,behavior:"auto"}))}var m=b[0],K=m.scrollBy,Z=m.scrollTop,ia=m.deviation,
ua=m.scrollingInProgress,Ia=b[1];m=Ia.isScrolling;var Xa=Ia.isAtBottom,bb=Ia.scrollDirection,pb=b[3],sb=pb.beforeUnshiftWith,Ub=pb.shiftWithOffset,kc=pb.sizes;pb=pb.gap;var Mb=b[4].log,sc=b[5].recalcInProgress;b=bj(ke(b[2].listState,ig(Ia.lastJumpDueToItemResize),Ej(function(lc,Rb){var rc=lc[1],Gc=Rb[0],Cc=Gc.items,Uc=Gc.totalCount;Gc=Gc.bottom+Gc.offsetBottom;var ae=0;return lc[2]===Uc&&0<rc.length&&0<Cc.length&&(0===Cc[0].originalIndex&&0===rc[0].originalIndex||0!=(ae=Gc-lc[3])&&(ae+=Rb[1])),[ae,
Cc,Uc,Gc]},[0,[],0,0]),Qg(function(lc){return 0!==lc[0]}),ig(Z,bb,ua,Xa,Mb),Qg(function(lc){return!lc[3]&&0!==lc[1]&&"up"===lc[2]}),Ge(function(lc){var Rb=lc[0][0];return(0,lc[5])("Upward scrolling compensation",{amount:Rb},lm.DEBUG),Rb})));return Mg(ke(b,ig(ia,m)),function(lc){var Rb=lc[0],rc=lc[1];lc[2]&&IH()?ia(0,rc-Rb):g(-Rb)}),Mg(ke(ui(eh(m,!1),ia,sc),Qg(function(lc){return!lc[0]&&!lc[2]&&0!==lc[1]}),Ge(function(lc){return lc[1]}),Ek(1)),g),oe(ke(Ub,Ge(function(lc){return{top:-lc}})),K),Mg(ke(sb,
ig(kc,pb),Ge(function(lc){var Rb=lc[0];return Rb*lc[1].lastSize+Rb*lc[2]})),function(lc){ia(0,lc);requestAnimationFrame(function(){vh(K,{top:lc});requestAnimationFrame(function(){ia(0,0);sc(0,!1)})})}),{deviation:ia}},ff(Kn,Ws,Pr,Bp,cq,Cw)),KH=nh(function(b){var g=b[0].totalListHeight,m=b[1].didMount,K=b[2].scrollTo;b=Df(0);return Mg(ke(m,ig(b),Qg(function(Z){return 0!==Z[1]}),Ge(function(Z){return{top:Z[1]}})),function(Z){Sh(ke(g,Qg(function(ia){return 0!==ia})),function(){setTimeout(function(){K(0,
Z)})})}),{initialScrollTop:b}},ff(Fw,ar,Kn),{singleton:!0}),LH=nh(function(b){var g=b[0].viewportHeight;b=b[1].totalListHeight;var m=Df(!1);return{alignToBottom:m,paddingTopAddition:eh(ke(ui(m,g,b),Qg(function(K){return K[0]}),Ge(function(K){return Math.max(0,K[1]-K[2])}),$h()),0)}},ff(Kn,Fw),{singleton:!0}),dB=nh(function(b){var g=b[0];b=g.scrollTo;g=g.scrollContainerState;var m=Zd(),K=Zd(),Z=Zd(),ia=Df(!1),ua=Df(void 0);return oe(ke(ui(m,K),Ge(function(Ia){var Xa=Ia[0];return{scrollTop:Math.max(0,
Xa.scrollTop-Ia[1].offsetTop),scrollHeight:Xa.scrollHeight,viewportHeight:Xa.viewportHeight}})),g),oe(ke(b,ig(K),Ge(function(Ia){var Xa=Ia[0];return Wf({},Xa,{top:Xa.top+Ia[1].offsetTop})})),Z),{useWindowScroll:ia,customScrollParent:ua,windowScrollContainerState:m,windowViewportRect:K,windowScrollTo:Z}},ff(Kn)),MH=["done","behavior","align"],NH=nh(function(b){var g=b[0],m=g.sizes,K=g.totalCount;g=g.gap;var Z=b[1],ia=Z.scrollTop,ua=Z.viewportHeight,Ia=Z.headerHeight,Xa=Z.fixedHeaderHeight,bb=Z.fixedFooterHeight,
pb=Z.scrollingInProgress;b=b[2].scrollToIndex;Z=Zd();return oe(ke(Z,ig(m,ua,K,Ia,Xa,bb,ia),ig(g),Ge(function(sb){var Ub=sb[0],kc=Ub[0],Mb=Ub[1],sc=Ub[2],lc=Ub[3],Rb=Ub[4],rc=Ub[5],Gc=Ub[6];Ub=Ub[7];var Cc=sb[1];sb=kc.done;var Uc=kc.behavior,ae=kc.align,Gd=dm(kc,MH),qe=null;kc=Hf(kc,Mb,lc-1);Rb=Tf(kc,Mb.offsetTree,Cc)+Rb+rc;return Rb<Ub+rc?qe=Wf({},Gd,{behavior:Uc,align:null!=ae?ae:"start"}):Rb+va(Mb.sizeTree,kc)[1]>Ub+sc-Gc&&(qe=Wf({},Gd,{behavior:Uc,align:null!=ae?ae:"end"})),qe?sb&&Sh(ke(pb,Ef(1),
Qg(function(cf){return!1===cf})),sb):sb&&sb(),qe}),Qg(function(sb){return null!==sb})),b),{scrollIntoView:Z}},ff(Bp,Kn,Vs,Pr,cq),{singleton:!0}),OH=["listState","topItemsIndexes"],PH=nh(function(b){return Wf({},b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])},ff(Ew,GH,ar,cB,Fw,KH,LH,dB,NH)),eB=nh(function(b){var g=b[0],m=g.totalCount,K=g.sizeRanges,Z=g.fixedItemSize,ia=g.defaultItemSize,ua=g.trackItemSizes,Ia=g.itemSize,Xa=g.data,bb=g.firstItemIndex,pb=g.groupIndices,sb=g.statefulTotalCount;g=g.gap;
var Ub=b[1],kc=Ub.initialTopMostItemIndex;Ub=Ub.scrolledToInitialItem;var Mb=b[2],sc=b[3],lc=b[4],Rb=lc.listState,rc=lc.topItemsIndexes;lc=dm(lc,OH);var Gc=b[5].scrollToIndex,Cc=b[7].topItemCount,Uc=b[8].groupCounts,ae=b[9];b=b[10];return oe(lc.rangeChanged,ae.scrollSeekRangeChanged),oe(ke(ae.windowViewportRect,Ge(function(Gd){return Gd.visibleHeight})),Mb.viewportHeight),Wf({totalCount:m,data:Xa,firstItemIndex:bb,sizeRanges:K,initialTopMostItemIndex:kc,scrolledToInitialItem:Ub,topItemsIndexes:rc,
topItemCount:Cc,groupCounts:Uc,fixedItemHeight:Z,defaultItemHeight:ia,gap:g},sc,{statefulTotalCount:sb,listState:Rb,scrollToIndex:Gc,trackItemSizes:ua,itemSize:Ia,groupIndices:pb},lc,ae,Mb,b)},ff(Bp,Dw,Kn,FH,Pr,Vs,JH,HH,aB,PH,cq)),fB=nn(function(){if("undefined"==typeof document)return"sticky";var b=document.createElement("div");return b.style.position="-webkit-sticky","-webkit-sticky"===b.style.position?"-webkit-sticky":"sticky"}),ru=ah.createContext(void 0),gB=ah.createContext(void 0),QH=["placeholder"],
RH=["style","children"],SH=["style","children"],TH=nh(function(){var b=Df(function(Xa){return"Item "+Xa}),g=Df(null),m=Df(function(Xa){return"Group "+Xa}),K=Df({}),Z=Df(Xm),ia=Df("div"),ua=Df(Fg),Ia=function(Xa,bb){return void 0===bb&&(bb=null),eh(ke(K,Ge(function(pb){return pb[Xa]}),$h()),bb)};return{context:g,itemContent:b,groupContent:m,components:K,computeItemKey:Z,headerFooterTag:ia,scrollerRef:ua,FooterComponent:Ia("Footer"),HeaderComponent:Ia("Header"),TopItemListComponent:Ia("TopItemList"),
ListComponent:Ia("List","div"),ItemComponent:Ia("Item","div"),GroupComponent:Ia("Group","div"),ScrollerComponent:Ia("Scroller","div"),EmptyPlaceholder:Ia("EmptyPlaceholder"),ScrollSeekPlaceholder:Ia("ScrollSeekPlaceholder")}}),UH=nh(function(b){function g(Z,ia,ua){oe(ke(Z,ig(K.components),Ge(function(Ia){var Xa,bb=Ia[0];Ia=Ia[1];return console.warn("react-virtuoso: "+ua+" property is deprecated. Pass components."+ia+" instead."),Wf({},Ia,((Xa={})[ia]=bb,Xa))})),K.components)}var m=b[0],K=b[1];b={item:fk(K.itemContent,
"Rename the %citem%c prop to %citemContent."),group:fk(K.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:fk(m.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:fk(m.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:fk(m.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Zd(),maxHeightCacheSize:Zd(),footer:Zd(),header:Zd(),HeaderContainer:Zd(),FooterContainer:Zd(),
ItemContainer:Zd(),ScrollContainer:Zd(),GroupContainer:Zd(),ListContainer:Zd(),emptyComponent:Zd(),scrollSeek:Zd()};return Mg(b.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),Mg(b.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
Mg(b.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),Mg(b.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),Mg(b.scrollSeek,function(Z){var ia=Z.placeholder;
Z=dm(Z,QH);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ia=Wf({},(0,K.components)(4),{ScrollSeekPlaceholder:ia});(0,K.components)(0,ia);(0,m.scrollSeekConfiguration)(0,Z)}),g(b.footer,"Footer","footer"),g(b.header,"Header","header"),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),g(b.emptyComponent,
"EmptyPlaceholder","emptyComponent"),g(b.GroupContainer,"Group","GroupContainer"),Wf({},m,K,b)},ff(eB,TH)),VH=function(b){return ah.createElement("div",{style:{height:b.height}})},WH={position:fB(),zIndex:1,overflowAnchor:"none"},XH={overflowAnchor:"none"},hB=ah.memo(function(b){b=b.showTopList;b=void 0!==b&&b;var g=gj("listState"),m=so("sizeRanges"),K=gj("useWindowScroll"),Z=gj("customScrollParent"),ia=so("windowScrollContainerState"),ua=so("scrollContainerState");K=Z||K?ia:ua;var Ia=gj("itemContent"),
Xa=gj("context"),bb=gj("groupContent");ia=gj("trackItemSizes");ua=gj("itemSize");var pb=gj("log"),sb=so("gap");m=pn(m,ua,ia,b?Fg:K,pb,sb,Z).callbackRef;Z=ah.useState(0);var Ub=Z[0],kc=Z[1];Gw("deviation",function(Cc){Ub!==Cc&&kc(Cc)});Z=gj("EmptyPlaceholder");var Mb=gj("ScrollSeekPlaceholder")||VH;K=gj("ListComponent");var sc=gj("ItemComponent"),lc=gj("GroupComponent"),Rb=gj("computeItemKey"),rc=gj("isSeeking"),Gc=0<gj("groupIndices").length;ia=gj("paddingTopAddition");ia=b?{}:{boxSizing:"border-box",
paddingTop:g.offsetTop+ia,paddingBottom:g.offsetBottom,marginTop:Ub};return!b&&0===g.totalCount&&Z?(0,ci.createElement)(Z,qj(Z,Xa)):(0,ci.createElement)(K,Wf({},qj(K,Xa),{ref:m,style:ia,"data-test-id":b?"virtuoso-top-item-list":"virtuoso-item-list"}),(b?g.topItems:g.items).map(function(Cc){var Uc=Cc.originalIndex,ae=Rb(Uc+g.firstItemIndex,Cc.data,Xa);return rc?(0,ci.createElement)(Mb,Wf({},qj(Mb,Xa),{key:ae,index:Cc.index,height:Cc.size,type:Cc.type||"item"},"group"===Cc.type?{}:{groupIndex:Cc.groupIndex})):
"group"===Cc.type?(0,ci.createElement)(lc,Wf({},qj(lc,Xa),{key:ae,"data-index":Uc,"data-known-size":Cc.size,"data-item-index":Cc.index,style:WH}),bb(Cc.index)):(0,ci.createElement)(sc,Wf({},qj(sc,Xa),{key:ae,"data-index":Uc,"data-known-size":Cc.size,"data-item-index":Cc.index,"data-item-group-index":Cc.groupIndex,style:XH}),Gc?Ia(Cc.index,Cc.groupIndex,Cc.data,Xa):Ia(Cc.index,Cc.data,Xa))}))}),YH={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Qr=
{width:"100%",height:"100%",position:"absolute",top:0},ZH={width:"100%",position:fB(),top:0},$H=ah.memo(function(){var b=gj("HeaderComponent"),g=so("headerHeight"),m=gj("headerFooterTag"),K=Th(function(ia){return g(ek(ia,"height"))}),Z=gj("context");return b?(0,ci.createElement)(m,{ref:K},(0,ci.createElement)(b,qj(b,Z))):null}),aI=ah.memo(function(){var b=gj("FooterComponent"),g=so("footerHeight"),m=gj("headerFooterTag"),K=Th(function(ia){return g(ek(ia,"height"))}),Z=gj("context");return b?(0,ci.createElement)(m,
{ref:K},(0,ci.createElement)(b,qj(b,Z))):null}),bI=function(b){b=b.children;var g=(0,ci.useContext)(ru),m=so("viewportHeight"),K=so("fixedItemHeight"),Z=Th(jl(m,function(ia){return ek(ia,"height")}));return ah.useEffect(function(){g&&(m(g.viewportHeight),K(g.itemHeight))},[g,m,K]),ah.createElement("div",{style:Qr,ref:Z,"data-viewport-type":"element"},b)},cI=function(b){b=b.children;var g=(0,ci.useContext)(ru),m=so("windowViewportRect"),K=so("fixedItemHeight"),Z=gj("customScrollParent");Z=Sg(m,Z);
return ah.useEffect(function(){g&&(K(g.itemHeight),m({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,m,K]),ah.createElement("div",{ref:Z,style:Qr,"data-viewport-type":"window"},b)},dI=function(b){b=b.children;var g=gj("TopItemListComponent"),m=gj("headerHeight");m=Wf({},ZH,{marginTop:m+"px"});var K=gj("context");return(0,ci.createElement)(g||"div",{style:m,context:K},b)},su=Zi(UH,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",
itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},ah.memo(function(b){var g=gj("useWindowScroll"),m=0<gj("topItemsIndexes").length,K=gj("customScrollParent"),Z=K||g?cI:bI;return ah.createElement(K||g?gI:fI,Wf({},b),ah.createElement(Z,null,ah.createElement($H,null),ah.createElement(hB,null),ah.createElement(aI,
null)),m&&ah.createElement(dI,null,ah.createElement(hB,{showTopList:!0})))})),eI=su.Component,so=su.usePublisher,gj=su.useEmitterValue,Gw=su.useEmitter,fI=Om({usePublisher:so,useEmitterValue:gj,useEmitter:Gw}),gI=On({usePublisher:so,useEmitterValue:gj,useEmitter:Gw}),iB={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},hI={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},jB=Math.round,kB=Math.ceil,tu=Math.floor,Hw=Math.min,Rr=Math.max,
iI=nh(function(b){var g=b[0],m=g.overscan,K=g.visibleRange,Z=g.listBoundary,ia=b[1];g=ia.scrollTop;var ua=ia.viewportHeight,Ia=ia.scrollBy,Xa=ia.scrollTo,bb=ia.smoothScrollTargetReached,pb=ia.scrollContainerState,sb=ia.footerHeight;ia=ia.headerHeight;var Ub=b[2],kc=b[3],Mb=b[4],sc=Mb.propsReady,lc=Mb.didMount,Rb=b[5];Mb=Rb.windowViewportRect;var rc=Rb.windowScrollTo,Gc=Rb.useWindowScroll,Cc=Rb.customScrollParent;Rb=Rb.windowScrollContainerState;b=b[6];var Uc=Df(0),ae=Df(0),Gd=Df(iB),qe=Df({height:0,
width:0}),cf=Df({height:0,width:0}),Fe=Zd(),df=Zd(),ie=Df(0),Id=Df(void 0),fd=Df({row:0,column:0});oe(ke(ui(lc,ae,Id),Qg(function($c){return 0!==$c[1]}),Ge(function($c){return{items:go(0,$c[1]-1,$c[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),Gd);oe(ke(ui(Vg(Uc),K,Vg(fd,pm),Vg(cf,function($c,vd){return $c&&$c.width===vd.width&&$c.height===vd.height}),Id),ig(qe),Ge(function($c){var vd=$c[0],Md=vd[0],Rd=vd[1],Be=Rd[0],Ce=Rd[1],Ke=vd[2],Bf=vd[3],sf=vd[4],bh=$c[1];$c=Ke.row;
vd=Bf.height;Rd=Bf.width;var Pg=bh.width;if(0===Md||0===Pg)return iB;if(0===Rd)return hI;var ni=Ke.column;Pg=Rr(1,tu((Pg+ni)/(Rd+ni)));Be=Pg*tu((Be+$c)/(vd+$c));Ce=Pg*kB((Ce+$c)/(vd+$c))-1;Ce=Rr(0,Hw(Md-1,Ce));Be=go(Hw(Ce,Rr(0,Be)),Ce,sf);Bf=Pm(bh,Ke,Bf,Be);Ke=Bf.top;Bf=Bf.bottom;Md=kB(Md/Pg);return{items:Be,offsetTop:Ke,offsetBottom:Md*vd+(Md-1)*$c-Bf,top:Ke,bottom:Bf,itemHeight:vd,itemWidth:Rd}})),Gd);oe(ke(Id,Qg(function($c){return void 0!==$c}),Ge(function($c){return $c.length})),Uc);oe(ke(qe,
Ge(function($c){return $c.height})),ua);oe(ke(ui(qe,cf,Gd,fd),Ge(function($c){$c=Pm($c[0],$c[3],$c[1],$c[2].items);return[$c.top,$c.bottom]}),$h(oj)),Z);K=bj(ke(Vg(Gd),Qg(function($c){return 0<$c.items.length}),ig(Uc),Qg(function($c){var vd=$c[0].items;return vd[vd.length-1].index===$c[1]-1}),Ge(function($c){return $c[1]-1}),$h()));Z=bj(ke(Vg(Gd),Qg(function($c){$c=$c.items;return 0<$c.length&&0===$c[0].index}),rl(0),$h()));ua=bj(ke(Vg(Gd),Qg(function($c){return 0<$c.items.length}),Ge(function($c){$c=
$c.items;return{startIndex:$c[0].index,endIndex:$c[$c.length-1].index}}),$h(Hl)));oe(ua,kc.scrollSeekRangeChanged);oe(ke(Fe,ig(qe,cf,Uc,fd),Ge(function($c){var vd=$c[1],Md=$c[2],Rd=$c[3],Be=$c[4],Ce=dh($c[0]);$c=Ce.align;var Ke=Ce.behavior,Bf=Ce.offset;Ce=Ce.index;"LAST"===Ce&&(Ce=Rd-1);Rd=Hk(vd,Be,Md,Rr(0,Ce,Hw(Rd-1,Ce)));return"end"===$c?Rd=jB(Rd-vd.height+Md.height):"center"===$c&&(Rd=jB(Rd-vd.height/2+Md.height/2)),Bf&&(Rd+=Bf),{top:Rd,behavior:Ke}})),Xa);lc=eh(ke(Gd,Ge(function($c){return $c.offsetBottom+
$c.bottom})),0);return oe(ke(Mb,Ge(function($c){return{width:$c.visibleWidth,height:$c.visibleHeight}})),qe),Wf({data:Id,totalCount:Uc,viewportDimensions:qe,itemDimensions:cf,scrollTop:g,scrollHeight:df,overscan:m,scrollBy:Ia,scrollTo:Xa,scrollToIndex:Fe,smoothScrollTargetReached:bb,windowViewportRect:Mb,windowScrollTo:rc,useWindowScroll:Gc,customScrollParent:Cc,windowScrollContainerState:Rb,deviation:ie,scrollContainerState:pb,footerHeight:sb,headerHeight:ia,initialItemCount:ae,gap:fd},kc,{gridState:Gd,
totalListHeight:lc},Ub,{startReached:Z,endReached:K,rangeChanged:ua,propsReady:sc},b)},ff(Ew,Kn,Ws,cB,ar,dB,cq)),jI=["placeholder"],kI=nh(function(){var b=Df(function(bb){return"Item "+bb}),g=Df({}),m=Df(null),K=Df("virtuoso-grid-item"),Z=Df("virtuoso-grid-list"),ia=Df(Xm),ua=Df("div"),Ia=Df(Fg),Xa=function(bb,pb){return void 0===pb&&(pb=null),eh(ke(g,Ge(function(sb){return sb[bb]}),$h()),pb)};return{context:m,itemContent:b,components:g,computeItemKey:ia,itemClassName:K,listClassName:Z,headerFooterTag:ua,
scrollerRef:Ia,FooterComponent:Xa("Footer"),HeaderComponent:Xa("Header"),ListComponent:Xa("List","div"),ItemComponent:Xa("Item","div"),ScrollerComponent:Xa("Scroller","div"),ScrollSeekPlaceholder:Xa("ScrollSeekPlaceholder","div")}}),lI=nh(function(b){function g(Z,ia,ua){oe(ke(Z,ig(K.components),Ge(function(Ia){var Xa,bb=Ia[0];Ia=Ia[1];return console.warn("react-virtuoso: "+ua+" property is deprecated. Pass components."+ia+" instead."),Wf({},Ia,((Xa={})[ia]=bb,Xa))})),K.components)}var m=b[0],K=b[1];
b={item:fk(K.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Zd(),ScrollContainer:Zd(),ListContainer:Zd(),emptyComponent:Zd(),scrollSeek:Zd()};return Mg(b.scrollSeek,function(Z){var ia=Z.placeholder;Z=dm(Z,jI);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ia=Wf({},(0,K.components)(4),{ScrollSeekPlaceholder:ia});(0,K.components)(0,ia);(0,m.scrollSeekConfiguration)(0,
Z)}),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),Wf({},m,K,b)},ff(iI,kI)),mI=ah.memo(function(){var b=Dl("gridState"),g=Dl("listClassName"),m=Dl("itemClassName"),K=Dl("itemContent"),Z=Dl("computeItemKey"),ia=Dl("isSeeking"),ua=Ko("scrollHeight"),Ia=Dl("ItemComponent"),Xa=Dl("ListComponent"),bb=Dl("ScrollSeekPlaceholder"),pb=Dl("context"),sb=Ko("itemDimensions"),Ub=Ko("gap"),kc=Dl("log"),Mb=Th(function(sc){ua(sc.parentElement.parentElement.scrollHeight);
var lc=sc.firstChild;lc&&sb(lc.getBoundingClientRect());Ub({row:kl("row-gap",getComputedStyle(sc).rowGap,kc),column:kl("column-gap",getComputedStyle(sc).columnGap,kc)})});return(0,ci.createElement)(Xa,Wf({ref:Mb,className:g},qj(Xa,pb),{style:{paddingTop:b.offsetTop,paddingBottom:b.offsetBottom}}),b.items.map(function(sc){var lc=Z(sc.index,sc.data,pb);return ia?(0,ci.createElement)(bb,Wf({key:lc},qj(bb,pb),{index:sc.index,height:b.itemHeight,width:b.itemWidth})):(0,ci.createElement)(Ia,Wf({},qj(Ia,
pb),{className:m,"data-index":sc.index,key:lc}),K(sc.index,sc.data,pb))}))}),nI=ah.memo(function(){var b=Dl("HeaderComponent"),g=Ko("headerHeight"),m=Dl("headerFooterTag"),K=Th(function(ia){return g(ek(ia,"height"))}),Z=Dl("context");return b?(0,ci.createElement)(m,{ref:K},(0,ci.createElement)(b,qj(b,Z))):null}),oI=ah.memo(function(){var b=Dl("FooterComponent"),g=Ko("footerHeight"),m=Dl("headerFooterTag"),K=Th(function(ia){return g(ek(ia,"height"))}),Z=Dl("context");return b?(0,ci.createElement)(m,
{ref:K},(0,ci.createElement)(b,qj(b,Z))):null}),pI=function(b){b=b.children;var g=(0,ci.useContext)(gB),m=Ko("itemDimensions"),K=Ko("viewportDimensions"),Z=Th(function(ia){K(ia.getBoundingClientRect())});return ah.useEffect(function(){g&&(K({height:g.viewportHeight,width:g.viewportWidth}),m({height:g.itemHeight,width:g.itemWidth}))},[g,K,m]),ah.createElement("div",{style:Qr,ref:Z},b)},qI=function(b){b=b.children;var g=(0,ci.useContext)(gB),m=Ko("windowViewportRect"),K=Ko("itemDimensions"),Z=Dl("customScrollParent");
Z=Sg(m,Z);return ah.useEffect(function(){g&&(K({height:g.itemHeight,width:g.itemWidth}),m({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:g.viewportWidth}))},[g,m,K]),ah.createElement("div",{ref:Z,style:Qr},b)},Iw=Zi(lI,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},ah.memo(function(b){b=Wf({},b);var g=Dl("useWindowScroll"),m=Dl("customScrollParent"),K=m||g?qI:pI;return ah.createElement(m||g?sI:rI,Wf({},b),ah.createElement(K,null,ah.createElement(nI,null),ah.createElement(mI,null),ah.createElement(oI,null)))})),Ko=Iw.usePublisher,Dl=Iw.useEmitterValue,lB=Iw.useEmitter,rI=Om({usePublisher:Ko,useEmitterValue:Dl,useEmitter:lB}),sI=On({usePublisher:Ko,useEmitterValue:Dl,useEmitter:lB}),tI=nh(function(){var b=Df(function(Xa){return ah.createElement("td",
null,"Item $",Xa)}),g=Df(null),m=Df(null),K=Df(null),Z=Df({}),ia=Df(Xm),ua=Df(Fg),Ia=function(Xa,bb){return void 0===bb&&(bb=null),eh(ke(Z,Ge(function(pb){return pb[Xa]}),$h()),bb)};return{context:g,itemContent:b,fixedHeaderContent:m,fixedFooterContent:K,components:Z,computeItemKey:ia,scrollerRef:ua,TableComponent:Ia("Table","table"),TableHeadComponent:Ia("TableHead","thead"),TableFooterComponent:Ia("TableFoot","tfoot"),TableBodyComponent:Ia("TableBody","tbody"),TableRowComponent:Ia("TableRow","tr"),
ScrollerComponent:Ia("Scroller","div"),EmptyPlaceholder:Ia("EmptyPlaceholder"),ScrollSeekPlaceholder:Ia("ScrollSeekPlaceholder"),FillerRow:Ia("FillerRow")}}),uI=nh(function(b){return Wf({},b[0],b[1])},ff(eB,tI)),vI=function(b){return ah.createElement("tr",null,ah.createElement("td",{style:{height:b.height}}))},wI=function(b){return ah.createElement("tr",null,ah.createElement("td",{style:{height:b.height,padding:0,border:0}}))},xI=ah.memo(function(){var b=Qj("listState"),g=Lo("sizeRanges"),m=Qj("useWindowScroll"),
K=Qj("customScrollParent"),Z=Lo("windowScrollContainerState"),ia=Lo("scrollContainerState");m=K||m?Z:ia;var ua=Qj("itemContent");Z=Qj("trackItemSizes");K=pn(g,Qj("itemSize"),Z,m,Qj("log"),void 0,K);g=K.callbackRef;var Ia=K.ref;K=ah.useState(0);var Xa=K[0],bb=K[1];Kw("deviation",function(Rb){Xa!==Rb&&(Ia.current.style.marginTop=Rb+"px",bb(Rb))});Z=Qj("EmptyPlaceholder");var pb=Qj("ScrollSeekPlaceholder")||vI;m=Qj("FillerRow")||wI;K=Qj("TableBodyComponent");var sb=Qj("TableRowComponent"),Ub=Qj("computeItemKey"),
kc=Qj("isSeeking");ia=Qj("paddingTopAddition");var Mb=Qj("firstItemIndex"),sc=Qj("statefulTotalCount"),lc=Qj("context");if(0===sc&&Z)return(0,ci.createElement)(Z,qj(Z,lc));Z=b.offsetTop+ia+Xa;ia=b.offsetBottom;Z=0<Z?ah.createElement(m,{height:Z,key:"padding-top"}):null;m=0<ia?ah.createElement(m,{height:ia,key:"padding-bottom"}):null;b=b.items.map(function(Rb){var rc=Rb.originalIndex,Gc=Ub(rc+Mb,Rb.data,lc);return kc?(0,ci.createElement)(pb,Wf({},qj(pb,lc),{key:Gc,index:Rb.index,height:Rb.size,type:Rb.type||
"item"})):(0,ci.createElement)(sb,Wf({},qj(sb,lc),{key:Gc,"data-index":rc,"data-known-size":Rb.size,"data-item-index":Rb.index,style:{overflowAnchor:"none"}}),ua(Rb.index,Rb.data,lc))});return(0,ci.createElement)(K,Wf({ref:g,"data-test-id":"virtuoso-item-list"},qj(K,lc)),[Z].concat(b,[m]))}),yI=function(b){b=b.children;var g=(0,ci.useContext)(ru),m=Lo("viewportHeight"),K=Lo("fixedItemHeight"),Z=Th(jl(m,function(ia){return ek(ia,"height")}));return ah.useEffect(function(){g&&(m(g.viewportHeight),K(g.itemHeight))},
[g,m,K]),ah.createElement("div",{style:Qr,ref:Z,"data-viewport-type":"element"},b)},zI=function(b){b=b.children;var g=(0,ci.useContext)(ru),m=Lo("windowViewportRect"),K=Lo("fixedItemHeight"),Z=Qj("customScrollParent");Z=Sg(m,Z);return ah.useEffect(function(){g&&(K(g.itemHeight),m({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,m,K]),ah.createElement("div",{ref:Z,style:Qr,"data-viewport-type":"window"},b)},Jw=Zi(uI,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",
itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",
endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},ah.memo(function(b){var g=Qj("useWindowScroll"),m=Qj("customScrollParent"),K=Lo("fixedHeaderHeight"),Z=Lo("fixedFooterHeight"),ia=Qj("fixedHeaderContent"),ua=Qj("fixedFooterContent"),Ia=Qj("context");K=Th(jl(K,function(sb){return ek(sb,
"height")}));var Xa=Th(jl(Z,function(sb){return ek(sb,"height")}));Z=m||g?BI:AI;g=m||g?zI:yI;m=Qj("TableComponent");var bb=Qj("TableHeadComponent"),pb=Qj("TableFooterComponent");ia=ia?ah.createElement(bb,Wf({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:K},qj(bb,Ia)),ia()):null;ua=ua?ah.createElement(pb,Wf({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Xa},qj(pb,Ia)),ua()):null;return ah.createElement(Z,Wf({},b),ah.createElement(g,null,ah.createElement(m,Wf({style:{borderSpacing:0}},
qj(m,Ia)),[ia,ah.createElement(xI,{key:"TableBody"}),ua])))})),Lo=Jw.usePublisher,Qj=Jw.useEmitterValue,Kw=Jw.useEmitter,AI=Om({usePublisher:Lo,useEmitterValue:Qj,useEmitter:Kw}),BI=On({usePublisher:Lo,useEmitterValue:Qj,useEmitter:Kw}),Gj=td(T(20));Jb=T(616);var Xs={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},dq=({type:b,active:g})=>(0,Jb.jsx)("span",{className:"tl-type-tag","data-active":g,children:(0,Jb.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",
BS:"block-search",PS:"page-search"})[b]}`})}),CI=pf(({type:b,fill:g,opacity:m,children:K})=>{g="var(--ls-secondary-background-color)"!==g?jf(g,"background"):"var(--ls-tertiary-background-color)";return(0,Jb.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===b?"page":"block"}`,children:[(0,Jb.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:m,background:"P"===b?g:`linear-gradient(0deg, transparent, ${g}`}}),(0,Jb.jsx)("div",{className:"relative",
children:K})]})}),mB=(b,g)=>(0,Jb.jsx)("span",{children:b.split(new RegExp(`(${g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((m,K)=>1===K%2?(0,Jb.jsx)("mark",{className:"tl-highlighted",children:m}):m).map((m,K)=>(0,Jb.jsx)(Gj.Fragment,{children:m},K))}),DI=(b,g)=>{const {handlers:m}=Gj.useContext(zp),[K,Z]=Gj.useState(null),ia=Yk(b,200);Gj.useEffect(()=>{let ua=!1;if(0<ia.length){const Ia={"pages?":!0,"blocks?":!0,"files?":!1};"B"===g?Ia["pages?"]=!1:"P"===g&&(Ia["blocks?"]=!1);m.search(ia,
Ia).then(Xa=>{ua||Z(Xa)})}else Z(null);return()=>{ua=!0}},[ia,null==m?void 0:m.search]);return K},nB=({active:b,style:g,icon:m,otherIcon:K,onClick:Z})=>{const [ia,ua]=Gj.useState(!1);Gj.useEffect(()=>{ua(!0);const Ia=setTimeout(()=>{ua(!1)},500);return()=>clearTimeout(Ia)},[b]);return(0,Jb.jsx)("button",{"data-active":b,"data-recently-changed":ia,style:g,className:"tl-circle-button",onMouseDown:Z,children:(0,Jb.jsxs)("div",{className:"tl-circle-button-icons-wrapper","data-icons-count":K?2:1,children:[K&&
(0,Jb.jsx)(Bi,{name:K}),(0,Jb.jsx)(Bi,{name:m})]})})},br=class extends Vn{constructor(b={}){var g;super(b);F(this,"hideRotateHandle",!0);F(this,"canChangeAspectRatio",!0);F(this,"canFlip",!0);F(this,"canEdit",!0);F(this,"persist",null);F(this,"initialHeightCalculated",!0);F(this,"getInnerHeight",null);F(this,"setCollapsed",m=>wa(this,null,function*(){var K;"B"===this.props.blockType?(this.update({compact:m}),this.canResize[1]=!m,m||(yield Nh(),this.onResetBounds()),null==(K=this.persist)?void 0:K.call(this)):
(K=this.props.size[1],this.canResize[1]=!m,console.log(m,m?this.getHeaderHeight():this.props.collapsedHeight,this.getHeaderHeight(),this.props.collapsedHeight),this.update({isAutoResizing:!m,collapsed:m,size:[this.props.size[0],m?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:m?K:this.props.collapsedHeight}))}));F(this,"setScaleLevel",m=>wa(this,null,function*(){var K;const Z=re.mul(this.props.size,Xs[null!=m?m:"md"]/Xs[null!=(K=this.props.scaleLevel)?K:"md"]);this.update({scaleLevel:m});
yield Nh();this.update({size:Z})}));F(this,"onResetBounds",m=>{m=this.getAutoResizeHeight();null!==m&&1<Math.abs(m-this.props.size[1])&&(this.update({size:[this.props.size[0],m]}),this.initialHeightCalculated=!0);return this});F(this,"onResize",(m,K)=>{var Z;const {bounds:ia,rotation:ua,scale:[Ia,Xa]}=K;m=[...this.scale];0>Ia&&(m[0]*=-1);0>Xa&&(m[1]*=-1);K=ia.height;this.props.isAutoResizing&&(K=null!=(Z=this.getAutoResizeHeight())?Z:K);return this.update({point:[ia.minX,ia.minY],size:[Math.max(1,
ia.width),Math.max(1,K)],scale:m,rotation:ua})});F(this,"LogseqQuickSearch",pf(({onChange:m})=>{const [K,Z]=Gj.useState(br.defaultSearchQuery),[ia,ua]=Gj.useState(br.defaultSearchFilter),Ia=Gj.useRef(null),{handlers:Xa,renderers:bb}=Gj.useContext(zp),pb=dg(),sb=Gj.useCallback(Cc=>{var Uc;m(Cc);null==(Uc=Ia.current)?void 0:Uc.blur();Cc&&(br.defaultSearchQuery="",br.defaultSearchFilter=null)},[]),Ub=Gj.useCallback(Cc=>{const Uc=null==Xa?void 0:Xa.addNewBlock(Cc);Uc&&(sb(Uc),setTimeout(()=>{var ae,Gd,
qe;pb.api.editShape(this);null==(qe=null==(Gd=null==(ae=window.logseq)?void 0:ae.api)?void 0:Gd.edit_block)?void 0:qe.call(Gd,Uc)}));return Uc},[]),kc=Gj.useRef(null),[Mb,sc]=Gj.useState(0),lc=DI(K,ia),[Rb,rc]=Gj.useState("circle-plus");Gj.useEffect(()=>{setTimeout(()=>{var Cc;null==(Cc=Ia.current)?void 0:Cc.focus()})},[ia]);Gj.useEffect(()=>{br.defaultSearchQuery=K;br.defaultSearchFilter=ia},[K,ia]);const Gc=Gj.useMemo(()=>{var Cc;const Uc=[],ae=null==bb?void 0:bb.Breadcrumb;if(!ae||!Xa)return[];
Uc.push({actionIcon:"circle-plus",onChosen:()=>!!Ub(K),element:(0,Jb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Jb.jsx)(dq,{active:!0,type:"BA"}),0<K.length?(0,Jb.jsxs)(Jb.Fragment,{children:[(0,Jb.jsx)("strong",{children:"New block:"}),K]}):(0,Jb.jsx)("strong",{children:"New block"})]})});(null==(Cc=null==lc?void 0:lc.pages)?0:Cc.some(Gd=>Gd.toLowerCase()===K.toLowerCase()))||!K||Uc.push({actionIcon:"circle-plus",onChosen:()=>{sb(K);return!0},element:(0,Jb.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,Jb.jsx)(dq,{active:!0,type:"PA"}),(0,Jb.jsx)("strong",{children:"New page:"}),K]})},{actionIcon:"circle-plus",onChosen:()=>{null==Xa?void 0:Xa.addNewWhiteboard(K);sb(K);return!0},element:(0,Jb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Jb.jsx)(dq,{active:!0,type:"WA"}),(0,Jb.jsx)("strong",{children:"New whiteboard:"}),K]})});0===K.length&&null===ia&&Uc.push({actionIcon:"search",onChosen:()=>{ua("B");return!0},element:(0,Jb.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,Jb.jsx)(dq,{type:"BS"}),"Search only blocks"]})},{actionIcon:"search",onChosen:()=>{ua("P");return!0},element:(0,Jb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Jb.jsx)(dq,{type:"PS"}),"Search only pages"]})});ia&&"P"!==ia||!lc||!lc.pages||Uc.push(...lc.pages.map(Gd=>({actionIcon:"search",onChosen:()=>{sb(Gd);return!0},element:(0,Jb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Jb.jsx)(dq,{type:Xa.isWhiteboardPage(Gd)?"WP":"P"}),mB(Gd,K)]})})));
ia&&"B"!==ia||!lc||!lc.blocks||Uc.push(...lc.blocks.filter(Gd=>Gd.content&&Gd.uuid).map(({content:Gd,uuid:qe})=>{const cf=Xa.queryBlockByUUID(qe);return{actionIcon:"search",onChosen:()=>{var Fe,df,ie;return cf?(sb(qe),null==(ie=null==(df=null==(Fe=window.logseq)?void 0:Fe.api)?void 0:df.set_blocks_id)?void 0:ie.call(df,[qe]),!0):!1},element:cf?(0,Jb.jsxs)(Jb.Fragment,{children:[(0,Jb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Jb.jsx)(dq,{type:"B"}),(0,Jb.jsx)("div",{className:"tl-quick-search-option-breadcrumb",
children:(0,Jb.jsx)(ae,{blockId:qe})})]}),(0,Jb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Jb.jsx)("div",{className:"tl-quick-search-option-placeholder"}),mB(Gd,K)]})]}):(0,Jb.jsx)("div",{className:"tl-quick-search-option-row",children:"Cache is outdated. Please click the 'Re-index' button in the graph's dropdown menu."})}}));return Uc},[K,ia,lc,null==bb?void 0:bb.Breadcrumb,Xa]);Gj.useEffect(()=>{const Cc=Uc=>{var ae,Gd;let qe=Mb;"ArrowDown"===Uc.key?qe=Math.min(Gc.length-1,
Mb+1):"ArrowUp"===Uc.key?qe=Math.max(0,Mb-1):"Enter"===Uc.key?(null==(ae=Gc[Mb])?void 0:ae.onChosen(),Uc.stopPropagation(),Uc.preventDefault()):"Backspace"===Uc.key&&0===K.length?ua(null):"Escape"===Uc.key&&sb("");qe!==Mb&&(ae=Gc[qe],sc(qe),rc(ae.actionIcon),Uc.stopPropagation(),Uc.preventDefault(),(Uc=null==(Gd=kc.current)?void 0:Gd.querySelector(".tl-quick-search-option:nth-child("+(qe+1)+")"))&&(null==Uc?void 0:Uc.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",Cc,!0);return()=>
{document.removeEventListener("keydown",Cc,!0)}},[Gc,Mb,K]);return(0,Jb.jsxs)("div",{className:"tl-quick-search",children:[(0,Jb.jsx)(nB,{icon:Rb,onClick:()=>{var Cc;null==(Cc=Gc[Mb])?void 0:Cc.onChosen()}}),(0,Jb.jsxs)("div",{className:"tl-quick-search-input-container",children:[ia&&(0,Jb.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,Jb.jsx)(dq,{type:ia}),"B"===ia?"Search blocks":"Search pages",(0,Jb.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>ua(null),
children:(0,Jb.jsx)(Bi,{name:"x"})})]}),(0,Jb.jsx)(ww,{ref:Ia,type:"text",value:K,className:"tl-quick-search-input",placeholder:"Create or search your graph...",onChange:Cc=>Z(Cc.target.value),onKeyDown:Cc=>{"Enter"===Cc.key&&sb(K)}})]}),(0,Jb.jsx)("div",{className:"tl-quick-search-options",ref:kc,children:(0,Jb.jsx)(eI,{style:{height:40*Math.min(Math.max(1,Gc.length),12)},totalCount:Gc.length,itemContent:Cc=>{const {actionIcon:Uc,onChosen:ae,element:Gd}=Gc[Cc];return(0,Jb.jsx)("div",{"data-focused":Cc===
Mb,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{rc(Uc);sc(Cc)},onMouseDownCapture:qe=>{ae()&&(qe.stopPropagation(),qe.preventDefault())},children:Gd},Cc)}})})]})}));F(this,"PortalComponent",pf(({})=>{const {props:{pageId:m,fill:K,opacity:Z}}=this,{renderers:ia}=Gj.useContext(zp),ua=dg(),Ia=Gj.useRef(null),[,Xa]=this.useComponentSize(Ia,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==ia||!ia.Page)return null;const {Page:bb,
Block:pb}=ia;Gj.useEffect(()=>{var sb,Ub;if(this.props.isAutoResizing){const kc=(null!=(Ub=null==(sb=this.getInnerHeight)?void 0:sb.call(this))?Ub:Xa)+this.getHeaderHeight();Xa&&1<Math.abs(kc-this.props.size[1])&&(this.update({size:[this.props.size[0],kc]}),ua.persist(!0))}},[Xa,this.props.isAutoResizing]);Gj.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();ua.persist(!0)})},[this.initialHeightCalculated]);return(0,Jb.jsxs)(Jb.Fragment,{children:[(0,Jb.jsx)("div",
{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{background:K&&"var(--ls-secondary-background-color)"!==K?`var(--ls-highlight-color-${K})`:"var(--ls-secondary-background-color)",opacity:Z}}),(0,Jb.jsx)("div",{ref:Ia,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:"B"===this.props.blockType&&this.props.compact?(0,Jb.jsx)(pb,{blockId:m}):(0,Jb.jsx)(bb,{pageName:m})})]})}));F(this,"ReactComponent",pf(m=>{var K;const {events:Z,
isErasing:ia,isEditing:ua,isBinding:Ia}=m,{props:{opacity:Xa,pageId:bb,fill:pb,scaleLevel:sb,strokeWidth:Ub,size:kc}}=this,Mb=dg(),{renderers:sc,handlers:lc}=Gj.useContext(zp);this.persist=()=>Mb.persist();const Rb=Gl(),rc=Mb.selectedIds.has(this.id)&&1===Mb.selectedIds.size,Gc=Mb.isIn("logseq-portal.creating")&&!bb,Cc=(Rb||rc&&!ua||"select"!==Mb.selectedTool.id)&&!Gc,Uc=Gj.useCallback($c=>{Cc||$c.stopPropagation()},[Cc]),ae=1===Mb.selectedShapesArray.length&&Mb.selectedShapesArray.some($c=>"logseq-portal"===
$c.type&&$c.props.id!==this.props.id&&bb&&$c.props.pageId===bb),Gd=Xs[null!=sb?sb:"md"];Gj.useEffect(()=>this.props.collapsed&&ua?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[ua,this.props.collapsed]);const qe=Gj.useCallback($c=>{this.initialHeightCalculated=!1;const vd=vf($c)?"B":"P";this.update({pageId:$c,size:[400,320],blockType:vd,compact:"B"===vd});Mb.selectTool("select");Mb.history.resume();
Mb.history.persist()},[]),cf=this.PortalComponent,Fe=this.LogseqQuickSearch;var df=Gj.useMemo(()=>{var $c;if(bb&&"B"===this.props.blockType)return null==($c=null==lc?void 0:lc.queryBlockByUUID(bb))?void 0:$c.content},[null==lc?void 0:lc.queryBlockByUUID,bb]);df="B"===this.props.blockType&&"string"!==typeof df;const ie=(!this.props.collapsed||ua)&&!df;if(null==sc||!sc.Page)return null;const {Breadcrumb:Id,PageNameLink:fd}=sc;return(0,Jb.jsxs)(wp,rb(Wa({style:{pointerEvents:"all"}},Z),{children:[Ia&&
(0,Jb.jsx)(zm,{mode:"html",strokeWidth:Ub,size:kc}),(0,Jb.jsx)("div",{"data-inner-events":!Cc,onWheelCapture:Uc,onPointerDown:Uc,onPointerUp:Uc,style:{width:"100%",height:"100%",pointerEvents:Rb||!ua&&!rc?"none":"all"},children:Gc?(0,Jb.jsx)(Fe,{onChange:qe}):(0,Jb.jsxs)(Jb.Fragment,{children:[(0,Jb.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":bb,"data-portal-selected":ae,"data-editing":ua,style:{width:`calc(100% / ${Gd})`,height:`calc(100% / ${Gd})`,
transform:`scale(${Gd})`,opacity:ia?.2:1},children:[!this.props.compact&&!df&&(0,Jb.jsx)(CI,{type:null!=(K=this.props.blockType)?K:"P",fill:pb,opacity:Xa,children:"P"===this.props.blockType?(0,Jb.jsx)(fd,{pageName:bb}):(0,Jb.jsx)(Id,{blockId:bb})}),df&&(0,Jb.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),ie&&(0,Jb.jsx)(cf,Wa({},m))]}),(0,Jb.jsx)(nB,{active:!!this.collapsed,style:{opacity:rc?1:0},icon:"B"===this.props.blockType?"block":"page",onClick:()=>this.setCollapsed(!this.collapsed),
otherIcon:"whiteboard-element"})]})})]}))}));F(this,"ReactIndicator",pf(()=>{const m=this.getBounds();return 1===dg().selectedShapesArray.length?null:(0,Jb.jsx)("rect",{width:m.width,height:m.height,fill:"transparent",rx:8,ry:8})}));F(this,"validateProps",m=>{var K;if(void 0!==m.size){const Z=Xs[null!=(K=this.props.scaleLevel)?K:"md"];m.size[0]=Math.max(m.size[0],60*Z);m.size[1]=Math.max(m.size[1],40*Z)}return sk(this,m)});Se(this);b.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(g=
b.size)?void 0:g[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(b){return b?/^\(\(.*\)\)$/.test(b)&&40===b.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}useComponentSize(b,g=""){const [m,K]=Gj.useState([0,0]),Z=dg();Gj.useEffect(()=>{if(null==b?0:b.current){const ia=g?b.current.querySelector(g):b.current;if(ia){const ua=()=>{const {width:Xa,height:bb}=ia.getBoundingClientRect(),
pb=re.div([Xa,bb],Z.viewport.camera.zoom);K(pb);return pb};ua();this.getInnerHeight=()=>ua()[1];const Ia=new ResizeObserver(()=>{ua()});Ia.observe(ia);return()=>{Ia.disconnect()}}}return()=>{}},[b,g]);return m}getHeaderHeight(){var b;const g=Xs[null!=(b=this.props.scaleLevel)?b:"md"];return this.props.compact?0:40*g}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var b,g,m;const K=this.getBounds();return(0,Jb.jsxs)(Jb.Fragment,
{children:[(0,Jb.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?`var(--ls-highlight-color-${this.props.fill})`:"var(--ls-secondary-background-color)",stroke:jf(this.props.fill,"background"),strokeWidth:null!=(b=this.props.strokeWidth)?b:2,fillOpacity:null!=(g=this.props.opacity)?g:.2,width:K.width,rx:8,ry:8,height:K.height}),!this.props.compact&&(0,Jb.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?jf(this.props.fill,
"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(m=this.props.opacity)?m:.2,x:1,y:1,width:K.width-2,height:38,rx:8,ry:8}),(0,Jb.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${K.width/2}, ${10+K.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}},cn=br;F(cn,"id","logseq-portal");F(cn,
"defaultSearchQuery","");F(cn,"defaultSearchFilter",null);F(cn,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});id([Da],cn.prototype,"collapsed",1);id([pg],cn.prototype,"setCollapsed",2);id([Da],cn.prototype,"scaleLevel",1);id([pg],cn.prototype,"setScaleLevel",2);var {min:Sr,PI:EI}=
Math,Ys=EI+1E-4;Jb=T(616);var FI={easing:b=>Math.sin(b*Math.PI/2),simulatePressure:!0},GI={easing:b=>b*b,simulatePressure:!1},Zs=class extends sr{constructor(b={}){super(b);F(this,"ReactComponent",pf(({events:g,isErasing:m})=>{const {props:{opacity:K}}=this;return(0,Jb.jsx)(ro,rb(Wa({},g),{opacity:m?.2:K,children:this.getShapeSVGJsx()}))}));F(this,"ReactIndicator",pf(()=>{const {pointsPath:g}=this;return(0,Jb.jsx)("path",{d:g})}));F(this,"validateProps",g=>{g=sk(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=
Math.max(g.strokeWidth,1));return g});Se(this)}get pointsPath(){var b=this.props;if(2>b.points.length)var g="";else g=rb(Wa({size:1+1.5*b.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===b.points[1][2]?FI:GI),{last:b.isComplete}),b=So(b.points,g),g=Aq.getSvgPathFromStroke(Ro(b,g));return g}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:m,strokeType:K}}=this;return(0,Jb.jsx)("path",{pointerEvents:"all",d:b,strokeWidth:m/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:jf(g,
"stroke"),fill:jf(g,"stroke"),strokeDasharray:"dashed"===K?"12 4":void 0})}};F(Zs,"id","pencil");F(Zs,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});id([Da],Zs.prototype,"pointsPath",1);Jb=T(616);var uu=class extends Np{constructor(){super(...arguments);F(this,"ReactComponent",pf(({events:b,isErasing:g,isSelected:m})=>{const {offset:[K,Z],props:{stroke:ia,fill:ua,noFill:Ia,strokeWidth:Xa,
opacity:bb,strokeType:pb}}=this,sb=this.getVertices(Xa/2).join();return(0,Jb.jsx)(ro,rb(Wa({},b),{opacity:g?.2:bb,children:(0,Jb.jsxs)("g",{transform:`translate(${K}, ${Z})`,children:[(0,Jb.jsx)("polygon",{className:m||!Ia?"tl-hitarea-fill":"tl-hitarea-stroke",points:sb}),(0,Jb.jsx)("polygon",{points:sb,stroke:jf(ia,"stroke"),fill:Ia?"none":jf(ua,"background"),strokeWidth:Xa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===pb?"8 2":void 0})]})}))}));F(this,"ReactIndicator",pf(()=>{const {offset:[b,
g],props:{strokeWidth:m}}=this;return(0,Jb.jsx)("polygon",{transform:`translate(${b}, ${g})`,points:this.getVertices(m/2).join()})}));F(this,"validateProps",b=>{void 0!==b.sides&&(b.sides=Math.max(b.sides,3));return sk(this,b)})}getShapeSVGJsx(b){const {offset:[g,m],props:{stroke:K,fill:Z,noFill:ia,strokeWidth:ua,opacity:Ia,strokeType:Xa}}=this;b=this.getVertices(ua/2).join();return(0,Jb.jsxs)("g",{transform:`translate(${g}, ${m})`,opacity:Ia,children:[(0,Jb.jsx)("polygon",{className:ia?"tl-hitarea-stroke":
"tl-hitarea-fill",points:b}),(0,Jb.jsx)("polygon",{points:b,stroke:jf(K,"stroke"),fill:ia?"none":jf(Z,"background"),strokeWidth:ua,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Xa?"8 2":void 0})]})}};F(uu,"id","polygon");F(uu,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});var ip=td(T(20));Jb=T(616);var HI={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},
Tr=class extends pv{constructor(){super(...arguments);F(this,"ReactComponent",pf(({events:b,isErasing:g,isEditing:m,onEditingEnd:K})=>{const {props:{opacity:Z,fontFamily:ia,fontSize:ua,fontWeight:Ia,italic:Xa,lineHeight:bb,text:pb,stroke:sb,padding:Ub}}=this,kc=ip.useRef(null),Mb=ip.useRef(!1),sc=ip.useRef(null),lc=ip.useCallback(Uc=>{const {isSizeLocked:ae}=this.props;Uc=Er.normalizeText(Uc.currentTarget.value);ae?this.update({text:Uc,size:this.getAutoSizedBoundingBox({text:Uc})}):this.update({text:Uc})},
[]),Rb=ip.useCallback(Uc=>{if("Escape"!==Uc.key)if("Tab"===Uc.key&&0===pb.length)Uc.preventDefault();else{if("Meta"!==Uc.key&&!Uc.metaKey)Uc.stopPropagation();else if("z"===Uc.key&&Uc.metaKey){Uc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Uc.stopPropagation();Uc.preventDefault();return}"Tab"===Uc.key&&(Uc.preventDefault(),Uc.shiftKey?$n.unindent(Uc.currentTarget):$n.indent(Uc.currentTarget),this.update({text:Er.normalizeText(Uc.currentTarget.value)}))}},[]),rc=ip.useCallback(Uc=>
{Uc.currentTarget.setSelectionRange(0,0);null==K?void 0:K()},[K]),Gc=ip.useCallback(Uc=>{m&&Mb.current&&document.activeElement===Uc.currentTarget&&Uc.currentTarget.select()},[m]),Cc=ip.useCallback(Uc=>{m&&Uc.stopPropagation()},[m]);ip.useEffect(()=>{m?requestAnimationFrame(()=>{Mb.current=!0;const Uc=kc.current;Uc&&(Uc.focus(),Uc.select())}):null==K?void 0:K()},[m,K]);ip.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,Jb.jsx)(wp,rb(Wa({},b),
{opacity:g?.2:Z,children:(0,Jb.jsx)("div",{ref:sc,className:"tl-text-shape-wrapper","data-hastext":!!pb,"data-isediting":m,style:{fontFamily:ia,fontStyle:Xa?"italic":"normal",fontSize:ua,fontWeight:Ia,padding:Ub,lineHeight:bb,color:jf(sb,"text")},children:m?(0,Jb.jsx)("textarea",{ref:kc,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:pb,
onFocus:Gc,onChange:lc,onKeyDown:Rb,onBlur:rc,onPointerDown:Cc}):(0,Jb.jsxs)(Jb.Fragment,{children:[pb,""]})})}))}));F(this,"setScaleLevel",b=>wa(this,null,function*(){this.update({scaleLevel:b,fontSize:HI[null!=b?b:"md"]});this.onResetBounds()}));F(this,"ReactIndicator",pf(()=>{const {props:{borderRadius:b},bounds:g}=this;return(0,Jb.jsx)("rect",{width:g.width,height:g.height,rx:b,ry:b,fill:"transparent"})}));F(this,"validateProps",b=>sk(this,b));F(this,"getBounds",()=>{const [b,g]=this.props.point,
[m,K]=this.props.size;return{minX:b,minY:g,maxX:b+m,maxY:g+K,width:m,height:K}});F(this,"onResizeStart",({isSingle:b})=>{var g;if(!b)return this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];return this.update({isSizeLocked:!1})});F(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getAutoSizedBoundingBox(b={}){const {text:g=this.props.text,fontFamily:m=this.props.fontFamily,
fontSize:K=this.props.fontSize,fontWeight:Z=this.props.fontWeight,lineHeight:ia=this.props.lineHeight,padding:ua=this.props.padding}=b,[Ia,Xa]=xf(g,{fontFamily:m,fontSize:K,lineHeight:ia,fontWeight:Z},ua);return[Ia,Xa]}getShapeSVGJsx(){if(mh())return super.getShapeSVGJsx(null);const {props:{text:b,stroke:g,fontSize:m,fontFamily:K}}=this,Z=this.getBounds();return(0,Jb.jsx)("foreignObject",{width:Z.width,height:Z.height,children:(0,Jb.jsx)("div",{style:{color:jf(g,"text"),fontSize:m,fontFamily:K,display:"contents"},
children:b})})}};F(Tr,"id","text");F(Tr,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});id([Da],Tr.prototype,"scaleLevel",1);id([pg],Tr.prototype,"setScaleLevel",2);Jb=T(616);var oB=class extends Vn{constructor(){super(...arguments);F(this,"aspectRatio",480/853);F(this,
"canChangeAspectRatio",!1);F(this,"canFlip",!1);F(this,"canEdit",!0);F(this,"onYoutubeLinkChange",b=>{this.update({url:b,size:oB.defaultProps.size})});F(this,"ReactComponent",pf(({events:b,isErasing:g,isEditing:m})=>(0,Jb.jsx)(wp,rb(Wa({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,Jb.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl",style:{pointerEvents:m?"all":"none",userSelect:"none"},children:this.embedId?(0,Jb.jsx)("div",{style:{overflow:"hidden",
position:"relative",height:"100%"},children:(0,Jb.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,Jb.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,Jb.jsx)("svg",
{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,Jb.jsxs)("g",{children:[(0,Jb.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,Jb.jsx)("g",{children:(0,Jb.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,Jb.jsxs)("g",{fill:"#fff",children:[(0,Jb.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,Jb.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))));F(this,"ReactIndicator",pf(()=>{const {props:{size:[b,g]}}=this;return(0,Jb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}));F(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[0]*this.aspectRatio,1));return sk(this,b)})}get embedId(){var b,g;const m=this.props.url,K=m.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/);
return null!=(g=null!=(b=null==K?void 0:K[1])?b:m)?g:""}getShapeSVGJsx(){if(mh())return super.getShapeSVGJsx(null);const b=this.getBounds(),g=this.embedId;return g?(0,Jb.jsx)("g",{children:(0,Jb.jsxs)("foreignObject",{width:b.width,height:b.height,children:[(0,Jb.jsx)("img",{src:`https://img.youtube.com/vi/${g}/mqdefault.jpg`,draggable:!1,style:{display:"contents",width:b.width,height:b.height},loading:"lazy",className:"rounded-lg relative pointer-events-none w-full h-full grayscale-[50%]"}),(0,Jb.jsx)("div",
{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center",children:(0,Jb.jsx)("svg",{width:"240",height:"240",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Jb.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014","fill-rule":"evenodd","clip-rule":"evenodd"})})})]})}):super.getShapeSVGJsx({})}},cr=oB;F(cr,"id","youtube");F(cr,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});id([Da],cr.prototype,"embedId",1);id([pg],cr.prototype,"onYoutubeLinkChange",2);var pB=[ku,yw,lu,Ts,mu,nu,pu,Zs,uu,Tr,cr,$q,bq,cn],Lw=class extends op{constructor(){super(...arguments);F(this,"Shape",ku)}};F(Lw,"id","box");F(Lw,"shortcut",["8"]);var qB=class extends op{constructor(){super(...arguments);
F(this,"Shape",lu)}};F(qB,"id","ellipse");var Mw=class extends Dt{};F(Mw,"id","erase");F(Mw,"shortcut",["5"]);var Nw=class extends ss{constructor(){super(...arguments);F(this,"Shape",Ts);F(this,"simplify",!0);F(this,"simplifyTolerance",.618)}};F(Nw,"id","highlighter");F(Nw,"shortcut",["4"]);var Ow=class extends Et{constructor(){super(...arguments);F(this,"Shape",pu)}};F(Ow,"id","line");F(Ow,"shortcut",["6"]);var Pw=class extends ss{constructor(){super(...arguments);F(this,"Shape",Zs);F(this,"simplify",
!1)}};F(Pw,"id","pencil");F(Pw,"shortcut",["3"]);var rB=class extends op{constructor(){super(...arguments);F(this,"Shape",uu)}};F(rB,"id","polygon");var Qw=class extends Ft{constructor(){super(...arguments);F(this,"Shape",Tr)}};F(Qw,"id","text");F(Qw,"shortcut",["7"]);var sB=class extends op{constructor(){super(...arguments);F(this,"Shape",cr)}};F(sB,"id","youtube");var tB=class extends vi{constructor(){super(...arguments);F(this,"creatingShape");F(this,"offset",[0,0]);F(this,"onEnter",()=>{this.app.history.pause();
zb(()=>{const b=new cn({id:li(),parentId:this.app.currentPage.id,point:re.sub(this.app.inputs.originPoint,this.offset),size:cn.defaultProps.size});this.creatingShape=b;this.app.currentPage.addShapes(b);this.app.setEditingShape(b);this.app.setSelectedShapes([b]);(.8>this.app.viewport.camera.zoom||1.2<this.app.viewport.camera.zoom)&&this.app.api.resetZoomToCursor()})});F(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":b.order||
this.app.selectTool("select")}});F(this,"onExit",()=>{var b;this.creatingShape&&(this.app.history.resume(),(null==(b=this.creatingShape)?0:b.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};F(tB,"id","creating");var uB=class extends vi{constructor(){super(...arguments);F(this,"cursor","crosshair");F(this,"onPointerDown",b=>{this.tool.transition("creating")})}};F(uB,"id","idle");
var $s=class extends Mp{constructor(){super(...arguments);F(this,"Shape",cn);F(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])})}};F($s,"id","logseq-portal");F($s,"shortcut",["9"]);F($s,"states",[uB,tB]);F($s,"initial","idle");var vB=class extends op{constructor(){super(...arguments);F(this,"Shape",bq)}};F(vB,"id","youtube");var wB=class extends op{constructor(){super(...arguments);F(this,"Shape",$q)}};F(wB,"id","iframe");var II=td(T(619));Jb=T(616);var JI=new Map(pB.map(b=>
[b.id,b])),Rw=class{constructor(b){F(this,"shapes");F(this,"pageId");F(this,"assets");b&&this.load(b)}load(b){const g=b.pages[0];this.pageId=null==g?void 0:g.id;this.assets=b.assets;this.shapes=null==g?void 0:g.shapes.map(m=>{var K=m.type;if(!K)throw Error("No shape type provided.");const Z=JI.get(K);if(!Z)throw Error(`Could not find shape class for ${K}`);return new Z(m)})}generatePreviewJsx(b){var g,m;const K=[...(null!=(g=this.shapes)?g:[]).map(Xa=>Xa.getRotatedBounds())];(g=null==b?void 0:b.currentView)&&
K.push(g);let Z=rf.getCommonBounds(K);if(!Z)return null;Z=rf.expandBounds(Z,16);Z=b?rf.ensureRatio(Z,4/3):Z;const ia=Xa=>[(Xa[0]-Z.minX).toFixed(2),(Xa[1]-Z.minY).toFixed(2)],[ua,Ia]=g?ia([g.minX,g.minY]):[0,0];return Z&&(0,Jb.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":Z.minX.toFixed(2),"data-common-bound-y":Z.minY.toFixed(2),"data-common-bound-width":Z.width.toFixed(2),"data-common-bound-height":Z.height.toFixed(2),viewBox:[0,0,Z.width,Z.height].join(" "),children:[(0,Jb.jsx)("defs",
{children:g&&(0,Jb.jsxs)(Jb.Fragment,{children:[(0,Jb.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${ua}, ${Ia})`,width:g.width,height:g.height}),(0,Jb.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,Jb.jsx)("rect",{width:Z.width,height:Z.height,fill:"white"}),(0,Jb.jsx)("use",{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,Jb.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(m=this.shapes)?void 0:m.map(Xa=>{var bb,pb;const {bounds:sb,props:{rotation:Ub}}=
Xa,[kc,Mb]=ia([sb.minX,sb.minY]),sc=+(180*((null!=Ub?Ub:0)+(null!=(bb=sb.rotation)?bb:0))/Math.PI).toFixed(2),[lc,Rb]=[(sb.width/2).toFixed(2),(sb.height/2).toFixed(2)];return(0,Jb.jsx)("g",{transform:[`translate(${kc}, ${Mb})`,`rotate(${sc}, ${lc}, ${Rb})`].join(" "),children:Xa.getShapeSVGJsx({assets:null!=(pb=this.assets)?pb:[]})},Xa.id)})}),(0,Jb.jsx)("rect",{mask:g?`url(#${this.pageId}-camera-mask)`:"",width:Z.width,height:Z.height,fill:"transparent"}),g&&(0,Jb.jsx)("use",{id:"minimap-camera-rect",
"data-x":ua,"data-y":Ia,"data-width":g.width,"data-height":g.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/b.camera.zoom})]})}exportAsSVG(){const b=this.generatePreviewJsx();return b?II.default.renderToString(b):""}},KI=[".png",".svg",".jpg",".jpeg",".gif"],LI=[".mp4",".webm",".ogg"],MI=td(T(20));Jb=T(616);var NI={ContextBar:mH},OI=[Lw,qB,rB,Mw,Nw,Ow,Pw,Qw,sB,wB,vB,$s],PI=()=>{const b=St.useRef(null),g=dg();return(0,Jb.jsx)(sH,{collisionRef:b,children:(0,Jb.jsx)("div",
{ref:b,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":g.uuid,children:(0,Jb.jsx)($D,{components:NI,children:(0,Jb.jsx)(lF,{})})})})},QI=b=>{var {onPersist:g,model:m}=b;b=Yb(b,["onPersist","model"]);const K=wl(),Z=lo(),ia=Vo(),ua=St.useCallback((Ia,Xa)=>{(0,By.default)(Ia.serialized,m)||(null==g?void 0:g(Ia,Xa))},[m]);return(0,Jb.jsx)(YD,rb(Wa({Shapes:pB,Tools:OI,onDrop:K,onPaste:Z,onCanvasDBClick:ia,onPersist:ua,model:m},b),{children:(0,Jb.jsx)(PI,{})}))},RI=function(b){var {renderers:g,
handlers:m}=b;b=Yb(b,["renderers","handlers"]);const K={renderers:St.useMemo(()=>Object.fromEntries(Object.entries(g).map(([Z,ia])=>[Z,St.memo(ia)])),[]),handlers:m};return(0,Jb.jsx)(zp.Provider,{value:K,children:(0,Jb.jsx)(QI,Wa({},b))})}};
'use strict';var V3c=function(a){return a},W3c=function(a){a=$APP.lE(a);return $APP.Cn.j($APP.wK,a)},X3c=function(a){var b=$APP.bw.C($APP.tE(a));a=W3c(a);a=$APP.kg.j(function(d){return $APP.B.j(b,$APP.bw.C($APP.QC.C(d)))},a);var c=$APP.uh($APP.Cn.j($APP.Tb,$APP.Qh.j(function(d){return $APP.Uv.F(d,new $APP.P(null,2,5,$APP.R,[$APP.RC,$APP.bw],null),null)},a)));a=$APP.Cn.j(function(d){d=$APP.bw.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},Y3c=function(){return $APP.$m(null,
function(){return $APP.$m(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.$m(a.text(),function(b){return $APP.$m($APP.xwa(b),function(c){return $APP.Rm(c)})})})})},Z3c=function(a){var b=$APP.bTa();return($APP.Nd(b)||$APP.B.j(1,$APP.pd(b))&&$APP.B.j(a,$APP.Fs.C($APP.A(b))))&&$APP.Xb($APP.Uv.j($APP.u($APP.rz),new $APP.P(null,1,5,$APP.R,[$APP.E2b],null)))},$3c=function(a){return null!=a?$APP.cn($APP.$m(null,function(){return $APP.$m(Y3c(),function(b){var c=$APP.Cf(b);b=$APP.H.j(c,$APP.RE);
c=$APP.H.j(c,$APP.MC);var d=$APP.A(b);b=$APP.el.j($APP.fv,$APP.Qh.j($APP.T9a,$APP.kg.j($APP.wK,c)));d=$APP.U9a(d);c=$APP.WN.C(d);d=$APP.BF.C(d);a.cloneShapesIntoCurrentPage($APP.lj(new $APP.m(null,3,[$APP.Gsb,b,$APP.WN,c,$APP.BF,d],null)));$APP.vz($APP.E2b,!0);b=$APP.Zy($APP.Q6b,!0);return $APP.Rm(b)})}),function(b){return console.warn("Faield to populate onboarding whiteboard",b)}):null},c4c=function(a,b){b=$APP.Hr.G(b,$APP.F([new $APP.m(null,1,[$APP.Ir,!0],null)]));b=$APP.Cf(b);var c=$APP.H.j(b,
a4c),d=$APP.H.j(b,$APP.tH),e=$APP.H.j(b,b4c),f=$APP.tz();return $APP.$m(null,function(){return $APP.$m($APP.n(d)?$APP.v3a(f,a,new $APP.m(null,1,[$APP.Au,100],null)):null,function(g){return $APP.$m($APP.n(c)?$APP.y3a(a,10):null,function(h){return $APP.$m($APP.n(e)?$APP.z3a(a,100):null,function(l){return $APP.Rm($APP.lj(new $APP.m(null,3,[$APP.RE,h,$APP.MC,g,$APP.r1a,l],null)))})})})})},d4c=function(a){return $APP.Zm($APP.fob($APP.tz(),new $APP.P(null,1,5,$APP.R,[$APP.Hr.C(a)],null)),function(b){var c=
(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.D.F(c,0,null),$APP.D.F(c,1,null),c=$APP.D.F(c,2,null),$APP.hob($APP.n(c)?c:b)):null})},m4c=function(a){return $APP.ch([e4c,f4c,$APP.z6,g4c,h4c,i4c,j4c,k4c,l4c],[function(b){return $APP.Osb(b)},$APP.TE,c4c,d4c,V3c,function(b){var c=$APP.t,d=c.C,e=$APP.xy(),f=$APP.tE(a),g=X3c(a);b=new $APP.m(null,6,[$APP.RC,$APP.ph($APP.n(g)?g:f,new $APP.P(null,1,5,$APP.R,[$APP.bw],null)),$APP.yA,e,$APP.VD,$APP.n(b)?b:"",$APP.lD,$APP.Gs,$APP.pC,new $APP.m(null,1,[$APP.Fs,
$APP.Es.C?$APP.Es.C(a):$APP.Es.call(null,a)],null),$APP.QC,new $APP.m(null,1,[$APP.Fs,a],null)],null);$APP.AC(new $APP.P(null,1,5,$APP.R,[b],null));return d.call(c,e)},function(b,c){return $APP.vA($APP.tz(),$APP.bw.C($APP.tE(b)),$APP.Rh.C(c))},function(b){return $APP.n($APP.TE(b))?$APP.vJ(b,null):$APP.sJ(b)},function(b){return $APP.lj($APP.MD($APP.$i(b)))}])},l4c=new $APP.M(null,"queryBlockByUUID","queryBlockByUUID",2091812895),i4c=new $APP.M(null,"addNewBlock","addNewBlock",1426762680),b4c=new $APP.M(null,
"files?","files?",-1267491104),n4c=new $APP.M(null,"renderers","renderers",-1460292282),o4c=new $APP.M(null,"model","model",331153215),p4c=new $APP.M(null,"PageNameLink","PageNameLink",10142086),q4c=new $APP.M(null,"onMount","onMount",-876858467),h4c=new $APP.M(null,"makeAssetUrl","makeAssetUrl",217779988),r4c=new $APP.M(null,"onPersist","onPersist",-1848738852),s4c=new $APP.M(null,"Breadcrumb","Breadcrumb",-1351298906),k4c=new $APP.M(null,"redirectToPage","redirectToPage",87147838),e4c=new $APP.M(null,
"addNewWhiteboard","addNewWhiteboard",554297706),g4c=new $APP.M(null,"saveAsset","saveAsset",-668047853),t4c=new $APP.M(null,"Block","Block",-1959785792),j4c=new $APP.M(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),u4c=new $APP.M(null,"Page","Page",-1267059506),a4c=new $APP.M(null,"pages?","pages?",-2065014049),f4c=new $APP.M(null,"isWhiteboardPage","isWhiteboardPage",-134150579);$APP.kda("tldraw");var v4c=$APP.kn(620);var w4c,x4c;$APP.qWc={};w4c=$APP.iS($APP.za(v4c,"App"));$APP.tWc=$APP.za(v4c,"generateJSXFromApp");
x4c=new $APP.m(null,4,[u4c,$APP.gt($APP.kt,function(a){return(0,$APP.GVc)(new $APP.m(null,2,[$APP.yK,$APP.za(a,"pageName"),$APP.Yrb,!0],null))},null,"frontend.extensions.tldraw/page-cp"),t4c,$APP.gt($APP.kt,function(a){a=$APP.wi($APP.za(a,"blockId"));var b=$APP.RKa($APP.NXb);a=b.C?b.C(a):b.call(null,a);return $APP.Ss(a)},null,"frontend.extensions.tldraw/block-cp"),s4c,$APP.gt($APP.kt,function(a){return $APP.Ss($APP.hV(new $APP.m(null,1,[$APP.VY,!0],null),$APP.tz(),$APP.wi($APP.za(a,"blockId")),new $APP.m(null,
1,[$APP.jOb,!0],null)))},null,"frontend.extensions.tldraw/breadcrumb"),p4c,$APP.gt($APP.kt,function(a){return(0,$APP.PU)(new $APP.m(null,1,[$APP.VY,!0],null),new $APP.m(null,1,[$APP.Fs,$APP.za(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link")],null);
$APP.rWc=$APP.gt($APP.kt,function(a,b){function c(l){var p=$APP.za(l,"api");return $APP.n(p)?$APP.Zm(d?$3c(p):null,function(){$APP.n($APP.n(b)?$APP.$i(b):b)&&(p.selectShapes(b),p.zoomToSelection());return h.C?h.C(!0):h.call(null,!0)}):null}var d=Z3c(a),e=$APP.Usb(a,b),f=$APP.ut(!1),g=$APP.D.F(f,0,null),h=$APP.D.F(f,1,null);return $APP.n(e)?$APP.W("div",{style:{overscrollBehavior:"none"},onBlur:function(l){l=$APP.za(l,"target").tagName;var p=new $APP.qh(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",
null],null),null);l=p.C?p.C(l):p.call(null,l);return $APP.n(l)?$APP.xA():null},onWheel:$APP.Qt,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.Xb(g)?$APP.W("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.Ss($APP.uS("Loading onboarding whiteboard ..."))]):null,$APP.Ss(function(){var l=new $APP.m(null,5,[n4c,x4c,$APP.Ry,m4c(a),q4c,c,r4c,function(p){return $APP.Isb(a,$APP.za(p,"serialized"))},o4c,e],null);return w4c.C?w4c.C(l):w4c.call(null,
l)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.hb.Sh();
}).call(this);